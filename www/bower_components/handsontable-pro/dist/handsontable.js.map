{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fc6bea3b5518a8df4eae","webpack:///./~/handsontable/src/helpers/array.js","webpack:///./~/handsontable/src/helpers/dom/element.js","webpack:///./~/handsontable/src/helpers/object.js","webpack:///./~/core-js/modules/_export.js","webpack:///./~/handsontable/src/helpers/number.js","webpack:///./src/plugins/filters/formulaRegisterer.js","webpack:///./~/handsontable/src/eventManager.js","webpack:///./~/handsontable/src/helpers/dom/event.js","webpack:///./~/handsontable/src/plugins.js","webpack:///./~/handsontable/src/renderers/index.js","webpack:///./~/core-js/modules/_wks.js","webpack:///./~/core-js/modules/_global.js","webpack:///./~/handsontable/src/helpers/unicode.js","webpack:///./~/handsontable/src/plugins/_base.js","webpack:///./~/core-js/modules/_is-object.js","webpack:///./~/handsontable/src/editors/index.js","webpack:///./~/handsontable/src/helpers/mixed.js","webpack:///./~/core-js/modules/_an-object.js","webpack:///./~/core-js/modules/_object-dp.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/index.js","webpack:///./~/handsontable/src/helpers/string.js","webpack:///./~/handsontable/src/pluginHooks.js","webpack:///./~/handsontable/src/plugins/contextMenu/utils.js","webpack:///./~/core-js/modules/_descriptors.js","webpack:///./~/core-js/modules/_has.js","webpack:///./~/core-js/modules/_to-iobject.js","webpack:///./~/core-js/modules/_to-length.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/overlay/_base.js","webpack:///./~/handsontable/src/helpers/function.js","webpack:///./~/handsontable/src/helpers/browser.js","webpack:///./~/handsontable/src/validators/index.js","webpack:///./src/plugins/formulas/utils.js","webpack:///external {\"root\":\"moment\",\"commonjs2\":\"moment\",\"commonjs\":\"moment\",\"amd\":\"moment\"}","webpack:///./~/core-js/modules/_ctx.js","webpack:///./~/core-js/modules/_defined.js","webpack:///./~/core-js/modules/_fails.js","webpack:///./~/core-js/modules/_hide.js","webpack:///./~/core-js/modules/_redefine.js","webpack:///./~/handsontable/src/mixins/localHooks.js","webpack:///./src/plugins/formulas/cell/value.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems.js","webpack:///./~/core-js/modules/_add-to-unscopables.js","webpack:///./~/core-js/modules/_cof.js","webpack:///./~/core-js/modules/_object-keys.js","webpack:///./~/core-js/modules/_property-desc.js","webpack:///./~/core-js/modules/_to-object.js","webpack:///./~/handsontable/src/editors/_baseEditor.js","webpack:///./~/handsontable/src/helpers/feature.js","webpack:///./~/handsontable/src/utils/recordTranslator.js","webpack:///./~/core-js/modules/_core.js","webpack:///./~/core-js/modules/_iterators.js","webpack:///./~/core-js/modules/_meta.js","webpack:///./~/core-js/modules/_object-pie.js","webpack:///./~/core-js/modules/_set-to-string-tag.js","webpack:///./~/core-js/modules/_uid.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/cell/coords.js","webpack:///./~/handsontable/src/editors/textEditor.js","webpack:///./src/plugins/filters/utils.js","webpack:///./src/plugins/formulas/expressionModifier.js","webpack:///external {\"root\":\"formulaParser\",\"commonjs2\":\"hot-formula-parser\",\"commonjs\":\"hot-formula-parser\",\"amd\":\"hot-formula-parser\"}","webpack:///./~/core-js/modules/es6.array.iterator.js","webpack:///./~/core-js/modules/_an-instance.js","webpack:///./~/core-js/modules/_array-methods.js","webpack:///./~/core-js/modules/_collection.js","webpack:///./~/core-js/modules/_fix-re-wks.js","webpack:///./~/core-js/modules/_for-of.js","webpack:///./~/core-js/modules/_library.js","webpack:///./~/core-js/modules/_object-gops.js","webpack:///./~/core-js/modules/_redefine-all.js","webpack:///./~/core-js/modules/_to-index.js","webpack:///./~/core-js/modules/_to-integer.js","webpack:///./~/handsontable/src/helpers/data.js","webpack:///./~/handsontable/src/mixins/arrayMapper.js","webpack:///./~/handsontable/src/utils/staticRegister.js","webpack:///./~/core-js/modules/es6.array.copy-within.js","webpack:///./~/core-js/modules/es6.array.fill.js","webpack:///./~/core-js/modules/es6.array.find-index.js","webpack:///./~/core-js/modules/es6.array.find.js","webpack:///./~/core-js/modules/es6.array.from.js","webpack:///./~/core-js/modules/es6.array.of.js","webpack:///./~/core-js/modules/es6.function.name.js","webpack:///./~/core-js/modules/es6.map.js","webpack:///./~/core-js/modules/es6.number.epsilon.js","webpack:///./~/core-js/modules/es6.number.is-finite.js","webpack:///./~/core-js/modules/es6.number.is-integer.js","webpack:///./~/core-js/modules/es6.number.is-nan.js","webpack:///./~/core-js/modules/es6.number.is-safe-integer.js","webpack:///./~/core-js/modules/es6.number.max-safe-integer.js","webpack:///./~/core-js/modules/es6.number.min-safe-integer.js","webpack:///./~/core-js/modules/es6.object.assign.js","webpack:///./~/core-js/modules/es6.object.is.js","webpack:///./~/core-js/modules/es6.object.set-prototype-of.js","webpack:///./~/core-js/modules/es6.promise.js","webpack:///./~/core-js/modules/es6.regexp.flags.js","webpack:///./~/core-js/modules/es6.regexp.match.js","webpack:///./~/core-js/modules/es6.regexp.replace.js","webpack:///./~/core-js/modules/es6.regexp.search.js","webpack:///./~/core-js/modules/es6.regexp.split.js","webpack:///./~/core-js/modules/es6.set.js","webpack:///./~/core-js/modules/es6.string.code-point-at.js","webpack:///./~/core-js/modules/es6.string.ends-with.js","webpack:///./~/core-js/modules/es6.string.from-code-point.js","webpack:///./~/core-js/modules/es6.string.includes.js","webpack:///./~/core-js/modules/es6.string.raw.js","webpack:///./~/core-js/modules/es6.string.repeat.js","webpack:///./~/core-js/modules/es6.string.starts-with.js","webpack:///./~/core-js/modules/es6.symbol.js","webpack:///./~/core-js/modules/es6.weak-map.js","webpack:///./~/core-js/modules/es6.weak-set.js","webpack:///./~/core-js/modules/es7.array.includes.js","webpack:///./~/core-js/modules/es7.object.entries.js","webpack:///./~/core-js/modules/es7.object.get-own-property-descriptors.js","webpack:///./~/core-js/modules/es7.object.values.js","webpack:///./~/core-js/modules/es7.string.pad-end.js","webpack:///./~/core-js/modules/es7.string.pad-start.js","webpack:///./~/core-js/modules/web.dom.iterable.js","webpack:///./~/core-js/modules/web.immediate.js","webpack:///./~/core-js/modules/_a-function.js","webpack:///./~/core-js/modules/_create-property.js","webpack:///./~/core-js/modules/_dom-create.js","webpack:///./~/core-js/modules/_enum-bug-keys.js","webpack:///./~/core-js/modules/_fails-is-regexp.js","webpack:///./~/core-js/modules/_iobject.js","webpack:///./~/core-js/modules/_iter-detect.js","webpack:///./~/core-js/modules/_object-create.js","webpack:///./~/core-js/modules/_object-gopd.js","webpack:///./~/core-js/modules/_object-gopn.js","webpack:///./~/core-js/modules/_shared-key.js","webpack:///./~/core-js/modules/_shared.js","webpack:///./~/core-js/modules/_string-context.js","webpack:///./~/core-js/modules/_task.js","webpack:///./~/core-js/modules/_to-primitive.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/cell/range.js","webpack:///./~/handsontable/src/cellTypes/index.js","webpack:///./~/handsontable/src/core.js","webpack:///./~/handsontable/src/helpers/setting.js","webpack:///./~/handsontable/src/plugins/contextMenu/menu.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/separator.js","webpack:///./src/plugins/filters/component/_base.js","webpack:///./src/plugins/filters/constants.js","webpack:///./src/plugins/filters/ui/_base.js","webpack:///./src/plugins/filters/ui/input.js","webpack:///./src/plugins/nestedRows/ui/_base.js","webpack:///external {\"root\":\"numbro\",\"commonjs2\":\"numbro\",\"commonjs\":\"numbro\",\"amd\":\"numbro\"}","webpack:///./~/handsontable/src/index.js","webpack:///./~/core-js/modules/_array-includes.js","webpack:///./~/core-js/modules/_classof.js","webpack:///./~/core-js/modules/_collection-strong.js","webpack:///./~/core-js/modules/_collection-weak.js","webpack:///./~/core-js/modules/_html.js","webpack:///./~/core-js/modules/_ie8-dom-define.js","webpack:///./~/core-js/modules/_is-array-iter.js","webpack:///./~/core-js/modules/_is-array.js","webpack:///./~/core-js/modules/_is-integer.js","webpack:///./~/core-js/modules/_is-regexp.js","webpack:///./~/core-js/modules/_iter-call.js","webpack:///./~/core-js/modules/_iter-define.js","webpack:///./~/core-js/modules/_iter-step.js","webpack:///./~/core-js/modules/_object-assign.js","webpack:///./~/core-js/modules/_object-keys-internal.js","webpack:///./~/core-js/modules/_object-to-array.js","webpack:///./~/core-js/modules/_set-proto.js","webpack:///./~/core-js/modules/_set-species.js","webpack:///./~/core-js/modules/_string-pad.js","webpack:///./~/core-js/modules/_string-repeat.js","webpack:///./~/core-js/modules/_wks-ext.js","webpack:///./~/core-js/modules/core.get-iterator-method.js","webpack:///./~/handsontable/lib/SheetClip/SheetClip.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/border.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/calculator/viewportColumns.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/calculator/viewportRows.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/core.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/event.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/filter/column.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/filter/row.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/overlays.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/scroll.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/settings.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/table.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/tableRenderer.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/viewport.js","webpack:///./~/handsontable/src/defaultSettings.js","webpack:///./~/handsontable/src/editors/autocompleteEditor.js","webpack:///./~/handsontable/src/editors/handsontableEditor.js","webpack:///./~/handsontable/src/helpers/date.js","webpack:///./~/handsontable/src/utils/ghostTable.js","webpack:///./~/handsontable/src/utils/sortingAlgorithms/mergeSort.js","webpack:///./src/plugins/filters/dataFilter.js","webpack:///./src/plugins/filters/formulaCollection.js","webpack:///./src/plugins/filters/formula/between.js","webpack:///./src/plugins/filters/formula/contains.js","webpack:///./src/plugins/filters/formula/date/after.js","webpack:///./src/plugins/filters/formula/date/before.js","webpack:///./src/plugins/filters/formula/empty.js","webpack:///./src/plugins/filters/formula/equal.js","webpack:///./src/plugins/formulas/cell/_base.js","webpack:///./src/plugins/ganttChart/dateCalculator.js","webpack:///./src/plugins/nestedRows/ui/headers.js","webpack:///./src/3rdparty/walkontable/src/overlay/bottom.js","webpack:///./src/3rdparty/walkontable/src/overlay/bottomLeftCorner.js","webpack:///./src/plugins/index.js","webpack:///./~/core-js/modules/_array-copy-within.js","webpack:///./~/core-js/modules/_array-fill.js","webpack:///./~/core-js/modules/_array-species-constructor.js","webpack:///./~/core-js/modules/_array-species-create.js","webpack:///./~/core-js/modules/_enum-keys.js","webpack:///./~/core-js/modules/_flags.js","webpack:///./~/core-js/modules/_inherit-if-required.js","webpack:///./~/core-js/modules/_invoke.js","webpack:///./~/core-js/modules/_iter-create.js","webpack:///./~/core-js/modules/_keyof.js","webpack:///./~/core-js/modules/_microtask.js","webpack:///./~/core-js/modules/_object-dps.js","webpack:///./~/core-js/modules/_object-gopn-ext.js","webpack:///./~/core-js/modules/_object-gpo.js","webpack:///./~/core-js/modules/_own-keys.js","webpack:///./~/core-js/modules/_same-value.js","webpack:///./~/core-js/modules/_species-constructor.js","webpack:///./~/core-js/modules/_string-at.js","webpack:///./~/core-js/modules/_wks-define.js","webpack:///./~/handsontable/lib/autoResize/autoResize.js","webpack:///./~/handsontable/lib/copyPaste/copyPaste.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/overlay/debug.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/overlay/left.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/overlay/top.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/overlay/topLeftCorner.js","webpack:///./~/handsontable/src/3rdparty/walkontable/src/selection.js","webpack:///./~/handsontable/src/cellTypes/autocompleteType.js","webpack:///./~/handsontable/src/cellTypes/checkboxType.js","webpack:///./~/handsontable/src/cellTypes/dateType.js","webpack:///./~/handsontable/src/cellTypes/dropdownType.js","webpack:///./~/handsontable/src/cellTypes/handsontableType.js","webpack:///./~/handsontable/src/cellTypes/numericType.js","webpack:///./~/handsontable/src/cellTypes/passwordType.js","webpack:///./~/handsontable/src/cellTypes/textType.js","webpack:///./~/handsontable/src/cellTypes/timeType.js","webpack:///./~/handsontable/src/dataMap.js","webpack:///./~/handsontable/src/dataSource.js","webpack:///./~/handsontable/src/editorManager.js","webpack:///./~/handsontable/src/editors/checkboxEditor.js","webpack:///./~/handsontable/src/editors/dateEditor.js","webpack:///./~/handsontable/src/editors/dropdownEditor.js","webpack:///./~/handsontable/src/editors/mobileTextEditor.js","webpack:///./~/handsontable/src/editors/numericEditor.js","webpack:///./~/handsontable/src/editors/passwordEditor.js","webpack:///./~/handsontable/src/editors/selectEditor.js","webpack:///./~/handsontable/src/helpers/wrappers/jquery.js","webpack:///./~/handsontable/src/mixins/stateSaver.js","webpack:///./~/handsontable/src/multiMap.js","webpack:///./~/handsontable/src/plugins/autoColumnSize/autoColumnSize.js","webpack:///./~/handsontable/src/plugins/columnSorting/columnSorting.js","webpack:///./~/handsontable/src/plugins/comments/commentEditor.js","webpack:///./~/handsontable/src/plugins/comments/comments.js","webpack:///./~/handsontable/src/plugins/contextMenu/commandExecutor.js","webpack:///./~/handsontable/src/plugins/contextMenu/cursor.js","webpack:///./~/handsontable/src/plugins/contextMenu/itemsFactory.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/alignment.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/clearColumn.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/columnLeft.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/columnRight.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/readOnly.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/redo.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/removeColumn.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/removeRow.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/rowAbove.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/rowBelow.js","webpack:///./~/handsontable/src/plugins/contextMenu/predefinedItems/undo.js","webpack:///./~/handsontable/src/plugins/copyPaste/copyPaste.js","webpack:///./~/handsontable/src/plugins/customBorders/customBorders.js","webpack:///./~/handsontable/src/plugins/index.js","webpack:///./~/handsontable/src/plugins/manualColumnResize/manualColumnResize.js","webpack:///./~/handsontable/src/plugins/multipleSelectionHandles/multipleSelectionHandles.js","webpack:///./~/handsontable/src/renderers/_cellDecorator.js","webpack:///./~/handsontable/src/renderers/autocompleteRenderer.js","webpack:///./~/handsontable/src/renderers/checkboxRenderer.js","webpack:///./~/handsontable/src/renderers/htmlRenderer.js","webpack:///./~/handsontable/src/renderers/numericRenderer.js","webpack:///./~/handsontable/src/renderers/passwordRenderer.js","webpack:///./~/handsontable/src/renderers/textRenderer.js","webpack:///./~/handsontable/src/tableView.js","webpack:///./~/handsontable/src/utils/dataStructures/linkedList.js","webpack:///./~/handsontable/src/utils/dataStructures/stack.js","webpack:///./~/handsontable/src/utils/interval.js","webpack:///./~/handsontable/src/utils/samplesGenerator.js","webpack:///./~/handsontable/src/validators/autocompleteValidator.js","webpack:///./~/handsontable/src/validators/dateValidator.js","webpack:///./~/handsontable/src/validators/numericValidator.js","webpack:///./~/handsontable/src/validators/timeValidator.js","webpack:///./src/index.js","webpack:///./src/plugins/bindRowsWithHeaders/bindRowsWithHeaders.js","webpack:///./src/plugins/bindRowsWithHeaders/bindStrategies/index.js","webpack:///./src/plugins/bindRowsWithHeaders/bindStrategies/loose.js","webpack:///./src/plugins/bindRowsWithHeaders/bindStrategies/strict.js","webpack:///./src/plugins/bindRowsWithHeaders/bindStrategy.js","webpack:///./src/plugins/columnSummary/columnSummary.js","webpack:///./src/plugins/columnSummary/endpoints.js","webpack:///./src/plugins/dropdownMenu/dropdownMenu.js","webpack:///./src/plugins/filters/component/actionBar.js","webpack:///./src/plugins/filters/component/condition.js","webpack:///./src/plugins/filters/component/value.js","webpack:///./src/plugins/filters/filters.js","webpack:///./src/plugins/filters/formulaUpdateObserver.js","webpack:///./src/plugins/filters/formula/beginsWith.js","webpack:///./src/plugins/filters/formula/byValue.js","webpack:///./src/plugins/filters/formula/date/today.js","webpack:///./src/plugins/filters/formula/date/tomorrow.js","webpack:///./src/plugins/filters/formula/date/yesterday.js","webpack:///./src/plugins/filters/formula/endsWith.js","webpack:///./src/plugins/filters/formula/greaterThan.js","webpack:///./src/plugins/filters/formula/greaterThanOrEqual.js","webpack:///./src/plugins/filters/formula/lessThan.js","webpack:///./src/plugins/filters/formula/lessThanOrEqual.js","webpack:///./src/plugins/filters/formula/none.js","webpack:///./src/plugins/filters/formula/notBetween.js","webpack:///./src/plugins/filters/formula/notContains.js","webpack:///./src/plugins/filters/formula/notEmpty.js","webpack:///./src/plugins/filters/formula/notEqual.js","webpack:///./src/plugins/filters/ui/multipleSelect.js","webpack:///./src/plugins/filters/ui/select.js","webpack:///./src/plugins/formulas/alterManager.js","webpack:///./src/plugins/formulas/alterOperation/columnSorting.js","webpack:///./src/plugins/formulas/alterOperation/insertColumn.js","webpack:///./src/plugins/formulas/alterOperation/insertRow.js","webpack:///./src/plugins/formulas/alterOperation/removeColumn.js","webpack:///./src/plugins/formulas/alterOperation/removeRow.js","webpack:///./src/plugins/formulas/cell/reference.js","webpack:///./src/plugins/formulas/dataProvider.js","webpack:///./src/plugins/formulas/formulas.js","webpack:///./src/plugins/formulas/matrix.js","webpack:///./src/plugins/formulas/sheet.js","webpack:///./src/plugins/formulas/undoRedoSnapshot.js","webpack:///./src/plugins/ganttChart/ganttChart.js","webpack:///./src/plugins/ganttChart/ganttChartDataFeed.js","webpack:///./src/plugins/hiddenColumns/contextMenuItem/hideColumn.js","webpack:///./src/plugins/hiddenColumns/contextMenuItem/showColumn.js","webpack:///./src/plugins/hiddenColumns/hiddenColumns.js","webpack:///./src/plugins/hiddenRows/contextMenuItem/hideRow.js","webpack:///./src/plugins/hiddenRows/contextMenuItem/showRow.js","webpack:///./src/plugins/hiddenRows/hiddenRows.js","webpack:///./src/plugins/nestedRows/data/dataManager.js","webpack:///./src/plugins/nestedRows/nestedRows.js","webpack:///./src/plugins/nestedRows/renderers/checkboxColumnRenderer.js","webpack:///./src/plugins/nestedRows/ui/collapsing.js","webpack:///./src/plugins/nestedRows/ui/contextMenu.js","webpack:///./src/plugins/trimRows/rowsMapper.js","webpack:///./src/plugins/trimRows/trimRows.js","webpack:///./~/handsontable/src/css/bootstrap.css","webpack:///./~/handsontable/src/css/handsontable.css","webpack:///./~/handsontable/src/css/mobile.handsontable.css","webpack:///./~/handsontable/src/plugins/comments/comments.css","webpack:///./~/pikaday/css/pikaday.css","webpack:///./src/plugins/dropdownMenu/dropdownMenu.css","webpack:///./src/plugins/filters/filters.css","webpack:///./src/plugins/ganttChart/ganttChart.css","webpack:///./src/plugins/hiddenColumns/hiddenColumns.css","webpack:///./src/plugins/hiddenRows/hiddenRows.css","webpack:///./src/plugins/nestedRows/nestedRows.css","webpack:///external {\"root\":\"Pikaday\",\"commonjs2\":\"pikaday\",\"commonjs\":\"pikaday\",\"amd\":\"pikaday\"}"],"names":["to2dArray","extendArray","pivot","arrayReduce","arrayFilter","arrayMap","arrayEach","arraySum","arrayMax","arrayMin","arrayAvg","arrayFlatten","arrayUnique","arrayCopy","arr","i","ilen","length","extension","push","pivotedArr","rowCount","colCount","j","array","iteratee","accumulator","initFromArray","index","predicate","resIndex","result","value","a","b","Array","isArray","initial","concat","unique","indexOf","copy","obj","key","getParent","closest","closestDown","isChildOf","isChildOfWebComponentTable","polymerWrap","polymerUnwrap","overlayContainsElement","hasClass","addClass","removeClass","removeTextNodes","empty","fastInnerHTML","fastInnerText","isVisible","offset","getWindowScrollTop","getWindowScrollLeft","getScrollTop","getScrollLeft","getScrollableElement","getTrimmingContainer","getStyle","getComputedStyle","outerWidth","outerHeight","innerHeight","innerWidth","addEvent","removeEvent","getCaretPosition","getSelectionEndPosition","getSelectionText","setCaretPosition","getScrollbarWidth","getScrollbarWidth2","hasVerticalScrollbar","hasHorizontalScrollbar","setOverlayPosition","getCssTransform","resetCssTransform","isInput","isOutsideInput","element","level","iteration","parent","host","nodeType","Node","DOCUMENT_FRAGMENT_NODE","parentNode","nodes","until","ELEMENT_NODE","nodeName","matched","contains","child","node","queriedParents","prototype","slice","call","document","querySelectorAll","hotTableName","isHotTable","toUpperCase","Polymer","wrap","unwrap","previousSibling","overlayType","overlayElement","querySelector","classListSupport","documentElement","classList","_hasClass","_addClass","_removeClass","filterEmptyClassNames","classNames","len","isSupportMultipleClassesArg","createElement","add","className","split","apply","remove","createClassNameRegExp","RegExp","match","_className","join","test","replace","trim","removeChild","childs","childNodes","lastChild","HTML_CHARACTERS","content","innerHTML","textContextSupport","createTextNode","textContent","firstChild","nextSibling","data","appendChild","elem","next","impl","Error","style","display","offsetLeft","offsetTop","lastElem","docElem","box","getBoundingClientRect","top","window","pageYOffset","scrollTop","clientTop","left","pageXOffset","scrollLeft","clientLeft","offsetParent","body","position","res","scrollY","scrollX","el","props","overflow","overflowX","overflowY","computedStyle","computedOverflow","computedOverflowY","computedOverflowX","getPropertyValue","clientHeight","scrollHeight","clientWidth","scrollWidth","base","prop","styleProp","currentStyle","defaultView","offsetWidth","offsetHeight","event","callback","addEventListener","attachEvent","removeEventListener","detachEvent","selectionStart","selection","focus","r","createRange","re","createTextRange","rc","duplicate","moveToBookmark","getBookmark","setEndPoint","text","selectionEnd","getSelection","toString","type","pos","endPos","setSelectionRange","err","elementParent","parentDisplayValue","range","collapse","moveEnd","moveStart","select","cachedScrollbarWidth","walkontableCalculateScrollbarWidth","inner","height","width","outer","boxSizing","visibility","w1","w2","overlayElem","transform","inputs","contentEditable","duckSchema","inherit","extend","deepExtend","deepClone","clone","mixin","isObjectEquals","isObject","defineGetter","objectEach","getProperty","deepObjectSize","createObjectPropListener","hasOwnProperty","object","schema","Child","Parent","constructor","target","Object","JSON","parse","stringify","Base","MIXINS","mixins","MIXIN_NAME","getter","_getter","propertyName","initialValue","initValue","setter","_setter","defineProperty","get","set","configurable","object1","object2","property","options","writable","enumerable","name","names","recursObjLen","defaultValue","propertyToListen","privateProperty","holder","_touched","global","require","core","hide","redefine","ctx","PROTOTYPE","$export","source","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","exports","expProto","own","out","exp","undefined","Function","U","W","R","module","isNumeric","rangeEach","rangeEachReverse","valueAccordingPercent","n","t","isNaN","isFinite","valueOf","Date","rangeFrom","rangeTo","percent","parseInt","getFormula","getFormulaDescriptor","registerFormula","formulas","args","formula","descriptor","inputValuesDecorator","dataRow","meta","instance","getListenersCounter","listenersCounter","EventManager","context","eventListeners","eventName","callbackProxy","extendEvent","tmpEvent","splice","clearEvents","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","createEvent","initMouseEvent","createEventObject","dispatchEvent","fireEvent","componentName","isHotTableSpotted","fromElement","realTarget","nativeStopImmediatePropagation","isTargetWebComponent","stopImmediatePropagation","isHotTableEnv","path","shadowRoot","srcElement","toElement","Core","Walkontable","wt","wtTable","TABLE","isImmediatePropagationStopped","stopPropagation","pageX","pageY","isRightClick","isLeftClick","isImmediatePropagationEnabled","cancelBubble","registeredPlugins","WeakMap","registerPlugin","pluginName","PluginClass","getSingleton","has","pluginsHolder","plugin","destroy","delete","getPlugin","_pluginName","getRegistredPluginNames","hotInstance","keys","getPluginName","pluginInstance","register","getItem","hasItem","getNames","getValues","_getItem","registerRenderer","getRenderer","hasRenderer","getRegisteredRendererNames","getRegisteredRenderers","store","uid","Symbol","USE_SYMBOL","$exports","Math","self","__g","isPrintableChar","isMetaKey","isCtrlKey","isKey","KEY_CODES","MOUSE_LEFT","MOUSE_RIGHT","MOUSE_MIDDLE","BACKSPACE","COMMA","INSERT","DELETE","END","ENTER","ESCAPE","CONTROL_LEFT","COMMAND_LEFT","COMMAND_RIGHT","ALT","HOME","PAGE_DOWN","PAGE_UP","PERIOD","SPACE","SHIFT","CAPS_LOCK","TAB","ARROW_RIGHT","ARROW_LEFT","ARROW_UP","ARROW_DOWN","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","A","X","C","V","keyCode","metaKeys","baseCode","privatePool","initializedPlugins","BasePlugin","hooks","pluginsInitializedCallbacks","isPluginsReady","enabled","initialized","hot","addHook","onAfterPluginsInitialized","onUpdateSettings","init","isEnabled","enablePlugin","runHooks","eventManager","clear","clearHooks","removeHook","callbacks","removeHooks","disablePlugin","updatePlugin","it","RegisteredEditor","_getEditorInstance","registeredEditorClasses","_register","editorClass","instances","Clazz","getConstructor","getInstance","guid","editor","editorWrapper","registerEditor","getEditor","getEditorInstance","hasEditor","getRegisteredEditorNames","getRegisteredEditors","isDefined","isUndefined","isEmpty","isRegExp","variable","TypeError","anObject","IE8_DOM_DEFINE","toPrimitive","dP","f","O","Attributes","e","ViewportColumnsCalculator","ViewportRowsCalculator","CellCoords","CellRange","ColumnFilter","RowFilter","DebugOverlay","LeftOverlay","TopOverlay","TopLeftCornerOverlay","Border","default","Event","Overlays","Scroll","Selection","Settings","Table","TableRenderer","Viewport","toUpperCaseFirst","equalsIgnoreCase","randomString","isPercentValue","substitute","stripTags","string","substr","strings","toLowerCase","s4","floor","random","substring","template","variables","charAt","STRIP_TAGS_REGEX","REGISTERED_HOOKS","Hooks","globalSingleton","globalBucket","createEmptyBucket","bucket","create","hook","pluginHookBucket","c","getBucket","skip","foundInitialHook","initialHook","cb","once","runOnce","p1","p2","p3","p4","p5","p6","globalHandlers","localHandlers","isRegistered","normalizeSelection","isSeparator","hasSubMenu","isDisabled","isSelectionDisabled","getValidSelection","prepareVerticalAlignClass","prepareHorizontalAlignClass","getAlignmentClasses","align","checkSelectionConsistency","markLabelAsSelected","isItemHidden","filterSeparators","selRange","start","getTopLeftCorner","end","getBottomRightCorner","cell","selected","getSelected","alignment","classes","row","from","to","col","cellDescriptor","propertySetter","applyAlignClassName","cellMeta","comparator","forAll","label","String","fromCharCode","item","hidden","shiftSeparators","items","separator","shift","popSeparators","reverse","removeDuplicatedSeparators","IObject","defined","toInteger","min","registeredOverlays","Overlay","overlayClass","CLONE_TYPES","wot","overlay","CLONE_TOP","CLONE_BOTTOM","CLONE_LEFT","CLONE_TOP_LEFT_CORNER","CLONE_BOTTOM_LEFT_CORNER","CLONE_DEBUG","wotInstance","mainTableScrollableElement","hider","spreader","wtRootElement","trimmingContainer","areElementSizesAdjusted","updateStateOfRendering","previousState","needFullRender","shouldBeRendered","changed","reset","direction","clonedTable","preventOverflow","getSetting","cloneSource","cloneOverlay","table","fastDraw","nextCycleRenderFlag","draw","holderStyle","hidderStyle","rootStyle","isFunction","throttle","throttleAfterHits","debounce","pipe","partial","curry","curryRight","func","wait","lastCalled","lastCallThrottled","lastTimer","_throttle","arguments","stamp","now","needCall","remaining","clearTimeout","setTimeout","hits","funcThrottle","remainHits","_clearHits","_throttleAfterHits","clearHits","_debounce","functions","firstFunc","restFunc","_pipe","acc","fn","params","_partial","restParams","argsLength","given","argsSoFar","_curry","passedArgsSoFar","isIE8","isIE9","isSafari","isChrome","isMobileBrowser","_isIE8","_isIE9","documentMode","_isSafari","navigator","userAgent","vendor","_isChrome","registerValidator","getValidator","hasValidator","getRegisteredValidatorNames","getRegisteredValidators","isFormulaExpression","isFormulaExpressionEscaped","unescapeFormulaExpression","toUpperCaseFormula","cellCoordFactory","expression","PATTERN","axis","defaultIndex","column","aFunction","that","exec","createDesc","SRC","TO_STRING","$toString","TPL","inspectSource","val","safe","localHooks","_localHooks","addLocalHook","runLocalHooks","clearLocalHooks","STATE_OUT_OFF_DATE","STATE_COMPUTING","STATE_UP_TO_DATE","states","CellValue","precedents","error","state","cellReference","isEqual","hasPrecedent","KEY","predefinedItems","addItem","ITEMS","_predefinedItems","itemFactory","UNSCOPABLES","ArrayProto","$keys","enumBugKeys","bitmap","EditorState","VIRGIN","EDITING","WAITING","FINISHED","BaseEditor","_opened","_fullEditMode","_closeCallback","_fireCallbacks","getValue","setValue","newValue","open","close","prepare","td","originalValue","cellProperties","TD","invalidActiveElement","activeElement","isMouseDown","blur","baseClass","Editor","Bridge","saveValue","ctrlDown","tmp","populateFromArray","beginEditing","scrollViewport","render","finishEditing","restoreOriginalValue","_this","previousCloseCallback","isWaiting","_registerTimeout","cancelChanges","getSettings","trimWhitespace","getCellValidator","addHookOnce","discardEditor","allowInvalid","selectCell","enableFullEditMode","isInFullEditMode","isOpened","checkEditorSection","totalRows","countRows","section","fixedRowsTop","fixedColumnsLeft","fixedRowsBottom","requestAnimationFrame","cancelAnimationFrame","isTouchSupported","isWebComponentSupportedNatively","hasCaptionProblem","getComparisonFunction","lastTime","vendors","_requestAnimationFrame","_cancelAnimationFrame","x","currTime","getTime","timeToCall","max","id","createShadowRoot","_hasCaptionProblem","detectCaptionProblem","borderSpacing","borderWidth","padding","TBODY","CAPTION","margin","insertBefore","comparisonFunction","language","Intl","Collator","compare","localeCompare","registerIdentity","getTranslator","RecordTranslator","toVisualRow","toVisualColumn","toPhysicalRow","toPhysicalColumn","identities","translatorSingletons","identity","singleton","version","__e","META","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","w","fastKey","getWeak","onFreeze","NEED","propertyIsEnumerable","def","TAG","tag","stat","px","cellCoords","testedCoords","TextEditor","createElements","bindEvents","autoResize","TEXTAREA","onBeforeKeyDown","getActiveEditor","allowKeyEventPropagation","isMultipleSelection","caretPosition","preventDefault","resize","refreshDimensions","tdOutside","textareaParentStyle","unObserve","listen","textareaStyle","TEXTAREA_PARENT","rootElement","getEditedCell","editorSection","editedCell","wtOverlays","topOverlay","getCell","zIndex","topLeftCornerOverlay","bottomLeftCornerOverlay","leftOverlay","bottomOverlay","refreshValue","sourceData","getSourceDataAtCell","currentOffset","containerOffset","scrollableContainer","totalRowsCount","editTopModifier","editTop","editLeft","settings","rowHeadersCount","hasRowHeaders","colHeadersCount","hasColHeaders","backgroundColor","cssTransformOffset","firstRowOffset","wtViewport","rowsRenderCalculator","startPosition","firstColumnOffset","columnsRenderCalculator","horizontalScrollPosition","getScrollPosition","verticalScrollPosition","scrollbarWidth","cellTopOffset","cellLeftOffset","actualVerticalScrollbarWidth","actualHorizontalScrollbarWidth","maxWidth","maximumVisibleElementWidth","maxHeight","maximumVisibleElementHeight","cellComputedStyle","fontSize","fontFamily","minHeight","minWidth","sortComparison","toVisualValue","createArrayAssertion","toEmptyString","unifyColumnValues","intersectValues","sortCompare","columnIndex","lastSelectedColumn","visualIndex","getSelectedColumn","columns","valueParser","SUPPORT_SET_CONSTRUCTOR","Set","SUPPORT_FAST_DEDUPE","initialData","values","sort","same","selectedItemsAssertion","checked","v","visualValue","BARE_CELL_STRICT_REGEX","BARE_CELL_REGEX","CELL_REGEX","RANGE_REGEX","CELL_AND_RANGE_REGEX","ExpressionModifier","cells","customModifier","setExpression","_extractCells","_extractCellsRange","deltaRow","deltaColumn","startFrom","_translateCell","isSingleCell","cellLabel","translatedCellLabel","_searchCell","refError","toLabel","startsWith","delta","startFromIndex","startIndex","endIndex","deltaStart","deltaEnd","isAbsolute","matches","coord","_createCell","startRow","startColumn","endRow","endColumn","startCell","endCell","origLabel","addToUnscopables","step","Iterators","toIObject","iterated","kind","_t","_i","_k","Arguments","Constructor","forbiddenField","toObject","toLength","asc","TYPE","$create","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","callbackfn","redefineAll","forOf","anInstance","fails","$iterDetect","setToStringTag","inheritIfRequired","NAME","wrapper","methods","common","IS_WEAK","ADDER","proto","fixMethod","forEach","entries","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","iter","BUGGY_ZERO","$instance","iterable","setStrong","wks","SYMBOL","fns","strfn","rxfn","arg","isArrayIter","getIterFn","BREAK","RETURN","ITERATOR","iterFn","iterator","done","getOwnPropertySymbols","src","ceil","spreadsheetColumnLabel","spreadsheetColumnIndex","createSpreadsheetData","createSpreadsheetObjectData","createEmptySpreadsheetData","translateRowsToColumns","cellMethodLookupFactory","COLUMN_LABEL_BASE","COLUMN_LABEL_BASE_LENGTH","dividend","columnLabel","modulo","pow","rows","_rows","input","jlen","output","olen","methodName","allowUndefined","cellMethodLookup","getMethodFromProperties","properties","getPrototypeOf","getCellMeta","arrayMapper","_arrayMap","getValueByIndex","getIndexByValue","insertItems","amount","newIndex","addedItems","count","removeItems","removedItems","mapCopy","unshiftItems","countRowShift","logicalRow","removedLogicalRow","physicalRow","rowShift","shiftItems","clearMap","staticRegister","collection","Map","namespace","subCollection","copyWithin","fill","$find","forced","findIndex","find","createProperty","arrayLike","aLen","mapfn","mapping","of","FProto","nameRE","strong","entry","getEntry","EPSILON","_isFinite","isInteger","number","abs","isSafeInteger","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","assign","is","setPrototypeOf","LIBRARY","classof","speciesConstructor","task","microtask","PROMISE","process","$Promise","isNode","Internal","GenericPromiseCapability","Wrapper","USE_NATIVE","promise","resolve","FakePromise","PromiseRejectionEvent","then","sameConstructor","isThenable","newPromiseCapability","PromiseCapability","reject","$$resolve","$$reject","perform","notify","isReject","_n","chain","_c","_v","ok","_s","run","reaction","handler","fail","domain","_h","onHandleUnhandled","enter","exit","onUnhandled","abrupt","console","isUnhandled","emit","onunhandledrejection","reason","_a","onrejectionhandled","$reject","_d","_w","$resolve","Promise","executor","onFulfilled","onRejected","capability","all","$index","alreadyCalled","race","flags","MATCH","$match","regexp","REPLACE","$replace","searchValue","replaceValue","SEARCH","$search","search","SPLIT","$split","_split","$push","$SPLIT","LENGTH","LAST_INDEX","NPCG","limit","ignoreCase","multiline","unicode","sticky","lastLastIndex","splitLimit","separatorCopy","separator2","lastIndex","lastLength","$at","codePointAt","ENDS_WITH","$endsWith","endsWith","searchString","endPosition","toIndex","$fromCodePoint","fromCodePoint","code","RangeError","INCLUDES","includes","raw","callSite","tpl","repeat","STARTS_WITH","$startsWith","DESCRIPTORS","$fails","shared","wksExt","wksDefine","keyOf","enumKeys","_create","gOPNExt","$GOPD","$DP","gOPD","gOPN","$Symbol","$JSON","_stringify","HIDDEN","TO_PRIMITIVE","isEnum","SymbolRegistry","AllSymbols","OPSymbols","ObjectProto","QObject","findChild","setSymbolDesc","D","protoDesc","sym","isSymbol","$defineProperty","$defineProperties","defineProperties","l","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","getOwnPropertyDescriptor","$getOwnPropertyNames","getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","symbols","keyFor","useSetter","useSimple","replacer","$replacer","each","weak","uncaughtFrozenStore","ufstore","InternalMap","$WeakMap","freeze","method","_f","WeakSet","$includes","$entries","ownKeys","getOwnPropertyDescriptors","getDesc","$values","$pad","padEnd","maxLength","padStart","$iterators","TO_STRING_TAG","ArrayValues","collections","Collection","$task","setImmediate","clearImmediate","cof","SAFE_CLOSING","riter","skipClosing","dPs","IE_PROTO","Empty","createDict","iframe","lt","gt","iframeDocument","contentWindow","write","Properties","pIE","hiddenKeys","SHARED","invoke","html","cel","setTask","clearTask","MessageChannel","counter","queue","ONREADYSTATECHANGE","defer","channel","port","listener","nextTick","port2","port1","onmessage","postMessage","importScripts","highlight","isValid","topLeft","bottomRight","testedRange","isSouthEastOf","isNorthWestOf","expandingRange","includesRange","overlaps","topRight","getTopRightCorner","bottomLeft","getBottomLeftCorner","expandingTopLeft","expandingBottomRight","resultTopRow","resultTopCol","resultBottomRow","resultBottomCol","finalFrom","finalTo","isCorner","onlyMerge","isNorthEastOf","isSouthWestOf","coords","expandedRange","thisBorders","bottom","right","rangeBorders","breakIteration","renderer","validator","registerCellType","getCellType","hasCellType","getRegisteredCellTypeNames","getRegisteredCellTypes","activeGuid","userSettings","priv","datamap","dataSource","grid","editorManager","GridSettings","expandType","container","renderCall","recordTranslator","cellSettings","columnSettings","columnsSettingConflicts","isPopulated","scrollable","firstRun","alter","action","keepEmptyRows","spliceWith","toInject","valueFactory","spliceArgs","unshift","numberOfSourceRows","countSourceRows","maxRows","createRow","isSelected","transformEnd","refreshBorders","createCol","colHeaders","spliceArray","removeRow","adjustRowsAndCols","logicalColumnIndex","removeCol","minRows","minSpareRows","emptyRows","countEmptyRows","emptyCols","minCols","minSpareCols","countEmptyCols","countCols","dataType","maxCols","deselect","selectionChanged","fromRow","fromCol","toRow","toCol","adjustElementsSize","deltas","rlen","clen","setData","current","repeatCol","repeatRow","cmax","rmax","baseEnd","spliceCol","spliceRow","skippedRow","skippedColumn","pushData","getInputValue","rowValue","rowInputLength","rowSelectionLength","allowInsertRow","colInputLength","colSelectionLength","skipRowOnPaste","allowInsertColumn","skipColumnOnPaste","readOnly","logicalColumn","orgValue","getDataAtCell","orgValueSchema","valueSchema","setDataAtCell","inProgress","selectedHeader","cols","setSelectedHeaders","corner","begin","finish","sel","colToProp","isInProgress","setRangeStart","keepEditorOpened","setRangeEnd","setRangeStartOnly","scrollToCell","disableVisualSelection","isHeaderSelected","areCoordsPositive","firstVisibleRow","getFirstVisibleRow","firstVisibleColumn","getFirstVisibleColumn","newRangeCoords","multiSelect","selections","area","isMultiple","currentHeaderClassName","currentRowClassName","currentColClassName","preventScrolling","isTouched","revertOriginal","keepEditor","destroyEditor","prepareEditor","modifier","transformStart","rowDelta","colDelta","force","rowTransformDir","colTransformDir","totalCols","autoWrapCol","autoWrapRow","inInSelection","selectAll","changes","updateSettings","forceFullRender","ValidatorsQueue","resolved","validatorsInQueue","valid","addValidatorToQueue","removeValidatorFormQueue","checkIfQueueIsEmpty","onQueueEmpty","validateChanges","waitingForValidator","propToCol","format","culture","cultureData","delimiters","validate","parseFloat","unformat","validateCell","invalidCellClassName","beforeChangeResult","warn","applyChanges","skipThisChange","numberOfCreatedRows","activeEditor","visualCol","visualRow","wtSettings","cellRenderer","setDataInputToArray","propOrCol","getAtCell","setDataAtRowProp","unlisten","isListening","endCol","getSelectedRange","loadData","dataSchema","getSchema","startRows","startCols","bind","clearCellSettingCache","getData","r2","c2","getAll","getRange","DESTINATION_RENDERER","getCopyableText","startCol","getCopyableData","getCopyable","columnsAsFunc","getRegistered","createMap","columnSetting","countSourceCols","setCellMetaObject","currentHeight","initialStyle","getAttribute","setAttribute","clearLengthCache","resetHasOversizedColumnHeadersMarked","updateMainScrollableElements","expandedType","topmost","getCellAtCoords","getCoords","getDataAtRowProp","getDataAtCol","getFilterDataAtCol","getSummaryDataAtCol","getDataAtProp","getSourceData","getByRange","getSourceDataArray","getSourceDataAtCol","getAtColumn","getSourceDataAtRow","getAtRow","getDataAtRow","getDataType","rowFrom","columnFrom","rowTo","columnTo","previousType","currentType","isTypeEqual","cellType","removeCellMeta","spliceCellsMeta","deleteAmount","setCellMeta","toPhysical","getCellsMeta","getCellMetaAtRow","isColumnModificationAllowed","rendererLookup","getCellRenderer","getCellEditor","validatorLookup","validateCells","getRowHeader","rowHeader","rowHeaders","getColHeader","translateVisualIndexToColumns","columnsLen","baseCol","title","_getColWidthFromSettings","colWidths","getColWidth","DEFAULT_WIDTH","_getRowHeightFromSettings","rowHeights","getRowHeight","sourceLength","getLength","dataHasLength","dataLen","columnsIsFunction","columnLen","colToPropCache","rowOffset","getFirstRenderedRow","colOffset","getFirstRenderedColumn","countRenderedRows","drawn","getRenderedRowsCount","countVisibleRows","getVisibleRowsCount","countRenderedCols","getRenderedColumnsCount","countVisibleCols","getVisibleColumnsCount","ending","isEmptyRow","isEmptyCol","changeListener","selectCellByProp","endProp","deselectCell","scrollViewportTo","snapToBottom","snapToRight","scrollTo","_clearTimeouts","postMortem","hasHook","timeouts","handle","columnFactory","conflictList","ColumnSettings","Menu","keepInViewport","standalone","createContainer","hotMenu","hotSubMenus","parentMenu","menuItems","origOutsideClickDeselects","keyEvent","above","below","_afterScrollCallback","registerEvents","onDocumentMouseDown","removeAttribute","delayedOpenSubMenu","openSubMenu","filteredItems","autoRowSize","copyPaste","menuItemRenderer","renderAllRows","fragmentSelection","beforeKeyDown","afterOnCellMouseOver","isAllSubMenusClosed","outsideClickDeselects","onAfterInit","onAfterSelection","blockMainTableCallbacks","closeParent","closeAllSubMenus","releaseMainTableCallbacks","dataItem","subMenu","setMenuItems","submenu","setPosition","menus","closeSubMenu","selectedItem","isCommand","normalizedSelection","autoClose","disabled","isSubMenu","cursor","fitsBelow","setPositionBelowCursor","fitsAbove","setPositionAboveCursor","fitsOnRight","setPositionOnRightOfCursor","setPositionOnLeftOfCursor","cellHeight","cellWidth","selectNextCell","lastRow","selectPrevCell","nextRow","prevRow","itemIsSeparator","itemIsDisabled","itemIsSelectionDisabled","disableSelection","getElementsByTagName","stopEvent","executeCommand","selectFirstCell","selectLastCell","menu","hiderStyle","currentHiderWidth","realHeight","separatorItem","BaseComponent","elements","ui","getOptionsList","FORMULA_NONE","FORMULA_EMPTY","FORMULA_NOT_EMPTY","FORMULA_EQUAL","FORMULA_NOT_EQUAL","FORMULA_GREATER_THAN","FORMULA_GREATER_THAN_OR_EQUAL","FORMULA_LESS_THAN","FORMULA_LESS_THAN_OR_EQUAL","FORMULA_BETWEEN","FORMULA_NOT_BETWEEN","FORMULA_BEGINS_WITH","FORMULA_ENDS_WITH","FORMULA_CONTAINS","FORMULA_NOT_CONTAINS","FORMULA_DATE_BEFORE","FORMULA_DATE_AFTER","FORMULA_TOMORROW","FORMULA_TODAY","FORMULA_YESTERDAY","FORMULA_BY_VALUE","TYPE_NUMERIC","TYPE_TEXT","TYPE_DATE","TYPES","option","STATE_BUILT","STATE_BUILDING","EVENTS_TO_REGISTER","BaseUI","tagName","children","wrapIt","DEFAULTS","_element","buildState","update","registerEvent","build","InputUI","placeholder","registerHooks","onClick","onKeyup","icon","isBuilt","arrayHelpers","browserHelpers","dataHelpers","dateHelpers","featureHelpers","functionHelpers","mixedHelpers","numberHelpers","objectHelpers","settingHelpers","stringHelpers","unicodeHelpers","domHelpers","domEventHelpers","plugins","Handsontable","DefaultSettings","_getListenersCounter","buildDate","packageName","baseVersion","__GhostTable","HELPERS","DOM","helper","dom","cellTypes","cellTypeName","editors","editorName","renderers","rendererName","cellDecorator","validators","validatorName","IS_INCLUDES","fromIndex","ARG","tryGet","T","callee","$iterDefine","setSpecies","SIZE","k","_l","p","prev","createArrayMethod","$has","arrayFind","arrayFindIndex","UncaughtFrozenStore","findUncaughtFrozen","ret","$iterCreate","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","DEFAULT","IS_SET","FORCED","getMethod","DEF_VALUES","VALUES_BUG","$native","$default","$anyNative","IteratorPrototype","getKeys","gOPS","$assign","K","getSymbols","arrayIndexOf","isEntries","check","buggy","__proto__","SPECIES","fillString","stringLength","fillStr","intMaxLength","fillLen","stringFiller","str","Infinity","getIteratorMethod","countQuotes","SheetClip","rLen","cLen","last","pop","mouseDown","main","topStyle","leftStyle","bottomStyle","rightStyle","cornerDefaultStyle","borderStyle","borderColor","cornerStyle","createBorders","registerListeners","onMouseDown","onMouseUp","onMouseEnter","parentElement","bounds","isOutside","borderDivs","div","color","border","createMultipleSelectorHandles","disappear","bordersHolder","selectionHandles","topLeftHitArea","bottomRightHitArea","hitAreaWidth","styles","hitAreaStyle","handleStyle","background","cellRange","handleWidth","multipleSelectionHandlesVisible","isPartRange","corners","fromTD","toTD","fromOffset","toOffset","minTop","minLeft","fromColumn","toColumn","cornerOverlappingContainer","s","rowFilter","renderedToSource","columnFilter","borderTopWidth","borderLeftWidth","hasSetting","cornerVisible","borderRightWidth","borderBottomWidth","updateMultipleSelectionHandlesPosition","setting","viewportWidth","scrollOffset","totalColumns","columnWidthFn","overrideFn","onlyFullyVisible","stretchH","stretchingColumnWidthFn","stretchAllRatio","stretchLastWidth","stretch","totalTargetWidth","needVerifyLastColumnWidth","stretchAllColumnsWidth","calculate","sum","needReverse","startPositions","columnWidth","_getColumnWidth","compensatedViewportWidth","viewportSum","totalWidth","sumAll","permanentColumnWidth","remainingSize","lastColumnWidth","baseWidth","_getStretchedAllColumnWidth","_getStretchedLastColumnWidth","sumRatioWidth","stretchedWidth","round","newStretchedWidth","viewportHeight","rowHeightFn","horizontalScrollbarHeight","rowHeight","DEFAULT_HEIGHT","originalHeaders","wtScroll","wtEvent","exportSettingsAsClassNames","THEAD","TH","drawInterrupted","fixedColumns","getLastVisibleRow","getLastVisibleColumn","toExport","columnHeaders","allClassNames","newClassNames","optionType","param1","param2","param3","param4","dblClickOrigin","dblClickTimeout","getParentNode","parentCell","onTouchMove","touchMoving","longTouchTimeout","onTouchStart","checkIfTouchMove","onMouseOver","mainWOT","lastMouseOver","onMouseOut","lastTD","nextTD","onTouchEnd","isWorkingOnClone","classSelector","touchApplied","momentumScrolling","_timeout","ongoing","total","countTH","offsetted","unOffsetted","offsettedTH","unOffsettedTH","sourceToRendered","scrollableElement","prepareOverlays","destroyed","keyPressed","spreaderLastSize","overlayScrollPositions","master","pendingScrollCallbacks","verticalScrolling","horizontalScrolling","delegatedScrollCallback","registeredListeners","syncScroll","createOverlay","hasOverlay","debug","onScroll","topOverlayScrollable","leftOverlayScrollable","listenersToRegister","onKeyDown","onKeyUp","onTableScroll","deltaY","wheelDeltaY","deltaX","wheelDeltaX","masterHorizontal","masterVertical","syncScrollPositions","translateMouseWheelToScroll","mouseWheelSpeedRatio","parentHolder","eventMockup","tempElem","deltaMode","fakeScrollValue","fakeScrollDirection","syncScrollWithMaster","tempScrollValue","scrollValueChanged","delegatedScroll","refreshAll","deregisterListeners","updateMainScrollableElement","refresh","headerRowSize","getRowHeaderWidth","headerColumnSize","getColumnHeaderHeight","sumCellSizes","applyToDOM","overlays","_getVariables","rootElementOffset","totalTableHeight","windowHeight","windowScrollTop","rowsHeight","lastVisibleRow","totalTableWidth","windowWidth","windowScrollLeft","columnsWidth","lastVisibleColumn","defaults","externalRowCalculator","currentColumnClassName","freezeOverlays","cellData","defaultRowHeight","defaultColumnWidth","hideBorderOnMouseDownOver","viewportRowCalculatorOverride","viewportColumnCalculatorOverride","onCellMouseDown","onCellMouseOver","onCellMouseOut","onCellMouseUp","onCellDblClick","onCellCornerMouseDown","onCellCornerDblClick","beforeDraw","onDraw","onBeforeDrawBorders","onScrollVertically","onScrollHorizontally","onBeforeTouchScroll","onAfterMomentumScroll","onBeforeStretchingColumnWidth","onModifyRowHeaderWidth","scrollbarHeight","groups","rowHeaderWidth","columnHeaderHeight","headerClassName","COLGROUP","tableOffset","holderOffset","createSpreader","createHider","createHolder","alignOverlaysWithTrimmingContainer","fixTableDomTree","colgroupChildrenLength","theadChildrenLength","tbodyChildrenLength","correctHeaderWidth","origRowHeaderWidth","_modifyRowHeaderWidth","trimmingElement","createRenderCalculators","leftScrollPos","createVisibleCalculators","isOverlayTypeOf","_doDraw","refreshSelections","resetFixedPosition","wtRenderer","removeClassFromCells","highlightHeaderClassName","highlightRowClassName","highlightColumnClassName","isRowBeforeRenderedRows","isRowAfterRenderedRows","TR","sourceColumnToVisibleRowHeadedColumn","CONTAINER","cellIndex","visibleColHeadedRowToSourceRow","visibleRowHeadedColumnToSourceColumn","rowsVisibleCalculator","columnsVisibleCalculator","getLastRenderedRow","getLastRenderedColumn","columnsCount","isOverlayName","rowsCount","sourceRow","oversizedHeight","oversizedRows","oversizedColumnHeaders","sourceColumn","getColumnWidth","calculator","getStretchedColumnWidth","rowHeaderWidthFactory","widths","_correctRowHeaderWidth","performanceWarningAppeared","rowHeaderCount","columnHeaderCount","skipRender","columnsToRender","rowsToRender","workspaceWidth","adjusted","adjustAvailableNodes","renderColumnHeaders","renderRows","getWorkspaceWidth","containerWidth","adjustColumnWidths","markOversizedColumnHeaders","adjustColumnHeaderHeights","removeRedundantRows","markOversizedRows","hiderWidth","tableWidth","firstRendered","lastRendered","rowHeaderWidthSetting","renderedIndex","renderedRowsCount","visibleRowIndex","sourceRowIndex","getOrCreateTrForRow","renderRowHeaders","adjustColumns","renderCells","resetOversizedRow","expectedTableHeight","actualTableHeight","previousRowHeight","rowInnerHeight","currentTr","getTrForRow","overlayName","getOverlayName","hasOversizedColumnHeadersMarked","columnCount","renderedColumnIndex","markIfOversizedColumnHeader","sourceColIndex","previousColHeaderHeight","currentHeader","currentHeaderHeight","columnHeaderHeightSetting","getColumnHeader","visibleColIndex","replaceThWithTd","scrollbarCompensation","sourceInstance","mainHolder","refreshStretching","getViewportWidth","renderedColIndex","rowIndex","appendToTbody","replaceTdWithTh","renderRowHeader","adjustColGroups","adjustThead","getTrForColumnHeaders","sourceCol","renderColumnHeader","desiredCount","NaN","getWorkspaceHeight","elemHeight","stretchSetting","docOffsetWidth","getWorkspaceOffset","getContainerFillWidth","sumColumnWidths","getWorkspaceActualHeight","getWorkspaceActualWidth","mainContainer","fillWidth","dummyElement","containerHeight","rowHeadersHeightSetting","visible","fixedRowsHeight","getViewportHeight","getTableParentOffset","fixedColumnsWidth","proposedRowsVisibleCalculator","createRowsCalculator","proposedColumnsVisibleCalculator","createColumnsCalculator","areAllProposedVisibleRowsAlreadyRendered","areAllProposedVisibleColumnsAlreadyRendered","comments","customBorders","allowRemoveRow","allowRemoveColumn","fillHandle","enterBeginsEditing","enterMoves","tabMoves","copyRowsLimit","copyColsLimit","pasteMode","persistentState","tableClassName","colLen","rowLen","observeDOMVisibility","allowEmpty","placeholderCellClassName","readOnlyCellClassName","commentedCellClassName","copyable","autoComplete","visibleRows","trimDropdown","wordWrap","noWordWrapClassName","contextMenu","contextMenuCopyPaste","undo","columnSorting","manualColumnMove","manualColumnResize","manualRowMove","manualRowResize","mergeCells","viewportRowRenderingOffset","viewportColumnRenderingOffset","sortIndicator","manualColumnFreeze","checkedTemplate","uncheckedTemplate","selectOptions","autoColumnSize","dateFormat","correctFormat","defaultDate","strict","allowHtml","bindRowsWithHeaders","collapsibleColumns","columnSummary","dropdownMenu","filters","ganttChart","headerTooltips","hiddenColumns","hiddenRows","nestedHeaders","trimRows","observeChanges","sortFunction","sortByRelevance","filter","filteringCaseSensitive","AutocompleteEditor","query","strippedChoices","rawChoices","selectedValue","strippedValue","stripValueIfNeeded","htContainer","platform","skipOne","timeOffset","htEditor","queryChoices","choicesListHot","afterRenderer","indexOfMatch","modifyColWidth","autoWidths","choices","updateChoicesList","stripValuesIfNeeded","sortByRelevanceSetting","filterSetting","orderByRelevance","highlightIndex","orderByRelevanceLength","sorted","choicesCount","updateDropdownHeight","flipDropdownIfNeeded","highlightBestMatchingChoice","textareaOffset","textareaHeight","dropdownHeight","getDropdownHeight","trimmingContainerScrollTop","headersHeight","spaceAbove","spaceBelow","flipNeeded","flipDropdown","unflipDropdown","limitDropdownIfNeeded","spaceAvailable","tempHeight","lastRowHeight","flipped","setDropdownHeight","dropdownStyle","currentDropdownWidth","caseSensitive","choicesRelevance","currentItem","valueLength","valueIndex","charsLeft","baseIndex","firstRowHeight","stringifiedValues","strippedValues","allowed","HandsontableEditor","DIV","assignHooks","afterOnCellMouseDown","_","handsontable","htOptions","innerHOT","rowToSelect","selectedRow","onBeginEditing","isCancelled","getNormalizedDate","dateString","nativeDate","getDate","getTimezoneOffset","GhostTable","injected","samples","useHeaders","rowObject","createTable","colGroup","createColGroupsCol","tr","fragment","tHead","createColumnHeadersRow","columnObject","appendColHeader","th","tBody","injectTable","d","createDocumentFragment","createColElement","sample","appendRowHeader","removeTable","isVertical","isHorizontal","tableLayout","mergeSort","merge","defaultCompareFunction","firstValue","secondValue","compareFunction","middleIndex","leftElements","rightElements","leftSize","rightSize","maxSize","size","first","DataFilter","formulaCollection","columnDataFactory","filteredData","orderStack","columnData","_getIntersectData","filterByColumn","isMatch","needles","needleRow","FormulaCollection","isMatchInFormulas","getFormulas","formulaDefinition","command","hasFormulas","clean","stack","addFormula","clearFormulas","FORMULA_NAME","inputValues","_from","_to","dateBefore","dateAfter","inputsCount","date","inputDate","diff","BaseCell","_row","rowAbsolute","_column","columnAbsolute","columnOffset","DateCalculator","year","firstWeekDay","weekSectionCount","monthList","calculateMonthData","daysInColumns","calculateWeekStructure","day","lowercaseDay","parseDate","getFullYear","month","getMonth","monthCache","resultColumn","isOnTheEdgeOfWeek","indexOfDay","monthNumber","columnNumber","startDate","endDate","startDateParsed","endDateParsed","days","fullWeeks","weekOffset","getFirstWeekDay","getMonthList","currentYear","getYear","currentMonth","firstMonthDay","getDay","daysBeforeFullWeeks","daysAfterFullWeeks","HeadersUI","indicatorContainer","indicator","emptyIndicator","expandButton","collapseButton","nestedRowsPlugin","dataManager","collapsingUI","rowHeaderWidthCache","trimRowsPlugin","rowsMapper","rowLevel","getRowLevel","getDataObject","innerDiv","innerSpan","previousIndicators","CSS_CLASSES","initialContent","cloneNode","getRowParent","parentIndex","getRowIndex","isTrimmed","levelIndicator","hasChildren","buttonsContainer","areChildrenCollapsed","deepestLevel","cache","levelCount","BottomOverlay","makeClone","cloneRoot","overlayRoot","headerPosition","finalLeft","finalBottom","bodyHeight","repositionOverlay","adjustHeaderBordersPosition","updateTrimmingContainer","adjustRootElementSize","adjustRootChildrenSize","masterHolder","overlayRootStyle","tableHeight","syncOverlayOffset","bottomEdge","newY","setScrollPosition","masterParent","secondHeaderCell","registerOverlay","BottomLeftCornerOverlay","BindRowsWithHeaders","ColumnSummary","DropdownMenu","Filters","Formulas","GanttChart","HiddenColumns","HiddenRows","NestedRows","TrimRows","inc","original","un","macrotask","Observer","MutationObserver","WebKitMutationObserver","head","flush","toggle","observe","characterData","windowNames","getWindowNames","Reflect","y","charCodeAt","span","newChar","whiteSpace","delayedResize","extendDefaults","config","el_","doObserve","CopyPasteClass","hasBeenDestroyed","refCounter","copyCallbacks","cutCallbacks","pasteCallbacks","getElementById","elDiv","elTextarea","onpaste","clipboardContents","temp","clipboardData","opacity","onKeyDownRef","isCtrlDown","isActiveElementEditable","selectNodeText","triggerCut","triggerPaste","onCut","onPaste","removeCallback","textShadow","finalTop","beyondRendered","newX","getBorder","getCorners","appear","redrawSelectionBorders","redrawAllSelectionsBorders","instanceBorders","expand","oldCoords","newCoords","renderedRows","renderedColumns","newClasses","addClassAtCoords","CELL_TYPE","DataMap","cachedLength","skipCache","latestSourceRowsCount","recursiveDuckSchema","interval","delay","onSkipLengthCache","DESTINATION_CLIPBOARD_GENERATOR","recursiveDuckColumns","lastCol","propToColCache","filteredIndex","schemaLen","currentIndex","spliceData","numberOfCreatedCols","logicRows","physicalRowsToLogical","actionWasNotCancelled","newData","filterData","logicColumns","physicalColumnsToLogical","descendingLogicColumns","isTableUniform","removedColumnsCount","colData","removed","after","rowData","continueSplicing","modifiedRowData","sliced","valueHolder","copyableLookup","physicRow","rowsToRemove","physicalCol","logicalCols","colsToRemove","maxRowsFromSettings","reValidate","stop","destination","getFn","getText","DataSource","toArray","countColumns","modifyRowData","currentRow","newRow","EditorManager","moveSelectionAfterEnter","moveSelectionUp","moveSelectionDown","moveSelectionRight","moveSelectionLeft","rangeModifier","lastKeyCode","isEditorOpened","openEditor","closeEditorAndSaveChanges","$input","$editorWrap","attr","closeEditorAndRestoreOriginalValue","onDblClick","closeEditor","dataSaved","CheckboxEditor","checkbox","click","DateEditor","defaultDateFormat","isCellEdited","parentDestroyed","destroyElements","datePicker","datePickerStyle","$datePicker","getDatePickerConfig","hideDatepicker","showDatepicker","datePickerConfig","dateStr","isMeta","_onInputFocus","setMoment","gotoToday","show","htInput","origOnSelect","onSelect","origOnClose","onClose","field","trigger","bound","reposition","DropdownEditor","MobileTextEditor","domDimensionsCache","createControls","controls","leftButton","rightButton","upButton","downButton","positionControls","valueChanged","editorContainer","cellPointer","moveHandle","inputPane","updateEditorPosition","scrollToView","hideCellPointer","selectedCell","selectedCellOffset","selectedCellWidth","currentScrollPosition","updateEditorData","prepareAndSave","touches","touch","onTouchPosition","onTouchOffset","NumericEditor","decimalDelimiter","decimal","PasswordEditor","SelectEditor","prepareOptions","optionElement","optionsToPrepare","preparedOptions","previousOptionIndex","selectedIndex","nextOptionIndex","selectStyle","jQueryWrapper","jQuery","removeData","STATE_PREFIX","PROP_PREFIX","getState","stateId","setState","stateSaver","MultiMap","map","weakMap","canBeAnArrayMapKey","canBeAWeakMapKey","isNaNSymbol","AutoColumnSize","cachedColumnHeaders","ghostTable","samplesGenerator","firstCalculation","isDblClick","onBeforeColumnResize","setSetting","onAfterLoadData","onBeforeChange","onBeforeRender","changedColumns","findColumnsWhereHeaderWasChanged","clearCache","colRange","rowRange","generateColumnSamples","addColumn","getWidths","timer","loop","calculateColumnsWidth","CALCULATION_STEP","getSyncCalculationLimit","samplingRatio","allowSampleDuplicates","setSampleCount","setAllowDuplicates","calculateAllColumnsWidth","SYNC_CALCULATION_LIMIT","colsLimit","syncLimit","defaultWidth","keepMinimum","columnTitle","physicalColumn","cachedColumnsLength","physicalIndex","isNeedRecalculate","recalculateAllColumnsWidth","ColumnSorting","sortIndicators","lastSortedColumn","sortEmptyCells","setPluginOptions","sortIndex","sortByColumn","enableObserveChangesPlugin","translateRow","untranslateRow","onAfterUpdateSettings","onAfterOnCellMouseDown","afterCreateRow","afterRemoveRow","sortBySettings","sortingSettings","loadedSortingState","loadSortingState","sortingColumn","sortingOrder","sortOrder","sortColumn","order","setSortingColumn","allowSorting","updateOrderClass","updateSortIndicator","saveSortingState","sortingState","storedState","orderClass","sortOrderClass","columnMeta","aDate","bDate","isAfter","isBefore","parsedA","parsedB","colMeta","nrOfRows","sortingEnabled","Number","POSITIVE_INFINITY","dateSort","numericSort","defaultSort","headerLink","colspan","TRs","headerLevel","isSorted","removedRows","CommentEditor","createEditor","editorStyle","getInputElement","CLASS_EDITOR_CONTAINER","textArea","CLASS_EDITOR","CLASS_INPUT","META_COMMENT","META_COMMENT_VALUE","META_STYLE","META_READONLY","Comments","contextMenuEvent","displayDelay","tempEditorDimensions","cellBelowCursor","addToContextMenu","onAfterRenderer","onAfterBeginEditing","onEditorBlur","onEditorMouseDown","onEditorMouseUp","closestCell","editorValue","comment","updateCommentMeta","setRange","setComment","forceRender","removeComment","getCommentMeta","refreshEditor","cellOffset","lastColWidth","hasVerticalScroll","hasHorizontalScroll","commentStyle","setSize","resetSize","setReadOnlyState","hasComment","metaObject","oldComment","newComment","targetIsCommentTextArea","eventCell","coordinates","isFocused","elementFromPoint","targetIsCellWithComment","currentWidth","removeCommentAtCell","currentState","defaultOptions","SEPARATOR","checkSelectionCommentsConsistency","onContextMenuAddComment","onContextMenuRemoveComment","hasProperty","readOnlyProperty","onContextMenuMakeReadOnly","CommandExecutor","commands","commonCallback","commandDescriptor","commandName","commandSplit","subCommandName","findSubCommand","subCommands","cmd","cmds","Cursor","topRelative","leftRelative","getSourceType","ItemsFactory","orderPattern","defaultOrderPattern","menuItemKey","pattern","getItems","defaultPattern","alignmentItem","stateBefore","clearColumnItem","entireRowSelection","rowSelected","columnLeftItem","onlyOneColumn","columnRightItem","readOnlyItem","atLeastOneReadOnly","redoItem","redo","undoRedo","isRedoAvailable","removeColumnItem","removeRowItem","rowAboveItem","rowBelowItem","undoItem","isUndoAvailable","CopyPastePlugin","copyPasteInstance","triggerCopy","callCopyAction","copyableRanges","callCutAction","rangedData","getRangedData","allowCuttingOut","allowCopying","copyableData","inputArray","coordsFrom","coordsTo","topLeftCorner","bottomRightCorner","areaStart","areaEnd","isSelRowAreaCoverInputValue","isSelColAreaCoverInputValue","changesLength","highestColumnIndex","change","nextChange","allowPasting","setCopyableText","finalEndRow","finalEndCol","getRangedCopyableData","ranges","dataSet","copyableRows","copyableColumns","rowSet","pluginEnabled","CustomBorders","checkEnable","getSettingIndex","insertBorderIntoSettings","prepareBorderFromCustomAdded","borderObj","createEmptyBorders","extendDefaultBorder","prepareBorderFromCustomAddedRange","rowObj","createClassName","createDefaultCustomBorder","createSingleEmptyBorder","createDefaultHtBorder","defaultBorder","customBorder","removeBordersFromDom","borderClassName","borders","removeAllBorders","setBorder","place","bordersMeta","prepareBorder","topCol","rowRight","bottomCol","rowLeft","checkSelectionBorders","atLeastOneHasBorder","metaBorders","markSelected","addBordersOptionsToContextMenu","hasBorder","CopyPaste","ManualColumnResize","MultipleSelectionHandles","currentTH","currentCol","selectedCols","newSize","startY","startWidth","startOffset","guide","pressed","dblclick","autoresizeTimeout","manualColumnWidths","initialColumnWidth","loadedManualColumnWidths","loadManualColumnWidths","onModifyColWidth","currentColumn","isDoubleClick","headerHeight","handleHeight","handleBottomPosition","checkIfColumnHeader","getTHFromTargetElement","setupHandlePosition","selectedCol","hookNewSize","clearManualSize","setManualSize","saveManualColumnWidths","selectedColsLength","setupGuidePosition","afterMouseDownTimeout","startX","refreshHandlePosition","refreshGuidePosition","hideHandleAndGuide","onMouseMove","dragged","lastSetCell","removeFromDragged","entryPosition","selectedRange","touchStartRange","getWidth","getHeight","getDirection","endTarget","targetCoords","rangeWidth","rangeHeight","rangeDirection","getCurrentRangeCoords","currentTouch","touchStartDirection","currentDirection","draggedHandle","bottomLeftCorner","topRightCorner","clonableWRAPPER","clonableARROW","wrapTdContentWithWrapper","WRAPPER","autocompleteRenderer","ARROW","acArrowListener","isListeningKeyDownEvent","isCheckboxListenerAdded","BAD_VALUE_CLASS","checkboxRenderer","createInput","labelOptions","badValue","labelText","createLabel","toggleKeys","switchOffKeys","isKeyCode","eachSelectedCheckboxCell","changeSelectedCheckboxesState","uncheckCheckbox","dataAtCell","checkboxes","onChange","isCheckboxInput","newCheckboxValue","htmlRenderer","numericRenderer","classArr","passwordRenderer","hashLength","hashSymbol","hash","textRenderer","escaped","rendererTemplate","TEMPLATE","HTMLTemplateElement","decorate","model","TableView","selectionMouseDown","originalStyle","isTextSelectionAllowed","clearTextSelection","which","originalTarget","eventX","eventY","removeAllRanges","walkontableConfig","headerRenderers","blockCalculations","activeWt","actualSelection","doNewSelection","coordsNotInSelection","rightClick","leftClick","beforeRender","calc","viewportOffset","center","lineHeight","isChildOfTableBody","isSelectedOnlyCell","rowEnd","colEnd","updateCellHeader","parentOverlay","getParentOverlay","leftOffset","topOffset","workspaceHeight","mainViewIsActive","NodeStructure","LinkedList","fast","slow","inverse","Stack","parseDelay","Interval","stopped","_then","_callback","__callback","elapsed","SamplesGenerator","dataFactory","customSampleCount","allowDuplicates","SAMPLE_COUNT","sampleCount","generateSamples","specifierRange","generateSample","specifierValue","sampledValues","needed","getSampleCount","computedKey","autocompleteValidator","originalVal","found","slen","dateValidator","dateEditor","isValidDate","isValidFormat","correctedValue","dateFromDate","dateFromMoment","isAlphanumeric","numericValidator","timeValidator","STRICT_FORMATS","timeFormat","twoDigitValue","isValidTime","bindStrategy","DEFAULT_STRATEGY","setStrategy","onModifyRowHeader","onAfterCreateRow","onBeforeRemoveRow","onAfterRemoveRow","translate","removedIndex","Loose","Strict","LooseBindStrategy","StrictBindStrategy","strategies","BindStrategy","strategy","Strategy","originLength","itemIndex","endpoints","onAfterChange","onAfterFilter","resetSetupBeforeStructureAlteration","onBeforeRowMove","resetSetupAfterStructureAlteration","onAfterRowMove","currentEndpoint","endpoint","calculateSum","calculateMinMax","countEntries","calculateAverage","customFunction","getPartialSum","cellValue","biggestDecimalPlacesCount","partake","getCellValue","decimalPlaces","partialResult","getPartialMinMax","emptyCount","countEmpty","entriesCount","visualRowIndex","getVisualRowIndex","visualColumnIndex","getVisualColumnIndex","cellClassName","forceNumeric","suppressDataTypeErrors","parseSettings","refreshAllEndpoints","refreshChangedEndpoints","Endpoints","settingsType","cellsToSetCache","fillMissingEndpointData","endpointsArray","newEndpoint","assignSetting","destinationColumn","reversedRowCoords","getAllEndpoints","destinationRow","alterRowOffset","alterColumnOffset","resetAllEndpoints","forceRefresh","beforeRenderCallback","multiplier","rowMoving","placeOfAlteration","extendEndpointRanges","recreatePhysicalRanges","clearOffsetInformation","shiftEndpointCoordinates","previousPosition","newRanges","allIndexes","newRange","offsetStartIndex","subElement","useOffset","resetEndpointValue","setEndpointValue","needToRefresh","refreshEndpoint","getEndpoint","alterColOffset","toVisual","reverseRowOffset","reverseColOffset","visualEndpointRowIndex","throwOutOfBoundsWarning","roundFloat","toFixed","BUTTON_CLASS_NAME","commandExecutor","itemsFactory","onAfterGetColHeader","DEFAULT_ITEMS","setCommonCallback","callOnPluginsReady","setPredefinedItems","onMenuAfterOpen","onMenuAfterClose","registerCommand","onTableClick","setOffset","execute","rect","headerRow","headerRowList","existingButton","onclick","ActionBarComponent","identifier","BUTTON_OK","BUTTON_CANCEL","onButtonClick","isHidden","accept","cancel","ConditionComponent","getSelectElement","onConditionSelect","onSelectUIClosed","getInputElements","onInputKeyDown","stateInfo","editedFormulaStack","currentFormulas","setCachedState","columnType","setItems","ValueComponent","getMultipleSelectElement","itemsSnapshot","availableItems","isSelectedAllValues","updateColumnState","formulaArgsChange","filteredRowsFactory","formulasStack","rowValues","_hasSummaryRow","selectedValues","dependentFormulaStacks","visibleValues","_getColumnVisibleValues","__SUMMARY_ROW","itembox","itemsBox","visibleItems","arrayContains","dropdownMenuPlugin","formulaUpdateObserver","conditionComponent","valueComponent","actionBarComponent","addConfirmationHooks","component","onActionBarSubmit","onComponentChange","getDataMapAtColumn","updateState","onBeforeDropdownMenuSetItems","onAfterDropdownMenuDefaultOptions","onAfterDropdownMenuShow","onAfterDropdownMenuHide","isFilter","untrimAll","removeFormulas","dataFilter","_createDataFilter","needToFilter","visibleVisualRows","exportAllFormulas","allowFiltering","trimmedRows","visibleVisualRowsAssertion","clearColumnSelection","updateValueComponentFormula","dataAtCol","updateStatesAtColumn","selectedColumn","restoreState","closeOptions","menuKeys","getMenuItemDescriptor","submitType","byConditionState","uncheckHiddenValues","byValueState","groupChanges","saveState","setListeningDropdownMenu","setListening","FormulaUpdateObserver","grouping","latestEditedColumnPosition","latestOrderStack","_onFormulaBeforeModify","_onFormulaBeforeClean","_onFormulaAfterClean","allFormulas","editedColumnPosition","formulasBefore","formulasAfter","visibleDataFactory","splitFormulaCollection","importAllFormulas","allRows","visibleRowsAssertion","editedFormulas","isSame","startOf","subtract","MIN_WIDTH","MIN_HEIGHT","MultipleSelectUI","searchInput","selectAllUI","href","clearAllUI","onInput","onSelectAllClick","onClearAllClick","itemsToValue","itemsBoxWrapper","selectionControl","hotInitializer","hotSettings","autoColumnSizeRevise","filtersHeight","filtersWidth","onItemsBoxBeforeKeyDown","getHotMenuWidth","getHotMenuColWidths","valueToItems","arrayAssertion","SelectUI","caption","dropdown","captionElement","onMenuSelect","onMenuClosed","openOptions","registerOperation","insertColumn","insertRow","removeColumn","operations","OPERATION_NAME","AlterManager","sheet","dataProvider","matrix","operate","visualRows","cellReferences","clearPrecedents","expModifier","updateSourceData","modifyFormula","translateTo","origRow","origColumn","startCoord","useCustomModifier","customTranslateModifier","indexOffset","removedCellRef","removeCellRefsAtRange","toRemove","cellRef","removePrecedent","getCellDependencies","CellReference","DataProvider","_coordId","row1","column1","row2","column2","getSourceDataByRange","undoRedoSnapshot","_skipRendering","setVariable","onAfterColumnSort","onAfterCreateCol","onAfterRemoveCol","onAfterSetDataAtCell","onBeforeColumnSort","onBeforeCreateCol","onBeforeCreateRow","onBeforeRemoveCol","onBeforeValidate","onBeforeValueRender","onModifyData","onSheetAfterRecalculate","getCellAt","getError","recalculate","recalculateFull","recalculateOptimized","getVariable","ioMode","hasComputedCellValue","clearChanges","oldValue","collectChanges","restore","alterManager","triggerAlter","save","prepareAlter","Matrix","isState","cellCoord","getDependencies","getTotalDependencies","deps","hasPrecedents","rowMatch","colMatch","STATE_NEED_REBUILD","STATE_NEED_FULL_REBUILD","Sheet","parser","_processingCell","_state","on","_onCallCellValue","_onCallRangeValue","_onAfterAlter","getOutOfDateCells","parseExpression","setError","isInDataRange","registerCellRef","addPrecedent","getDataByRange","UndoRedoSnapshot","rawValue","dateCalculator","monthHeadersArray","weekHeadersArray","rangeBars","rangeList","nestedHeadersPlugin","hotSource","overallWeekSectionCount","initialSettings","dataFeed","colorData","rangeBarMeta","checkDependencies","startYear","setFirstWeekDay","generateMonthHeaders","generateWeekHeaders","countWeekSections","assignGanttSettings","applyDataSource","setRangeBarColors","internalUpdateSettings","removeSourceHotHooks","deassignGanttSettings","startDateColumn","endDateColumn","additionalData","asyncUpdates","headers","areDaysBeforeFullWeeks","areDaysAfterFullWeeks","headerCount","addDaysToCache","generateHeaderSet","additionalSettings","uniformBackgroundRenderer","rowArr","dateToColumn","isValidRangeBarData","barLength","partialStart","partialEnd","colors","renderRangeBar","rangeBarCoords","getRangeBarCoordinates","rangeBarData","rangeBar","getRangeBarData","currentBar","newClassName","cacheRangeBarMeta","removeRangeBarByColumn","unrenderRangeBar","bar","originalClassName","rangeBarInfo","titleValue","barCoords","updateRangeBarData","newSettings","applyRangeBarMetaCache","GanttChartDataFeed","chartInstance","chartPlugin","sourceHooks","ongoingAsync","applyData","bindWithHotInstance","addSourceHotHooks","asyncCall","updateFromSource","asyncStart","asyncEnd","afterLoadData","onAfterSourceLoadData","afterChange","onAfterSourceChange","afterColumnSort","additionalObjectData","sourceHotRows","dataLength","dataFromSource","getDataFromSource","clearRangeBars","clearRangeList","trimRangeIfNeeded","addRangeBar","dateProps","endYear","changesByRows","currentChange","removeAllRangeBars","hideColumnItem","hiddenColumnsPlugin","hideColumn","showColumnItem","beforeHiddenColumns","afterHiddenColumns","showColumns","showColumn","hiddenInSelection","totalColumnLength","partedHiddenLength","onAfterContextMenuDefaultOptions","onAfterGetCellMeta","onBeforeSetRangeStart","onBeforeSetRangeEnd","resetCellsMeta","getLogicalColumnIndex","hideColumns","isLogicIndex","baseRenderer","indicators","copyPasteEnabled","hiddenRenderer","firstSectionHidden","containAfterHiddenColumn","containFirstVisible","pushRange","rangeStart","getNextColumn","logicalCol","tempHidden","onModifyCopyableRange","hideRowItem","hiddenRowsPlugin","hideRow","showRowItem","beforeHiddenRows","afterHiddenRows","showRows","showRow","totalRowsLength","lastSelectedRow","onAfterGetRowHeader","onModifyRowHeight","onBeforeSetRangeStartOnly","getLogicalRowIndex","hideRows","lastPossibleIndex","getNextRow","ContextMenu","DataManager","parentReference","levels","nodeInfo","cacheNode","__children","readCount","neededIndex","neededObject","rootLevel","readTreeNodes","fakeParent","mockNode","fakeNode","rootNodeMock","countChildren","getRowObjectParent","getRowObjectLevel","functionalParent","mockParent","rewriteCache","newRowIndex","globalIndex","where","translatedIndex","translateTrimmedRow","indexWithinParent","getRowIndexWithinParent","addChildAtIndex","rowObjects","detachFromParent","childRowIndex","grandparent","grandparentRowIndex","movedElementRowIndex","elementsToRemove","ind","tempParent","previousElement","newRowParent","targetIsParent","isParent","fromParent","indexInFromParent","toParent","previousToTargetParent","indexInToParent","elemToMove","rowOfMeta","bindRowsWithHeadersPlugin","headersUI","changeSelection","movedToFirstChild","movedToCollapsed","nestedRows","manualRowMovePlugin","contextMenuUI","onModifyRowData","onModifySourceData","onModifySourceLength","onBeforeDataSplice","onBeforeDataFilter","onBeforeOnCellMouseDown","onModifyRemovedAmount","onBeforeAddChild","onAfterAddChild","onBeforeDetachChild","onAfterDetachChild","columnValues","rowsLen","translatedStartIndexes","translatedTargetIndex","allowMove","sameParent","collapsedRowsStash","stash","shiftStash","moveRow","movingDown","moveCellMeta","lastColIndex","applyStash","parentObject","toggleState","countAllRows","realLogicRows","trimStash","appendOptions","updateRowHeaderWidth","lastParents","childrenCount","isChild","translated","currentDataObj","checkboxColumnRenderer","middleSep","createIconWrapper","iconWrapper","flag","childrenRow","childrenIndex","filterFlag","createIcon","isLast","isMiddle","CollapsingUI","collapsedRows","lastCollapsedRows","expandMultipleChildren","elementIndex","collapseMultipleChildren","realElementIndex","indexOfElement","doTrimming","rowsToCollapse","rowsToTrim","collapseRows","renderAndAdjust","collapseChildren","recursive","rowIndexes","collapseChildRows","elemIndex","expandRows","rowsToUntrim","expandChildRows","untrimRows","isAnyParentCollapsed","rowsToExpand","childIndex","untrimRow","expandChildren","parentsToCollapse","currentLevelParents","nextLevelParents","parentsToExpand","allCollapsed","ContextMenuUI","row_above","addSibling","row_below","newEntries","translatedRowIndex","addChild","modifyRowInsertingOptions","RowsMapper","onModifyRow","onUnmodifyRow"],"mappings":"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","file":"handsontable.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"moment\"), require(\"hot-formula-parser\"), require(\"numbro\"), require(\"pikaday\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Handsontable\", [\"moment\", \"hot-formula-parser\", \"numbro\", \"pikaday\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Handsontable\"] = factory(require(\"moment\"), require(\"hot-formula-parser\"), require(\"numbro\"), require(\"pikaday\"));\n\telse\n\t\troot[\"Handsontable\"] = factory(root[\"moment\"], root[\"formulaParser\"], root[\"numbro\"], root[\"Pikaday\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_59__, __WEBPACK_EXTERNAL_MODULE_143__, __WEBPACK_EXTERNAL_MODULE_357__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 288);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fc6bea3b5518a8df4eae","export function to2dArray(arr) {\n  var i = 0,\n    ilen = arr.length;\n\n  while (i < ilen) {\n    arr[i] = [arr[i]];\n    i++;\n  }\n}\n\nexport function extendArray(arr, extension) {\n  var i = 0,\n    ilen = extension.length;\n\n  while (i < ilen) {\n    arr.push(extension[i]);\n    i++;\n  }\n}\n\nexport function pivot(arr) {\n  var pivotedArr = [];\n\n  if (!arr || arr.length === 0 || !arr[0] || arr[0].length === 0) {\n    return pivotedArr;\n  }\n\n  var rowCount = arr.length;\n  var colCount = arr[0].length;\n\n  for (var i = 0; i < rowCount; i++) {\n    for (var j = 0; j < colCount; j++) {\n      if (!pivotedArr[j]) {\n        pivotedArr[j] = [];\n      }\n\n      pivotedArr[j][i] = arr[i][j];\n    }\n  }\n\n  return pivotedArr;\n}\n\n/**\n * A specialized version of `.reduce` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * {@link https://github.com/lodash/lodash/blob/master/lodash.js}\n *\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {Boolean} [initFromArray] Specify using the first element of `array` as the initial value.\n * @returns {*} Returns the accumulated value.\n */\nexport function arrayReduce(array, iteratee, accumulator, initFromArray) {\n  let index = -1,\n    length = array.length;\n\n  if (initFromArray && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n\n  return accumulator;\n}\n\n/**\n * A specialized version of `.filter` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * {@link https://github.com/lodash/lodash/blob/master/lodash.js}\n *\n * @param {Array} array The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nexport function arrayFilter(array, predicate) {\n  let index = -1,\n    length = array.length,\n    resIndex = -1,\n    result = [];\n\n  while (++index < length) {\n    let value = array[index];\n\n    if (predicate(value, index, array)) {\n      result[++resIndex] = value;\n    }\n  }\n\n  return result;\n}\n\n/**\n * A specialized version of `.map` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nexport function arrayMap(array, iteratee) {\n  let index = -1,\n    length = array.length,\n    resIndex = -1,\n    result = [];\n\n  while (++index < length) {\n    let value = array[index];\n\n    result[++resIndex] = iteratee(value, index, array);\n  }\n\n  return result;\n}\n\n/**\n * A specialized version of `.forEach` for arrays without support for callback\n * shorthands and `this` binding.\n *\n * {@link https://github.com/lodash/lodash/blob/master/lodash.js}\n *\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nexport function arrayEach(array, iteratee) {\n  let index = -1,\n    length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n\n  return array;\n}\n\n/**\n * Calculate sum value for each item of the array.\n *\n * @param {Array} array The array to process.\n * @returns {Number} Returns calculated sum value.\n */\nexport function arraySum(array) {\n  return arrayReduce(array, (a, b) => (a + b), 0);\n}\n\n/**\n * Returns the highest value from an array. Can be array of numbers or array of strings.\n * NOTICE: Mixed values is not supported.\n *\n * @param {Array} array The array to process.\n * @returns {Number} Returns the highest value from an array.\n */\nexport function arrayMax(array) {\n  return arrayReduce(array, (a, b) => (a > b ? a : b), Array.isArray(array) ? array[0] : void 0);\n}\n\n/**\n * Returns the lowest value from an array. Can be array of numbers or array of strings.\n * NOTICE: Mixed values is not supported.\n *\n * @param {Array} array The array to process.\n * @returns {Number} Returns the lowest value from an array.\n */\nexport function arrayMin(array) {\n  return arrayReduce(array, (a, b) => (a < b ? a : b), Array.isArray(array) ? array[0] : void 0);\n}\n\n/**\n * Calculate average value for each item of the array.\n *\n * @param {Array} array The array to process.\n * @returns {Number} Returns calculated average value.\n */\nexport function arrayAvg(array) {\n  if (!array.length) {\n    return 0;\n  }\n\n  return arraySum(array) / array.length;\n}\n\n/**\n * Flatten multidimensional array.\n *\n * @param {Array} array Array of Arrays\n * @returns {Array}\n */\nexport function arrayFlatten(array) {\n  return arrayReduce(array, (initial, value) => initial.concat(Array.isArray(value) ? arrayFlatten(value) : value), []);\n}\n\n/**\n * Unique values in the array.\n *\n * @param {Array} array The array to process.\n * @returns {Array}\n */\nexport function arrayUnique(array) {\n  let unique = [];\n\n  arrayEach(array, (value) => {\n    if (unique.indexOf(value) === -1) {\n      unique.push(value);\n    }\n  });\n\n  return unique;\n}\n/**\n * clone array\n * @param array\n * @returns {Array}\n */\nexport function arrayCopy(array) {\n  let copy = [];\n\n  arrayEach(array, (value) => {\n    var obj = {};\n  for (var key in value){\n    obj[key] = value[key];\n  }\n  copy.push(obj);\n});\n\n  return copy;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/array.js","import {isIE8, isIE9, isSafari} from '../browser';\nimport {hasCaptionProblem} from '../feature';\n\n/**\n * Get the parent of the specified node in the DOM tree.\n *\n * @param  {HTMLElement} element Element from which traversing is started.\n * @param  {Number} [level=0] Traversing deep level.\n * @return {HTMLElement|null}\n */\nexport function getParent(element, level = 0) {\n  let iteration = -1;\n  let parent = null;\n\n  while (element != null) {\n    if (iteration === level) {\n      parent = element;\n      break;\n    }\n\n    if (element.host && element.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      element = element.host;\n\n    } else {\n      iteration++;\n      element = element.parentNode;\n    }\n  }\n\n  return parent;\n}\n\n/**\n * Goes up the DOM tree (including given element) until it finds an element that matches the nodes or nodes name.\n * This method goes up through web components.\n *\n * @param {HTMLElement} element Element from which traversing is started\n * @param {Array} nodes Array of elements or Array of elements name\n * @param {HTMLElement} [until]\n * @returns {HTMLElement|null}\n */\nexport function closest(element, nodes, until) {\n  while (element != null && element !== until) {\n    if (element.nodeType === Node.ELEMENT_NODE && (nodes.indexOf(element.nodeName) > -1 || nodes.indexOf(element) > -1)) {\n      return element;\n    }\n    if (element.host && element.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      element = element.host;\n\n    } else {\n      element = element.parentNode;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Goes \"down\" the DOM tree (including given element) until it finds an element that matches the nodes or nodes name.\n *\n * @param {HTMLElement} element Element from which traversing is started\n * @param {Array} nodes Array of elements or Array of elements name\n * @param {HTMLElement} [until]\n * @returns {HTMLElement|null}\n */\nexport function closestDown(element, nodes, until) {\n  const matched = [];\n\n  while (element) {\n    element = closest(element, nodes, until);\n\n    if (!element || (until && !until.contains(element))) {\n      break;\n    }\n    matched.push(element);\n\n    if (element.host && element.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      element = element.host;\n\n    } else {\n      element = element.parentNode;\n    }\n  }\n  const length = matched.length;\n\n  return length ? matched[length - 1] : null;\n}\n\n/**\n * Goes up the DOM tree and checks if element is child of another element.\n *\n * @param child Child element\n * @param {Object|String} parent Parent element OR selector of the parent element.\n *                               If string provided, function returns `true` for the first occurrence of element with that class.\n * @returns {Boolean}\n */\nexport function isChildOf(child, parent) {\n  var node = child.parentNode;\n  var queriedParents = [];\n\n  if (typeof parent === 'string') {\n    queriedParents = Array.prototype.slice.call(document.querySelectorAll(parent), 0);\n  } else {\n    queriedParents.push(parent);\n  }\n\n  while (node != null) {\n    if (queriedParents.indexOf(node) > -1) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n\n  return false;\n}\n\n/**\n * Check if an element is part of `hot-table` web component.\n *\n * @param {Element} element\n * @returns {Boolean}\n */\nexport function isChildOfWebComponentTable(element) {\n  var hotTableName = 'hot-table',\n    result = false,\n    parentNode;\n\n  parentNode = polymerWrap(element);\n\n  function isHotTable(element) {\n    return element.nodeType === Node.ELEMENT_NODE && element.nodeName === hotTableName.toUpperCase();\n  }\n\n  while (parentNode != null) {\n    if (isHotTable(parentNode)) {\n      result = true;\n      break;\n    } else if (parentNode.host && parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      result = isHotTable(parentNode.host);\n\n      if (result) {\n        break;\n      }\n      parentNode = parentNode.host;\n    }\n    parentNode = parentNode.parentNode;\n  }\n\n  return result;\n}\n\n/**\n * Wrap element into polymer/webcomponent container if exists\n *\n * @param element\n * @returns {*}\n */\nexport function polymerWrap(element) {\n  /* global Polymer */\n  return typeof Polymer !== 'undefined' && typeof wrap === 'function' ? wrap(element) : element;\n}\n\n/**\n * Unwrap element from polymer/webcomponent container if exists\n *\n * @param element\n * @returns {*}\n */\nexport function polymerUnwrap(element) {\n  /* global Polymer */\n  return typeof Polymer !== 'undefined' && typeof unwrap === 'function' ? unwrap(element) : element;\n}\n\n/**\n * Counts index of element within its parent\n * WARNING: for performance reasons, assumes there are only element nodes (no text nodes). This is true for Walkotnable\n * Otherwise would need to check for nodeType or use previousElementSibling\n *\n * @see http://jsperf.com/sibling-index/10\n * @param {Element} element\n * @return {Number}\n */\nexport function index(element) {\n  var i = 0;\n\n  if (element.previousSibling) {\n    /* eslint-disable no-cond-assign */\n    while (element = element.previousSibling) {\n      ++i;\n    }\n  }\n\n  return i;\n}\n\n/**\n * Check if the provided overlay contains the provided element\n *\n * @param {String} overlay\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nexport function overlayContainsElement(overlayType, element) {\n  let overlayElement = document.querySelector(`.ht_clone_${overlayType}`);\n  return overlayElement ? overlayElement.contains(element) : null;\n}\n\nvar classListSupport = !!document.documentElement.classList;\nvar _hasClass,\n  _addClass,\n  _removeClass;\n\nfunction filterEmptyClassNames(classNames) {\n  var len = 0,\n    result = [];\n\n  if (!classNames || !classNames.length) {\n    return result;\n  }\n  while (classNames[len]) {\n    result.push(classNames[len]);\n    len++;\n  }\n\n  return result;\n}\n\nif (classListSupport) {\n  var isSupportMultipleClassesArg = (function() {\n    var element = document.createElement('div');\n\n    element.classList.add('test', 'test2');\n\n    return element.classList.contains('test2');\n  }());\n\n  _hasClass = function _hasClass(element, className) {\n    if (className === '') {\n      return false;\n    }\n\n    return element.classList.contains(className);\n  };\n\n  _addClass = function _addClass(element, className) {\n    var len = 0;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n    className = filterEmptyClassNames(className);\n\n    if (isSupportMultipleClassesArg) {\n      element.classList.add.apply(element.classList, className);\n\n    } else {\n      while (className && className[len]) {\n        element.classList.add(className[len]);\n        len++;\n      }\n    }\n  };\n\n  _removeClass = function _removeClass(element, className) {\n    var len = 0;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n    className = filterEmptyClassNames(className);\n\n    if (isSupportMultipleClassesArg) {\n      element.classList.remove.apply(element.classList, className);\n\n    } else {\n      while (className && className[len]) {\n        element.classList.remove(className[len]);\n        len++;\n      }\n    }\n  };\n\n} else {\n  var createClassNameRegExp = function createClassNameRegExp(className) {\n    return new RegExp(`(\\\\s|^)${className}(\\\\s|$)`);\n  };\n\n  _hasClass = function _hasClass(element, className) {\n    // http://snipplr.com/view/3561/addclass-removeclass-hasclass/\n    return !!element.className.match(createClassNameRegExp(className));\n  };\n\n  _addClass = function _addClass(element, className) {\n    var len = 0,\n      _className = element.className;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n    if (_className === '') {\n      _className = className.join(' ');\n\n    } else {\n      while (className && className[len]) {\n        if (!createClassNameRegExp(className[len]).test(_className)) {\n          _className += ` ${className[len]}`;\n        }\n        len++;\n      }\n    }\n    element.className = _className;\n  };\n\n  _removeClass = function _removeClass(element, className) {\n    var len = 0,\n      _className = element.className;\n\n    if (typeof className === 'string') {\n      className = className.split(' ');\n    }\n    while (className && className[len]) {\n      // String.prototype.trim is defined in polyfill.js\n      _className = _className.replace(createClassNameRegExp(className[len]), ' ').trim();\n      len++;\n    }\n    if (element.className !== _className) {\n      element.className = _className;\n    }\n  };\n}\n\n/**\n * Checks if element has class name\n *\n * @param {HTMLElement} element\n * @param {String} className Class name to check\n * @returns {Boolean}\n */\nexport function hasClass(element, className) {\n  return _hasClass(element, className);\n}\n\n/**\n * Add class name to an element\n *\n * @param {HTMLElement} element\n * @param {String|Array} className Class name as string or array of strings\n */\nexport function addClass(element, className) {\n  return _addClass(element, className);\n}\n\n/**\n * Remove class name from an element\n *\n * @param {HTMLElement} element\n * @param {String|Array} className Class name as string or array of strings\n */\nexport function removeClass(element, className) {\n  return _removeClass(element, className);\n}\n\nexport function removeTextNodes(element, parent) {\n  if (element.nodeType === 3) {\n    parent.removeChild(element); // bye text nodes!\n\n  } else if (['TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TR'].indexOf(element.nodeName) > -1) {\n    var childs = element.childNodes;\n    for (var i = childs.length - 1; i >= 0; i--) {\n      removeTextNodes(childs[i], element);\n    }\n  }\n}\n\n/**\n * Remove childs function\n * WARNING - this doesn't unload events and data attached by jQuery\n * http://jsperf.com/jquery-html-vs-empty-vs-innerhtml/9\n * http://jsperf.com/jquery-html-vs-empty-vs-innerhtml/11 - no siginificant improvement with Chrome remove() method\n *\n * @param element\n * @returns {void}\n */\n//\nexport function empty(element) {\n  var child;\n  /* eslint-disable no-cond-assign */\n  while (child = element.lastChild) {\n    element.removeChild(child);\n  }\n}\n\nexport const HTML_CHARACTERS = /(<(.*)>|&(.*);)/;\n\n/**\n * Insert content into element trying avoid innerHTML method.\n * @return {void}\n */\nexport function fastInnerHTML(element, content) {\n  if (HTML_CHARACTERS.test(content)) {\n    element.innerHTML = content;\n  } else {\n    fastInnerText(element, content);\n  }\n}\n\n/**\n * Insert text content into element\n * @return {void}\n */\n\nvar textContextSupport = !!document.createTextNode('test').textContent;\n\nexport function fastInnerText(element, content) {\n  var child = element.firstChild;\n\n  if (child && child.nodeType === 3 && child.nextSibling === null) {\n    // fast lane - replace existing text node\n\n    if (textContextSupport) {\n      // http://jsperf.com/replace-text-vs-reuse\n      child.textContent = content;\n    } else {\n      // http://jsperf.com/replace-text-vs-reuse\n      child.data = content;\n    }\n  } else {\n    // slow lane - empty element and insert a text node\n    empty(element);\n    element.appendChild(document.createTextNode(content));\n  }\n}\n\n/**\n * Returns true if element is attached to the DOM and visible, false otherwise\n * @param elem\n * @returns {boolean}\n */\nexport function isVisible(elem) {\n  var next = elem;\n\n  while (polymerUnwrap(next) !== document.documentElement) { // until <html> reached\n    if (next === null) { // parent detached from DOM\n      return false;\n    } else if (next.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      if (next.host) { // this is Web Components Shadow DOM\n        // see: http://w3c.github.io/webcomponents/spec/shadow/#encapsulation\n        // according to spec, should be if (next.ownerDocument !== window.document), but that doesn't work yet\n        if (next.host.impl) { // Chrome 33.0.1723.0 canary (2013-11-29) Web Platform features disabled\n          return isVisible(next.host.impl);\n\n        } else if (next.host) { // Chrome 33.0.1723.0 canary (2013-11-29) Web Platform features enabled\n          return isVisible(next.host);\n\n        }\n        throw new Error('Lost in Web Components world');\n\n      } else {\n        return false; // this is a node detached from document in IE8\n      }\n    } else if (next.style.display === 'none') {\n      return false;\n    }\n    next = next.parentNode;\n  }\n\n  return true;\n}\n\n/**\n * Returns elements top and left offset relative to the document. Function is not compatible with jQuery offset.\n *\n * @param {HTMLElement} elem\n * @return {Object} Returns object with `top` and `left` props\n */\nexport function offset(elem) {\n  var offsetLeft,\n    offsetTop,\n    lastElem,\n    docElem,\n    box;\n\n  docElem = document.documentElement;\n\n  if (hasCaptionProblem() && elem.firstChild && elem.firstChild.nodeName === 'CAPTION') {\n    // fixes problem with Firefox ignoring <caption> in TABLE offset (see also export outerHeight)\n    // http://jsperf.com/offset-vs-getboundingclientrect/8\n    box = elem.getBoundingClientRect();\n\n    return {\n      top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),\n      left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)\n    };\n  }\n  offsetLeft = elem.offsetLeft;\n  offsetTop = elem.offsetTop;\n  lastElem = elem;\n\n  /* eslint-disable no-cond-assign */\n  while (elem = elem.offsetParent) {\n    // from my observation, document.body always has scrollLeft/scrollTop == 0\n    if (elem === document.body) {\n      break;\n    }\n    offsetLeft += elem.offsetLeft;\n    offsetTop += elem.offsetTop;\n    lastElem = elem;\n  }\n\n  // slow - http://jsperf.com/offset-vs-getboundingclientrect/6\n  if (lastElem && lastElem.style.position === 'fixed') {\n    // if(lastElem !== document.body) { //faster but does gives false positive in Firefox\n    offsetLeft += window.pageXOffset || docElem.scrollLeft;\n    offsetTop += window.pageYOffset || docElem.scrollTop;\n  }\n\n  return {\n    left: offsetLeft,\n    top: offsetTop\n  };\n}\n\n/**\n * Returns the document's scrollTop property.\n *\n * @returns {Number}\n */\nexport function getWindowScrollTop() {\n  var res = window.scrollY;\n\n  if (res === void 0) { // IE8-11\n    res = document.documentElement.scrollTop;\n  }\n\n  return res;\n}\n\n/**\n * Returns the document's scrollLeft property.\n *\n * @returns {Number}\n */\nexport function getWindowScrollLeft() {\n  var res = window.scrollX;\n\n  if (res === void 0) { // IE8-11\n    res = document.documentElement.scrollLeft;\n  }\n\n  return res;\n}\n\n/**\n * Returns the provided element's scrollTop property.\n *\n * @param element\n * @returns {Number}\n */\nexport function getScrollTop(element) {\n  if (element === window) {\n    return getWindowScrollTop();\n  }\n  return element.scrollTop;\n\n}\n\n/**\n * Returns the provided element's scrollLeft property.\n *\n * @param element\n * @returns {Number}\n */\nexport function getScrollLeft(element) {\n  if (element === window) {\n    return getWindowScrollLeft();\n  }\n  return element.scrollLeft;\n}\n\n/**\n * Returns a DOM element responsible for scrolling of the provided element.\n *\n * @param {HTMLElement} element\n * @returns {HTMLElement} Element's scrollable parent\n */\nexport function getScrollableElement(element) {\n  var el = element.parentNode,\n    props = ['auto', 'scroll'],\n    overflow,\n    overflowX,\n    overflowY,\n    computedStyle = '',\n    computedOverflow = '',\n    computedOverflowY = '',\n    computedOverflowX = '';\n\n  while (el && el.style && document.body !== el) {\n    overflow = el.style.overflow;\n    overflowX = el.style.overflowX;\n    overflowY = el.style.overflowY;\n\n    if (overflow == 'scroll' || overflowX == 'scroll' || overflowY == 'scroll') {\n      return el;\n\n    } else if (window.getComputedStyle) {\n      computedStyle = window.getComputedStyle(el);\n      computedOverflow = computedStyle.getPropertyValue('overflow');\n      computedOverflowY = computedStyle.getPropertyValue('overflow-y');\n      computedOverflowX = computedStyle.getPropertyValue('overflow-x');\n\n      if (computedOverflow === 'scroll' || computedOverflowX === 'scroll' || computedOverflowY === 'scroll') {\n        return el;\n      }\n    }\n\n    if (el.clientHeight <= el.scrollHeight && (props.indexOf(overflowY) !== -1 || props.indexOf(overflow) !== -1 ||\n        props.indexOf(computedOverflow) !== -1 || props.indexOf(computedOverflowY) !== -1)) {\n      return el;\n    }\n    if (el.clientWidth <= el.scrollWidth && (props.indexOf(overflowX) !== -1 || props.indexOf(overflow) !== -1 ||\n        props.indexOf(computedOverflow) !== -1 || props.indexOf(computedOverflowX) !== -1)) {\n      return el;\n    }\n    el = el.parentNode;\n  }\n\n  return window;\n}\n\n/**\n * Returns a DOM element responsible for trimming the provided element.\n *\n * @param {HTMLElement} base Base element\n * @returns {HTMLElement} Base element's trimming parent\n */\nexport function getTrimmingContainer(base) {\n  var el = base.parentNode;\n\n  while (el && el.style && document.body !== el) {\n    if (el.style.overflow !== 'visible' && el.style.overflow !== '') {\n      return el;\n\n    } else if (window.getComputedStyle) {\n      var computedStyle = window.getComputedStyle(el);\n\n      if (computedStyle.getPropertyValue('overflow') !== 'visible' && computedStyle.getPropertyValue('overflow') !== '') {\n        return el;\n      }\n    }\n\n    el = el.parentNode;\n  }\n\n  return window;\n}\n\n/**\n * Returns a style property for the provided element. (Be it an inline or external style).\n *\n * @param {HTMLElement} element\n * @param {String} prop Wanted property\n * @returns {String|undefined} Element's style property\n */\nexport function getStyle(element, prop) {\n  /* eslint-disable */\n  if (!element) {\n    return;\n\n  } else if (element === window) {\n    if (prop === 'width') {\n      return window.innerWidth + 'px';\n\n    } else if (prop === 'height') {\n      return window.innerHeight + 'px';\n    }\n\n    return;\n  }\n\n  var\n    styleProp = element.style[prop],\n    computedStyle;\n\n  if (styleProp !== '' && styleProp !== void 0) {\n    return styleProp;\n\n  } else {\n    computedStyle = getComputedStyle(element);\n\n    if (computedStyle[prop] !== '' && computedStyle[prop] !== void 0) {\n      return computedStyle[prop];\n    }\n  }\n}\n\n/**\n * Returns a computed style object for the provided element. (Needed if style is declared in external stylesheet).\n *\n * @param element\n * @returns {IEElementStyle|CssStyle} Elements computed style object\n */\nexport function getComputedStyle(element) {\n  return element.currentStyle || document.defaultView.getComputedStyle(element);\n}\n\n/**\n * Returns the element's outer width.\n *\n * @param element\n * @returns {number} Element's outer width\n */\nexport function outerWidth(element) {\n  return element.offsetWidth;\n}\n\n/**\n * Returns the element's outer height\n *\n * @param elem\n * @returns {number} Element's outer height\n */\nexport function outerHeight(elem) {\n  if (hasCaptionProblem() && elem.firstChild && elem.firstChild.nodeName === 'CAPTION') {\n    // fixes problem with Firefox ignoring <caption> in TABLE.offsetHeight\n    // jQuery (1.10.1) still has this unsolved\n    // may be better to just switch to getBoundingClientRect\n    // http://bililite.com/blog/2009/03/27/finding-the-size-of-a-table/\n    // http://lists.w3.org/Archives/Public/www-style/2009Oct/0089.html\n    // http://bugs.jquery.com/ticket/2196\n    // http://lists.w3.org/Archives/Public/www-style/2009Oct/0140.html#start140\n    return elem.offsetHeight + elem.firstChild.offsetHeight;\n  }\n\n  return elem.offsetHeight;\n}\n\n/**\n * Returns the element's inner height.\n *\n * @param element\n * @returns {number} Element's inner height\n */\nexport function innerHeight(element) {\n  return element.clientHeight || element.innerHeight;\n}\n\n/**\n * Returns the element's inner width.\n *\n * @param element\n * @returns {number} Element's inner width\n */\nexport function innerWidth(element) {\n  return element.clientWidth || element.innerWidth;\n}\n\nexport function addEvent(element, event, callback) {\n  if (window.addEventListener) {\n    element.addEventListener(event, callback, false);\n  } else {\n    element.attachEvent('on' + event, callback);\n  }\n}\n\nexport function removeEvent(element, event, callback) {\n  if (window.removeEventListener) {\n    element.removeEventListener(event, callback, false);\n  } else {\n    element.detachEvent('on' + event, callback);\n  }\n}\n\n/**\n * Returns caret position in text input\n *\n * @author http://stackoverflow.com/questions/263743/how-to-get-caret-position-in-textarea\n * @return {Number}\n */\nexport function getCaretPosition(el) {\n  if (el.selectionStart) {\n    return el.selectionStart;\n\n  } else if (document.selection) { // IE8\n    el.focus();\n\n    let r = document.selection.createRange();\n\n    if (r == null) {\n      return 0;\n    }\n    let re = el.createTextRange();\n    let rc = re.duplicate();\n\n    re.moveToBookmark(r.getBookmark());\n    rc.setEndPoint('EndToStart', re);\n\n    return rc.text.length;\n  }\n\n  return 0;\n}\n\n/**\n * Returns end of the selection in text input\n *\n * @return {Number}\n */\nexport function getSelectionEndPosition(el) {\n  if (el.selectionEnd) {\n    return el.selectionEnd;\n\n  } else if (document.selection) { // IE8\n    let r = document.selection.createRange();\n\n    if (r == null) {\n      return 0;\n    }\n    let re = el.createTextRange();\n\n    return re.text.indexOf(r.text) + r.text.length;\n  }\n\n  return 0;\n}\n\n/**\n * Returns text under selection.\n *\n * @returns {String}\n */\nexport function getSelectionText() {\n  let text = '';\n\n  if (window.getSelection) {\n    text = window.getSelection().toString();\n  } else if (document.selection && document.selection.type !== 'Control') {\n    text = document.selection.createRange().text;\n  }\n\n  return text;\n}\n\n/**\n * Sets caret position in text input.\n *\n * @author http://blog.vishalon.net/index.php/javascript-getting-and-setting-caret-position-in-textarea/\n * @param {Element} element\n * @param {Number} pos\n * @param {Number} endPos\n */\nexport function setCaretPosition(element, pos, endPos) {\n  if (endPos === void 0) {\n    endPos = pos;\n  }\n  if (element.setSelectionRange) {\n    element.focus();\n\n    try {\n      element.setSelectionRange(pos, endPos);\n    } catch (err) {\n      var elementParent = element.parentNode;\n      var parentDisplayValue = elementParent.style.display;\n      elementParent.style.display = 'block';\n      element.setSelectionRange(pos, endPos);\n      elementParent.style.display = parentDisplayValue;\n    }\n  } else if (element.createTextRange) { // IE8\n    var range = element.createTextRange();\n    range.collapse(true);\n    range.moveEnd('character', endPos);\n    range.moveStart('character', pos);\n    range.select();\n  }\n}\n\nvar cachedScrollbarWidth;\n\n// http://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes\nfunction walkontableCalculateScrollbarWidth() {\n  var inner = document.createElement('div');\n  inner.style.height = '200px';\n  inner.style.width = '100%';\n\n  var outer = document.createElement('div');\n  outer.style.boxSizing = 'content-box';\n  outer.style.height = '150px';\n  outer.style.left = '0px';\n  outer.style.overflow = 'hidden';\n  outer.style.position = 'absolute';\n  outer.style.top = '0px';\n  outer.style.width = '200px';\n  outer.style.visibility = 'hidden';\n  outer.appendChild(inner);\n\n  (document.body || document.documentElement).appendChild(outer);\n  var w1 = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  var w2 = inner.offsetWidth;\n  if (w1 == w2) {\n    w2 = outer.clientWidth;\n  }\n\n  (document.body || document.documentElement).removeChild(outer);\n\n  return (w1 - w2);\n}\n\n/**\n * Returns the computed width of the native browser scroll bar.\n *\n * @return {Number} width\n */\nexport function getScrollbarWidth() {\n  if (cachedScrollbarWidth === void 0) {\n    cachedScrollbarWidth = walkontableCalculateScrollbarWidth();\n  }\n\n  return cachedScrollbarWidth;\n}\n\nexport function getScrollbarWidth2() {\n  return walkontableCalculateScrollbarWidth();\n}\n\n/**\n * Checks if the provided element has a vertical scrollbar.\n *\n * @param {HTMLElement} element\n * @returns {Boolean}\n */\nexport function hasVerticalScrollbar(element) {\n  return element.offsetWidth !== element.clientWidth;\n}\n\n/**\n * Checks if the provided element has a vertical scrollbar.\n *\n * @param {HTMLElement} element\n * @returns {Boolean}\n */\nexport function hasHorizontalScrollbar(element) {\n  return element.offsetHeight !== element.clientHeight;\n}\n\n/**\n * Sets overlay position depending on it's type and used browser\n */\nexport function setOverlayPosition(overlayElem, left, top) {\n  if (isIE8() || isIE9()) {\n    overlayElem.style.top = top;\n    overlayElem.style.left = left;\n  } else if (isSafari()) {\n    overlayElem.style['-webkit-transform'] = 'translate3d(' + left + ',' + top + ',0)';\n  } else {\n    overlayElem.style.transform = 'translate3d(' + left + ',' + top + ',0)';\n  }\n}\n\nexport function getCssTransform(element) {\n  var transform;\n\n  if (element.style.transform && (transform = element.style.transform) !== '') {\n    return ['transform', transform];\n\n  } else if (element.style['-webkit-transform'] && (transform = element.style['-webkit-transform']) !== '') {\n\n    return ['-webkit-transform', transform];\n  }\n\n  return -1;\n}\n\nexport function resetCssTransform(element) {\n  if (element.style.transform && element.style.transform !== '') {\n    element.style.transform = '';\n  } else if (element.style['-webkit-transform'] && element.style['-webkit-transform'] !== '') {\n    element.style['-webkit-transform'] = '';\n  }\n}\n\n/**\n * Determines if the given DOM element is an input field.\n * Notice: By 'input' we mean input, textarea and select nodes\n *\n * @param {HTMLElement} element - DOM element\n * @returns {Boolean}\n */\nexport function isInput(element) {\n  var inputs = ['INPUT', 'SELECT', 'TEXTAREA'];\n\n  return element && (inputs.indexOf(element.nodeName) > -1 || element.contentEditable === 'true');\n}\n\n/**\n * Determines if the given DOM element is an input field placed OUTSIDE of HOT.\n * Notice: By 'input' we mean input, textarea and select nodes\n *\n * @param {HTMLElement} element - DOM element\n * @returns {Boolean}\n */\nexport function isOutsideInput(element) {\n  return isInput(element) && element.className.indexOf('handsontableInput') == -1 && element.className.indexOf('copyPaste') == -1;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/dom/element.js","import {arrayEach} from './array';\n\n/**\n * Generate schema for passed object.\n *\n * @param {Array|Object} object\n * @returns {Array|Object}\n */\nexport function duckSchema(object) {\n  var schema;\n\n  if (Array.isArray(object)) {\n    schema = [];\n  } else {\n    schema = {};\n\n    objectEach(object, (value, key) => {\n      if (key === '__children') {\n        return;\n      }\n\n      if (value && typeof value === 'object' && !Array.isArray(value)) {\n        schema[key] = duckSchema(value);\n\n      } else if (Array.isArray(value)) {\n        if (value.length && typeof value[0] === 'object' && !Array.isArray(value[0])) {\n          schema[key] = [duckSchema(value[0])];\n        } else {\n          schema[key] = [];\n        }\n\n      } else {\n        schema[key] = null;\n      }\n    });\n  }\n\n  return schema;\n}\n\n/**\n * Inherit without without calling parent constructor, and setting `Child.prototype.constructor` to `Child` instead of `Parent`.\n * Creates temporary dummy function to call it as constructor.\n * Described in ticket: https://github.com/handsontable/handsontable/pull/516\n *\n * @param  {Object} Child  child class\n * @param  {Object} Parent parent class\n * @return {Object}        extended Child\n */\nexport function inherit(Child, Parent) {\n  Parent.prototype.constructor = Parent;\n  Child.prototype = new Parent();\n  Child.prototype.constructor = Child;\n\n  return Child;\n}\n\n/**\n * Perform shallow extend of a target object with extension's own properties.\n *\n * @param {Object} target An object that will receive the new properties.\n * @param {Object} extension An object containing additional properties to merge into the target.\n */\nexport function extend(target, extension) {\n  objectEach(extension, (value, key) => {\n    target[key] = value;\n  });\n\n  return target;\n}\n\n/**\n * Perform deep extend of a target object with extension's own properties.\n *\n * @param {Object} target An object that will receive the new properties.\n * @param {Object} extension An object containing additional properties to merge into the target.\n */\nexport function deepExtend(target, extension) {\n  objectEach(extension, (value, key) => {\n    if (extension[key] && typeof extension[key] === 'object') {\n      if (!target[key]) {\n        if (Array.isArray(extension[key])) {\n          target[key] = [];\n        } else if (Object.prototype.toString.call(extension[key]) === '[object Date]') {\n          target[key] = extension[key];\n        } else {\n          target[key] = {};\n        }\n      }\n      deepExtend(target[key], extension[key]);\n\n    } else {\n      target[key] = extension[key];\n    }\n  });\n}\n\n/**\n * Perform deep clone of an object.\n * WARNING! Only clones JSON properties. Will cause error when `obj` contains a function, Date, etc.\n *\n * @param {Object} obj An object that will be cloned\n * @return {Object}\n */\nexport function deepClone(obj) {\n  if (typeof obj === 'object') {\n    return JSON.parse(JSON.stringify(obj));\n  }\n\n  return obj;\n}\n\n/**\n * Shallow clone object.\n *\n * @param {Object} object\n * @returns {Object}\n */\nexport function clone(object) {\n  let result = {};\n\n  objectEach(object, (value, key) => {\n    result[key] = value;\n  });\n\n  return result;\n}\n\n/**\n * Extend the Base object (usually prototype) of the functionality the `mixins` objects.\n *\n * @param {Object} Base Base object which will be extended.\n * @param {Object} mixins The object of the functionality will be \"copied\".\n * @returns {Object}\n */\nexport function mixin(Base, ...mixins) {\n  if (!Base.MIXINS) {\n    Base.MIXINS = [];\n  }\n  arrayEach(mixins, (mixin) => {\n    Base.MIXINS.push(mixin.MIXIN_NAME);\n\n    objectEach(mixin, (value, key) => {\n      if (Base.prototype[key] !== void 0) {\n        throw new Error(`Mixin conflict. Property '${key}' already exist and cannot be overwritten.`);\n      }\n      if (typeof value === 'function') {\n        Base.prototype[key] = value;\n\n      } else {\n        let getter = function _getter(propertyName, initialValue) {\n          propertyName = `_${propertyName}`;\n\n          let initValue = (value) => {\n            if (Array.isArray(value) || isObject(value)) {\n              value = deepClone(value);\n            }\n\n            return value;\n          };\n\n          return function() {\n            if (this[propertyName] === void 0) {\n              this[propertyName] = initValue(initialValue);\n            }\n\n            return this[propertyName];\n          };\n        };\n        let setter = function _setter(propertyName) {\n          propertyName = `_${propertyName}`;\n\n          return function(value) {\n            this[propertyName] = value;\n          };\n        };\n        Object.defineProperty(Base.prototype, key, {\n          get: getter(key, value),\n          set: setter(key),\n          configurable: true,\n        });\n      }\n    });\n  });\n\n  return Base;\n}\n\n/**\n * Checks if two objects or arrays are (deep) equal\n *\n * @param {Object|Array} object1\n * @param {Object|Array} object2\n * @returns {Boolean}\n */\nexport function isObjectEquals(object1, object2) {\n  return JSON.stringify(object1) === JSON.stringify(object2);\n}\n\n/**\n * Determines whether given object is a plain Object.\n * Note: String and Array are not plain Objects\n * @param {*} obj\n * @returns {boolean}\n */\nexport function isObject(obj) {\n  return Object.prototype.toString.call(obj) == '[object Object]';\n}\n\nexport function defineGetter(object, property, value, options) {\n  options.value = value;\n  options.writable = options.writable !== false;\n  options.enumerable = options.enumerable !== false;\n  options.configurable = options.configurable !== false;\n\n  Object.defineProperty(object, property, options);\n}\n\n/**\n * A specialized version of `.forEach` for objects.\n *\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nexport function objectEach(object, iteratee) {\n  for (let key in object) {\n    if (!object.hasOwnProperty || (object.hasOwnProperty && Object.prototype.hasOwnProperty.call(object, key))) {\n      if (iteratee(object[key], key, object) === false) {\n        break;\n      }\n    }\n  }\n\n  return object;\n}\n\n/**\n * Get object property by its name. Access to sub properties can be achieved by dot notation (e.q. `'foo.bar.baz'`).\n *\n * @param {Object} object Object which value will be exported.\n * @param {String} name Object property name.\n * @returns {*}\n */\nexport function getProperty(object, name) {\n  let names = name.split('.');\n  let result = object;\n\n  objectEach(names, (name) => {\n    result = result[name];\n\n    if (result === void 0) {\n      result = void 0;\n\n      return false;\n    }\n  });\n\n  return result;\n}\n\n/**\n * Return object length (recursively).\n *\n * @param {*} object Object for which we want get length.\n * @returns {Number}\n */\nexport function deepObjectSize(object) {\n  if (!isObject(object)) {\n    return 0;\n  }\n  let recursObjLen = function(obj) {\n    let result = 0;\n\n    if (isObject(obj)) {\n      objectEach(obj, (key) => {\n        result += recursObjLen(key);\n      });\n    } else {\n      result++;\n    }\n\n    return result;\n  };\n\n  return recursObjLen(object);\n}\n\n/**\n * Create object with property where its value change will be observed.\n *\n * @param {*} [defaultValue=undefined] Default value.\n * @param {String} [propertyToListen='value'] Property to listen.\n * @returns {Object}\n */\nexport function createObjectPropListener(defaultValue, propertyToListen = 'value') {\n  const privateProperty = `_${propertyToListen}`;\n  const holder = {\n    _touched: false,\n    [privateProperty]: defaultValue,\n    isTouched() {\n      return this._touched;\n    }\n  };\n\n  Object.defineProperty(holder, propertyToListen, {\n    get() {\n      return this[privateProperty];\n    },\n    set(value) {\n      this._touched = true;\n      this[privateProperty] = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  return holder;\n}\n\n/**\n * Check if at specified `key` there is any value for `object`.\n *\n * @param {Object} object Object to search value at specyfic key.\n * @param {String} key String key to check.\n */\nexport function hasOwnProperty(object, key) {\n  return Object.prototype.hasOwnProperty.call(object, key);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/object.js","var global    = require('./_global')\n  , core      = require('./_core')\n  , hide      = require('./_hide')\n  , redefine  = require('./_redefine')\n  , ctx       = require('./_ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE]\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE] || (exports[PROTOTYPE] = {})\n    , key, own, out, exp;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if(target)redefine(target, key, out, type & $export.U);\n    // export\n    if(exports[key] != out)hide(exports, key, exp);\n    if(IS_PROTO && expProto[key] != out)expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_export.js","/**\n * Checks if value of n is a numeric one\n * http://jsperf.com/isnan-vs-isnumeric/4\n * @param n\n * @returns {boolean}\n */\nexport function isNumeric(n) {\n  /* eslint-disable */\n  var t = typeof n;\n\n  return t == 'number' ? !isNaN(n) && isFinite(n) :\n    t == 'string' ? !n.length ? false :\n      n.length == 1 ? /\\d/.test(n) :\n        /^\\s*[+-]?\\s*(?:(?:\\d+(?:\\.\\d+)?(?:e[+-]?\\d+)?)|(?:0x[a-f\\d]+))\\s*$/i.test(n) :\n      t == 'object' ? !!n && typeof n.valueOf() == 'number' && !(n instanceof Date) : false;\n}\n\n/**\n * A specialized version of `.forEach` defined by ranges.\n *\n * @param {Number} rangeFrom The number from start iterate.\n * @param {Number|Function} rangeTo The number where finish iterate or function as a iteratee.\n * @param {Function} [iteratee] The function invoked per iteration.\n */\nexport function rangeEach(rangeFrom, rangeTo, iteratee) {\n  let index = -1;\n\n  if (typeof rangeTo === 'function') {\n    iteratee = rangeTo;\n    rangeTo = rangeFrom;\n  } else {\n    index = rangeFrom - 1;\n  }\n  while (++index <= rangeTo) {\n    if (iteratee(index) === false) {\n      break;\n    }\n  }\n}\n\n/**\n * A specialized version of `.forEach` defined by ranges iterable in reverse order.\n *\n * @param {Number} rangeFrom The number from start iterate.\n * @param {Number} rangeTo The number where finish iterate.\n * @param {Function} iteratee The function invoked per iteration.\n */\nexport function rangeEachReverse(rangeFrom, rangeTo, iteratee) {\n  let index = rangeFrom + 1;\n\n  if (typeof rangeTo === 'function') {\n    iteratee = rangeTo;\n    rangeTo = 0;\n  }\n  while (--index >= rangeTo) {\n    if (iteratee(index) === false) {\n      break;\n    }\n  }\n}\n\n/**\n * Calculate value from percent.\n *\n * @param {Number} value Base value from percent will be calculated.\n * @param {String|Number} percent Can be Number or String (eq. `'33%'`).\n * @returns {Number}\n */\nexport function valueAccordingPercent(value, percent) {\n  percent = parseInt(percent.toString().replace('%', ''), 10);\n  percent = parseInt(value * percent / 100, 10);\n\n  return percent;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/number.js","export const formulas = {};\n\n/**\n * Get formula closure with pre-bound arguments.\n *\n * @param {String} name Formula name.\n * @param {Array} args Formula arguments.\n * @returns {Function}\n */\nexport function getFormula(name, args) {\n  if (!formulas[name]) {\n    throw Error(`Filter formula \"${name}\" does not exist.`);\n  }\n  const {formula, descriptor} = formulas[name];\n\n  if (descriptor.inputValuesDecorator) {\n    args = descriptor.inputValuesDecorator(args);\n  }\n\n  return function(dataRow) {\n    return formula.apply(dataRow.meta.instance, [].concat([dataRow], [args]));\n  };\n}\n\n/**\n * Get formula object descriptor which defines some additional informations about this formula.\n *\n * @param {String} name Formula name.\n * @returns {Object}\n */\nexport function getFormulaDescriptor(name) {\n  if (!formulas[name]) {\n    throw Error(`Filter formula \"${name}\" does not exist.`);\n  }\n\n  return formulas[name].descriptor;\n}\n\n/**\n * Formula registerer.\n *\n * @param {String} name Formula name.\n * @param {Function} formula Formula function\n * @param {Object} descriptor Formula descriptor\n */\nexport function registerFormula(name, formula, descriptor) {\n  descriptor.key = name;\n  formulas[name] = {\n    formula, descriptor\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formulaRegisterer.js","// import Core from './core';\nimport {polymerWrap, closest} from './helpers/dom/element';\nimport {isWebComponentSupportedNatively} from './helpers/feature';\nimport {stopImmediatePropagation as _stopImmediatePropagation} from './helpers/dom/event';\n\n/**\n * Counter which tracks unregistered listeners (useful for detecting memory leaks).\n *\n * @type {Number}\n */\nlet listenersCounter = 0;\n\n/**\n * Event DOM manager for internal use in Handsontable.\n *\n * @class EventManager\n * @util\n */\nclass EventManager {\n  /**\n   * @param {Object} [context=null]\n   * @private\n   */\n  constructor(context = null) {\n    this.context = context || this;\n\n    if (!this.context.eventListeners) {\n      this.context.eventListeners = [];\n    }\n  }\n\n  /**\n   * Register specified listener (`eventName`) to the element.\n   *\n   * @param {Element} element Target element.\n   * @param {String} eventName Event name.\n   * @param {Function} callback Function which will be called after event occur.\n   * @returns {Function} Returns function which you can easily call to remove that event\n   */\n  addEventListener(element, eventName, callback) {\n    let context = this.context;\n\n    function callbackProxy(event) {\n      event = extendEvent(context, event);\n\n      callback.call(this, event);\n    }\n    this.context.eventListeners.push({\n      element,\n      event: eventName,\n      callback,\n      callbackProxy,\n    });\n\n    if (window.addEventListener) {\n      element.addEventListener(eventName, callbackProxy, false);\n    } else {\n      element.attachEvent(`on${eventName}`, callbackProxy);\n    }\n    listenersCounter++;\n\n    return () => {\n      this.removeEventListener(element, eventName, callback);\n    };\n  }\n\n  /**\n   * Remove the event listener previously registered.\n   *\n   * @param {Element} element Target element.\n   * @param {String} eventName Event name.\n   * @param {Function} callback Function to remove from the event target. It must be the same as during registration listener.\n   */\n  removeEventListener(element, eventName, callback) {\n    let len = this.context.eventListeners.length;\n    let tmpEvent;\n\n    while (len--) {\n      tmpEvent = this.context.eventListeners[len];\n\n      if (tmpEvent.event == eventName && tmpEvent.element == element) {\n        if (callback && callback != tmpEvent.callback) {\n          /* eslint-disable no-continue */\n          continue;\n        }\n        this.context.eventListeners.splice(len, 1);\n\n        if (tmpEvent.element.removeEventListener) {\n          tmpEvent.element.removeEventListener(tmpEvent.event, tmpEvent.callbackProxy, false);\n        } else {\n          tmpEvent.element.detachEvent(`on${tmpEvent.event}`, tmpEvent.callbackProxy);\n        }\n        listenersCounter--;\n      }\n    }\n  }\n\n  /**\n   * Clear all previously registered events.\n   *\n   * @private\n   * @since 0.15.0-beta3\n   */\n  clearEvents() {\n    if (!this.context) {\n      return;\n    }\n    let len = this.context.eventListeners.length;\n\n    while (len--) {\n      let event = this.context.eventListeners[len];\n\n      if (event) {\n        this.removeEventListener(event.element, event.event, event.callback);\n      }\n    }\n  }\n\n  /**\n   * Clear all previously registered events.\n   */\n  clear() {\n    this.clearEvents();\n  }\n\n  /**\n   * Destroy instance of EventManager.\n   */\n  destroy() {\n    this.clearEvents();\n    this.context = null;\n  }\n\n  /**\n   * Trigger event at the specified target element.\n   *\n   * @param {Element} element Target element.\n   * @param {String} eventName Event name.\n   */\n  fireEvent(element, eventName) {\n    let options = {\n      bubbles: true,\n      cancelable: (eventName !== 'mousemove'),\n      view: window,\n      detail: 0,\n      screenX: 0,\n      screenY: 0,\n      clientX: 1,\n      clientY: 1,\n      ctrlKey: false,\n      altKey: false,\n      shiftKey: false,\n      metaKey: false,\n      button: 0,\n      relatedTarget: undefined,\n    };\n    var event;\n\n    if (document.createEvent) {\n      event = document.createEvent('MouseEvents');\n      event.initMouseEvent(eventName, options.bubbles, options.cancelable,\n        options.view, options.detail,\n        options.screenX, options.screenY, options.clientX, options.clientY,\n        options.ctrlKey, options.altKey, options.shiftKey, options.metaKey,\n        options.button, options.relatedTarget || document.body.parentNode);\n\n    } else {\n      event = document.createEventObject();\n    }\n\n    if (element.dispatchEvent) {\n      element.dispatchEvent(event);\n    } else {\n      element.fireEvent(`on${eventName}`, event);\n    }\n  }\n}\n\n/**\n * @param {Object} context\n * @param {Event} event\n * @private\n * @returns {*}\n */\nfunction extendEvent(context, event) {\n  let componentName = 'HOT-TABLE';\n  let isHotTableSpotted;\n  let fromElement;\n  let realTarget;\n  let target;\n  let len;\n  let nativeStopImmediatePropagation;\n\n  event.isTargetWebComponent = false;\n  event.realTarget = event.target;\n\n  nativeStopImmediatePropagation = event.stopImmediatePropagation;\n  event.stopImmediatePropagation = function() {\n    nativeStopImmediatePropagation.apply(this);\n    _stopImmediatePropagation(this);\n  };\n\n  if (!EventManager.isHotTableEnv) {\n    return event;\n  }\n  event = polymerWrap(event);\n  len = event.path ? event.path.length : 0;\n\n  while (len--) {\n    if (event.path[len].nodeName === componentName) {\n      isHotTableSpotted = true;\n\n    } else if (isHotTableSpotted && event.path[len].shadowRoot) {\n      target = event.path[len];\n\n      break;\n    }\n    if (len === 0 && !target) {\n      target = event.path[len];\n    }\n  }\n  if (!target) {\n    target = event.target;\n  }\n  event.isTargetWebComponent = true;\n\n  if (isWebComponentSupportedNatively()) {\n    event.realTarget = event.srcElement || event.toElement;\n\n  } else if (context instanceof Core || context instanceof Walkontable) {\n    // Polymer doesn't support `event.target` property properly we must emulate it ourselves\n    if (context instanceof Core) {\n      fromElement = context.view ? context.view.wt.wtTable.TABLE : null;\n\n    } else if (context instanceof Walkontable) {\n      // .wtHider\n      fromElement = context.wtTable.TABLE.parentNode.parentNode;\n    }\n    realTarget = closest(event.target, [componentName], fromElement);\n\n    if (realTarget) {\n      event.realTarget = fromElement.querySelector(componentName) || event.target;\n    } else {\n      event.realTarget = event.target;\n    }\n  }\n\n  Object.defineProperty(event, 'target', {\n    get() {\n      return polymerWrap(target);\n    },\n    enumerable: true,\n    configurable: true,\n  });\n\n  return event;\n}\n\nexport default EventManager;\n\nexport function getListenersCounter() {\n  return listenersCounter;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/eventManager.js","import {getWindowScrollTop, getWindowScrollLeft} from './element';\n\n/**\n * Prevent other listeners of the same event from being called.\n *\n * @param {Event} event\n */\nexport function stopImmediatePropagation(event) {\n  event.isImmediatePropagationEnabled = false;\n  event.cancelBubble = true;\n}\n\n/**\n * Check if event was stopped by `stopImmediatePropagation`.\n *\n * @param event {Event}\n * @returns {Boolean}\n */\nexport function isImmediatePropagationStopped(event) {\n  return event.isImmediatePropagationEnabled === false;\n}\n\n/**\n * Prevent further propagation of the current event (prevent bubbling).\n *\n * @param event {Event}\n */\nexport function stopPropagation(event) {\n  // ie8\n  // http://msdn.microsoft.com/en-us/library/ie/ff975462(v=vs.85).aspx\n  if (typeof event.stopPropagation === 'function') {\n    event.stopPropagation();\n  } else {\n    event.cancelBubble = true;\n  }\n}\n\n/**\n * Get horizontal coordinate of the event object relative to the whole document.\n *\n * @param {Event} event\n * @returns {Number}\n */\nexport function pageX(event) {\n  if (event.pageX) {\n    return event.pageX;\n  }\n\n  return event.clientX + getWindowScrollLeft();\n}\n\n/**\n * Get vertical coordinate of the event object relative to the whole document.\n *\n * @param {Event} event\n * @returns {Number}\n */\nexport function pageY(event) {\n  if (event.pageY) {\n    return event.pageY;\n  }\n\n  return event.clientY + getWindowScrollTop();\n}\n\n/**\n * Check if provided event was triggered by clicking the right mouse button.\n *\n * @param {Event} event DOM Event.\n * @returns {Boolean}\n */\nexport function isRightClick(event) {\n  return event.button === 2;\n}\n\n/**\n * Check if provided event was triggered by clicking the left mouse button.\n *\n * @param {Event} event DOM Event.\n * @returns {Boolean}\n */\nexport function isLeftClick(event) {\n  return event.button === 0;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/dom/event.js","/**\n * Utility to register plugins and common namespace for keeping reference to all plugins classes\n */\nimport Hooks from './pluginHooks';\nimport {objectEach} from './helpers/object';\nimport {toUpperCaseFirst} from './helpers/string';\n\nconst registeredPlugins = new WeakMap();\n\n/**\n * Registers plugin under given name\n *\n * @param {String} pluginName\n * @param {Function} PluginClass\n */\nfunction registerPlugin(pluginName, PluginClass) {\n  pluginName = toUpperCaseFirst(pluginName);\n\n  Hooks.getSingleton().add('construct', function() {\n    let holder;\n\n    if (!registeredPlugins.has(this)) {\n      registeredPlugins.set(this, {});\n    }\n    holder = registeredPlugins.get(this);\n\n    if (!holder[pluginName]) {\n      holder[pluginName] = new PluginClass(this);\n    }\n  });\n  Hooks.getSingleton().add('afterDestroy', function() {\n    if (registeredPlugins.has(this)) {\n      let pluginsHolder = registeredPlugins.get(this);\n\n      objectEach(pluginsHolder, (plugin) => plugin.destroy());\n      registeredPlugins.delete(this);\n    }\n  });\n}\n\n/**\n * @param {Object} instance\n * @param {String|Function} pluginName\n * @returns {Function} pluginClass Returns plugin instance if exists or `undefined` if not exists.\n */\nfunction getPlugin(instance, pluginName) {\n  if (typeof pluginName != 'string') {\n    throw Error('Only strings can be passed as \"plugin\" parameter');\n  }\n  let _pluginName = toUpperCaseFirst(pluginName);\n\n  if (!registeredPlugins.has(instance) || !registeredPlugins.get(instance)[_pluginName]) {\n    return void 0;\n  }\n\n  return registeredPlugins.get(instance)[_pluginName];\n}\n\n/**\n * Get all registred plugins names for concrete Handsontable instance.\n *\n * @param {Object} hotInstance\n * @returns {Array}\n */\nfunction getRegistredPluginNames(hotInstance) {\n  return registeredPlugins.has(hotInstance) ? Object.keys(registeredPlugins.get(hotInstance)) : [];\n}\n\n/**\n * Get plugin name.\n *\n * @param {Object} hotInstance\n * @param {Object} plugin\n * @returns {String|null}\n */\nfunction getPluginName(hotInstance, plugin) {\n  let pluginName = null;\n\n  if (registeredPlugins.has(hotInstance)) {\n    objectEach(registeredPlugins.get(hotInstance), (pluginInstance, name) => {\n      if (pluginInstance === plugin) {\n        pluginName = name;\n      }\n    });\n  }\n\n  return pluginName;\n}\n\nexport {registerPlugin, getPlugin, getRegistredPluginNames, getPluginName};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins.js","import staticRegister from './../utils/staticRegister';\n\nimport baseRenderer from './_cellDecorator';\nimport autocompleteRenderer from './autocompleteRenderer';\nimport checkboxRenderer from './checkboxRenderer';\nimport htmlRenderer from './htmlRenderer';\nimport numericRenderer from './numericRenderer';\nimport passwordRenderer from './passwordRenderer';\nimport textRenderer from './textRenderer';\n\nconst {\n register,\n getItem,\n hasItem,\n getNames,\n getValues,\n} = staticRegister('renderers');\n\nregister('base', baseRenderer);\nregister('autocomplete', autocompleteRenderer);\nregister('checkbox', checkboxRenderer);\nregister('html', htmlRenderer);\nregister('numeric', numericRenderer);\nregister('password', passwordRenderer);\nregister('text', textRenderer);\n\n/**\n * Retrieve renderer function.\n *\n * @param {String} name Renderer identification.\n * @returns {Function} Returns renderer function.\n */\nfunction _getItem(name) {\n  if (typeof name === 'function') {\n    return name;\n  }\n  if (!hasItem(name)) {\n    throw Error(`No registered renderer found under \"${name}\" name`);\n  }\n\n  return getItem(name);\n}\n\nexport {\n  register as registerRenderer,\n  _getItem as getRenderer,\n  hasItem as hasRenderer,\n  getNames as getRegisteredRendererNames,\n  getValues as getRegisteredRenderers,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/renderers/index.js","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_wks.js","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_global.js","import {arrayEach} from './array';\n\nexport const KEY_CODES = {\n  MOUSE_LEFT: 1,\n  MOUSE_RIGHT: 3,\n  MOUSE_MIDDLE: 2,\n  BACKSPACE: 8,\n  COMMA: 188,\n  INSERT: 45,\n  DELETE: 46,\n  END: 35,\n  ENTER: 13,\n  ESCAPE: 27,\n  CONTROL_LEFT: 91,\n  COMMAND_LEFT: 17,\n  COMMAND_RIGHT: 93,\n  ALT: 18,\n  HOME: 36,\n  PAGE_DOWN: 34,\n  PAGE_UP: 33,\n  PERIOD: 190,\n  SPACE: 32,\n  SHIFT: 16,\n  CAPS_LOCK: 20,\n  TAB: 9,\n  ARROW_RIGHT: 39,\n  ARROW_LEFT: 37,\n  ARROW_UP: 38,\n  ARROW_DOWN: 40,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F11: 122,\n  F12: 123,\n  A: 65,\n  X: 88,\n  C: 67,\n  V: 86\n};\n\n/**\n * Returns true if keyCode represents a printable character.\n *\n * @param {Number} keyCode\n * @returns {Boolean}\n */\nexport function isPrintableChar(keyCode) {\n  return ((keyCode == 32) || // space\n      (keyCode >= 48 && keyCode <= 57) || // 0-9\n      (keyCode >= 96 && keyCode <= 111) || // numpad\n      (keyCode >= 186 && keyCode <= 192) || // ;=,-./`\n      (keyCode >= 219 && keyCode <= 222) || // []{}\\|\"'\n      keyCode >= 226 || // special chars (229 for Asian chars)\n      (keyCode >= 65 && keyCode <= 90)); // a-z\n}\n\n/**\n * @param {Number} keyCode\n * @returns {Boolean}\n */\nexport function isMetaKey(keyCode) {\n  var metaKeys = [\n    KEY_CODES.ARROW_DOWN,\n    KEY_CODES.ARROW_UP,\n    KEY_CODES.ARROW_LEFT,\n    KEY_CODES.ARROW_RIGHT,\n    KEY_CODES.HOME,\n    KEY_CODES.END,\n    KEY_CODES.DELETE,\n    KEY_CODES.BACKSPACE,\n    KEY_CODES.F1,\n    KEY_CODES.F2,\n    KEY_CODES.F3,\n    KEY_CODES.F4,\n    KEY_CODES.F5,\n    KEY_CODES.F6,\n    KEY_CODES.F7,\n    KEY_CODES.F8,\n    KEY_CODES.F9,\n    KEY_CODES.F10,\n    KEY_CODES.F11,\n    KEY_CODES.F12,\n    KEY_CODES.TAB,\n    KEY_CODES.PAGE_DOWN,\n    KEY_CODES.PAGE_UP,\n    KEY_CODES.ENTER,\n    KEY_CODES.ESCAPE,\n    KEY_CODES.SHIFT,\n    KEY_CODES.CAPS_LOCK,\n    KEY_CODES.ALT\n  ];\n\n  return metaKeys.indexOf(keyCode) !== -1;\n}\n\n/**\n * @param {Number} keyCode\n * @returns {Boolean}\n */\nexport function isCtrlKey(keyCode) {\n  return [KEY_CODES.CONTROL_LEFT, 224, KEY_CODES.COMMAND_LEFT, KEY_CODES.COMMAND_RIGHT].indexOf(keyCode) !== -1;\n}\n\n/**\n * @param {Number} keyCode\n * @param {String} baseCode\n * @returns {Boolean}\n */\nexport function isKey(keyCode, baseCode) {\n  let keys = baseCode.split('|');\n  let result = false;\n\n  arrayEach(keys, (key) => {\n    if (keyCode === KEY_CODES[key]) {\n      result = true;\n\n      return false;\n    }\n  });\n\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/unicode.js","import {defineGetter, objectEach} from './../helpers/object';\nimport {arrayEach} from './../helpers/array';\nimport {registerIdentity, getTranslator} from './../utils/recordTranslator';\nimport {getRegistredPluginNames, getPluginName} from './../plugins';\n\nconst privatePool = new WeakMap();\nlet initializedPlugins = null;\n\n/**\n * @private\n */\nclass BasePlugin {\n  /**\n   * @param {Object} hotInstance Handsontable instance.\n   */\n  constructor(hotInstance) {\n    /**\n     * Handsontable instance.\n     *\n     * @type {Core}\n     */\n    defineGetter(this, 'hot', hotInstance, {\n      writable: false\n    });\n    defineGetter(this, 't', getTranslator(hotInstance), {\n      writable: false\n    });\n\n    privatePool.set(this, {hooks: {}});\n    initializedPlugins = null;\n\n    this.pluginName = null;\n    this.pluginsInitializedCallbacks = [];\n    this.isPluginsReady = false;\n    this.enabled = false;\n    this.initialized = false;\n\n    this.hot.addHook('afterPluginsInitialized', () => this.onAfterPluginsInitialized());\n    this.hot.addHook('afterUpdateSettings', () => this.onUpdateSettings());\n    this.hot.addHook('beforeInit', () => this.init());\n  }\n\n  init() {\n    this.pluginName = getPluginName(this.hot, this);\n\n    if (this.isEnabled && this.isEnabled()) {\n      this.enablePlugin();\n    }\n    if (!initializedPlugins) {\n      initializedPlugins = getRegistredPluginNames(this.hot);\n    }\n    if (initializedPlugins.indexOf(this.pluginName) >= 0) {\n      initializedPlugins.splice(initializedPlugins.indexOf(this.pluginName), 1);\n    }\n    if (!initializedPlugins.length) {\n      this.hot.runHooks('afterPluginsInitialized');\n    }\n    this.initialized = true;\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    this.enabled = true;\n  }\n\n  /**\n   * Disable plugin for this Handsontable instance.\n   */\n  disablePlugin() {\n    if (this.eventManager) {\n      this.eventManager.clear();\n    }\n    this.clearHooks();\n    this.enabled = false;\n  }\n\n  /**\n   * Add listener to plugin hooks system.\n   *\n   * @param {String} name\n   * @param {Function} callback\n   */\n  addHook(name, callback) {\n    privatePool.get(this).hooks[name] = (privatePool.get(this).hooks[name] || []);\n\n    const hooks = privatePool.get(this).hooks[name];\n\n    this.hot.addHook(name, callback);\n    hooks.push(callback);\n    privatePool.get(this).hooks[name] = hooks;\n  }\n\n  /**\n   * Remove all hooks listeners by hook name.\n   *\n   * @param {String} name\n   */\n  removeHooks(name) {\n    arrayEach(privatePool.get(this).hooks[name] || [], (callback) => {\n      this.hot.removeHook(name, callback);\n    });\n  }\n\n  /**\n   * Clear all hooks.\n   */\n  clearHooks() {\n    const hooks = privatePool.get(this).hooks;\n\n    objectEach(hooks, (callbacks, name) => this.removeHooks(name));\n    hooks.length = 0;\n  }\n\n  /**\n   * Register function which will be immediately called after all plugins initialized.\n   *\n   * @param {Function} callback\n   */\n  callOnPluginsReady(callback) {\n    if (this.isPluginsReady) {\n      callback();\n    } else {\n      this.pluginsInitializedCallbacks.push(callback);\n    }\n  }\n\n  /**\n   * On after plugins initialized listener.\n   *\n   * @private\n   */\n  onAfterPluginsInitialized() {\n    arrayEach(this.pluginsInitializedCallbacks, (callback) => callback());\n    this.pluginsInitializedCallbacks.length = 0;\n    this.isPluginsReady = true;\n  }\n\n  /**\n   * On update settings listener.\n   *\n   * @private\n   */\n  onUpdateSettings() {\n    if (this.isEnabled) {\n      if (this.enabled && !this.isEnabled()) {\n        this.disablePlugin();\n      }\n      if (!this.enabled && this.isEnabled()) {\n        this.enablePlugin();\n      }\n      if (this.enabled && this.isEnabled()) {\n        this.updatePlugin();\n      }\n    }\n  }\n\n  /**\n   * Updates the plugin to use the latest options you have specified.\n   *\n   * @private\n   */\n  updatePlugin() {\n\n  }\n\n  /**\n   * Destroy plugin.\n   */\n  destroy() {\n    if (this.eventManager) {\n      this.eventManager.destroy();\n    }\n    this.clearHooks();\n\n    objectEach(this, (value, property) => {\n      if (property !== 'hot' && property !== 't') {\n        this[property] = null;\n      }\n    });\n    delete this.t;\n    delete this.hot;\n  }\n}\n\nexport default BasePlugin;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/_base.js","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_is-object.js","/**\n * Utility to register editors and common namespace for keeping reference to all editor classes\n */\nimport staticRegister from './../utils/staticRegister';\nimport Hooks from './../pluginHooks';\n\nimport BaseEditor from './_baseEditor';\nimport AutocompleteEditor from './autocompleteEditor';\nimport CheckboxEditor from './checkboxEditor';\nimport DateEditor from './dateEditor';\nimport DropdownEditor from './dropdownEditor';\nimport HandsontableEditor from './handsontableEditor';\nimport MobileTextEditor from './mobileTextEditor';\nimport NumericEditor from './numericEditor';\nimport PasswordEditor from './passwordEditor';\nimport SelectEditor from './selectEditor';\nimport TextEditor from './textEditor';\n\nconst registeredEditorClasses = new WeakMap();\n\nconst {\n register,\n getItem,\n hasItem,\n getNames,\n getValues,\n} = staticRegister('editors');\n\n_register('base', BaseEditor);\n_register('autocomplete', AutocompleteEditor);\n_register('checkbox', CheckboxEditor);\n_register('date', DateEditor);\n_register('dropdown', DropdownEditor);\n_register('handsontable', HandsontableEditor);\n_register('mobile', MobileTextEditor);\n_register('numeric', NumericEditor);\n_register('password', PasswordEditor);\n_register('select', SelectEditor);\n_register('text', TextEditor);\n\nexport function RegisteredEditor(editorClass) {\n  let instances = {};\n  const Clazz = editorClass;\n\n  this.getConstructor = function() {\n    return editorClass;\n  };\n\n  this.getInstance = function(hotInstance) {\n    if (!(hotInstance.guid in instances)) {\n      instances[hotInstance.guid] = new Clazz(hotInstance);\n    }\n\n    return instances[hotInstance.guid];\n  };\n\n  Hooks.getSingleton().add('afterDestroy', function() {\n    instances = {};\n  });\n}\n\n/**\n * Returns instance (singleton) of editor class.\n *\n * @param {String} name Name of an editor under which it has been stored.\n * @param {Object} hotInstance Instance of Handsontable.\n * @returns {Function} Returns instance of editor.\n */\nexport function _getEditorInstance(name, hotInstance) {\n  let editor;\n\n  if (typeof name === 'function') {\n    if (!(registeredEditorClasses.get(name))) {\n      _register(null, name);\n    }\n    editor = registeredEditorClasses.get(name);\n\n  } else if (typeof name === 'string') {\n    editor = getItem(name);\n\n  } else {\n    throw Error('Only strings and functions can be passed as \"editor\" parameter');\n  }\n\n  if (!editor) {\n    throw Error(`No editor registered under name \"${name}\"`);\n  }\n\n  return editor.getInstance(hotInstance);\n}\n\n/**\n * Retrieve editor class.\n *\n * @param {String} name Editor identification.\n * @returns {Function} Returns editor class.\n */\nfunction _getItem(name) {\n  if (!hasItem(name)) {\n    throw Error(`No registered editor found under \"${name}\" name`);\n  }\n\n  return getItem(name).getConstructor();\n}\n\n/**\n * Register editor class under specified name.\n *\n * @param {String} name Editor identification.\n * @param {Function} editorClass Editor class.\n */\nfunction _register(name, editorClass) {\n  const editorWrapper = new RegisteredEditor(editorClass);\n\n  if (typeof name === 'string') {\n    register(name, editorWrapper);\n  }\n  registeredEditorClasses.set(editorClass, editorWrapper);\n}\n\nexport {\n  _register as registerEditor,\n  _getItem as getEditor,\n  _getEditorInstance as getEditorInstance,\n  hasItem as hasEditor,\n  getNames as getRegisteredEditorNames,\n  getValues as getRegisteredEditors,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/index.js","\n/**\n * Converts any value to string.\n *\n * @param {*} value\n * @returns {String}\n */\nexport function stringify(value) {\n  let result;\n\n  switch (typeof value) {\n    case 'string':\n    case 'number':\n      result = `${value}`;\n      break;\n\n    case 'object':\n      result = value === null ? '' : value.toString();\n      break;\n    case 'undefined':\n      result = '';\n      break;\n    default:\n      result = value.toString();\n      break;\n  }\n\n  return result;\n}\n\n/**\n * Checks if given variable is defined.\n *\n * @param {*} variable Variable to check.\n * @returns {Boolean}\n */\nexport function isDefined(variable) {\n  return typeof variable !== 'undefined';\n}\n\n/**\n * Checks if given variable is undefined.\n *\n * @param {*} variable Variable to check.\n * @returns {Boolean}\n */\nexport function isUndefined(variable) {\n  return typeof variable === 'undefined';\n}\n\n/**\n * Check if given variable is null, empty string or undefined.\n *\n * @param {*} variable Variable to check.\n * @returns {Boolean}\n */\nexport function isEmpty(variable) {\n  return variable === null || variable === '' || isUndefined(variable);\n}\n\n/**\n * Check if given variable is a regular expression.\n *\n * @param {*} variable Variable to check.\n * @returns {Boolean}\n */\nexport function isRegExp(variable) {\n  return Object.prototype.toString.call(variable) === '[object RegExp]';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/mixed.js","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_an-object.js","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-dp.js","import 'babel-polyfill';\n\nimport ViewportColumnsCalculator from './calculator/viewportColumns';\nimport ViewportRowsCalculator from './calculator/viewportRows';\n\nimport CellCoords from './cell/coords';\nimport CellRange from './cell/range';\n\nimport ColumnFilter from './filter/column';\nimport RowFilter from './filter/row';\n\nimport DebugOverlay from './overlay/debug';\nimport LeftOverlay from './overlay/left';\nimport TopOverlay from './overlay/top';\nimport TopLeftCornerOverlay from './overlay/topLeftCorner';\n\nimport Border from './border';\nimport Walkontable from './core';\nimport Event from './event';\nimport Overlays from './overlays';\nimport Scroll from './scroll';\nimport Selection from './selection';\nimport Settings from './settings';\nimport Table from './table';\nimport TableRenderer from './tableRenderer';\nimport Viewport from './viewport';\n\nexport {\n  ViewportColumnsCalculator,\n  ViewportRowsCalculator,\n\n  CellCoords,\n  CellRange,\n\n  ColumnFilter,\n  RowFilter,\n\n  DebugOverlay,\n  LeftOverlay,\n  TopOverlay,\n  TopLeftCornerOverlay,\n\n  Border,\n  Walkontable as default,\n  Walkontable as Core,\n  Event,\n  Overlays,\n  Scroll,\n  Selection,\n  Settings,\n  Table,\n  TableRenderer,\n  Viewport,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/index.js","import {stringify} from './mixed';\nimport {rangeEach} from './number';\n\n/**\n * Convert string to upper case first letter.\n *\n * @param {String} string String to convert.\n * @returns {String}\n */\nexport function toUpperCaseFirst(string) {\n  return string[0].toUpperCase() + string.substr(1);\n}\n\n/**\n * Compare strings case insensitively.\n *\n * @param {...String} strings Strings to compare.\n * @returns {Boolean}\n */\nexport function equalsIgnoreCase(...strings) {\n  let unique = [];\n  let length = strings.length;\n\n  while (length--) {\n    let string = stringify(strings[length]).toLowerCase();\n\n    if (unique.indexOf(string) === -1) {\n      unique.push(string);\n    }\n  }\n\n  return unique.length === 1;\n}\n\n/**\n * Generates a random hex string. Used as namespace for Handsontable instance events.\n *\n * @return {String} Returns 16-long character random string (eq. `'92b1bfc74ec4'`).\n */\nexport function randomString() {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n\n  return s4() + s4() + s4() + s4();\n}\n\n/**\n * Checks if value is valid percent.\n *\n * @param {String} value\n * @returns {Boolean}\n */\nexport function isPercentValue(value) {\n  return /^([0-9][0-9]?%$)|(^100%$)/.test(value);\n}\n\n/**\n * Substitute strings placed beetwen square brackets into value defined in `variables` object. String names defined in\n * square brackets must be the same as property name of `variables` object.\n *\n * @param {String} template Template string.\n * @param {Object} variables Object which contains all available values which can be injected into template.\n * @returns {String}\n */\nexport function substitute(template, variables = {}) {\n  return (`${template}`).replace(/(?:\\\\)?\\[([^[\\]]+)]/g, (match, name) => {\n    if (match.charAt(0) === '\\\\') {\n      return match.substr(1, match.length - 1);\n    }\n\n    return variables[name] === void 0 ? '' : variables[name];\n  });\n}\n\nconst STRIP_TAGS_REGEX = /<\\/?\\w+\\/?>|<\\w+[\\s|/][^>]*>/gi;\n\n/**\n * Strip any HTML tag from the string.\n *\n * @param  {String} string String to cut HTML from.\n * @return {String}\n */\nexport function stripTags(string) {\n  string += '';\n\n  return string.replace(STRIP_TAGS_REGEX, '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/string.js","import {arrayEach} from './helpers/array';\nimport {objectEach} from './helpers/object';\n\n/**\n * @description\n * Handsontable events are the common interface that function in 2 ways: as __callbacks__ and as __hooks__.\n *\n * @example\n *\n * ```js\n * // Using events as callbacks:\n * ...\n * var hot1 = new Handsontable(document.getElementById('example1'), {\n *   afterChange: function(changes, source) {\n *     $.ajax({\n *       url: \"save.php',\n *       data: change\n *     });\n *   }\n * });\n * ...\n * ```\n *\n * ```js\n * // Using events as plugin hooks:\n * ...\n * var hot1 = new Handsontable(document.getElementById('example1'), {\n *   myPlugin: true\n * });\n *\n * var hot2 = new Handsontable(document.getElementById('example2'), {\n *   myPlugin: false\n * });\n *\n * // global hook\n * Handsontable.hooks.add('afterChange', function() {\n *   // Fired twice - for hot1 and hot2\n *   if (this.getSettings().myPlugin) {\n *     // function body - will only run for hot1\n *   }\n * });\n *\n * // local hook (has same effect as a callback)\n * hot2.addHook('afterChange', function() {\n *   // function body - will only run in #example2\n * });\n * ```\n * ...\n */\n\n// @TODO: Move plugin description hooks to plugin?\nconst REGISTERED_HOOKS = [\n  /**\n   * Callback fired after resetting a cell's meta.\n   *\n   * @event Hooks#afterCellMetaReset\n   * @since 0.11\n   */\n  'afterCellMetaReset',\n\n  /**\n   * @description\n   * Callback fired after one or more cells has been changed. Its main use case is to save the input.\n   *\n   * __Note:__ For performance reasons, the `changes` array is null for `\"loadData\"` source.\n   *\n   * @event Hooks#afterChange\n   * @param {Array} changes 2D array containing information about each of the edited cells `[[row, prop, oldVal, newVal], ...]`.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'afterChange',\n\n  /**\n   * @description\n   * Fired after observing changes.\n   *\n   * @event Hooks#afterChangesObserved\n   */\n  'afterChangesObserved',\n\n  /**\n   * @description\n   * Fired after setting up the Context Menu's default options. These options are a collection which user can select by setting\n   * an array of keys or an array of objects in `contextMenu` option.\n   *\n   * @event Hooks#afterContextMenuDefaultOptions\n   * @param {Array} predefinedItems Array of objects containing information about the pre-defined Context Menu items.\n   */\n  'afterContextMenuDefaultOptions',\n\n  /**\n   * @description\n   * Fired before setting up the Context Menu's items but after filtering these options by user (`contextMenu` option). This hook\n   * can by helpful to determine if user use specified menu item or to set up one of the menu item to by always visible.\n   *\n   * @event Hooks#beforeContextMenuSetItems\n   * @param {Array} menuItems Array of objects containing information about to generated Context Menu items.\n   */\n  'beforeContextMenuSetItems',\n\n  /**\n   * @description\n   * Fired after setting up the Context Menu's default options. These options are a collection which user can select by setting\n   * an array of keys or an array of objects in `contextMenu` option.\n   *\n   * @pro\n   * @event Hooks#afterDropdownMenuDefaultOptions\n   * @param {Array} predefinedItems Array of objects containing information about the pre-defined Context Menu items.\n   */\n  'afterDropdownMenuDefaultOptions',\n\n  /**\n   * @description\n   * Fired before setting up the Dropdown Menu's items but after filtering these options by user (`dropdownMenu` option). This hook\n   * can by helpful to determine if user use specified menu item or to set up one of the menu item to by always visible.\n   *\n   * @pro\n   * @event Hooks#beforeDropdownMenuSetItems\n   * @param {Array} menuItems Array of objects containing information about to generated Dropdown Menu items.\n   */\n  'beforeDropdownMenuSetItems',\n\n  /**\n   * @description\n   * Fired after hiding the Context Menu.\n   *\n   * @event Hooks#afterContextMenuHide\n   * @param {Object} context The Context menu instance.\n   */\n  'afterContextMenuHide',\n\n  /**\n   * @description\n   * Fired after opening the Context Menu.\n   *\n   * @event Hooks#afterContextMenuShow\n   * @param {Object} context The Context Menu instance.\n   */\n  'afterContextMenuShow',\n\n  /**\n   * @description\n   * Fired after reaching the copy limit while copying data.\n   *\n   * @event Hooks#afterCopyLimit\n   * @param {Number} selectedRows Count of selected copyable rows.\n   * @param {Number} selectedColumns Count of selected copyable columns.\n   * @param {Number} copyRowsLimit Current copy rows limit.\n   * @param {Number} copyColumnsLimit Current copy columns limit.\n   */\n  'afterCopyLimit',\n\n  /**\n   * Callback is fired before a new column was created.\n   *\n   * @since 0.28.0\n   * @event Hooks#beforeCreateCol\n   * @param {Number} index Represents the index of first newly created column in the data source array.\n   * @param {Number} amount Number of newly created columns in the data source array.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'beforeCreateCol',\n\n  /**\n   * Callback is fired after a new column was created.\n   *\n   * @event Hooks#afterCreateCol\n   * @param {Number} index Represents the index of first newly created column in the data source array.\n   * @param {Number} amount Number of newly created columns in the data source array.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'afterCreateCol',\n\n  /**\n   * Callback is fired before a new row was created.\n   *\n   * @since 0.28.0\n   * @event Hooks#beforeCreateRow\n   * @param {Number} index Represents the index of first newly created row in the data source array.\n   * @param {Number} amount Number of newly created rows in the data source array.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'beforeCreateRow',\n\n  /**\n   * Callback is fired after a new row was created.\n   *\n   * @event Hooks#afterCreateRow\n   * @param {Number} index Represents the index of first newly created row in the data source array.\n   * @param {Number} amount Number of newly created rows in the data source array.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'afterCreateRow',\n\n  /**\n   * Fired after the current cell is deselected.\n   *\n   * @event Hooks#afterDeselect\n   */\n  'afterDeselect',\n\n  /**\n   * Fired after destroying the Handsontable instance.\n   *\n   * @event Hooks#afterDestroy\n   */\n  'afterDestroy',\n\n  /**\n   * Fired on a `keydown` event on the document body.\n   *\n   * @event Hooks#afterDocumentKeyDown\n   * @param {Event} event A `keydown` event.\n   */\n  'afterDocumentKeyDown',\n\n  /**\n   * Callback fired after getting the cell settings.\n   *\n   * @event Hooks#afterGetCellMeta\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {Object} cellProperties Object containing the cell properties.\n   */\n  'afterGetCellMeta',\n\n  /**\n   * Callback fired after retrieving information about a column header and appending it to the table header.\n   *\n   * @event Hooks#afterGetColHeader\n   * @param {Number} col Column index.\n   * @param {Element} TH Header's TH element.\n   */\n  'afterGetColHeader',\n\n  /**\n   * Callback fired after retrieving information about a column header and appending it to the table header.\n   *\n   * @event Hooks#afterGetRowHeader\n   * @param {Number} row Row index.\n   * @param {Element} TH Header's TH element.\n   */\n  'afterGetRowHeader',\n\n  /**\n   * Callback fired after Handsontable instance is initiated.\n   *\n   * @event Hooks#afterInit\n   */\n  'afterInit',\n\n  /**\n   * Callback fired after new data is loaded (by `loadData` method) into the data source array.\n   *\n   * @event Hooks#afterLoadData\n   * @param {Boolean} firstTime flag that determines whether the data has been loaded during the initialization.\n   */\n  'afterLoadData',\n\n  /**\n   * Fired after a scroll event, which is identified as a momentum scroll (e.g. on an iPad).\n   *\n   * @event Hooks#afterMomentumScroll\n   */\n  'afterMomentumScroll',\n\n  /**\n   * Fired after a `mousedown` event is triggered on the cell corner (the drag handle).\n   *\n   * @event Hooks#afterOnCellCornerMouseDown\n   * @since 0.11\n   * @param {Object} event `mousedown` event object.\n   */\n  'afterOnCellCornerMouseDown',\n\n  /**\n   * Fired after a `dblclick` event is triggered on the cell corner (the drag handle).\n   *\n   * @event Hooks#afterOnCellCornerDblClick\n   * @since 0.30.0\n   * @param {Object} event `dblclick` event object.\n   */\n  'afterOnCellCornerDblClick',\n\n  /**\n   * Callback fired after clicking on a cell or row/column header.\n   * In case the row/column header was clicked, the index is negative.\n   * For example clicking on the row header of cell (0, 0) results with `afterOnCellMouseDown` called\n   * with coords `{row: 0, col: -1}`.\n   *\n   * @event Hooks#afterOnCellMouseDown\n   * @since 0.11\n   * @param {Object} event `mousedown` event object.\n   * @param {Object} coords Coordinates object containing the row and column indexes of the clicked cell.\n   * @param {Element} TD Cell's TD (or TH) element.\n   */\n  'afterOnCellMouseDown',\n\n  /**\n   * Callback fired after hovering a cell or row/column header with the mouse cursor.\n   * In case the row/column header was hovered, the index is negative.\n   * For example, hovering over the row header of cell (0, 0) results with `afterOnCellMouseOver` called\n   * with coords `{row: 0, col: -1}`.\n   *\n   * @event Hooks#afterOnCellMouseOver\n   * @since 0.11\n   * @param {Object} event `mouseover` event object.\n   * @param {Object} coords Hovered cell's coordinate object.\n   * @param {Element} TD Cell's TD (or TH) element.\n   */\n  'afterOnCellMouseOver',\n\n  /**\n   * Callback fired after leaving a cell or row/column header with the mouse cursor.\n   *\n   * @event Hooks#afterOnCellMouseOver\n   * @since 0.31.1\n   * @param {Object} event `mouseout` event object.\n   * @param {Object} coords Leaved cell's coordinate object.\n   * @param {Element} TD Cell's TD (or TH) element.\n   */\n  'afterOnCellMouseOut',\n\n  /**\n   * Callback is fired when one or more columns are removed.\n   *\n   * @event Hooks#afterRemoveCol\n   * @param {Number} index Is an index of starter column.\n   * @param {Number} amount Is an amount of removed columns.\n   */\n  'afterRemoveCol',\n\n  /**\n   * Callback is fired when one or more rows are removed.\n   *\n   * @event Hooks#afterRemoveRow\n   * @param {Number} index Is an index of starter row.\n   * @param {Number} amount Is an amount of removed rows.\n   */\n  'afterRemoveRow',\n\n  /**\n   * Callback fired after the Handsontable table is rendered.\n   *\n   * @event Hooks#afterRender\n   * @param {Boolean} isForced Is `true` if rendering was triggered by a change of settings or data; or `false` if\n   *                           rendering was triggered by scrolling or moving selection.\n   */\n  'afterRender',\n\n  /**\n   * Fired before starting rendering the cell.\n   *\n   * @event Hooks#beforeRenderer\n   * @since 0.24.2\n   * @param {Element} TD Currently rendered cell's TD element.\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {String|Number} prop Column property name or a column index, if datasource is an array of arrays.\n   * @param {String} value Value of the rendered cell.\n   * @param {Object} cellProperties Object containing the cell's properties.\n   */\n  'beforeRenderer',\n\n  /**\n   * Fired after finishing rendering the cell (after the renderer finishes).\n   *\n   * @event Hooks#afterRenderer\n   * @since 0.11.0\n   * @param {Element} TD Currently rendered cell's TD element.\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {String|Number} prop Column property name or a column index, if datasource is an array of arrays.\n   * @param {String} value Value of the rendered cell.\n   * @param {Object} cellProperties Object containing the cell's properties.\n   */\n  'afterRenderer',\n\n  /**\n   * Fired after the horizontal scroll event.\n   *\n   * @event Hooks#afterScrollHorizontally\n   * @since 0.11\n   */\n  'afterScrollHorizontally',\n\n  /**\n   * Fired after the vertical scroll event.\n   *\n   * @event Hooks#afterScrollVertically\n   * @since 0.11\n   */\n  'afterScrollVertically',\n\n  /**\n   * Callback fired after one or more cells are selected (e.g. during mouse move).\n   *\n   * @event Hooks#afterSelection\n   * @param {Number} r Selection start row index.\n   * @param {Number} c Selection start column index.\n   * @param {Number} r2 Selection end row index.\n   * @param {Number} c2 Selection end column index.\n   * @param {Object} preventScrolling Object with `value` property where its value change will be observed.\n   *    * @example\n   * ```js\n   * handsontable({\n   *   afterSelection: function (r, c, r2, c2, preventScrolling) {\n   *     // setting if prevent scrolling after selection\n   *\n   *     preventScrolling.value = true;\n   *   }\n   * })\n   * ```\n   */\n  'afterSelection',\n\n  /**\n   * Callback fired after one or more cells are selected. The `p` argument represents the source object property name instead of the column number.\n   *\n   * @event Hooks#afterSelectionByProp\n   * @param {Number} r Selection start row index.\n   * @param {String} p Selection start data source object property name.\n   * @param {Number} r2 Selection end row index.\n   * @param {String} p2 Selection end data source object property name.\n   * @param {Object} preventScrolling Object with `value` property where its value change will be observed.\n   *    * @example\n   * ```js\n   * handsontable({\n   *   afterSelectionByProp: function (r, c, r2, c2, preventScrolling) {\n   *     // setting if prevent scrolling after selection\n   *\n   *     preventScrolling.value = true;\n   *   }\n   * })\n   * ```\n   */\n  'afterSelectionByProp',\n\n  /**\n   * Callback fired after one or more cells are selected (e.g. on mouse up).\n   *\n   * @event Hooks#afterSelectionEnd\n   * @param {Number} r Selection start row index.\n   * @param {Number} c Selection start column index.\n   * @param {Number} r2 Selection end row index.\n   * @param {Number} c2 Selection end column index.\n   */\n  'afterSelectionEnd',\n\n  /**\n   * Callback fired after one or more cells are selected (e.g. on mouse up). The `p` argument represents the data source object\n   * property name instead of the column number.\n   *\n   * @event Hooks#afterSelectionEndByProp\n   * @param {Number} r Selection start row index.\n   * @param {String} p Selection start data source object property index.\n   * @param {Number} r2 Selection end row index.\n   * @param {String} p2 Selection end data source object property index.\n   */\n  'afterSelectionEndByProp',\n\n  /**\n   * Called after cell meta is changed.\n   *\n   * @event Hooks#afterSetCellMeta\n   * @since 0.11.0\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {String} key The updated meta key.\n   * @param {*} value The updated meta value.\n   */\n  'afterSetCellMeta',\n\n  /**\n   * Called after cell data was changed.\n   *\n   * @event Hooks#afterSetDataAtCell\n   * @since 0.28.0\n   * @param {Array} changes An array of changes in format `[[row, col, oldValue, value], ...]`.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'afterSetDataAtCell',\n\n  /**\n   * Called after cell data was changed.\n   *\n   * @event Hooks#afterSetDataAtRowProp\n   * @since 0.28.0\n   * @param {Array} changes An array of changes in format `[[row, prop, oldValue, value], ...]`.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'afterSetDataAtRowProp',\n\n  /**\n   * Fired after calling the `updateSettings` method.\n   *\n   * @event Hooks#afterUpdateSettings\n   */\n  'afterUpdateSettings',\n\n  /**\n   * @description\n   * A plugin hook executed after validator function, only if validator function is defined.\n   * Validation result is the first parameter. This can be used to determinate if validation passed successfully or not.\n   *\n   * __Returning false from the callback will mark the cell as invalid.__\n   *\n   * @event Hooks#afterValidate\n   * @since 0.9.5\n   * @param {Boolean} isValid `true` if valid, `false` if not.\n   * @param {*} value The value in question.\n   * @param {Number} row Row index.\n   * @param {String|Number} prop Property name / column index.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'afterValidate',\n\n  /**\n   * Fired before populating the data in the autofill feature.\n   *\n   * @event Hooks#beforeAutofill\n   * @param {Object} start Object containing information about first filled cell: `{row: 2, col: 0}`.\n   * @param {Object} end Object containing information about last filled cell: `{row: 4, col: 1}`.\n   * @param {Array} data 2D array containing information about fill pattern: `[[\"1', \"Ted\"], [\"1', \"John\"]]`.\n   */\n  'beforeAutofill',\n\n  /**\n   * Fired before aligning the cell contents.\n   *\n   * @event Hooks#beforeCellAlignment\n   * @param stateBefore\n   * @param range\n   * @param {String} type Type of the alignment - either `horizontal` or `vertical`\n   * @param {String} alignmentClass String defining the alignment class added to the cell.\n   * Possible values:\n   * * `htLeft`,\n   * * `htCenter`,\n   * * `htRight`,\n   * * `htJustify`\n   * for horizontal alignment,\n   *\n   *\n   * * `htTop`,\n   * * `htMiddle`,\n   * * `htBottom`\n   * for vertical alignment.\n   */\n  'beforeCellAlignment',\n\n  /**\n   * Callback fired before one or more cells is changed. Its main purpose is to alter changes silently before input.\n   *\n   * @event Hooks#beforeChange\n   * @param {Array} changes 2D array containing information about each of the edited cells.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   * @example\n   * ```js\n   * // To disregard a single change, set changes[i] to null or remove it from array using changes.splice(i, 1).\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforeChange: function(changes, source) {\n   *     // [[row, prop, oldVal, newVal], ...]\n   *     changes[0] = null;\n   *   }\n   * });\n   * ...\n   *\n   * // To alter a single change, overwrite the desired value to changes[i][3].\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforeChange: function(changes, source) {\n   *     // [[row, prop, oldVal, newVal], ...]\n   *     changes[0][3] = 10;\n   *   }\n   * });\n   * ...\n   *\n   * // To cancel all edit, return false from the callback or set array length to 0 (changes.length = 0).\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforeChange: function(changes, source) {\n   *     // [[row, prop, oldVal, newVal], ...]\n   *     return false;\n   *   }\n   * });\n   * ...\n   * ```\n   */\n  'beforeChange',\n\n  /**\n   * Fired right before rendering the changes.\n   *\n   * @event Hooks#beforeChangeRender\n   * @since 0.11\n   * @param {Array} changes Array in form of [row, prop, oldValue, newValue].\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'beforeChangeRender',\n\n  /**\n   * Fired before drawing the borders.\n   *\n   * @event Hooks#beforeDrawBorders\n   * @param {Array} corners Array specifying the current selection borders.\n   * @param {String} borderClassName Specifies the border class name.\n   */\n  'beforeDrawBorders',\n\n  /**\n   * Callback fired before getting cell settings.\n   *\n   * @event Hooks#beforeGetCellMeta\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {Object} cellProperties Object containing the cell's properties.\n   */\n  'beforeGetCellMeta',\n\n  /**\n   * @description\n   * Callback fired before Handsontable instance is initiated.\n   *\n   * @event Hooks#beforeInit\n   */\n  'beforeInit',\n\n  /**\n   * Callback fired before Walkontable instance is initiated.\n   *\n   * @since 0.11\n   * @event Hooks#beforeInitWalkontable\n   * @param {Object} walkontableConfig Walkontable configuration object.\n   */\n  'beforeInitWalkontable',\n\n  /**\n   * Callback fired before keydown event is handled. It can be used to overwrite default key bindings.\n   * Caution - in your `beforeKeyDown` handler you need to call `event.stopImmediatePropagation()` to prevent default key behavior.\n   *\n   * @event Hooks#beforeKeyDown\n   * @since 0.9.0\n   * @param {Event} event Original DOM event.\n   */\n  'beforeKeyDown',\n\n  /**\n   * Fired after the user clicked a cell, but before all the calculations related with it.\n   *\n   * @event Hooks#beforeOnCellMouseDown\n   * @param {Event} event The `mousedown` event object.\n   * @param {CellCoords} coords CellCoords object containing the coordinates of the clicked cell.\n   * @param {Element} TD TD element.\n   */\n  'beforeOnCellMouseDown',\n\n  /**\n   * Fired after the user moved cursor over a cell, but before all the calculations related with it.\n   *\n   * @event Hooks#beforeOnCellMouseOver\n   * @param {Event} event The `mouseover` event object.\n   * @param {CellCoords} coords CellCoords object containing the coordinates of the clicked cell.\n   * @param {Element} TD TD element.\n   * @param {Object} blockCalculations Contain keys 'row' and 'column' with boolean value.\n   */\n  'beforeOnCellMouseOver',\n\n  /**\n   * Fired after the user moved cursor out from a cell, but before all the calculations related with it.\n   *\n   * @event Hooks#beforeOnCellMouseOut\n   * @since 0.31.1\n   * @param {Event} event The `mouseout` event object.\n   * @param {WalkontableCellCoords} coords WalkontableCellCoords object containing the coordinates of the leaved cell.\n   * @param {Element} TD TD element.\n   */\n  'beforeOnCellMouseOut',\n\n  /**\n   * Callback is fired when one or more columns are about to be removed.\n   *\n   * @event Hooks#beforeRemoveCol\n   * @param {Number} index Index of starter column.\n   * @param {Number} amount Amount of columns to be removed.\n   * @param {Array} [logicalCols] Consists of logical indexes of processed columns.\n   */\n  'beforeRemoveCol',\n\n  /**\n   * Callback is fired when one or more rows are about to be removed.\n   *\n   * @event Hooks#beforeRemoveRow\n   * @param {Number} index Index of starter column.\n   * @param {Number} amount Amount of columns to be removed.\n   * @param {Array} [logicalRows] Consists of logical indexes of processed rows.\n   */\n  'beforeRemoveRow',\n\n  /**\n   * Callback fired before Handsontable table is rendered.\n   *\n   * @event Hooks#beforeRender\n   * @param {Boolean} isForced If `true` rendering was triggered by a change of settings or data; or `false` if\n   *                           rendering was triggered by scrolling or moving selection.\n   */\n  'beforeRender',\n\n  /**\n   * Callback fired before setting range is started.\n   *\n   * @event Hooks#beforeSetRangeStart\n   * @param {Array} coords CellCoords array.\n   */\n  'beforeSetRangeStart',\n\n  /**\n   * Callback fired before setting range is ended.\n   *\n   * @event Hooks#beforeSetRangeEnd\n   * @param {Array} coords CellCoords array.\n   */\n  'beforeSetRangeEnd',\n\n  /**\n   * Fired before the logic of handling a touch scroll, when user started scrolling on a touch-enabled device.\n   *\n   * @event Hooks#beforeTouchScroll\n   */\n  'beforeTouchScroll',\n\n  /**\n   * @description\n   * A plugin hook executed before validator function, only if validator function is defined.\n   * This can be used to manipulate the value of changed cell before it is applied to the validator function.\n   *\n   * __Notice:__ this will not affect values of changes. This will change value ONLY for validation!\n   *\n   * @event Hooks#beforeValidate\n   * @since 0.9.5\n   * @param {*} value Value of the cell.\n   * @param {Number} row Row index.\n   * @param {String|Number} prop Property name / column index.\n   * @param {String} [source] String that identifies source of hook call\n   *                          ([list of all available sources]{@link http://docs.handsontable.com/tutorial-using-callbacks.html#page-source-definition}).\n   */\n  'beforeValidate',\n\n  /**\n   * Callback fired before cell value is rendered into the DOM (through renderer function).\n   *\n   * @event Hooks#beforeValueRender\n   * @since 0.29.0\n   * @param {*} value Cell value to render.\n   */\n  'beforeValueRender',\n\n  /**\n   * Callback fired after Handsontable instance is constructed (via `new` operator).\n   *\n   * @event Hooks#construct\n   * @since 0.16.1\n   */\n  'construct',\n\n  /**\n   * Callback fired after Handsontable instance is initiated but before table is rendered.\n   *\n   * @event Hooks#init\n   * @since 0.16.1\n   */\n  'init',\n\n  /**\n   * Fired when a column index is about to be modified by a callback function.\n   *\n   * @event Hooks#modifyCol\n   * @since 0.11\n   * @param {Number} col Column index.\n   */\n  'modifyCol',\n\n  /**\n   * Fired when a column index is about to be de-modified by a callback function.\n   *\n   * @event Hooks#unmodifyCol\n   * @since 0.23.0\n   * @param {Number} col Column index.\n   */\n  'unmodifyCol',\n\n  /**\n   * Fired when a row index is about to be de-modified by a callback function.\n   *\n   * @event Hooks#unmodifyRow\n   * @since 0.26.2\n   * @param {Number} row Logical row index.\n   */\n  'unmodifyRow',\n  /**\n   * Fired when a column header index is about to be modified by a callback function.\n   *\n   * @event Hooks#modifyColHeader\n   * @since 0.20.0\n   * @param {Number} column Column header index.\n   */\n  'modifyColHeader',\n\n  /**\n   * Fired when a column width is about to be modified by a callback function.\n   *\n   * @event Hooks#modifyColWidth\n   * @since 0.11\n   * @param {Number} width Current column width.\n   * @param {Number} col Column index.\n   */\n  'modifyColWidth',\n\n  /**\n   * Fired when a row index is about to be modified by a callback function.\n   *\n   * @event Hooks#modifyRow\n   * @since 0.11\n   * @param {Number} row Row index.\n   */\n  'modifyRow',\n\n  /**\n   * Fired when a row header index is about to be modified by a callback function.\n   *\n   * @event Hooks#modifyRowHeader\n   * @since 0.20.0\n   * @param {Number} row Row header index.\n   */\n  'modifyRowHeader',\n\n  /**\n   * Fired when a row height is about to be modified by a callback function.\n   *\n   * @event Hooks#modifyRowHeight\n   * @since 0.11.0\n   * @param {Number} height Row height.\n   * @param {Number} row Row index.\n   */\n  'modifyRowHeight',\n\n  /**\n   * Fired when a data was retrieved or modified.\n   *\n   * @event Hooks#modifyData\n   * @since 0.28.0\n   * @param {Number} row Row height.\n   * @param {Number} column Column index.\n   * @param {Object} valueHolder Object which contains original value which can be modified by overwriting `.value` property.\n   * @param {String} ioMode String which indicates for what operation hook is fired (`get` or `set`).\n   */\n  'modifyData',\n\n  /**\n   * Fired when a data was retrieved or modified.\n   *\n   * @event Hooks#modifyRowSourceData\n   * @since 0.28.0\n   * @param {Number} row Row logical index.\n   */\n  'modifyRowData',\n\n  /**\n   * Fired after loading data using the Persistent State plugin.\n   *\n   * @event Hooks#persistentStateLoad\n   * @param {String} key Key string.\n   * @param {Object} valuePlaceholder Object containing the loaded data.\n   */\n  'persistentStateLoad',\n\n  /**\n   * Fired after resetting data using the Persistent State plugin.\n   *\n   * @event Hooks#persistentStateReset\n   * @param {String} key Key string.\n   */\n  'persistentStateReset',\n\n  /**\n   * Fired after resetting data using the Persistent State plugin.\n   *\n   * @event Hooks#persistentStateSave\n   * @param {String} key Key string.\n   * @param {Mixed} value Value to save.\n   */\n  'persistentStateSave',\n\n  /**\n   * Fired before sorting the column. If you return `false` value then sorting will be not applied by\n   * Handsontable (useful for server-side sorting).\n   *\n   * @event Hooks#beforeColumnSort\n   * @param {Number} column Sorted column index.\n   * @param {Boolean} order Soring order where:\n   *  * `true` means ascending order,\n   *  * `false` means descending order,\n   *  * `undefined` means original order.\n   */\n  'beforeColumnSort',\n\n  /**\n   * Fired after sorting the column.\n   *\n   * @event Hooks#afterColumnSort\n   * @param {Number} column Sorted column index.\n   * @param {Boolean} order Soring order where:\n   *  * `true` means ascending order\n   *  * `false` means descending order\n   *  * `undefined` means original order\n   */\n  'afterColumnSort',\n\n  /**\n   * @description\n   * Fired after setting range of autofill.\n   * Both arguments are provided in the following format:\n   * ```js\n   * [startRow, startColumn, endRow, endColumn]\n   * ```\n   *\n   * @event Hooks#modifyAutofillRange\n   * @param {Array} startArea Array of coordinates of the starting point for the drag-down operation.\n   * @param {Array} entireArea Array of coordinates of the entire area of the drag-down operation.\n   */\n  'modifyAutofillRange',\n\n  /**\n   * Fired to allow modifying the copyable range with a callback function.\n   *\n   * @since 0.19.0\n   * @event Hooks#modifyCopyableRange\n   * @param {Array} copyableRanges Array of objects defining copyable cells.\n   */\n  'modifyCopyableRange',\n\n  /**\n   * Called before copying the values into clipboard and before clearing values of the selected cells.\n   *\n   * @event Hooks#beforeCut\n   * @since 0.31.1\n   * @param {Array} data An array of arrays which contains data to cut.\n   * @param {Array} coords An array of objects with ranges of the visual indexes (`startRow`, `startCol`, `endRow`, `endCol`)\n   *                       which will be cut out.\n   * @returns {*} If returns `false` then operation of the cutting out is cancelled.\n   *\n   * @example\n   * ```js\n   * // To disregard a single row, remove it from array using data.splice(i, 1).\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforeCut: function(data, coords) {\n   *     // data -> [[1, 2, 3], [4, 5, 6]]\n   *     data.splice(0, 1);\n   *     // data -> [[4, 5, 6]]\n   *     // coords -> [{startRow: 0, startCol: 0, endRow: 1, endCol: 2}]\n   *   }\n   * });\n   * ...\n   *\n   * // To cancel cutting out, return false from the callback.\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforeCut: function(data, coords) {\n   *     return false;\n   *   }\n   * });\n   * ...\n   * ```\n   */\n  'beforeCut',\n\n  /**\n   * Fired after data are cutted out from the table.\n   *\n   * @event Hooks#afterCut\n   * @since 0.31.1\n   * @param {Array} data An array of arrays which contains the cutted out data.\n   * @param {Array} coords An array of objects with ranges of the visual indexes (`startRow`, `startCol`, `endRow`, `endCol`)\n   *                       which was cut out.\n   */\n  'afterCut',\n\n  /**\n   * Fired before values are copied into clipboard.\n   *\n   * @event Hooks#beforeCopy\n   * @since 0.31.1\n   * @param {Array} data An array of arrays which contains data to copied.\n   * @param {Array} coords An array of objects with ranges of the visual indexes (`startRow`, `startCol`, `endRow`, `endCol`)\n   *                       which will copied.\n   * @returns {*} If returns `false` then copying is cancelled.\n   *\n   * @example\n   * ```js\n   * // To disregard a single row, remove it from array using data.splice(i, 1).\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforeCopy: function(data, coords) {\n   *     // data -> [[1, 2, 3], [4, 5, 6]]\n   *     data.splice(0, 1);\n   *     // data -> [[4, 5, 6]]\n   *     // coords -> [{startRow: 0, startCol: 0, endRow: 1, endCol: 2}]\n   *   }\n   * });\n   * ...\n   *\n   * // To cancel copying, return false from the callback.\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforeCopy: function(data, coords) {\n   *     return false;\n   *   }\n   * });\n   * ...\n   * ```\n   */\n  'beforeCopy',\n\n  /**\n   * Fired after data are pasted into table.\n   *\n   * @event Hooks#afterCopy\n   * @since 0.31.1\n   * @param {Array} data An array of arrays which contains the copied data.\n   * @param {Array} coords An array of objects with ranges of the visual indexes (`startRow`, `startCol`, `endRow`, `endCol`)\n   *                       which was copied.\n   */\n  'afterCopy',\n\n  /**\n   * Fired before values are pasted into table.\n   *\n   * @event Hooks#beforePaste\n   * @since 0.31.1\n   * @param {Array} data An array of arrays which contains data to paste.\n   * @param {Array} coords An array of objects with ranges of the visual indexes (`startRow`, `startCol`, `endRow`, `endCol`)\n   *                       where changes will be inserted.\n   * @returns {*} If returns `false` then pasting is cancelled.\n   *\n   * @example\n   * ```js\n   * // To disregard a single row, remove it from array using data.splice(i, 1).\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforePaste: function(data, coords) {\n   *     // data -> [[1, 2, 3], [4, 5, 6]]\n   *     data.splice(0, 1);\n   *     // data -> [[4, 5, 6]]\n   *     // coords -> [{startRow: 0, startCol: 0, endRow: 1, endCol: 2}]\n   *   }\n   * });\n   * ...\n   *\n   * // To cancel pasting, return false from the callback.\n   * ...\n   * new Handsontable(document.getElementById('example'), {\n   *   beforePaste: function(data, coords) {\n   *     return false;\n   *   }\n   * });\n   * ...\n   * ```\n   */\n  'beforePaste',\n\n  /**\n   * Fired after values are pasted into table.\n   *\n   * @event Hooks#afterePaste\n   * @since 0.31.1\n   * @param {Array} data An array of arrays which contains the pasted data.\n   * @param {Array} coords An array of objects with ranges of the visual indexes (`startRow`, `startCol`, `endRow`, `endCol`)\n   *                       where changes was inserted.\n   */\n  'afterPaste',\n\n  /**\n   * Fired before change order of the logical indexes.\n   *\n   * @event Hooks#beforeColumnMove\n   * @param {Array} columns Array of visual column indexes to be moved.\n   * @param {Number} target Visual column index being a target for moved columns.\n   */\n  'beforeColumnMove',\n\n  /**\n   * Fired after change order of the logical indexes.\n   *\n   * @event Hooks#afterColumnMove\n   * @param {Array} columns Array of visual column indexes that were moved.\n   * @param {Number} target Visual column index being a target for moved columns.\n   */\n  'afterColumnMove',\n\n  /**\n   * Fired before change order of the logical indexes.\n   *\n   * @event Hooks#beforeRowMove\n   * @param {Array} rows Array of visual row indexes to be moved.\n   * @param {Number} target Visual row index being a target for moved rows.\n   */\n  'beforeRowMove',\n\n  /**\n   * Fired after change order of the logical indexes.\n   *\n   * @event Hooks#afterRowMove\n   * @param {Array} rows Array of visual row indexes that were moved.\n   * @param {Number} target Visual row index being a target for moved rows.\n   */\n  'afterRowMove',\n\n  /**\n   * Fired before rendering the table with modified column sizes.\n   *\n   * @event Hooks#beforeColumnResize\n   * @param {Number} currentColumn Index of the resized column.\n   * @param {Number} newSize Calculated new column width.\n   * @param {Boolean} isDoubleClick Flag that determines whether there was a double-click.\n   * @returns {Number} Returns a new column size or `undefined`, if column size should be calculated automatically.\n   */\n  'beforeColumnResize',\n\n  /**\n   * Fired after rendering the table with modified column sizes.\n   *\n   * @event Hooks#afterColumnResize\n   * @param {Number} currentColumn Index of the resized column.\n   * @param {Number} newSize Calculated new column width.\n   * @param {Boolean} isDoubleClick Flag that determines whether there was a double-click.\n   */\n  'afterColumnResize',\n\n  /**\n   * Fired before rendering the table with modified row sizes.\n   *\n   * @event Hooks#beforeRowResize\n   * @param {Number} currentRow Index of the resized row.\n   * @param {Number} newSize Calculated new row height.\n   * @param {Boolean} isDoubleClick Flag that determines whether there was a double-click.\n   * @returns {Number} Returns the new row size or `undefined` if row size should be calculated automatically.\n   */\n  'beforeRowResize',\n\n  /**\n   * Fired after rendering the table with modified row sizes.\n   *\n   * @event Hooks#afterRowResize\n   * @param {Number} currentRow Index of the resized row.\n   * @param {Number} newSize Calculated new row height.\n   * @param {Boolean} isDoubleClick Flag that determines whether there was a double-click.\n   */\n  'afterRowResize',\n\n  /**\n   * Fired after getting the column header renderers.\n   *\n   * @event Hooks#afterGetColumnHeaderRenderers\n   * @param {Array} array Array of the column header renderers.\n   */\n  'afterGetColumnHeaderRenderers',\n\n  /**\n   * Fired after getting the row header renderers.\n   *\n   * @event Hooks#afterGetRowHeaderRenderers\n   * @param {Array} array Array of the row header renderers.\n   */\n  'afterGetRowHeaderRenderers',\n\n  /**\n   * Fired before applying stretched column width to column.\n   *\n   * @event Hooks#beforeStretchingColumnWidth\n   * @param {Number} stretchedWidth Calculated width.\n   * @param {Number} column Column index.\n   * @returns {Number} Returns new width which will be applied to the column element.\n   */\n  'beforeStretchingColumnWidth',\n\n  /**\n   * Fired before applying [filtering]{@link http://docs.handsontable.com/pro/demo-filtering.html}.\n   *\n   * @pro\n   * @event Hooks#beforeFilter\n   * @param {Array} formulasStack An array of objects with added formulas.\n   * @returns {Boolean} If hook returns `false` value then filtering won't be applied on the UI side (server-side filtering).\n   */\n  'beforeFilter',\n\n  /**\n   * Fired after applying [filtering]{@link http://docs.handsontable.com/pro/demo-filtering.html}.\n   *\n   * @pro\n   * @event Hooks#afterFilter\n   * @param {Array} formulasStack An array of objects with added formulas.\n   */\n  'afterFilter',\n\n  /**\n   * Used to modify the column header height.\n   *\n   * @event Hooks#modifyColumnHeaderHeight\n   * @since 0.25.0\n   * @param {Number} col Column index.\n   */\n  'modifyColumnHeaderHeight',\n\n  /**\n   * Fired before the undo action. Contains information about the action that is being undone.\n   *\n   * @event Hooks#beforeUndo\n   * @since 0.26.2\n   * @param {Object} action The action object. Contains information about the action being undone. The `actionType`\n   * property of the object specifies the type of the action in a String format. (e.g. `'remove_row'`).\n   */\n  'beforeUndo',\n\n  /**\n   * Fired after the undo action. Contains information about the action that is being undone.\n   *\n   * @event Hooks#afterUndo\n   * @since 0.26.2\n   * @param {Object} action The action object. Contains information about the action being undone. The `actionType`\n   * property of the object specifies the type of the action in a String format. (e.g. `'remove_row'`).\n   */\n  'afterUndo',\n\n  /**\n   * Fired before the redo action. Contains information about the action that is being redone.\n   *\n   * @event Hooks#beforeRedo\n   * @since 0.26.2\n   * @param {Object} action The action object. Contains information about the action being redone. The `actionType`\n   * property of the object specifies the type of the action in a String format. (e.g. `'remove_row'`).\n   */\n  'beforeRedo',\n\n  /**\n   * Fired after the redo action. Contains information about the action that is being redone.\n   *\n   * @event Hooks#afterRedo\n   * @since 0.26.2\n   * @param {Object} action The action object. Contains information about the action being redone. The `actionType`\n   * property of the object specifies the type of the action in a String format. (e.g. `'remove_row'`).\n   */\n  'afterRedo',\n\n  /**\n   * Used to modify the row header width.\n   *\n   * @event Hooks#modifyRowHeaderWidth\n   * @param {Number} rowHeaderWidth Row header width.\n   */\n  'modifyRowHeaderWidth',\n\n  /**\n   * Fired from the `populateFromArray` method during the `autofill` process. Fired for each \"autofilled\" cell individually.\n   *\n   * @event Hooks#beforeAutofillInsidePopulate\n   * @param {Object} index Object containing `row` and `col` properties, defining the number of rows/columns from the initial cell of the autofill.\n   * @param {String} direction Declares the direction of the autofill. Possible values: `up`, `down`, `left`, `right`.\n   * @param {Array} input Array of arrays. Contains an array of rows with data being used in the autofill.\n   * @param {Array} deltas The deltas array passed to the `populateFromArray` method.\n   */\n  'beforeAutofillInsidePopulate',\n\n  /**\n   * Fired when the start of the selection is being modified. (e.g. moving the selection with the arrow keys).\n   *\n   * @event Hooks#modifyTransformStart\n   * @param {CellCoords} delta Cell coords object declaring the delta of the new selection relative to the previous one.\n   */\n  'modifyTransformStart',\n\n  /**\n   * Fired when the end of the selection is being modified. (e.g. moving the selection with the arrow keys).\n   *\n   * @event Hooks#modifyTransformEnd\n   * @param {CellCoords} delta Cell coords object declaring the delta of the new selection relative to the previous one.\n   */\n  'modifyTransformEnd',\n\n  /**\n   * Fired after the start of the selection is being modified. (e.g. moving the selection with the arrow keys).\n   *\n   * @event Hooks#afterModifyTransformStart\n   * @param {CellCoords} coords Coords of the freshly selected cell.\n   * @param {Number} rowTransformDir `-1` if trying to select a cell with a negative row index. `0` otherwise.\n   * @param {Number} colTransformDir `-1` if trying to select a cell with a negative column index. `0` otherwise.\n   */\n  'afterModifyTransformStart',\n\n  /**\n   * Fired after the end of the selection is being modified. (e.g. moving the selection with the arrow keys).\n   *\n   * @event Hooks#afterModifyTransformEnd\n   * @param {CellCoords} coords Coords of the freshly selected cell.\n   * @param {Number} rowTransformDir `-1` if trying to select a cell with a negative row index. `0` otherwise.\n   * @param {Number} colTransformDir `-1` if trying to select a cell with a negative column index. `0` otherwise.\n   */\n  'afterModifyTransformEnd',\n\n  /**\n   * Fired before rendering a cell value.\n   *\n   * @event Hooks#beforeValueRender\n   * @param {Mixed} value The rendered value.\n   */\n  'beforeValueRender',\n\n  /**\n   * Fired inside the `viewportRowCalculatorOverride` method. Allows modifying the row calculator parameters.\n   *\n   * @event Hooks#afterViewportRowCalculatorOverride\n   * @param {Object} calc The row calculator.\n   */\n  'afterViewportRowCalculatorOverride',\n\n  /**\n   * Fired inside the `viewportColumnCalculatorOverride` method. Allows modifying the row calculator parameters.\n   *\n   * @event Hooks#afterViewportColumnCalculatorOverride\n   * @param {Object} calc The row calculator.\n   */\n  'afterViewportColumnCalculatorOverride',\n\n  /**\n   * Fired after initializing all the plugins.\n   *\n   * @event Hooks#afterPluginsInitialized\n   */\n  'afterPluginsInitialized',\n\n  /**\n   * Used when saving/loading the manual row heights state.\n   *\n   * @event Hooks#manualRowHeights\n   * @param {Array} state The current manual row heights state.\n   */\n  'manualRowHeights',\n\n  /**\n   * Used to skip the length cache calculation for a defined period of time.\n   *\n   * @event Hooks#skipLengthCache\n   * @param {Number} delay The delay in milliseconds.\n   */\n  'skipLengthCache',\n\n  /**\n   * Fired after trimming rows in the TrimRows plugin.\n   *\n   * @pro\n   * @event Hooks#afterTrimRow\n   * @param {Array} rows Indexes of trimmed rows.\n   */\n  'afterTrimRow',\n\n  /**\n   * Fired after untrimming rows in the TrimRows plugin.\n   *\n   * @pro\n   * @event Hooks#afterUntrimRow\n   * @param {Array} rows Indexes of untrimmed rows.\n   */\n  'afterUntrimRow',\n\n  /**\n   * Fired after opening the dropdown menu.\n   *\n   * @pro\n   * @event Hooks#afterDropdownMenuShow\n   * @param {DropdownMenu} instance The DropdownMenu instance.\n   */\n  'afterDropdownMenuShow',\n\n  /**\n   * Fired after hiding the dropdown menu.\n   *\n   * @pro\n   * @event Hooks#afterDropdownMenuHide\n   * @param {DropdownMenu} instance The DropdownMenu instance.\n   */\n  'afterDropdownMenuHide',\n\n  /**\n   * Used to check whether the provided row index is hidden.\n   *\n   * @pro\n   * @event Hooks#hiddenRow\n   * @param {Number} row The row index in question.\n   */\n  'hiddenRow',\n\n  /**\n   * Used to check whether the provided column index is hidden.\n   *\n   * @pro\n   * @event Hooks#hiddenColumn\n   * @param {Number} column The column index in question.\n   */\n  'hiddenColumn',\n\n  /**\n   * Fired before adding a children to the NestedRows structure.\n   *\n   * @pro\n   * @event Hooks#beforeAddChild\n   * @param {Object} parent The parent object.\n   * @param {Object|undefined} element The element added as a child. If `undefined`, a blank child was added.\n   * @param {Number|undefined} index The index within the parent where the new child was added. If `undefined`, the element was added as the last child.\n   */\n  'beforeAddChild',\n\n  /**\n   * Fired after adding a children to the NestedRows structure.\n   *\n   * @pro\n   * @event Hooks#afterAddChild\n   * @param {Object} parent The parent object.\n   * @param {Object|undefined} element The element added as a child. If `undefined`, a blank child was added.\n   * @param {Number|undefined} index The index within the parent where the new child was added. If `undefined`, the element was added as the last child.\n   */\n  'afterAddChild',\n\n  /**\n   * Fired before detaching a child from its parent in the NestedRows plugin.\n   *\n   * @pro\n   * @event Hooks#beforeDetachChild\n   * @param {Object} parent An object representing the parent from which the element is to be detached.\n   * @param {Object} element The detached element.\n   */\n  'beforeDetachChild',\n\n  /**\n   * Fired after detaching a child from its parent in the NestedRows plugin.\n   *\n   * @pro\n   * @event Hooks#afterDetachChild\n   * @param {Object} parent An object representing the parent from which the element was detached.\n   * @param {Object} element The detached element.\n   */\n  'afterDetachChild',\n\n  /**\n   * Fired after the editor is opened and rendered.\n   *\n   * @event Hooks#afterBeginEditing\n   * @param {Number} row Row index of the edited cell.\n   * @param {Number} column Column index of the edited cell.\n   */\n  'afterBeginEditing'\n];\n\nclass Hooks {\n  static getSingleton() {\n    return globalSingleton;\n  }\n\n  /**\n   *\n   */\n  constructor() {\n    this.globalBucket = this.createEmptyBucket();\n  }\n\n  /**\n   * Returns a new object with empty handlers related to every registered hook name.\n   *\n   * @returns {Object} The empty bucket object.\n   *\n   * @example\n   * ```js\n   * Handsontable.hooks.createEmptyBucket();\n   * // Results:\n   * {\n   * ...\n   * afterCreateCol: [],\n   * afterCreateRow: [],\n   * beforeInit: [],\n   * ...\n   * }\n   * ```\n   */\n  createEmptyBucket() {\n    const bucket = Object.create(null);\n\n    arrayEach(REGISTERED_HOOKS, (hook) => (bucket[hook] = []));\n\n    return bucket;\n  }\n\n  /**\n   * Get hook bucket based on the context of the object or if argument is `undefined`, get the global hook bucket.\n   *\n   * @param {Object} [context=null] A Handsontable instance.\n   * @returns {Object} Returns a global or Handsontable instance bucket.\n   */\n  getBucket(context = null) {\n    if (context) {\n      if (!context.pluginHookBucket) {\n        context.pluginHookBucket = this.createEmptyBucket();\n      }\n\n      return context.pluginHookBucket;\n    }\n\n    return this.globalBucket;\n  }\n\n  /**\n   * Adds a listener (globally or locally) to a specified hook name.\n   * If the `context` parameter is provided, the hook will be added only to the instance it references.\n   * Otherwise, the callback will be used everytime the hook fires on any Handsontable instance.\n   * You can provide an array of callback functions as the `callback` argument, this way they will all be fired\n   * once the hook is triggered.\n   *\n   * @see Core#addHook\n   * @param {String} key Hook name.\n   * @param {Function|Array} callback Callback function or an array of functions.\n   * @param {Object} [context=null] The context for the hook callback to be added - a Handsontable instance or leave empty.\n   * @returns {Hooks} Instance of Hooks.\n   *\n   * @example\n   * ```js\n   * // single callback, added locally\n   * Handsontable.hooks.add('beforeInit', myCallback, hotInstance);\n   *\n   * // single callback, added globally\n   * Handsontable.hooks.add('beforeInit', myCallback);\n   *\n   * // multiple callbacks, added locally\n   * Handsontable.hooks.add('beforeInit', [myCallback, anotherCallback], hotInstance);\n   *\n   * // multiple callbacks, added globally\n   * Handsontable.hooks.add('beforeInit', [myCallback, anotherCallback]);\n   * ```\n   */\n  add(key, callback, context = null) {\n    if (Array.isArray(callback)) {\n      arrayEach(callback, (c) => this.add(key, c, context));\n\n    } else {\n      const bucket = this.getBucket(context);\n\n      if (typeof bucket[key] === 'undefined') {\n        this.register(key);\n        bucket[key] = [];\n      }\n      callback.skip = false;\n\n      if (bucket[key].indexOf(callback) === -1) {\n        // only add a hook if it has not already been added (adding the same hook twice is now silently ignored)\n        let foundInitialHook = false;\n\n        if (callback.initialHook) {\n          arrayEach(bucket[key], (cb, i) => {\n            if (cb.initialHook) {\n              bucket[key][i] = callback;\n              foundInitialHook = true;\n\n              return false;\n            }\n          });\n        }\n\n        if (!foundInitialHook) {\n          bucket[key].push(callback);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Adds a listener to a specified hook. After the hook runs this listener will be automatically removed from the bucket.\n   *\n   * @see Core#addHookOnce\n   * @param {String} key Hook/Event name.\n   * @param {Function|Array} callback Callback function.\n   * @param {Object} [context=null] A Handsontable instance.\n   *\n   * @example\n   * ```js\n   * Handsontable.hooks.once('beforeInit', myCallback, hotInstance);\n   * ```\n   */\n  once(key, callback, context = null) {\n    if (Array.isArray(callback)) {\n      arrayEach(callback, (c) => this.once(key, c, context));\n\n    } else {\n      callback.runOnce = true;\n      this.add(key, callback, context);\n    }\n  }\n\n  /**\n   * Removes a listener from a hook with a given name. If the `context` argument is provided, it removes a listener from a local hook assigned to the given Handsontable instance.\n   *\n   * @see Core#removeHook\n   * @param {String} key Hook/Event name.\n   * @param {Function} callback Callback function (needs the be the function that was previously added to the hook).\n   * @param {Object} [context=null] Handsontable instance.\n   * @return {Boolean} Returns `true` if hook was removed, `false` otherwise.\n   *\n   * @example\n   * ```js\n   * Handsontable.hooks.remove('beforeInit', myCallback);\n   * ```\n   */\n  remove(key, callback, context = null) {\n    let bucket = this.getBucket(context);\n\n    if (typeof bucket[key] !== 'undefined') {\n      if (bucket[key].indexOf(callback) >= 0) {\n        callback.skip = true;\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Checks whether there are any registered listeners for the provided hook name.\n   * If the `context` parameter is provided, it only checks for listeners assigned to the given Handsontable instance.\n   *\n   * @param {String} key Hook name.\n   * @param {Object} [context=null] A Handsontable instance.\n   * @returns {Boolean} `true` for success, `false` otherwise.\n   */\n  has(key, context = null) {\n    let bucket = this.getBucket(context);\n\n    return !!(bucket[key] !== void 0 && bucket[key].length);\n  }\n\n  /**\n   * Runs all local and global callbacks assigned to the hook identified by the `key` parameter.\n   * It returns either a return value from the last called callback or the first parameter (`p1`) passed to the `run` function.\n   *\n   * @see Core#runHooks\n   * @param {Object} context Handsontable instance.\n   * @param {String} key Hook/Event name.\n   * @param {*} [p1] Parameter to be passed as an argument to the callback function.\n   * @param {*} [p2] Parameter to be passed as an argument to the callback function.\n   * @param {*} [p3] Parameter to be passed as an argument to the callback function.\n   * @param {*} [p4] Parameter to be passed as an argument to the callback function.\n   * @param {*} [p5] Parameter to be passed as an argument to the callback function.\n   * @param {*} [p6] Parameter to be passed as an argument to the callback function.\n   * @returns {*} Either a return value from the last called callback or `p1`.\n   *\n   * @example\n   * ```js\n   * Handsontable.hooks.run(hot, 'beforeInit');\n   * ```\n   */\n  run(context, key, p1, p2, p3, p4, p5, p6) {\n    {\n      const globalHandlers = this.globalBucket[key];\n      let index = -1;\n      let length = globalHandlers ? globalHandlers.length : 0;\n\n      if (length) {\n        // Do not optimise this loop with arrayEach or arrow function! If you do You'll decrease perf because of GC.\n        while (++index < length) {\n          if (!globalHandlers[index] || globalHandlers[index].skip) {\n            /* eslint-disable no-continue */\n            continue;\n          }\n          // performance considerations - http://jsperf.com/call-vs-apply-for-a-plugin-architecture\n          let res = globalHandlers[index].call(context, p1, p2, p3, p4, p5, p6);\n\n          if (res !== void 0) {\n            p1 = res;\n          }\n          if (globalHandlers[index] && globalHandlers[index].runOnce) {\n            this.remove(key, globalHandlers[index]);\n          }\n        }\n      }\n    }\n    {\n      const localHandlers = this.getBucket(context)[key];\n      let index = -1;\n      let length = localHandlers ? localHandlers.length : 0;\n\n      if (length) {\n        // Do not optimise this loop with arrayEach or arrow function! If you do You'll decrease perf because of GC.\n        while (++index < length) {\n          if (!localHandlers[index] || localHandlers[index].skip) {\n            /* eslint-disable no-continue */\n            continue;\n          }\n          // performance considerations - http://jsperf.com/call-vs-apply-for-a-plugin-architecture\n          let res = localHandlers[index].call(context, p1, p2, p3, p4, p5, p6);\n\n          if (res !== void 0) {\n            p1 = res;\n          }\n          if (localHandlers[index] && localHandlers[index].runOnce) {\n            this.remove(key, localHandlers[index], context);\n          }\n        }\n      }\n    }\n\n    return p1;\n  }\n\n  /**\n   * Destroy all listeners connected to the context. If no context is provided, the global listeners will be destroyed.\n   *\n   * @param {Object} [context=null] A Handsontable instance.\n   * @example\n   * ```js\n   * // destroy the global listeners\n   * Handsontable.hooks.destroy();\n   *\n   * // destroy the local listeners\n   * Handsontable.hooks.destroy(hotInstance);\n   * ```\n   */\n  destroy(context = null) {\n    objectEach(this.getBucket(context), (value, key, bucket) => (bucket[key].length = 0));\n  }\n\n  /**\n   * Registers a hook name (adds it to the list of the known hook names). Used by plugins.\n   * It is not necessary to call register, but if you use it, your plugin hook will be used returned by\n   * the `getRegistered` method. (which itself is used in the demo http://docs.handsontable.com/tutorial-callbacks.html).\n   *\n   * @param key {String} The hook name.\n   *\n   * @example\n   * ```js\n   * Handsontable.hooks.register('myHook');\n   * ```\n   */\n  register(key) {\n    if (!this.isRegistered(key)) {\n      REGISTERED_HOOKS.push(key);\n    }\n  }\n\n  /**\n   * Deregisters a hook name (removes it from the list of known hook names).\n   *\n   * @param key {String} Hook name.\n   *\n   * @example\n   * ```js\n   * Handsontable.hooks.deregister('myHook');\n   * ```\n   */\n  deregister(key) {\n    if (this.isRegistered(key)) {\n      REGISTERED_HOOKS.splice(REGISTERED_HOOKS.indexOf(key), 1);\n    }\n  }\n\n  /**\n   * Returns a boolean depending on if a hook by such name has been registered.\n   *\n   * @param key {String} Hook name.\n   * @returns {Boolean} `true` for success, `false` otherwise.\n   *\n   * @example\n   * ```js\n   * Handsontable.hooks.isRegistered('beforeInit');\n   *\n   * // Results:\n   * true\n   * ```\n   */\n  isRegistered(key) {\n    return REGISTERED_HOOKS.indexOf(key) >= 0;\n  }\n\n  /**\n   * Returns an array of registered hooks.\n   *\n   * @returns {Array} An array of registered hooks.\n   *\n   * @example\n   * ```js\n   * Handsontable.hooks.getRegistered();\n   *\n   * // Results:\n   * [\n   * ...\n   *   'beforeInit',\n   *   'beforeRender',\n   *   'beforeSetRangeEnd',\n   *   'beforeDrawBorders',\n   *   'beforeChange',\n   * ...\n   * ]\n   * ```\n   */\n  getRegistered() {\n    return REGISTERED_HOOKS;\n  }\n}\n\nconst globalSingleton = new Hooks();\n\nexport default Hooks;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/pluginHooks.js","import {arrayEach} from './../../helpers/array';\nimport {hasClass} from './../../helpers/dom/element';\nimport {KEY as SEPARATOR} from './predefinedItems/separator';\n\nexport function normalizeSelection(selRange) {\n  return {\n    start: selRange.getTopLeftCorner(),\n    end: selRange.getBottomRightCorner()\n  };\n}\n\nexport function isSeparator(cell) {\n  return hasClass(cell, 'htSeparator');\n}\n\nexport function hasSubMenu(cell) {\n  return hasClass(cell, 'htSubmenu');\n}\n\nexport function isDisabled(cell) {\n  return hasClass(cell, 'htDisabled');\n}\n\nexport function isSelectionDisabled(cell) {\n  return hasClass(cell, 'htSelectionDisabled');\n}\n\nexport function getValidSelection(hot) {\n  let selected = hot.getSelected();\n\n  if (!selected) {\n    return null;\n  }\n  if (selected[0] < 0) {\n    return null;\n  }\n\n  return selected;\n}\n\nexport function prepareVerticalAlignClass(className, alignment) {\n  if (className.indexOf(alignment) != -1) {\n    return className;\n  }\n  className = className\n    .replace('htTop', '')\n    .replace('htMiddle', '')\n    .replace('htBottom', '')\n    .replace('  ', '');\n\n  className += ` ${alignment}`;\n\n  return className;\n}\n\nexport function prepareHorizontalAlignClass(className, alignment) {\n  if (className.indexOf(alignment) != -1) {\n    return className;\n  }\n  className = className\n    .replace('htLeft', '')\n    .replace('htCenter', '')\n    .replace('htRight', '')\n    .replace('htJustify', '')\n    .replace('  ', '');\n\n  className += ` ${alignment}`;\n\n  return className;\n}\n\nexport function getAlignmentClasses(range, callback) {\n  const classes = {};\n\n  for (let row = range.from.row; row <= range.to.row; row++) {\n    for (let col = range.from.col; col <= range.to.col; col++) {\n      if (!classes[row]) {\n        classes[row] = [];\n      }\n      classes[row][col] = callback(row, col);\n    }\n  }\n\n  return classes;\n}\n\nexport function align(range, type, alignment, cellDescriptor, propertySetter) {\n  if (range.from.row == range.to.row && range.from.col == range.to.col) {\n    applyAlignClassName(range.from.row, range.from.col, type, alignment, cellDescriptor, propertySetter);\n  } else {\n    for (let row = range.from.row; row <= range.to.row; row++) {\n      for (let col = range.from.col; col <= range.to.col; col++) {\n        applyAlignClassName(row, col, type, alignment, cellDescriptor, propertySetter);\n      }\n    }\n  }\n}\n\nfunction applyAlignClassName(row, col, type, alignment, cellDescriptor, propertySetter) {\n  let cellMeta = cellDescriptor(row, col);\n  let className = alignment;\n\n  if (cellMeta.className) {\n    if (type === 'vertical') {\n      className = prepareVerticalAlignClass(cellMeta.className, alignment);\n    } else {\n      className = prepareHorizontalAlignClass(cellMeta.className, alignment);\n    }\n  }\n\n  propertySetter(row, col, 'className', className);\n}\n\nexport function checkSelectionConsistency(range, comparator) {\n  let result = false;\n\n  if (range) {\n    range.forAll((row, col) => {\n      if (comparator(row, col)) {\n        result = true;\n\n        return false;\n      }\n    });\n  }\n\n  return result;\n}\n\nexport function markLabelAsSelected(label) {\n  // workaround for https://github.com/handsontable/handsontable/issues/1946\n  return `<span class=\"selected\">${String.fromCharCode(10003)}</span>${label}`;\n}\n\nexport function isItemHidden(item, instance) {\n  return !item.hidden || !(typeof item.hidden == 'function' && item.hidden.call(instance));\n}\n\nfunction shiftSeparators(items, separator) {\n  let result = items.slice(0);\n\n  for (let i = 0; i < result.length;) {\n    if (result[i].name === separator) {\n      result.shift();\n    } else {\n      break;\n    }\n  }\n  return result;\n}\n\nfunction popSeparators(items, separator) {\n  let result = items.slice(0);\n\n  result.reverse();\n  result = shiftSeparators(result, separator);\n  result.reverse();\n\n  return result;\n}\n\nfunction removeDuplicatedSeparators(items) {\n  let result = [];\n\n  arrayEach(items, (value, index) => {\n    if (index > 0) {\n      if (result[result.length - 1].name !== value.name) {\n        result.push(value);\n      }\n    } else {\n      result.push(value);\n    }\n  });\n\n  return result;\n}\n\nexport function filterSeparators(items, separator = SEPARATOR) {\n  let result = items.slice(0);\n\n  result = shiftSeparators(result, separator);\n  result = popSeparators(result, separator);\n  result = removeDuplicatedSeparators(result);\n\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/utils.js","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_descriptors.js","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_has.js","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_to-iobject.js","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_to-length.js","import {\n  getScrollableElement,\n  getTrimmingContainer,\n} from './../../../../helpers/dom/element';\nimport {defineGetter} from './../../../../helpers/object';\nimport {arrayEach} from './../../../../helpers/array';\nimport EventManager from './../../../../eventManager';\nimport Walkontable from './../core';\n\nconst registeredOverlays = {};\n\n/**\n * Creates an overlay over the original Walkontable instance. The overlay renders the clone of the original Walkontable\n * and (optionally) implements behavior needed for native horizontal and vertical scrolling.\n *\n * @class Overlay\n */\nclass Overlay {\n  /**\n   * @type {String}\n   */\n  static get CLONE_TOP() {\n    return 'top';\n  }\n\n  /**\n   * @type {String}\n   */\n  static get CLONE_BOTTOM() {\n    return 'bottom';\n  }\n\n  /**\n   * @type {String}\n   */\n  static get CLONE_LEFT() {\n    return 'left';\n  }\n\n  /**\n   * @type {String}\n   */\n  static get CLONE_TOP_LEFT_CORNER() {\n    return 'top_left_corner';\n  }\n\n  /**\n   * @type {String}\n   */\n  static get CLONE_BOTTOM_LEFT_CORNER() {\n    return 'bottom_left_corner';\n  }\n\n  /**\n   * @type {String}\n   */\n  static get CLONE_DEBUG() {\n    return 'debug';\n  }\n\n  /**\n   * List of all availables clone types\n   *\n   * @type {Array}\n   */\n  static get CLONE_TYPES() {\n    return [\n      Overlay.CLONE_TOP,\n      Overlay.CLONE_BOTTOM,\n      Overlay.CLONE_LEFT,\n      Overlay.CLONE_TOP_LEFT_CORNER,\n      Overlay.CLONE_BOTTOM_LEFT_CORNER,\n      Overlay.CLONE_DEBUG,\n    ];\n  }\n\n  /**\n   * Register overlay class.\n   *\n   * @param {String} type Overlay type, one of the CLONE_TYPES value\n   * @param {Overlay} overlayClass Overlay class extended from base overlay class {@link Overlay}\n   */\n  static registerOverlay(type, overlayClass) {\n    if (Overlay.CLONE_TYPES.indexOf(type) === -1) {\n      throw new Error(`Unsupported overlay (${type}).`);\n    }\n    registeredOverlays[type] = overlayClass;\n  }\n\n  /**\n   * Create new instance of overlay type.\n   *\n   * @param {String} type Overlay type, one of the CLONE_TYPES value\n   * @param {Walkontable} wot Walkontable instance\n   */\n  static createOverlay(type, wot) {\n    return new registeredOverlays[type](wot);\n  }\n\n  /**\n   * Check if specified overlay was registered.\n   *\n   * @param {String} type Overlay type, one of the CLONE_TYPES value\n   * @returns {Boolean}\n   */\n  static hasOverlay(type) {\n    return registeredOverlays[type] !== void 0;\n  }\n\n  /**\n   * Checks if overlay object (`overlay`) is instance of overlay type (`type`).\n   *\n   * @param {Overlay} overlay Overlay object\n   * @param {String} type Overlay type, one of the CLONE_TYPES value\n   * @returns {Boolean}\n   */\n  static isOverlayTypeOf(overlay, type) {\n    if (!overlay || !registeredOverlays[type]) {\n      return false;\n    }\n\n    return overlay instanceof registeredOverlays[type];\n  }\n\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    defineGetter(this, 'wot', wotInstance, {\n      writable: false,\n    });\n\n    // legacy support, deprecated in the future\n    this.instance = this.wot;\n\n    this.type = '';\n    this.mainTableScrollableElement = null;\n    this.TABLE = this.wot.wtTable.TABLE;\n    this.hider = this.wot.wtTable.hider;\n    this.spreader = this.wot.wtTable.spreader;\n    this.holder = this.wot.wtTable.holder;\n    this.wtRootElement = this.wot.wtTable.wtRootElement;\n    this.trimmingContainer = getTrimmingContainer(this.hider.parentNode.parentNode);\n    this.areElementSizesAdjusted = false;\n    this.updateStateOfRendering();\n  }\n\n  /**\n   * Update internal state of object with an information about the need of full rendering of the overlay.\n   *\n   * @returns {Boolean} Returns `true` if the state has changed since the last check.\n   */\n  updateStateOfRendering() {\n    const previousState = this.needFullRender;\n\n    this.needFullRender = this.shouldBeRendered();\n\n    const changed = previousState !== this.needFullRender;\n\n    if (changed && !this.needFullRender) {\n      this.reset();\n    }\n\n    return changed;\n  }\n\n  /**\n   * Checks if overlay should be fully rendered\n   *\n   * @returns {Boolean}\n   */\n  shouldBeRendered() {\n    return true;\n  }\n\n  /**\n   * Update the trimming container.\n   */\n  updateTrimmingContainer() {\n    this.trimmingContainer = getTrimmingContainer(this.hider.parentNode.parentNode);\n  }\n\n  /**\n   * Update the main scrollable element.\n   */\n  updateMainScrollableElement() {\n    this.mainTableScrollableElement = getScrollableElement(this.wot.wtTable.TABLE);\n  }\n\n  /**\n   * Make a clone of table for overlay\n   *\n   * @param {String} direction Can be `Overlay.CLONE_TOP`, `Overlay.CLONE_LEFT`,\n   *                           `Overlay.CLONE_TOP_LEFT_CORNER`, `Overlay.CLONE_DEBUG`\n   * @returns {Walkontable}\n   */\n  makeClone(direction) {\n    if (Overlay.CLONE_TYPES.indexOf(direction) === -1) {\n      throw new Error(`Clone type \"${direction}\" is not supported.`);\n    }\n    let clone = document.createElement('DIV');\n    let clonedTable = document.createElement('TABLE');\n\n    clone.className = `ht_clone_${direction} handsontable`;\n    clone.style.position = 'absolute';\n    clone.style.top = 0;\n    clone.style.left = 0;\n    clone.style.overflow = 'hidden';\n\n    clonedTable.className = this.wot.wtTable.TABLE.className;\n    clone.appendChild(clonedTable);\n\n    this.type = direction;\n    this.wot.wtTable.wtRootElement.parentNode.appendChild(clone);\n\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n\n    if (preventOverflow === true ||\n        preventOverflow === 'horizontal' && this.type === Overlay.CLONE_TOP ||\n        preventOverflow === 'vertical' && this.type === Overlay.CLONE_LEFT) {\n      this.mainTableScrollableElement = window;\n\n    } else {\n      this.mainTableScrollableElement = getScrollableElement(this.wot.wtTable.TABLE);\n    }\n\n    return new Walkontable({\n      cloneSource: this.wot,\n      cloneOverlay: this,\n      table: clonedTable,\n    });\n  }\n\n  /**\n   * Refresh/Redraw overlay\n   *\n   * @param {Boolean} [fastDraw=false]\n   */\n  refresh(fastDraw = false) {\n    // When hot settings are changed we allow to refresh overlay once before blocking\n    var nextCycleRenderFlag = this.shouldBeRendered();\n\n    if (this.clone && (this.needFullRender || nextCycleRenderFlag)) {\n      this.clone.draw(fastDraw);\n    }\n    this.needFullRender = nextCycleRenderFlag;\n  }\n\n  /**\n   * Reset overlay styles to initial values.\n   */\n  reset() {\n    if (!this.clone) {\n      return;\n    }\n    const holder = this.clone.wtTable.holder;\n    const hider = this.clone.wtTable.hider;\n    let holderStyle = holder.style;\n    let hidderStyle = hider.style;\n    let rootStyle = holder.parentNode.style;\n\n    arrayEach([holderStyle, hidderStyle, rootStyle], (style) => {\n      style.width = '';\n      style.height = '';\n    });\n  }\n\n  /**\n   * Destroy overlay instance\n   */\n  destroy() {\n    (new EventManager(this.clone)).destroy();\n  }\n}\n\nexport default Overlay;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/overlay/_base.js","import {arrayReduce} from './array';\n\n/**\n * Checks if given variable is function.\n *\n * @param {*} func Variable to check.\n * @returns {Boolean}\n */\nexport function isFunction(func) {\n  return typeof func === 'function';\n}\n\n/**\n * Creates throttle function that enforces a maximum number of times a function (`func`) can be called over time (`wait`).\n *\n * @param {Function} func Function to invoke.\n * @param {Number} wait Delay in miliseconds.\n * @returns {Function}\n */\nexport function throttle(func, wait = 200) {\n  let lastCalled = 0;\n  let result = {\n    lastCallThrottled: true\n  };\n  let lastTimer = null;\n\n  function _throttle() {\n    const args = arguments;\n    let stamp = Date.now();\n    let needCall = false;\n\n    result.lastCallThrottled = true;\n\n    if (!lastCalled) {\n      lastCalled = stamp;\n      needCall = true;\n    }\n    let remaining = wait - (stamp - lastCalled);\n\n    if (needCall) {\n      result.lastCallThrottled = false;\n      func.apply(this, args);\n    } else {\n      if (lastTimer) {\n        clearTimeout(lastTimer);\n      }\n      lastTimer = setTimeout(() => {\n        result.lastCallThrottled = false;\n        func.apply(this, args);\n        lastCalled = 0;\n        lastTimer = void 0;\n      }, remaining);\n    }\n\n    return result;\n  }\n\n  return _throttle;\n}\n\n/**\n * Creates throttle function that enforces a maximum number of times a function (`func`) can be called over\n * time (`wait`) after specified hits.\n *\n * @param {Function} func Function to invoke.\n * @param {Number} wait Delay in miliseconds.\n * @param {Number} hits Number of hits after throttling will be applied.\n * @returns {Function}\n */\nexport function throttleAfterHits(func, wait = 200, hits = 10) {\n  const funcThrottle = throttle(func, wait);\n  let remainHits = hits;\n\n  function _clearHits() {\n    remainHits = hits;\n  }\n  function _throttleAfterHits() {\n    if (remainHits) {\n      remainHits--;\n\n      return func.apply(this, arguments);\n    }\n\n    return funcThrottle.apply(this, arguments);\n  }\n  _throttleAfterHits.clearHits = _clearHits;\n\n  return _throttleAfterHits;\n}\n\n/**\n * Creates debounce function that enforces a function (`func`) not be called again until a certain amount of time (`wait`)\n * has passed without it being called.\n *\n * @param {Function} func Function to invoke.\n * @param {Number} wait Delay in milliseconds.\n * @returns {Function}\n */\nexport function debounce(func, wait = 200) {\n  let lastTimer = null;\n  let result;\n\n  function _debounce() {\n    const args = arguments;\n\n    if (lastTimer) {\n      clearTimeout(lastTimer);\n    }\n    lastTimer = setTimeout(() => {\n      result = func.apply(this, args);\n    }, wait);\n\n    return result;\n  }\n\n  return _debounce;\n}\n\n/**\n * Creates the function that returns the result of calling the given functions. Result of the first function is passed to\n * the second as an argument and so on. Only first function in the chain can handle multiple arguments.\n *\n * @param {Function} functions Functions to compose.\n * @returns {Function}\n */\nexport function pipe(...functions) {\n  const [firstFunc, ...restFunc] = functions;\n\n  return function _pipe() {\n    return arrayReduce(restFunc, (acc, fn) => fn(acc), firstFunc.apply(this, arguments));\n  };\n}\n\n/**\n * Creates the function that returns the function with cached arguments.\n *\n * @param {Function} func Function to partialization.\n * @param {Array} params Function arguments to cache.\n * @returns {Function}\n */\nexport function partial(func, ...params) {\n  return function _partial(...restParams) {\n    return func.apply(this, params.concat(restParams));\n  };\n}\n\n/**\n * Creates the functions that returns the function with cached arguments. If count if passed arguments will be matched\n * to the arguments defined in `func` then function will be invoked.\n * Arguments are added to the stack in direction from the left to the right.\n *\n * @example\n * ```\n * var replace = curry(function(find, replace, string) {\n *   return string.replace(find, replace);\n * });\n *\n * // returns function with bounded first argument\n * var replace = replace('foo')\n *\n * // returns replaced string - all arguments was passed so function was invoked\n * replace('bar', 'Some test with foo...');\n *\n * ```\n *\n * @param {Function} func Function to currying.\n * @returns {Function}\n */\nexport function curry(func) {\n  const argsLength = func.length;\n\n  function given(argsSoFar) {\n    return function _curry(...params) {\n      const passedArgsSoFar = argsSoFar.concat(params);\n      let result;\n\n      if (passedArgsSoFar.length >= argsLength) {\n        result = func.apply(this, passedArgsSoFar);\n      } else {\n        result = given(passedArgsSoFar);\n      }\n\n      return result;\n    };\n  }\n\n  return given([]);\n}\n\n/**\n * Creates the functions that returns the function with cached arguments. If count if passed arguments will be matched\n * to the arguments defined in `func` then function will be invoked.\n * Arguments are added to the stack in direction from the right to the left.\n *\n * @example\n * ```\n * var replace = curry(function(find, replace, string) {\n *   return string.replace(find, replace);\n * });\n *\n * // returns function with bounded first argument\n * var replace = replace('Some test with foo...')\n *\n * // returns replaced string - all arguments was passed so function was invoked\n * replace('bar', 'foo');\n *\n * ```\n *\n * @param {Function} func Function to currying.\n * @returns {Function}\n */\nexport function curryRight(func) {\n  const argsLength = func.length;\n\n  function given(argsSoFar) {\n    return function _curry(...params) {\n      const passedArgsSoFar = argsSoFar.concat(params.reverse());\n      let result;\n\n      if (passedArgsSoFar.length >= argsLength) {\n        result = func.apply(this, passedArgsSoFar);\n      } else {\n        result = given(passedArgsSoFar);\n      }\n\n      return result;\n    };\n  }\n\n  return given([]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/function.js","\nvar _isIE8 = !(document.createTextNode('test').textContent);\n\nexport function isIE8() {\n  return _isIE8;\n}\n\nvar _isIE9 = !!(document.documentMode);\n\nexport function isIE9() {\n  return _isIE9;\n}\n\nvar _isSafari = (/Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor));\n\nexport function isSafari() {\n  return _isSafari;\n}\n\nvar _isChrome = (/Chrome/.test(navigator.userAgent) && /Google/.test(navigator.vendor));\n\nexport function isChrome() {\n  return _isChrome;\n}\n\nexport function isMobileBrowser(userAgent) {\n  if (!userAgent) {\n    userAgent = navigator.userAgent;\n  }\n\n  return (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/browser.js","import staticRegister from './../utils/staticRegister';\n\nimport autocompleteValidator from './autocompleteValidator';\nimport dateValidator from './dateValidator';\nimport numericValidator from './numericValidator';\nimport timeValidator from './timeValidator';\n\nconst {\n  register,\n  getItem,\n  hasItem,\n  getNames,\n  getValues,\n} = staticRegister('validators');\n\nregister('autocomplete', autocompleteValidator);\nregister('date', dateValidator);\nregister('numeric', numericValidator);\nregister('time', timeValidator);\n\n/**\n * Retrieve validator function.\n *\n * @param {String} name Validator identification.\n * @returns {Function} Returns validator function.\n */\nfunction _getItem(name) {\n  if (typeof name === 'function') {\n    return name;\n  }\n  if (!hasItem(name)) {\n    throw Error(`No registered validator found under \"${name}\" name`);\n  }\n\n  return getItem(name);\n}\n\nexport {\n  register as registerValidator,\n  _getItem as getValidator,\n  hasItem as hasValidator,\n  getNames as getRegisteredValidatorNames,\n  getValues as getRegisteredValidators,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/validators/index.js","/**\n * Check if provided expression is valid formula expression.\n *\n * @param {*} expression Expression to check.\n * @returns {Boolean}\n */\nexport function isFormulaExpression(expression) {\n  return typeof expression === 'string' && expression.length >= 2 && expression.charAt(0) === '=';\n}\n\n/**\n * Check if provided formula expression is escaped.\n *\n * @param {*} expression Expression to check.\n * @returns {Boolean}\n */\nexport function isFormulaExpressionEscaped(expression) {\n  return typeof expression === 'string' && expression.charAt(0) === '\\'' && expression.charAt(1) === '=';\n}\n\n/**\n * Replace escaped formula expression into valid string.\n *\n * @param {String} expression Expression to process.\n * @returns {String}\n */\nexport function unescapeFormulaExpression(expression) {\n  return isFormulaExpressionEscaped(expression) ? expression.substr(1) : expression;\n}\n\n/**\n * Upper case formula expression.\n *\n * @param {String} expression Formula expression.\n * @returns {String}\n */\nexport function toUpperCaseFormula(expression) {\n  const PATTERN = /(\\\\\"|\"(?:\\\\\"|[^\"])*\"|(\\+))|(\\\\'|'(?:\\\\'|[^'])*'|(\\+))/g;\n  const strings = expression.match(PATTERN) || [];\n  let index = -1;\n\n  return expression.toUpperCase().replace(PATTERN, function() {\n    ++index;\n\n    return strings[index];\n  });\n}\n\n/**\n * Cell coordinates function factory.\n *\n * @param {String} axis An axis name (`row` or `column`) which default index will be applied to.\n * @param {Number} defaultIndex Default index.\n * @returns {Function}\n */\nexport function cellCoordFactory(axis, defaultIndex) {\n  return function(cell) {\n    return {\n      row: axis === 'row' ? defaultIndex : cell.row,\n      column: axis === 'column' ? defaultIndex : cell.column,\n    };\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/utils.js","module.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"moment\",\"commonjs2\":\"moment\",\"commonjs\":\"moment\",\"amd\":\"moment\"}\n// module id = 32\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_ctx.js","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_defined.js","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_fails.js","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_hide.js","var global    = require('./_global')\n  , hide      = require('./_hide')\n  , has       = require('./_has')\n  , SRC       = require('./_uid')('src')\n  , TO_STRING = 'toString'\n  , $toString = Function[TO_STRING]\n  , TPL       = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function(it){\n  return $toString.call(it);\n};\n\n(module.exports = function(O, key, val, safe){\n  var isFunction = typeof val == 'function';\n  if(isFunction)has(val, 'name') || hide(val, 'name', key);\n  if(O[key] === val)return;\n  if(isFunction)has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if(O === global){\n    O[key] = val;\n  } else {\n    if(!safe){\n      delete O[key];\n      hide(O, key, val);\n    } else {\n      if(O[key])O[key] = val;\n      else hide(O, key, val);\n    }\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString(){\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_redefine.js","import {arrayEach} from './../helpers/array';\nimport {defineGetter} from './../helpers/object';\n\nconst MIXIN_NAME = 'localHooks';\n\n/**\n * Mixin object to extend objects functionality for local hooks.\n *\n * @type {Object}\n */\nconst localHooks = {\n  /**\n   * Internal hooks storage.\n   */\n  _localHooks: Object.create(null),\n\n  /**\n   * Add hook to the collection.\n   *\n   * @param {String} key Hook name.\n   * @param {Function} callback Hook callback\n   */\n  addLocalHook(key, callback) {\n    if (!this._localHooks[key]) {\n      this._localHooks[key] = [];\n    }\n    this._localHooks[key].push(callback);\n  },\n\n  /**\n   * Run hooks.\n   *\n   * @param {String} key Hook name.\n   * @param {*} params\n   */\n  runLocalHooks(key, ...params) {\n    if (this._localHooks[key]) {\n      arrayEach(this._localHooks[key], (callback) => callback.apply(this, params));\n    }\n  },\n\n  /**\n   * Clear all added hooks.\n   */\n  clearLocalHooks() {\n    this._localHooks = {};\n  },\n};\n\ndefineGetter(localHooks, 'MIXIN_NAME', MIXIN_NAME, {\n  writable: false,\n  enumerable: false,\n});\n\nexport default localHooks;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/mixins/localHooks.js","import {ERROR_REF} from 'hot-formula-parser';\nimport {arrayFilter} from 'handsontable/helpers/array';\nimport BaseCell from './_base';\n\nconst STATE_OUT_OFF_DATE = 1;\nconst STATE_COMPUTING = 2;\nconst STATE_UP_TO_DATE = 3;\nconst states = [STATE_OUT_OFF_DATE, STATE_COMPUTING, STATE_UP_TO_DATE];\n\n/**\n * @class CellValue\n * @util\n */\nclass CellValue extends BaseCell {\n  /**\n   * Out of date state indicates cells ready for recomputing.\n   *\n   * @returns {Number}\n   */\n  static get STATE_OUT_OFF_DATE() {\n    return 1; // PhantomJS crashes when we want to use constant above\n  }\n\n  /**\n   * Computing state indicates cells under processing.\n   *\n   * @returns {Number}\n   */\n  static get STATE_COMPUTING() {\n    return 2; // PhantomJS crashes when we want to use constant above\n  }\n\n  /**\n   * Up to date state indicates cells with fresh computed value.\n   *\n   * @returns {Number}\n   */\n  static get STATE_UP_TO_DATE() {\n    return 3; // PhantomJS crashes when we want to use constant above\n  }\n\n  constructor(row, column) {\n    super(row, column);\n\n    /**\n     * List of precedents cells.\n     *\n     * @type {Array}\n     */\n    this.precedents = [];\n    /**\n     * Computed value.\n     *\n     * @type {*}\n     */\n    this.value = null;\n    /**\n     * Error name.\n     *\n     * @type {String|null}\n     */\n    this.error = null;\n    /**\n     * Indicates cell state.\n     *\n     * @type {String}\n     */\n    this.state = CellValue.STATE_UP_TO_DATE;\n  }\n\n  /**\n   * Set computed value.\n   *\n   * @param {*} value\n   */\n  setValue(value) {\n    this.value = value;\n  }\n\n  /**\n   * Get computed value.\n   *\n   * @returns {*}\n   */\n  getValue() {\n    return this.value;\n  }\n\n  /**\n   * Set error message for this cell.\n   *\n   * @param {String} error Error name.\n   */\n  setError(error) {\n    this.error = error;\n  }\n\n  /**\n   * Get error name for this cell.\n   *\n   * @returns {String|null}\n   */\n  getError() {\n    return this.error;\n  }\n\n  /**\n   * Check if cell value is marked as error.\n   *\n   * @returns {Boolean}\n   */\n  hasError() {\n    return this.error !== null;\n  }\n\n  /**\n   * Set cell state.\n   *\n   * @param {Number} state Cell state.\n   */\n  setState(state) {\n    if (states.indexOf(state) === -1) {\n      throw Error(`Unrecognized state: ${state}`);\n    }\n    this.state = state;\n  }\n\n  /**\n   * Check cell state.\n   *\n   * @returns {Boolean}\n   */\n  isState(state) {\n    return this.state === state;\n  }\n\n  /**\n   * Add precedent cell to the collection.\n   *\n   * @param {CellReference} cellReference Cell reference object.\n   */\n  addPrecedent(cellReference) {\n    if (this.isEqual(cellReference)) {\n      throw Error(ERROR_REF);\n    }\n    if (!this.hasPrecedent(cellReference)) {\n      this.precedents.push(cellReference);\n    }\n  }\n\n  /**\n   * Remove precedent cell from the collection.\n   *\n   * @param {CellReference} cellReference Cell reference object.\n   */\n  removePrecedent(cellReference) {\n    if (this.isEqual(cellReference)) {\n      throw Error(ERROR_REF);\n    }\n    this.precedents = arrayFilter(this.precedents, (cell) => !cell.isEqual(cellReference));\n  }\n\n  /**\n   * Clear all precedent cells.\n   */\n  clearPrecedents() {\n    this.precedents.length = 0;\n  }\n\n  /**\n   * Get precedent cells.\n   *\n   * @returns {Array}\n   */\n  getPrecedents() {\n    return this.precedents;\n  }\n\n  /**\n   * Check if cell value has precedents cells.\n   *\n   * @returns {Boolean}\n   */\n  hasPrecedents() {\n    return this.precedents.length > 0;\n  }\n\n  /**\n   * Check if cell reference is precedents this cell.\n   *\n   * @param {CellReference} cellReference Cell reference object.\n   * @returns {Boolean}\n   */\n  hasPrecedent(cellReference) {\n    return arrayFilter(this.precedents, (cell) => cell.isEqual(cellReference)).length > 0;\n  }\n}\n\nexport default CellValue;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/cell/value.js","import {objectEach} from './../../helpers/object';\nimport alignmentItem, {KEY as ALIGNMENT} from './predefinedItems/alignment';\nimport clearColumnItem, {KEY as CLEAR_COLUMN} from './predefinedItems/clearColumn';\nimport columnLeftItem, {KEY as COLUMN_LEFT} from './predefinedItems/columnLeft';\nimport columnRightItem, {KEY as COLUMN_RIGHT} from './predefinedItems/columnRight';\nimport readOnlyItem, {KEY as READ_ONLY} from './predefinedItems/readOnly';\nimport redoItem, {KEY as REDO} from './predefinedItems/redo';\nimport removeColumnItem, {KEY as REMOVE_COLUMN} from './predefinedItems/removeColumn';\nimport removeRowItem, {KEY as REMOVE_ROW} from './predefinedItems/removeRow';\nimport rowAboveItem, {KEY as ROW_ABOVE} from './predefinedItems/rowAbove';\nimport rowBelowItem, {KEY as ROW_BELOW} from './predefinedItems/rowBelow';\nimport separatorItem, {KEY as SEPARATOR} from './predefinedItems/separator';\nimport undoItem, {KEY as UNDO} from './predefinedItems/undo';\n\nexport {KEY as ALIGNMENT} from './predefinedItems/alignment';\nexport {KEY as CLEAR_COLUMN} from './predefinedItems/clearColumn';\nexport {KEY as COLUMN_LEFT} from './predefinedItems/columnLeft';\nexport {KEY as COLUMN_RIGHT} from './predefinedItems/columnRight';\nexport {KEY as READ_ONLY} from './predefinedItems/readOnly';\nexport {KEY as REDO} from './predefinedItems/redo';\nexport {KEY as REMOVE_COLUMN} from './predefinedItems/removeColumn';\nexport {KEY as REMOVE_ROW} from './predefinedItems/removeRow';\nexport {KEY as ROW_ABOVE} from './predefinedItems/rowAbove';\nexport {KEY as ROW_BELOW} from './predefinedItems/rowBelow';\nexport {KEY as SEPARATOR} from './predefinedItems/separator';\nexport {KEY as UNDO} from './predefinedItems/undo';\n\nexport const ITEMS = [\n  ROW_ABOVE, ROW_BELOW, COLUMN_LEFT, COLUMN_RIGHT, CLEAR_COLUMN, REMOVE_ROW, REMOVE_COLUMN, UNDO, REDO, READ_ONLY,\n  ALIGNMENT, SEPARATOR\n];\n\nconst _predefinedItems = {\n  [SEPARATOR]: separatorItem,\n  [ROW_ABOVE]: rowAboveItem,\n  [ROW_BELOW]: rowBelowItem,\n  [COLUMN_LEFT]: columnLeftItem,\n  [COLUMN_RIGHT]: columnRightItem,\n  [CLEAR_COLUMN]: clearColumnItem,\n  [REMOVE_ROW]: removeRowItem,\n  [REMOVE_COLUMN]: removeColumnItem,\n  [UNDO]: undoItem,\n  [REDO]: redoItem,\n  [READ_ONLY]: readOnlyItem,\n  [ALIGNMENT]: alignmentItem,\n};\n\n/**\n * Gets new object with all predefined menu items.\n *\n * @returns {Object}\n */\nexport function predefinedItems() {\n  const items = {};\n\n  objectEach(_predefinedItems, (itemFactory, key) => {\n    items[key] = itemFactory();\n  });\n\n  return items;\n}\n\n/**\n * Add new predefined menu item to the collection.\n *\n * @param {String} key Menu command id.\n * @param {Object} item Object command descriptor.\n */\nexport function addItem(key, item) {\n  if (ITEMS.indexOf(key) === -1) {\n    _predefinedItems[key] = item;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems.js","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables')\n  , ArrayProto  = Array.prototype;\nif(ArrayProto[UNSCOPABLES] == undefined)require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function(key){\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_add-to-unscopables.js","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_cof.js","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-keys.js","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_property-desc.js","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_to-object.js","import {CellCoords} from './../3rdparty/walkontable/src';\nimport {stringify} from './../helpers/mixed';\n\nexport const EditorState = {\n  VIRGIN: 'STATE_VIRGIN', // before editing\n  EDITING: 'STATE_EDITING',\n  WAITING: 'STATE_WAITING', // waiting for async validation\n  FINISHED: 'STATE_FINISHED'\n};\n\nfunction BaseEditor(instance) {\n  this.instance = instance;\n  this.state = EditorState.VIRGIN;\n\n  this._opened = false;\n  this._fullEditMode = false;\n  this._closeCallback = null;\n\n  this.init();\n}\n\nBaseEditor.prototype._fireCallbacks = function(result) {\n  if (this._closeCallback) {\n    this._closeCallback(result);\n    this._closeCallback = null;\n  }\n};\n\nBaseEditor.prototype.init = function() {};\n\nBaseEditor.prototype.getValue = function() {\n  throw Error('Editor getValue() method unimplemented');\n};\n\nBaseEditor.prototype.setValue = function(newValue) {\n  throw Error('Editor setValue() method unimplemented');\n};\n\nBaseEditor.prototype.open = function() {\n  throw Error('Editor open() method unimplemented');\n};\n\nBaseEditor.prototype.close = function() {\n  throw Error('Editor close() method unimplemented');\n};\n\nBaseEditor.prototype.prepare = function(row, col, prop, td, originalValue, cellProperties) {\n  this.TD = td;\n  this.row = row;\n  this.col = col;\n  this.prop = prop;\n  this.originalValue = originalValue;\n  this.cellProperties = cellProperties;\n\n  let invalidActiveElement = !document.activeElement || (document.activeElement && document.activeElement.nodeName === void 0);\n\n  if (this.instance.view.isMouseDown() && document.activeElement && document.activeElement !== document.body && !invalidActiveElement) {\n    document.activeElement.blur();\n\n  } else if (invalidActiveElement) { // IE\n    document.body.focus();\n  }\n\n  this.state = EditorState.VIRGIN;\n};\n\nBaseEditor.prototype.extend = function() {\n  var baseClass = this.constructor;\n\n  function Editor() {\n    baseClass.apply(this, arguments);\n  }\n\n  function inherit(Child, Parent) {\n    function Bridge() {}\n    Bridge.prototype = Parent.prototype;\n    Child.prototype = new Bridge();\n    Child.prototype.constructor = Child;\n\n    return Child;\n  }\n\n  return inherit(Editor, baseClass);\n};\n\nBaseEditor.prototype.saveValue = function(value, ctrlDown) {\n  let selection;\n  let tmp;\n\n  // if ctrl+enter and multiple cells selected, behave like Excel (finish editing and apply to all cells)\n  if (ctrlDown) {\n    selection = this.instance.getSelected();\n\n    if (selection[0] > selection[2]) {\n      tmp = selection[0];\n      selection[0] = selection[2];\n      selection[2] = tmp;\n    }\n    if (selection[1] > selection[3]) {\n      tmp = selection[1];\n      selection[1] = selection[3];\n      selection[3] = tmp;\n    }\n  } else {\n    selection = [this.row, this.col, null, null];\n  }\n\n  this.instance.populateFromArray(selection[0], selection[1], value, selection[2], selection[3], 'edit');\n};\n\nBaseEditor.prototype.beginEditing = function(initialValue, event) {\n  if (this.state != EditorState.VIRGIN) {\n    return;\n  }\n  this.instance.view.scrollViewport(new CellCoords(this.row, this.col));\n  this.instance.view.render();\n  this.state = EditorState.EDITING;\n\n  initialValue = typeof initialValue == 'string' ? initialValue : this.originalValue;\n  this.setValue(stringify(initialValue));\n\n  this.open(event);\n  this._opened = true;\n  this.focus();\n\n  // only rerender the selections (FillHandle should disappear when beginediting is triggered)\n  this.instance.view.render();\n\n  this.instance.runHooks('afterBeginEditing', this.row, this.col);\n};\n\nBaseEditor.prototype.finishEditing = function(restoreOriginalValue, ctrlDown, callback) {\n  var _this = this,\n    val;\n\n  if (callback) {\n    var previousCloseCallback = this._closeCallback;\n\n    this._closeCallback = function(result) {\n      if (previousCloseCallback) {\n        previousCloseCallback(result);\n      }\n\n      callback(result);\n      _this.instance.view.render();\n    };\n  }\n\n  if (this.isWaiting()) {\n    return;\n  }\n\n  if (this.state == EditorState.VIRGIN) {\n    this.instance._registerTimeout(setTimeout(() => {\n      _this._fireCallbacks(true);\n    }, 0));\n\n    return;\n  }\n\n  if (this.state == EditorState.EDITING) {\n    if (restoreOriginalValue) {\n      this.cancelChanges();\n      this.instance.view.render();\n\n      return;\n    }\n\n    let value = this.getValue();\n\n    if (this.instance.getSettings().trimWhitespace) {\n      // We trim only string values\n      val = [\n        [typeof value === 'string' ? String.prototype.trim.call(value || '') : value]\n      ];\n    } else {\n      val = [\n        [value]\n      ];\n    }\n\n    this.state = EditorState.WAITING;\n    this.saveValue(val, ctrlDown);\n\n    if (this.instance.getCellValidator(this.cellProperties)) {\n      this.instance.addHookOnce('postAfterValidate', (result) => {\n        _this.state = EditorState.FINISHED;\n        _this.discardEditor(result);\n      });\n    } else {\n      this.state = EditorState.FINISHED;\n      this.discardEditor(true);\n    }\n  }\n};\n\nBaseEditor.prototype.cancelChanges = function() {\n  this.state = EditorState.FINISHED;\n  this.discardEditor();\n};\n\nBaseEditor.prototype.discardEditor = function(result) {\n  if (this.state !== EditorState.FINISHED) {\n    return;\n  }\n  // validator was defined and failed\n  if (result === false && this.cellProperties.allowInvalid !== true) {\n    this.instance.selectCell(this.row, this.col);\n    this.focus();\n    this.state = EditorState.EDITING;\n    this._fireCallbacks(false);\n\n  } else {\n    this.close();\n    this._opened = false;\n    this._fullEditMode = false;\n    this.state = EditorState.VIRGIN;\n    this._fireCallbacks(true);\n  }\n};\n\n/**\n * Switch editor into full edit mode. In this state navigation keys don't close editor. This mode is activated\n * automatically after hit ENTER or F2 key on the cell or while editing cell press F2 key.\n */\nBaseEditor.prototype.enableFullEditMode = function() {\n  this._fullEditMode = true;\n};\n\n/**\n * Checks if editor is in full edit mode.\n *\n * @returns {Boolean}\n */\nBaseEditor.prototype.isInFullEditMode = function() {\n  return this._fullEditMode;\n};\n\nBaseEditor.prototype.isOpened = function() {\n  return this._opened;\n};\n\nBaseEditor.prototype.isWaiting = function() {\n  return this.state === EditorState.WAITING;\n};\n\nBaseEditor.prototype.checkEditorSection = function() {\n  var totalRows = this.instance.countRows();\n  var section = '';\n\n  if (this.row < this.instance.getSettings().fixedRowsTop) {\n    if (this.col < this.instance.getSettings().fixedColumnsLeft) {\n      section = 'top-left-corner';\n    } else {\n      section = 'top';\n    }\n  } else if (this.instance.getSettings().fixedRowsBottom && this.row >= totalRows - this.instance.getSettings().fixedRowsBottom) {\n    if (this.col < this.instance.getSettings().fixedColumnsLeft) {\n      section = 'bottom-left-corner';\n    } else {\n      section = 'bottom';\n    }\n  } else if (this.col < this.instance.getSettings().fixedColumnsLeft) {\n    section = 'left';\n  }\n\n  return section;\n};\n\nexport default BaseEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/_baseEditor.js","// https://gist.github.com/paulirish/1579671\nlet lastTime = 0;\nlet vendors = ['ms', 'moz', 'webkit', 'o'];\nlet _requestAnimationFrame = window.requestAnimationFrame;\nlet _cancelAnimationFrame = window.cancelAnimationFrame;\n\nfor (let x = 0; x < vendors.length && !_requestAnimationFrame; ++x) {\n  _requestAnimationFrame = window[`${vendors[x]}RequestAnimationFrame`];\n  _cancelAnimationFrame = window[`${vendors[x]}CancelAnimationFrame`] || window[`${vendors[x]}CancelRequestAnimationFrame`];\n}\n\nif (!_requestAnimationFrame) {\n  _requestAnimationFrame = function(callback) {\n    let currTime = new Date().getTime();\n    let timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    let id = window.setTimeout(() => {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n\n    return id;\n  };\n}\n\nif (!_cancelAnimationFrame) {\n  _cancelAnimationFrame = function(id) {\n    clearTimeout(id);\n  };\n}\n\n/**\n * Polyfill for requestAnimationFrame\n *\n * @param {Function} callback\n * @returns {Number}\n */\nexport function requestAnimationFrame(callback) {\n  return _requestAnimationFrame.call(window, callback);\n}\n\n/**\n * Polyfill for cancelAnimationFrame\n *\n * @param {Number} id\n */\nexport function cancelAnimationFrame(id) {\n  _cancelAnimationFrame.call(window, id);\n}\n\nexport function isTouchSupported() {\n  return ('ontouchstart' in window);\n}\n\n/**\n * Checks if browser is support web components natively\n *\n * @returns {Boolean}\n */\nexport function isWebComponentSupportedNatively() {\n  var test = document.createElement('div');\n\n  return !!(test.createShadowRoot && test.createShadowRoot.toString().match(/\\[native code\\]/));\n}\n\nvar _hasCaptionProblem;\n\nfunction detectCaptionProblem() {\n  var TABLE = document.createElement('TABLE');\n  TABLE.style.borderSpacing = 0;\n  TABLE.style.borderWidth = 0;\n  TABLE.style.padding = 0;\n  var TBODY = document.createElement('TBODY');\n  TABLE.appendChild(TBODY);\n  TBODY.appendChild(document.createElement('TR'));\n  TBODY.firstChild.appendChild(document.createElement('TD'));\n  TBODY.firstChild.firstChild.innerHTML = '<tr><td>t<br>t</td></tr>';\n\n  var CAPTION = document.createElement('CAPTION');\n  CAPTION.innerHTML = 'c<br>c<br>c<br>c';\n  CAPTION.style.padding = 0;\n  CAPTION.style.margin = 0;\n  TABLE.insertBefore(CAPTION, TBODY);\n\n  document.body.appendChild(TABLE);\n  _hasCaptionProblem = (TABLE.offsetHeight < 2 * TABLE.lastChild.offsetHeight); // boolean\n  document.body.removeChild(TABLE);\n}\n\nexport function hasCaptionProblem() {\n  if (_hasCaptionProblem === void 0) {\n    detectCaptionProblem();\n  }\n\n  return _hasCaptionProblem;\n}\n\nlet comparisonFunction;\n\n/**\n * Get string comparison function for sorting purposes. It supports multilingual string comparison base on Internationalization API.\n *\n * @param {String} [language]\n * @param {Object} [options]\n * @returns {*}\n */\nexport function getComparisonFunction(language, options = {}) {\n  if (comparisonFunction) {\n    return comparisonFunction;\n  }\n\n  if (typeof Intl === 'object') {\n    comparisonFunction = new Intl.Collator(language, options).compare;\n\n  } else if (typeof String.prototype.localeCompare === 'function') {\n    comparisonFunction = (a, b) => (`${a}`).localeCompare(b);\n\n  } else {\n    comparisonFunction = (a, b) => {\n      if (a === b) {\n        return 0;\n      }\n\n      return a > b ? -1 : 1;\n    };\n  }\n\n  return comparisonFunction;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/feature.js","import Core from './../core';\nimport {isObject} from './../helpers/object';\n\n/**\n * @class RecordTranslator\n * @util\n */\nclass RecordTranslator {\n  constructor(hot) {\n    this.hot = hot;\n  }\n\n  /**\n   * Translate physical row index into visual.\n   *\n   * @param {Number} row Physical row index.\n   * @returns {Number} Returns visual row index.\n   */\n  toVisualRow(row) {\n    return this.hot.runHooks('unmodifyRow', row);\n  }\n\n  /**\n   * Translate physical column index into visual.\n   *\n   * @param {Number} column Physical column index.\n   * @returns {Number} Returns visual column index.\n   */\n  toVisualColumn(column) {\n    return this.hot.runHooks('unmodifyCol', column);\n  }\n\n  /**\n   * Translate physical coordinates into visual. Can be passed as separate 2 arguments (row, column) or as an object in first\n   * argument with `row` and `column` keys.\n   *\n   * @param {Number|Object} row Physical coordinates or row index.\n   * @param {Number} [column] Physical column index.\n   * @returns {Object|Array} Returns an object with visual records or an array if coordinates passed as separate arguments.\n   */\n  toVisual(row, column) {\n    let result;\n\n    if (isObject(row)) {\n      result = {\n        row: this.toVisualRow(row.row),\n        column: this.toVisualColumn(row.column),\n      };\n    } else {\n      result = [this.toVisualRow(row), this.toVisualColumn(column)];\n    }\n\n    return result;\n  }\n\n  /**\n   * Translate visual row index into physical.\n   *\n   * @param {Number} row Visual row index.\n   * @returns {Number} Returns physical row index.\n   */\n  toPhysicalRow(row) {\n    return this.hot.runHooks('modifyRow', row);\n  }\n\n  /**\n   * Translate visual column index into physical.\n   *\n   * @param {Number} column Visual column index.\n   * @returns {Number} Returns physical column index.\n   */\n  toPhysicalColumn(column) {\n    return this.hot.runHooks('modifyCol', column);\n  }\n\n  /**\n   * Translate visual coordinates into physical. Can be passed as separate 2 arguments (row, column) or as an object in first\n   * argument with `row` and `column` keys.\n   *\n   * @param {Number|Object} row Visual coordinates or row index.\n   * @param {Number} [column] Visual column index.\n   * @returns {Object|Array} Returns an object with physical records or an array if coordinates passed as separate arguments.\n   */\n  toPhysical(row, column) {\n    let result;\n\n    if (isObject(row)) {\n      result = {\n        row: this.toPhysicalRow(row.row),\n        column: this.toPhysicalColumn(row.column),\n      };\n    } else {\n      result = [this.toPhysicalRow(row), this.toPhysicalColumn(column)];\n    }\n\n    return result;\n  }\n}\n\nexport {RecordTranslator};\n\nconst identities = new WeakMap();\nconst translatorSingletons = new WeakMap();\n\nexport function registerIdentity(identity, hot) {\n  identities.set(identity, hot);\n}\n\nexport function getTranslator(identity) {\n  let singleton;\n\n  if (!(identity instanceof Core)) {\n    if (!identities.has(identity)) {\n      throw Error('Record translator was not registered for this object identity');\n    }\n    identity = identities.get(identity);\n  }\n  if (translatorSingletons.has(identity)) {\n    singleton = translatorSingletons.get(identity);\n\n  } else {\n    singleton = new RecordTranslator(identity);\n    translatorSingletons.set(identity, singleton);\n  }\n\n  return singleton;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/utils/recordTranslator.js","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_core.js","module.exports = {};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_iterators.js","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_meta.js","exports.f = {}.propertyIsEnumerable;\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-pie.js","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_set-to-string-tag.js","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_uid.js","/**\n * CellCoords holds cell coordinates (row, column) and few method to validate them and\n * retrieve as an array or an object\n *\n * @class CellCoords\n */\nclass CellCoords {\n  /**\n   * @param {Number} row Row index\n   * @param {Number} col Column index\n   */\n  constructor(row, col) {\n    if (typeof row !== 'undefined' && typeof col !== 'undefined') {\n      this.row = row;\n      this.col = col;\n\n    } else {\n      this.row = null;\n      this.col = null;\n    }\n  }\n\n  /**\n   * Checks if given set of coordinates is valid in context of a given Walkontable instance\n   *\n   * @param {Walkontable} wotInstance\n   * @returns {Boolean}\n   */\n  isValid(wotInstance) {\n    // is it a valid cell index (0 or higher)\n    if (this.row < 0 || this.col < 0) {\n      return false;\n    }\n    // is selection within total rows and columns\n    if (this.row >= wotInstance.getSetting('totalRows') || this.col >= wotInstance.getSetting('totalColumns')) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Checks if this cell coords are the same as cell coords given as a parameter\n   *\n   * @param {CellCoords} cellCoords\n   * @returns {Boolean}\n   */\n  isEqual(cellCoords) {\n    if (cellCoords === this) {\n      return true;\n    }\n\n    return this.row === cellCoords.row && this.col === cellCoords.col;\n  }\n\n  /**\n   * Checks if tested coordinates are positioned in south-east from this cell coords\n   *\n   * @param {Object} testedCoords\n   * @returns {Boolean}\n   */\n  isSouthEastOf(testedCoords) {\n    return this.row >= testedCoords.row && this.col >= testedCoords.col;\n  }\n\n  /**\n   * Checks if tested coordinates are positioned in north-east from this cell coords\n   *\n   * @param {Object} testedCoords\n   * @returns {Boolean}\n   */\n  isNorthWestOf(testedCoords) {\n    return this.row <= testedCoords.row && this.col <= testedCoords.col;\n  }\n\n  /**\n   * Checks if tested coordinates are positioned in south-west from this cell coords\n   *\n   * @param {Object} testedCoords\n   * @returns {Boolean}\n   */\n  isSouthWestOf(testedCoords) {\n    return this.row >= testedCoords.row && this.col <= testedCoords.col;\n  }\n\n  /**\n   * Checks if tested coordinates are positioned in north-east from this cell coords\n   *\n   * @param {Object} testedCoords\n   * @returns {Boolean}\n   */\n  isNorthEastOf(testedCoords) {\n    return this.row <= testedCoords.row && this.col >= testedCoords.col;\n  }\n}\n\nexport default CellCoords;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/cell/coords.js","import {\n    addClass,\n    getCaretPosition,\n    getComputedStyle,\n    getCssTransform,\n    getScrollableElement,\n    getScrollbarWidth,\n    innerWidth,\n    offset,\n    resetCssTransform,\n    setCaretPosition,\n    hasVerticalScrollbar,\n    hasHorizontalScrollbar\n} from './../helpers/dom/element';\nimport autoResize from './../../lib/autoResize/autoResize';\nimport BaseEditor, {EditorState} from './_baseEditor';\nimport EventManager from './../eventManager';\nimport {KEY_CODES} from './../helpers/unicode';\nimport {stopPropagation, stopImmediatePropagation, isImmediatePropagationStopped} from './../helpers/dom/event';\n\nconst TextEditor = BaseEditor.prototype.extend();\n\n/**\n * @private\n * @editor TextEditor\n * @class TextEditor\n * @dependencies autoResize\n */\nTextEditor.prototype.init = function() {\n  var that = this;\n  this.createElements();\n  this.eventManager = new EventManager(this);\n  this.bindEvents();\n  this.autoResize = autoResize();\n\n  this.instance.addHook('afterDestroy', () => {\n    that.destroy();\n  });\n};\n\nTextEditor.prototype.getValue = function() {\n  return this.TEXTAREA.value;\n};\n\nTextEditor.prototype.setValue = function(newValue) {\n  this.TEXTAREA.value = newValue;\n};\n\nvar onBeforeKeyDown = function onBeforeKeyDown(event) {\n  var\n    instance = this,\n    that = instance.getActiveEditor(),\n    ctrlDown;\n\n  // catch CTRL but not right ALT (which in some systems triggers ALT+CTRL)\n  ctrlDown = (event.ctrlKey || event.metaKey) && !event.altKey;\n\n  // Process only events that have been fired in the editor\n  if (event.target !== that.TEXTAREA || isImmediatePropagationStopped(event)) {\n    return;\n  }\n\n  if (event.keyCode === 17 || event.keyCode === 224 || event.keyCode === 91 || event.keyCode === 93) {\n    // when CTRL or its equivalent is pressed and cell is edited, don't prepare selectable text in textarea\n    stopImmediatePropagation(event);\n    return;\n  }\n\n  switch (event.keyCode) {\n    case KEY_CODES.ARROW_RIGHT:\n      if (that.isInFullEditMode()) {\n        if ((!that.isWaiting() && !that.allowKeyEventPropagation) ||\n            (!that.isWaiting() && that.allowKeyEventPropagation && !that.allowKeyEventPropagation(event.keyCode))) {\n          stopImmediatePropagation(event);\n        }\n      }\n      break;\n    case KEY_CODES.ARROW_LEFT:\n      if (that.isInFullEditMode()) {\n        if ((!that.isWaiting() && !that.allowKeyEventPropagation) ||\n            (!that.isWaiting() && that.allowKeyEventPropagation && !that.allowKeyEventPropagation(event.keyCode))) {\n          stopImmediatePropagation(event);\n        }\n      }\n      break;\n    case KEY_CODES.ARROW_UP:\n    case KEY_CODES.ARROW_DOWN:\n      if (that.isInFullEditMode()) {\n        if ((!that.isWaiting() && !that.allowKeyEventPropagation) ||\n            (!that.isWaiting() && that.allowKeyEventPropagation && !that.allowKeyEventPropagation(event.keyCode))) {\n          stopImmediatePropagation(event);\n        }\n      }\n      break;\n\n    case KEY_CODES.ENTER:\n      var selected = that.instance.getSelected();\n      var isMultipleSelection = !(selected[0] === selected[2] && selected[1] === selected[3]);\n      if ((ctrlDown && !isMultipleSelection) || event.altKey) { // if ctrl+enter or alt+enter, add new line\n        if (that.isOpened()) {\n          var\n            caretPosition = getCaretPosition(that.TEXTAREA),\n            value = that.getValue();\n\n          var newValue = `${value.slice(0, caretPosition)}\\n${value.slice(caretPosition)}`;\n\n          that.setValue(newValue);\n\n          setCaretPosition(that.TEXTAREA, caretPosition + 1);\n\n        } else {\n          that.beginEditing(`${that.originalValue}\\n`);\n        }\n        stopImmediatePropagation(event);\n      }\n      event.preventDefault(); // don't add newline to field\n      break;\n\n    case KEY_CODES.A:\n    case KEY_CODES.X:\n    case KEY_CODES.C:\n    case KEY_CODES.V:\n      if (ctrlDown) {\n        stopImmediatePropagation(event); // CTRL+A, CTRL+C, CTRL+V, CTRL+X should only work locally when cell is edited (not in table context)\n      }\n      break;\n\n    case KEY_CODES.BACKSPACE:\n    case KEY_CODES.DELETE:\n    case KEY_CODES.HOME:\n    case KEY_CODES.END:\n      stopImmediatePropagation(event); // backspace, delete, home, end should only work locally when cell is edited (not in table context)\n      break;\n    default:\n      break;\n  }\n\n  if ([KEY_CODES.ARROW_UP, KEY_CODES.ARROW_RIGHT, KEY_CODES.ARROW_DOWN, KEY_CODES.ARROW_LEFT].indexOf(event.keyCode) === -1) {\n    that.autoResize.resize(String.fromCharCode(event.keyCode));\n  }\n};\n\nTextEditor.prototype.open = function() {\n  this.refreshDimensions(); // need it instantly, to prevent https://github.com/handsontable/handsontable/issues/348\n\n  this.instance.addHook('beforeKeyDown', onBeforeKeyDown);\n};\n\nTextEditor.prototype.close = function(tdOutside) {\n  this.textareaParentStyle.display = 'none';\n\n  this.autoResize.unObserve();\n\n  if (document.activeElement === this.TEXTAREA) {\n    this.instance.listen(); // don't refocus the table if user focused some cell outside of HT on purpose\n  }\n  this.instance.removeHook('beforeKeyDown', onBeforeKeyDown);\n};\n\nTextEditor.prototype.focus = function() {\n  this.TEXTAREA.focus();\n  setCaretPosition(this.TEXTAREA, this.TEXTAREA.value.length);\n};\n\nTextEditor.prototype.createElements = function() {\n  //    this.$body = $(document.body);\n\n  this.TEXTAREA = document.createElement('TEXTAREA');\n\n  addClass(this.TEXTAREA, 'handsontableInput');\n\n  this.textareaStyle = this.TEXTAREA.style;\n  this.textareaStyle.width = 0;\n  this.textareaStyle.height = 0;\n\n  this.TEXTAREA_PARENT = document.createElement('DIV');\n  addClass(this.TEXTAREA_PARENT, 'handsontableInputHolder');\n\n  this.textareaParentStyle = this.TEXTAREA_PARENT.style;\n  this.textareaParentStyle.top = 0;\n  this.textareaParentStyle.left = 0;\n  this.textareaParentStyle.display = 'none';\n\n  this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);\n\n  this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);\n\n  var that = this;\n  this.instance._registerTimeout(setTimeout(() => {\n    that.refreshDimensions();\n  }, 0));\n};\n\nTextEditor.prototype.getEditedCell = function() {\n  var\n    editorSection = this.checkEditorSection(),\n    editedCell;\n\n  switch (editorSection) {\n    case 'top':\n      editedCell = this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({\n        row: this.row,\n        col: this.col\n      });\n      this.textareaParentStyle.zIndex = 101;\n      break;\n    case 'top-left-corner':\n      editedCell = this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({\n        row: this.row,\n        col: this.col\n      });\n      this.textareaParentStyle.zIndex = 103;\n      break;\n    case 'bottom-left-corner':\n      editedCell = this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell({\n        row: this.row,\n        col: this.col\n      });\n      this.textareaParentStyle.zIndex = 103;\n      break;\n    case 'left':\n      editedCell = this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({\n        row: this.row,\n        col: this.col\n      });\n      this.textareaParentStyle.zIndex = 102;\n      break;\n    case 'bottom':\n      editedCell = this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.getCell({\n        row: this.row,\n        col: this.col\n      });\n      this.textareaParentStyle.zIndex = 102;\n      break;\n    default:\n      editedCell = this.instance.getCell(this.row, this.col);\n      this.textareaParentStyle.zIndex = '';\n      break;\n  }\n\n  return editedCell != -1 && editedCell != -2 ? editedCell : void 0;\n};\n\nTextEditor.prototype.refreshValue = function() {\n  let sourceData = this.instance.getSourceDataAtCell(this.row, this.prop);\n  this.originalValue = sourceData;\n\n  this.setValue(sourceData);\n  this.refreshDimensions();\n};\n\nTextEditor.prototype.refreshDimensions = function() {\n  if (this.state !== EditorState.EDITING) {\n    return;\n  }\n  this.TD = this.getEditedCell();\n\n  // TD is outside of the viewport.\n  if (!this.TD) {\n    this.close(true);\n\n    return;\n  }\n  var\n    currentOffset = offset(this.TD),\n    containerOffset = offset(this.instance.rootElement),\n    scrollableContainer = getScrollableElement(this.TD),\n    totalRowsCount = this.instance.countRows(),\n\n    // If colHeaders is disabled, cells in the first row have border-top\n    editTopModifier = currentOffset.top === containerOffset.top ? 0 : 1,\n    editTop = currentOffset.top - containerOffset.top - editTopModifier - (scrollableContainer.scrollTop || 0),\n    editLeft = currentOffset.left - containerOffset.left - 1 - (scrollableContainer.scrollLeft || 0),\n\n    settings = this.instance.getSettings(),\n    rowHeadersCount = this.instance.hasRowHeaders(),\n    colHeadersCount = this.instance.hasColHeaders(),\n    editorSection = this.checkEditorSection(),\n    backgroundColor = this.TD.style.backgroundColor,\n    cssTransformOffset;\n\n  // TODO: Refactor this to the new instance.getCell method (from #ply-59), after 0.12.1 is released\n  switch (editorSection) {\n    case 'top':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);\n      break;\n    case 'left':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);\n      break;\n    case 'top-left-corner':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);\n      break;\n    case 'bottom-left-corner':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);\n      break;\n    case 'bottom':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode);\n      break;\n    default:\n      break;\n  }\n\n  if (colHeadersCount && this.instance.getSelected()[0] === 0 ||\n      (settings.fixedRowsBottom && this.instance.getSelected()[0] === totalRowsCount - settings.fixedRowsBottom)) {\n    editTop += 1;\n  }\n\n  if (this.instance.getSelected()[1] === 0) {\n    editLeft += 1;\n  }\n\n  if (cssTransformOffset && cssTransformOffset != -1) {\n    this.textareaParentStyle[cssTransformOffset[0]] = cssTransformOffset[1];\n  } else {\n    resetCssTransform(this.TEXTAREA_PARENT);\n  }\n\n  this.textareaParentStyle.top = `${editTop}px`;\n  this.textareaParentStyle.left = `${editLeft}px`;\n\n  let firstRowOffset = this.instance.view.wt.wtViewport.rowsRenderCalculator.startPosition;\n  let firstColumnOffset = this.instance.view.wt.wtViewport.columnsRenderCalculator.startPosition;\n  let horizontalScrollPosition = this.instance.view.wt.wtOverlays.leftOverlay.getScrollPosition();\n  let verticalScrollPosition = this.instance.view.wt.wtOverlays.topOverlay.getScrollPosition();\n  let scrollbarWidth = getScrollbarWidth();\n\n  let cellTopOffset = this.TD.offsetTop + firstRowOffset - verticalScrollPosition;\n  let cellLeftOffset = this.TD.offsetLeft + firstColumnOffset - horizontalScrollPosition;\n\n  let width = innerWidth(this.TD) - 8;\n  let actualVerticalScrollbarWidth = hasVerticalScrollbar(scrollableContainer) ? scrollbarWidth : 0;\n  let actualHorizontalScrollbarWidth = hasHorizontalScrollbar(scrollableContainer) ? scrollbarWidth : 0;\n  let maxWidth = this.instance.view.maximumVisibleElementWidth(cellLeftOffset) - 9 - actualVerticalScrollbarWidth;\n  let height = this.TD.scrollHeight + 1;\n  let maxHeight = Math.max(this.instance.view.maximumVisibleElementHeight(cellTopOffset) - actualHorizontalScrollbarWidth, 23);\n\n  const cellComputedStyle = getComputedStyle(this.TD);\n\n  this.TEXTAREA.style.fontSize = cellComputedStyle.fontSize;\n  this.TEXTAREA.style.fontFamily = cellComputedStyle.fontFamily;\n  this.TEXTAREA.style.backgroundColor = ''; // RESET STYLE\n  this.TEXTAREA.style.backgroundColor = backgroundColor ? backgroundColor : getComputedStyle(this.TEXTAREA).backgroundColor;\n\n  this.autoResize.init(this.TEXTAREA, {\n    minHeight: Math.min(height, maxHeight),\n    maxHeight, // TEXTAREA should never be wider than visible part of the viewport (should not cover the scrollbar)\n    minWidth: Math.min(width, maxWidth),\n    maxWidth // TEXTAREA should never be wider than visible part of the viewport (should not cover the scrollbar)\n  }, true);\n\n  this.textareaParentStyle.display = 'block';\n};\n\nTextEditor.prototype.bindEvents = function() {\n  var editor = this;\n\n  this.eventManager.addEventListener(this.TEXTAREA, 'cut', (event) => {\n    stopPropagation(event);\n  });\n\n  this.eventManager.addEventListener(this.TEXTAREA, 'paste', (event) => {\n    stopPropagation(event);\n  });\n\n  this.instance.addHook('afterScrollHorizontally', () => {\n    editor.refreshDimensions();\n  });\n\n  this.instance.addHook('afterScrollVertically', () => {\n    editor.refreshDimensions();\n  });\n\n  this.instance.addHook('afterColumnResize', () => {\n    editor.refreshDimensions();\n    editor.focus();\n  });\n\n  this.instance.addHook('afterRowResize', () => {\n    editor.refreshDimensions();\n    editor.focus();\n  });\n\n  this.instance.addHook('afterDestroy', () => {\n    editor.eventManager.destroy();\n  });\n};\n\nTextEditor.prototype.destroy = function() {\n  this.eventManager.destroy();\n};\n\nexport default TextEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/textEditor.js","import {getComparisonFunction} from 'handsontable/helpers/feature';\nimport {arrayMap, arrayUnique, arrayEach} from 'handsontable/helpers/array';\n\nconst sortCompare = getComparisonFunction();\n\n/**\n * Comparison function for sorting purposes.\n *\n * @param {*} a\n * @param {*} b\n * @returns {Number} Returns number from -1 to 1.\n */\nexport function sortComparison(a, b) {\n  if (typeof a === 'number' && typeof b === 'number') {\n    return a - b;\n  }\n\n  return sortCompare(a, b);\n}\n\n/**\n * Convert raw value into visual value.\n *\n * @param {*} value\n * @returns {*}\n */\nexport function toVisualValue(value, hot, columnIndex) {\n  let lastSelectedColumn,\n    visualIndex,\n    column;\n  if (!columnIndex && columnIndex !== 0) {\n    lastSelectedColumn = hot.getPlugin('filters').getSelectedColumn();\n    visualIndex = lastSelectedColumn && lastSelectedColumn.visualIndex;\n  } else {\n    visualIndex = columnIndex;\n  }\n  column = hot.getSettings().columns[visualIndex];\n  if (column.valueParser && value !== '') {\n    value = column.valueParser(value);\n  }\n\n  /* if (value === '' || value === undefined || value === null) {\n    value = '';\n  } */\n\n  /*if (value == null) { // eslint-disable-line\n    value = '';\n  }*/\n\n  return value;\n}\n\nconst SUPPORT_SET_CONSTRUCTOR = new Set([1]).has(1);\nconst SUPPORT_FAST_DEDUPE = SUPPORT_SET_CONSTRUCTOR && typeof Array.from === 'function';\n\n/**\n * Create an array assertion to compare if an element exists in that array (in a more efficient way than .indexOf).\n *\n * @param {Array} initialData Values to compare.\n * @returns {Function}\n */\nexport function createArrayAssertion(initialData) {\n  initialData = arrayMap(initialData, (value) => toEmptyString(value));\n  if (SUPPORT_SET_CONSTRUCTOR) {\n    initialData = new Set(initialData);\n  }\n\n  return function(value) {\n    let result;\n\n    if (SUPPORT_SET_CONSTRUCTOR) {\n      result = initialData.has(value);\n    } else {\n      /* eslint-disable no-bitwise */\n      result = !!~initialData.indexOf(value);\n    }\n\n    return result;\n  };\n}\n\n/**\n * Convert empty-ish values like null and undefined to an empty string.\n *\n * @param value Value to check.\n * @returns {String}\n */\nexport function toEmptyString(value) {\n  return value == null ? '' : value;\n}\n\n/**\n * Unify column values (replace `null` and `undefined` values into empty string, unique values and sort them).\n *\n * @param {Array} values An array of values.\n * @returns {Array}\n */\nexport function unifyColumnValues(values) {\n  if (SUPPORT_FAST_DEDUPE) {\n    values = Array.from(new Set(values));\n  } else {\n    values = arrayUnique(values);\n  }\n  values = values.sort(function(a, b) {\n    if (typeof a === 'number' && typeof b === 'number') {\n      return a - b;\n    }\n\n    if (a === b) {\n      return 0;\n    }\n\n    return a > b ? 1 : -1;\n  });\n\n  return values;\n}\n\n/**\n * Intersect 'base' values with 'selected' values and return an array of object.\n *\n * @param {Array} base An array of base values.\n * @param {Array} selected An array of selected values.\n * @param {Function} [callback] A callback function which is invoked for every item in an array.\n * @returns {Array}\n */\nexport function intersectValues(base, selected, callback, hot, column) {\n  const result = [];\n  const same = base === selected;\n  let selectedItemsAssertion;\n\n  if (!same) {\n    selectedItemsAssertion = createArrayAssertion(selected);\n  }\n\n  arrayEach(base, (value) => {\n    let checked = false;\n    let v = value;\n\n    if (same || selectedItemsAssertion(value)) {\n      checked = true;\n    }\n    //const item = {checked, value, visualValue: toVisualValue(value, hot, column)};\n    if (v === '' || v === undefined || v === null) {\n      v = '';\n    }\n    const item = {checked, value, visualValue: v};\n\n    if (callback) {\n      callback(item);\n    }\n    result.push(item);\n  });\n\n  return result;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/utils.js","import {toLabel, extractLabel, error, ERROR_REF} from 'hot-formula-parser';\nimport {arrayEach, arrayFilter} from 'handsontable/helpers/array';\nimport {mixin} from 'handsontable/helpers/object';\nimport localHooks from 'handsontable/mixins/localHooks';\nimport {toUpperCaseFormula} from './utils';\n\nconst BARE_CELL_STRICT_REGEX = /^\\$?[A-Z]+\\$?\\d+$/;\nconst BARE_CELL_REGEX = /\\$?[A-Z]+\\$?\\d+/;\nconst CELL_REGEX = /(?:[^0-9A-Z$: ]|^)\\s*(\\$?[A-Z]+\\$?\\d+)\\s*(?![0-9A-Z_: ])/g;\nconst RANGE_REGEX = /\\$?[A-Z]+\\$?\\d+\\s*:\\s*\\$?[A-Z]+\\$?\\d+/g;\nconst CELL_AND_RANGE_REGEX = /((?:[^0-9A-Z$: ]|^)\\s*(\\$?[A-Z]+\\$?\\d+)\\s*(?![0-9A-Z_: ]))|(\\$?[A-Z]+\\$?\\d+\\s*:\\s*\\$?[A-Z]+\\$?\\d+)/g;\n\n/**\n * @class ExpressionModifier\n * @util\n */\nclass ExpressionModifier {\n  constructor(expression) {\n    /**\n     * Formula expression to modify.\n     *\n     * @type {String}\n     */\n    this.expression = '';\n    /**\n     * Extracted cells and cells ranges.\n     *\n     * @type {Array}\n     */\n    this.cells = [];\n    /**\n     * Function which can modify default behaviour of how cells and cell ranges will be translated.\n     *\n     * @type {null|Function}\n     */\n    this.customModifier = null;\n\n    if (typeof expression === 'string') {\n      this.setExpression(expression);\n    }\n  }\n\n  /**\n   * Set formula expression to modify.\n   *\n   * @param {String} expression Formula expression to process.\n   * @returns {ExpressionModifier}\n   */\n  setExpression(expression) {\n    this.cells.length = 0;\n    this.expression = toUpperCaseFormula(expression);\n\n    this._extractCells();\n    this._extractCellsRange();\n\n    return this;\n  }\n\n  /**\n   * Set function which can modify default behaviour of how cells and cell ranges will be translated.\n   *\n   * @param {Function} customModifier Function with custom logic.\n   */\n  useCustomModifier(customModifier) {\n    this.customModifier = customModifier;\n  }\n\n  /**\n   * Translate formula expression cells.\n   *\n   * @param {Object} delta Distance to move in proper direction.\n   * @param {Object} [startFrom] Coordinates which translation will be applied from.\n   * @returns {ExpressionModifier}\n   */\n  translate({row: deltaRow, column: deltaColumn}, startFrom = {}) {\n    arrayEach(this.cells, (cell) => {\n      if (deltaRow != null) {\n        this._translateCell(cell, 'row', deltaRow, startFrom.row);\n      }\n      if (deltaColumn != null) {\n        this._translateCell(cell, 'column', deltaColumn, startFrom.column);\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * Translate object into string representation.\n   *\n   * @returns {String}\n   */\n  toString() {\n    let expression = this.expression.replace(CELL_AND_RANGE_REGEX, (match, p1, p2) => {\n      const isSingleCell = match.indexOf(':') === -1;\n      let result = match;\n      let cellLabel = match;\n      let translatedCellLabel = null;\n\n      if (isSingleCell) {\n        cellLabel = BARE_CELL_STRICT_REGEX.test(p1) ? p1 : p2;\n      }\n      const cell = this._searchCell(cellLabel);\n\n      if (cell) {\n        translatedCellLabel = cell.refError ? error(ERROR_REF) : cell.toLabel();\n\n        if (isSingleCell) {\n          result = match.replace(cellLabel, translatedCellLabel);\n        } else {\n          result = translatedCellLabel;\n        }\n      }\n\n      return result;\n    });\n\n    if (!expression.startsWith('=')) {\n      expression = '=' + expression;\n    }\n\n    return expression;\n  }\n\n  /**\n   * Translate single cell.\n   *\n   * @param {Object} cell Cell object.\n   * @param {String} axis Axis to modify.\n   * @param {Number} delta Distance to move.\n   * @param {Number} [startFromIndex] Base index which translation will be applied from.\n   * @private\n   */\n  _translateCell(cell, axis, delta, startFromIndex) {\n    const {start, end} = cell;\n    let startIndex = start[axis].index;\n    let endIndex = end[axis].index;\n\n    let deltaStart = delta;\n    let deltaEnd = delta;\n    let refError = false;\n\n    if (this.customModifier) {\n      [deltaStart, deltaEnd, refError] = this.customModifier(cell, axis, delta, startFromIndex);\n    } else {\n      // By default only relative cells are translated, if meets absolute reset deltas to 0\n      if (start[axis].isAbsolute) {\n        deltaStart = 0;\n      }\n      if (end[axis].isAbsolute) {\n        deltaEnd = 0;\n      }\n    }\n\n    if (deltaStart && !refError) {\n      if (startIndex + deltaStart < 0) {\n        refError = true;\n      }\n      start[axis].index = Math.max(startIndex + deltaStart, 0);\n    }\n    if (deltaEnd && !refError) {\n      if (endIndex + deltaEnd < 0) {\n        refError = true;\n      }\n      end[axis].index = Math.max(endIndex + deltaEnd, 0);\n    }\n    if (refError) {\n      cell.refError = true;\n    }\n  }\n\n  /**\n   * Extract all cells from the formula expression.\n   *\n   * @private\n   */\n  _extractCells() {\n    const matches = this.expression.match(CELL_REGEX);\n\n    if (!matches) {\n      return;\n    }\n    arrayEach(matches, (coord) => {\n      coord = coord.match(BARE_CELL_REGEX);\n\n      if (!coord) {\n        return;\n      }\n      const [row, column] = extractLabel(coord[0]);\n\n      this.cells.push(this._createCell({row, column}, {row, column}, coord[0]));\n    });\n  }\n\n  /**\n   * Extract all cells range from the formula expression.\n   *\n   * @private\n   */\n  _extractCellsRange() {\n    const matches = this.expression.match(RANGE_REGEX);\n\n    if (!matches) {\n      return;\n    }\n    arrayEach(matches, (match) => {\n      const [start, end] = match.split(':');\n      const [startRow, startColumn] = extractLabel(start);\n      const [endRow, endColumn] = extractLabel(end);\n      const startCell = {\n        row: startRow,\n        column: startColumn,\n      };\n      const endCell = {\n        row: endRow,\n        column: endColumn,\n      };\n\n      this.cells.push(this._createCell(startCell, endCell, match));\n    });\n  }\n\n  /**\n   * Search cell by its label.\n   *\n   * @param {String} label Cell label eq. `B4` or `$B$6`.\n   * @returns {Object|null}\n   * @private\n   */\n  _searchCell(label) {\n    const [cell] = arrayFilter(this.cells, (cell) => cell.origLabel === label);\n\n    return cell || null;\n  }\n\n  /**\n   * Create object cell.\n   *\n   * @param {Object} start Start coordinates (top-left).\n   * @param {Object} end End coordinates (bottom-right).\n   * @param {String} label Original label name.\n   * @returns {Object}\n   * @private\n   */\n  _createCell(start, end, label) {\n    return {\n      start,\n      end,\n      origLabel: label,\n      type: label.indexOf(':') === -1 ? 'cell' : 'range',\n      refError: false,\n      toLabel: function() {\n        let label = toLabel(this.start.row, this.start.column);\n\n        if (this.type === 'range') {\n          label += ':' + toLabel(this.end.row, this.end.column);\n        }\n\n        return label;\n      }\n    };\n  }\n}\n\nmixin(ExpressionModifier, localHooks);\n\nexport default ExpressionModifier;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/expressionModifier.js","module.exports = __WEBPACK_EXTERNAL_MODULE_59__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"formulaParser\",\"commonjs2\":\"hot-formula-parser\",\"commonjs\":\"hot-formula-parser\",\"amd\":\"hot-formula-parser\"}\n// module id = 59\n// module chunks = 0","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.array.iterator.js","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_an-instance.js","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_array-methods.js","'use strict';\nvar global            = require('./_global')\n  , $export           = require('./_export')\n  , redefine          = require('./_redefine')\n  , redefineAll       = require('./_redefine-all')\n  , meta              = require('./_meta')\n  , forOf             = require('./_for-of')\n  , anInstance        = require('./_an-instance')\n  , isObject          = require('./_is-object')\n  , fails             = require('./_fails')\n  , $iterDetect       = require('./_iter-detect')\n  , setToStringTag    = require('./_set-to-string-tag')\n  , inheritIfRequired = require('./_inherit-if-required');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  var fixMethod = function(KEY){\n    var fn = proto[KEY];\n    redefine(proto, KEY,\n      KEY == 'delete' ? function(a){\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'has' ? function has(a){\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'get' ? function get(a){\n        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'add' ? function add(a){ fn.call(this, a === 0 ? 0 : a); return this; }\n        : function set(a, b){ fn.call(this, a === 0 ? 0 : a, b); return this; }\n    );\n  };\n  if(typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    var instance             = new C\n      // early implementations not supports chaining\n      , HASNT_CHAINING       = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance\n      // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n      , THROWS_ON_PRIMITIVES = fails(function(){ instance.has(1); })\n      // most early implementations doesn't supports iterables, most modern - not close it correctly\n      , ACCEPT_ITERABLES     = $iterDetect(function(iter){ new C(iter); }) // eslint-disable-line no-new\n      // for early implementations -0 and +0 not the same\n      , BUGGY_ZERO = !IS_WEAK && fails(function(){\n        // V8 ~ Chromium 42- fails only with 5+ elements\n        var $instance = new C()\n          , index     = 5;\n        while(index--)$instance[ADDER](index, index);\n        return !$instance.has(-0);\n      });\n    if(!ACCEPT_ITERABLES){ \n      C = wrapper(function(target, iterable){\n        anInstance(target, C, NAME);\n        var that = inheritIfRequired(new Base, target, C);\n        if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n        return that;\n      });\n      C.prototype = proto;\n      proto.constructor = C;\n    }\n    if(THROWS_ON_PRIMITIVES || BUGGY_ZERO){\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n    if(BUGGY_ZERO || HASNT_CHAINING)fixMethod(ADDER);\n    // weak collections should not contains .clear method\n    if(IS_WEAK && proto.clear)delete proto.clear;\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F * (C != Base), O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_collection.js","'use strict';\nvar hide     = require('./_hide')\n  , redefine = require('./_redefine')\n  , fails    = require('./_fails')\n  , defined  = require('./_defined')\n  , wks      = require('./_wks');\n\nmodule.exports = function(KEY, length, exec){\n  var SYMBOL   = wks(KEY)\n    , fns      = exec(defined, SYMBOL, ''[KEY])\n    , strfn    = fns[0]\n    , rxfn     = fns[1];\n  if(fails(function(){\n    var O = {};\n    O[SYMBOL] = function(){ return 7; };\n    return ''[KEY](O) != 7;\n  })){\n    redefine(String.prototype, KEY, strfn);\n    hide(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function(string, arg){ return rxfn.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function(string){ return rxfn.call(string, this); }\n    );\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_fix-re-wks.js","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method')\n  , BREAK       = {}\n  , RETURN      = {};\nvar exports = module.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator, result;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if(result === BREAK || result === RETURN)return result;\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    result = call(iterator, f, step.value, entries);\n    if(result === BREAK || result === RETURN)return result;\n  }\n};\nexports.BREAK  = BREAK;\nexports.RETURN = RETURN;\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_for-of.js","module.exports = false;\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_library.js","exports.f = Object.getOwnPropertySymbols;\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-gops.js","var redefine = require('./_redefine');\nmodule.exports = function(target, src, safe){\n  for(var key in src)redefine(target, key, src[key], safe);\n  return target;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_redefine-all.js","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_to-index.js","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_to-integer.js","import {getCellType} from './../cellTypes';\nimport {hasOwnProperty} from './object';\n\nconst COLUMN_LABEL_BASE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\nconst COLUMN_LABEL_BASE_LENGTH = COLUMN_LABEL_BASE.length;\n\n/**\n * Generates spreadsheet-like column names: A, B, C, ..., Z, AA, AB, etc.\n *\n * @param {Number} index Column index.\n * @returns {String}\n */\nexport function spreadsheetColumnLabel(index) {\n  let dividend = index + 1;\n  let columnLabel = '';\n  let modulo;\n\n  while (dividend > 0) {\n    modulo = (dividend - 1) % COLUMN_LABEL_BASE_LENGTH;\n    columnLabel = String.fromCharCode(65 + modulo) + columnLabel;\n    dividend = parseInt((dividend - modulo) / COLUMN_LABEL_BASE_LENGTH, 10);\n  }\n\n  return columnLabel;\n}\n\n/**\n * Generates spreadsheet-like column index from theirs labels: A, B, C ...., Z, AA, AB, etc.\n *\n * @param {String} label Column label.\n * @returns {Number}\n */\nexport function spreadsheetColumnIndex(label) {\n  let result = 0;\n\n  if (label) {\n    for (let i = 0, j = label.length - 1; i < label.length; i += 1, j -= 1) {\n      result += Math.pow(COLUMN_LABEL_BASE_LENGTH, j) * (COLUMN_LABEL_BASE.indexOf(label[i]) + 1);\n    }\n  }\n  --result;\n\n  return result;\n}\n\n/**\n * Creates 2D array of Excel-like values \"A1\", \"A2\", ...\n *\n * @param {Number} rows Number of rows to generate.\n * @param {Number} columns Number of columns to generate.\n * @returns {Array}\n */\nexport function createSpreadsheetData(rows = 100, columns = 4) {\n  var _rows = [],\n    i,\n    j;\n\n  for (i = 0; i < rows; i++) {\n    var row = [];\n\n    for (j = 0; j < columns; j++) {\n      row.push(spreadsheetColumnLabel(j) + (i + 1));\n    }\n    _rows.push(row);\n  }\n\n  return _rows;\n}\n\n/**\n * Creates 2D array of Excel-like values \"A1\", \"A2\", as an array of objects.\n *\n * @param {Number} rows Number of rows to generate.\n * @param {Number} colCount Number of columns to generate.\n * @returns {Array}\n */\nexport function createSpreadsheetObjectData(rows = 100, colCount = 4) {\n  var _rows = [],\n    i,\n    j;\n\n  for (i = 0; i < rows; i++) {\n    var row = {};\n\n    for (j = 0; j < colCount; j++) {\n      row[`prop${j}`] = spreadsheetColumnLabel(j) + (i + 1);\n    }\n    _rows.push(row);\n  }\n\n  return _rows;\n}\n\n/**\n * Generates an empty data object.\n *\n * @param {Number} rows Number of rows to generate.\n * @param {Number} columns Number of columns to generate\n * @returns {Array}\n */\nexport function createEmptySpreadsheetData(rows, columns) {\n  let data = [];\n  let row;\n\n  for (let i = 0; i < rows; i++) {\n    row = [];\n    for (let j = 0; j < columns; j++) {\n      row.push('');\n    }\n    data.push(row);\n  }\n\n  return data;\n}\n\nexport function translateRowsToColumns(input) {\n  var i,\n    ilen,\n    j,\n    jlen,\n    output = [],\n    olen = 0;\n\n  for (i = 0, ilen = input.length; i < ilen; i++) {\n    for (j = 0, jlen = input[i].length; j < jlen; j++) {\n      if (j == olen) {\n        output.push([]);\n        olen++;\n      }\n      output[j].push(input[i][j]);\n    }\n  }\n\n  return output;\n}\n\n/**\n * Factory that produces a function for searching methods (or any properties) which could be defined directly in\n * table configuration or implicitly, within cell type definition.\n *\n * For example: renderer can be defined explicitly using \"renderer\" property in column configuration or it can be\n * defined implicitly using \"type\" property.\n *\n * Methods/properties defined explicitly always takes precedence over those defined through \"type\".\n *\n * If the method/property is not found in an object, searching is continued recursively through prototype chain, until\n * it reaches the Object.prototype.\n *\n *\n * @param methodName {String} name of the method/property to search (i.e. 'renderer', 'validator', 'copyable')\n * @param allowUndefined {Boolean} [optional] if false, the search is continued if methodName has not been found in cell \"type\"\n * @returns {Function}\n */\nexport function cellMethodLookupFactory(methodName, allowUndefined) {\n\n  allowUndefined = typeof allowUndefined == 'undefined' ? true : allowUndefined;\n\n  return function cellMethodLookup(row, col) {\n    return (function getMethodFromProperties(properties) {\n\n      if (!properties) {\n        return; // method not found\n\n      } else if (hasOwnProperty(properties, methodName) && properties[methodName] !== void 0) { // check if it is own and is not empty\n        return properties[methodName];  // method defined directly\n\n      } else if (hasOwnProperty(properties, 'type') && properties.type) { // check if it is own and is not empty\n        var type;\n\n        if (typeof properties.type != 'string') {\n          throw new Error('Cell type must be a string ');\n        }\n        type = getCellType(properties.type);\n\n        if (hasOwnProperty(type, methodName)) {\n          return type[methodName]; // method defined in type.\n        } else if (allowUndefined) {\n          return; // method does not defined in type (eg. validator), returns undefined\n        }\n      }\n\n      return getMethodFromProperties(Object.getPrototypeOf(properties));\n\n    }(typeof row == 'number' ? this.getCellMeta(row, col) : row));\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/data.js","import {arrayEach, arrayReduce, arrayMap, arrayMax} from './../helpers/array';\nimport {defineGetter} from './../helpers/object';\nimport {rangeEach} from './../helpers/number';\n\nconst MIXIN_NAME = 'arrayMapper';\n\n/**\n * @type {Object}\n */\nconst arrayMapper = {\n  _arrayMap: [],\n\n  /**\n   * Get value by map index.\n   *\n   * @param {Number} index Array index.\n   * @return {*} Returns value mapped to passed index.\n   */\n  getValueByIndex(index) {\n    let value;\n\n    /* eslint-disable no-cond-assign */\n    return (value = this._arrayMap[index]) === void 0 ? null : value;\n  },\n\n  /**\n   * Get map index by its value.\n   *\n   * @param {*} value Value to search.\n   * @returns {Number} Returns array index.\n   */\n  getIndexByValue(value) {\n    let index;\n\n    /* eslint-disable no-cond-assign */\n    return (index = this._arrayMap.indexOf(value)) === -1 ? null : index;\n  },\n\n  /**\n   * Insert new items to array mapper starting at passed index. New entries will be a continuation of last value in the array.\n   *\n   * @param {Number} index Array index.\n   * @param {Number} [amount=1] Defines how many items will be created to an array.\n   * @returns {Array} Returns added items.\n   */\n  insertItems(index, amount = 1) {\n    let newIndex = arrayMax(this._arrayMap) + 1;\n    let addedItems = [];\n\n    rangeEach(amount - 1, (count) => {\n      addedItems.push(this._arrayMap.splice(index + count, 0, newIndex + count));\n    });\n\n    return addedItems;\n  },\n\n  /**\n   * Remove items from array mapper.\n   *\n   * @param {Number} index Array index.\n   * @param {Number} [amount=1] Defines how many items will be created to an array.\n   * @returns {Array} Returns removed items.\n   */\n  removeItems(index, amount = 1) {\n    let removedItems = [];\n\n    if (Array.isArray(index)) {\n      let mapCopy = [].concat(this._arrayMap);\n\n      // Sort descending\n      index.sort((a, b) => b - a);\n\n      removedItems = arrayReduce(index, (acc, item) => {\n        this._arrayMap.splice(item, 1);\n\n        return acc.concat(mapCopy.slice(item, item + 1));\n      }, []);\n\n    } else {\n      removedItems = this._arrayMap.splice(index, amount);\n    }\n\n    return removedItems;\n  },\n\n  /**\n   * Unshift items (remove and shift chunk of array to the left).\n   *\n   * @param {Number|Array} index Array index or Array of indexes to unshift.\n   * @param {Number} [amount=1] Defines how many items will be removed from an array (when index is passed as number).\n   */\n  unshiftItems(index, amount = 1) {\n    let removedItems = this.removeItems(index, amount);\n\n    function countRowShift(logicalRow) {\n      // Todo: compare perf between reduce vs sort->each->brake\n      return arrayReduce(removedItems, (count, removedLogicalRow) => {\n        if (logicalRow > removedLogicalRow) {\n          count++;\n        }\n\n        return count;\n      }, 0);\n    }\n\n    this._arrayMap = arrayMap(this._arrayMap, (logicalRow, physicalRow) => {\n      let rowShift = countRowShift(logicalRow);\n\n      if (rowShift) {\n        logicalRow -= rowShift;\n      }\n\n      return logicalRow;\n    });\n  },\n\n  /**\n   * Shift (right shifting) items starting at passed index.\n   *\n   * @param {Number} index Array index.\n   * @param {Number} [amount=1] Defines how many items will be created to an array.\n   */\n  shiftItems(index, amount = 1) {\n    this._arrayMap = arrayMap(this._arrayMap, (row) => {\n      if (row >= index) {\n        row += amount;\n      }\n\n      return row;\n    });\n\n    rangeEach(amount - 1, (count) => {\n      this._arrayMap.splice(index + count, 0, index + count);\n    });\n  },\n\n  /**\n   * Clear all stored index<->value information from an array.\n   */\n  clearMap() {\n    this._arrayMap.length = 0;\n  }\n};\n\ndefineGetter(arrayMapper, 'MIXIN_NAME', MIXIN_NAME, {\n  writable: false,\n  enumerable: false,\n});\n\nexport default arrayMapper;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/mixins/arrayMapper.js","export const collection = new Map();\n\nexport default function staticRegister(namespace = 'common') {\n  if (!collection.has(namespace)) {\n    collection.set(namespace, new Map());\n  }\n  const subCollection = collection.get(namespace);\n\n  /**\n   * Register an item to the collection. If the item under the same was exist earlier then this item will be replaced with new one.\n   *\n   * @param {String} name Identification of the item.\n   * @param {*} item Item to save in the collection.\n   */\n  function register(name, item) {\n    subCollection.set(name, item);\n  }\n\n  /**\n   * Retrieve the item from the collection.\n   *\n   * @param {String} name Identification of the item.\n   * @returns {*} Returns item which was saved in the collection.\n   */\n  function getItem(name) {\n    return subCollection.get(name);\n  }\n\n  /**\n   * Check if item under specyfied name is exists.\n   *\n   * @param {String} name Identification of the item.\n   * @returns {Boolean} Returns `true` or `false` depends on if element exists in the collection.\n   */\n  function hasItem(name) {\n    return subCollection.has(name);\n  }\n\n  /**\n   * Retrieve list of names registered from the collection.\n   *\n   * @returns {Array} Returns an array of strings with all names under which objects are stored.\n   */\n  function getNames() {\n    return [...subCollection.keys()];\n  }\n\n  /**\n   * Retrieve all registered values from the collection.\n   *\n   * @returns {Array} Returns an array with all values stored in the collection.\n   */\n  function getValues() {\n    return [...subCollection.values()];\n  }\n\n  return {\n    register,\n    getItem,\n    hasItem,\n    getNames,\n    getValues,\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/utils/staticRegister.js","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', {copyWithin: require('./_array-copy-within')});\n\nrequire('./_add-to-unscopables')('copyWithin');\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.array.copy-within.js","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', {fill: require('./_array-fill')});\n\nrequire('./_add-to-unscopables')('fill');\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.array.fill.js","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export')\n  , $find   = require('./_array-methods')(6)\n  , KEY     = 'findIndex'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.array.find-index.js","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export')\n  , $find   = require('./_array-methods')(5)\n  , KEY     = 'find'\n  , forced  = true;\n// Shouldn't skip holes\nif(KEY in [])Array(1)[KEY](function(){ forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn/*, that = undefined */){\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.array.find.js","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.array.from.js","'use strict';\nvar $export        = require('./_export')\n  , createProperty = require('./_create-property');\n\n// WebKit Array.of isn't generic\n$export($export.S + $export.F * require('./_fails')(function(){\n  function F(){}\n  return !(Array.of.call(F) instanceof F);\n}), 'Array', {\n  // 22.1.2.3 Array.of( ...items)\n  of: function of(/* ...args */){\n    var index  = 0\n      , aLen   = arguments.length\n      , result = new (typeof this == 'function' ? this : Array)(aLen);\n    while(aLen > index)createProperty(result, index, arguments[index++]);\n    result.length = aLen;\n    return result;\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.array.of.js","var dP         = require('./_object-dp').f\n  , createDesc = require('./_property-desc')\n  , has        = require('./_has')\n  , FProto     = Function.prototype\n  , nameRE     = /^\\s*function ([^ (]*)/\n  , NAME       = 'name';\n\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function(){\n    try {\n      var that = this\n        , name = ('' + that).match(nameRE)[1];\n      has(that, NAME) || !isExtensible(that) || dP(that, NAME, createDesc(5, name));\n      return name;\n    } catch(e){\n      return '';\n    }\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.function.name.js","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')('Map', function(get){\n  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key){\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value){\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.map.js","// 20.1.2.1 Number.EPSILON\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {EPSILON: Math.pow(2, -52)});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.number.epsilon.js","// 20.1.2.2 Number.isFinite(number)\nvar $export   = require('./_export')\n  , _isFinite = require('./_global').isFinite;\n\n$export($export.S, 'Number', {\n  isFinite: function isFinite(it){\n    return typeof it == 'number' && _isFinite(it);\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.number.is-finite.js","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {isInteger: require('./_is-integer')});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.number.is-integer.js","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number){\n    return number != number;\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.number.is-nan.js","// 20.1.2.5 Number.isSafeInteger(number)\nvar $export   = require('./_export')\n  , isInteger = require('./_is-integer')\n  , abs       = Math.abs;\n\n$export($export.S, 'Number', {\n  isSafeInteger: function isSafeInteger(number){\n    return isInteger(number) && abs(number) <= 0x1fffffffffffff;\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.number.is-safe-integer.js","// 20.1.2.6 Number.MAX_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {MAX_SAFE_INTEGER: 0x1fffffffffffff});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.number.max-safe-integer.js","// 20.1.2.10 Number.MIN_SAFE_INTEGER\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {MIN_SAFE_INTEGER: -0x1fffffffffffff});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.number.min-safe-integer.js","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.object.assign.js","// 19.1.3.10 Object.is(value1, value2)\nvar $export = require('./_export');\n$export($export.S, 'Object', {is: require('./_same-value')});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.object.is.js","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.object.set-prototype-of.js","'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')()\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.promise.js","// 21.2.5.3 get RegExp.prototype.flags()\nif(require('./_descriptors') && /./g.flags != 'g')require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.regexp.flags.js","// @@match logic\nrequire('./_fix-re-wks')('match', 1, function(defined, MATCH, $match){\n  // 21.1.3.11 String.prototype.match(regexp)\n  return [function match(regexp){\n    'use strict';\n    var O  = defined(this)\n      , fn = regexp == undefined ? undefined : regexp[MATCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n  }, $match];\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.regexp.match.js","// @@replace logic\nrequire('./_fix-re-wks')('replace', 2, function(defined, REPLACE, $replace){\n  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)\n  return [function replace(searchValue, replaceValue){\n    'use strict';\n    var O  = defined(this)\n      , fn = searchValue == undefined ? undefined : searchValue[REPLACE];\n    return fn !== undefined\n      ? fn.call(searchValue, O, replaceValue)\n      : $replace.call(String(O), searchValue, replaceValue);\n  }, $replace];\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.regexp.replace.js","// @@search logic\nrequire('./_fix-re-wks')('search', 1, function(defined, SEARCH, $search){\n  // 21.1.3.15 String.prototype.search(regexp)\n  return [function search(regexp){\n    'use strict';\n    var O  = defined(this)\n      , fn = regexp == undefined ? undefined : regexp[SEARCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n  }, $search];\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.regexp.search.js","// @@split logic\nrequire('./_fix-re-wks')('split', 2, function(defined, SPLIT, $split){\n  'use strict';\n  var isRegExp   = require('./_is-regexp')\n    , _split     = $split\n    , $push      = [].push\n    , $SPLIT     = 'split'\n    , LENGTH     = 'length'\n    , LAST_INDEX = 'lastIndex';\n  if(\n    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||\n    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||\n    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||\n    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||\n    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||\n    ''[$SPLIT](/.?/)[LENGTH]\n  ){\n    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group\n    // based on es5-shim implementation, need to rework it\n    $split = function(separator, limit){\n      var string = String(this);\n      if(separator === undefined && limit === 0)return [];\n      // If `separator` is not a regex, use native split\n      if(!isRegExp(separator))return _split.call(string, separator, limit);\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var separator2, match, lastIndex, lastLength, i;\n      // Doesn't need flags gy, but they don't hurt\n      if(!NPCG)separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\\\s)', flags);\n      while(match = separatorCopy.exec(string)){\n        // `separatorCopy.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0][LENGTH];\n        if(lastIndex > lastLastIndex){\n          output.push(string.slice(lastLastIndex, match.index));\n          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG\n          if(!NPCG && match[LENGTH] > 1)match[0].replace(separator2, function(){\n            for(i = 1; i < arguments[LENGTH] - 2; i++)if(arguments[i] === undefined)match[i] = undefined;\n          });\n          if(match[LENGTH] > 1 && match.index < string[LENGTH])$push.apply(output, match.slice(1));\n          lastLength = match[0][LENGTH];\n          lastLastIndex = lastIndex;\n          if(output[LENGTH] >= splitLimit)break;\n        }\n        if(separatorCopy[LAST_INDEX] === match.index)separatorCopy[LAST_INDEX]++; // Avoid an infinite loop\n      }\n      if(lastLastIndex === string[LENGTH]){\n        if(lastLength || !separatorCopy.test(''))output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;\n    };\n  // Chakra, V8\n  } else if('0'[$SPLIT](undefined, 0)[LENGTH]){\n    $split = function(separator, limit){\n      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);\n    };\n  }\n  // 21.1.3.17 String.prototype.split(separator, limit)\n  return [function split(separator, limit){\n    var O  = defined(this)\n      , fn = separator == undefined ? undefined : separator[SPLIT];\n    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);\n  }, $split];\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.regexp.split.js","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.set.js","'use strict';\nvar $export = require('./_export')\n  , $at     = require('./_string-at')(false);\n$export($export.P, 'String', {\n  // 21.1.3.3 String.prototype.codePointAt(pos)\n  codePointAt: function codePointAt(pos){\n    return $at(this, pos);\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.string.code-point-at.js","// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])\n'use strict';\nvar $export   = require('./_export')\n  , toLength  = require('./_to-length')\n  , context   = require('./_string-context')\n  , ENDS_WITH = 'endsWith'\n  , $endsWith = ''[ENDS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(ENDS_WITH), 'String', {\n  endsWith: function endsWith(searchString /*, endPosition = @length */){\n    var that = context(this, searchString, ENDS_WITH)\n      , endPosition = arguments.length > 1 ? arguments[1] : undefined\n      , len    = toLength(that.length)\n      , end    = endPosition === undefined ? len : Math.min(toLength(endPosition), len)\n      , search = String(searchString);\n    return $endsWith\n      ? $endsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.string.ends-with.js","var $export        = require('./_export')\n  , toIndex        = require('./_to-index')\n  , fromCharCode   = String.fromCharCode\n  , $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\n$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n  // 21.1.2.2 String.fromCodePoint(...codePoints)\n  fromCodePoint: function fromCodePoint(x){ // eslint-disable-line no-unused-vars\n    var res  = []\n      , aLen = arguments.length\n      , i    = 0\n      , code;\n    while(aLen > i){\n      code = +arguments[i++];\n      if(toIndex(code, 0x10ffff) !== code)throw RangeError(code + ' is not a valid code point');\n      res.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n      );\n    } return res.join('');\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.string.from-code-point.js","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export  = require('./_export')\n  , context  = require('./_string-context')\n  , INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /*, position = 0 */){\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.string.includes.js","var $export   = require('./_export')\n  , toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length');\n\n$export($export.S, 'String', {\n  // 21.1.2.4 String.raw(callSite, ...substitutions)\n  raw: function raw(callSite){\n    var tpl  = toIObject(callSite.raw)\n      , len  = toLength(tpl.length)\n      , aLen = arguments.length\n      , res  = []\n      , i    = 0;\n    while(len > i){\n      res.push(String(tpl[i++]));\n      if(i < aLen)res.push(String(arguments[i]));\n    } return res.join('');\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.string.raw.js","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.string.repeat.js","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export     = require('./_export')\n  , toLength    = require('./_to-length')\n  , context     = require('./_string-context')\n  , STARTS_WITH = 'startsWith'\n  , $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /*, position = 0 */){\n    var that   = context(this, searchString, STARTS_WITH)\n      , index  = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length))\n      , search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.string.starts-with.js","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.symbol.js","'use strict';\nvar each         = require('./_array-methods')(0)\n  , redefine     = require('./_redefine')\n  , meta         = require('./_meta')\n  , assign       = require('./_object-assign')\n  , weak         = require('./_collection-weak')\n  , isObject     = require('./_is-object')\n  , getWeak      = meta.getWeak\n  , isExtensible = Object.isExtensible\n  , uncaughtFrozenStore = weak.ufstore\n  , tmp          = {}\n  , InternalMap;\n\nvar wrapper = function(get){\n  return function WeakMap(){\n    return get(this, arguments.length > 0 ? arguments[0] : undefined);\n  };\n};\n\nvar methods = {\n  // 23.3.3.3 WeakMap.prototype.get(key)\n  get: function get(key){\n    if(isObject(key)){\n      var data = getWeak(key);\n      if(data === true)return uncaughtFrozenStore(this).get(key);\n      return data ? data[this._i] : undefined;\n    }\n  },\n  // 23.3.3.5 WeakMap.prototype.set(key, value)\n  set: function set(key, value){\n    return weak.def(this, key, value);\n  }\n};\n\n// 23.3 WeakMap Objects\nvar $WeakMap = module.exports = require('./_collection')('WeakMap', wrapper, methods, weak, true, true);\n\n// IE11 WeakMap frozen keys fix\nif(new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7){\n  InternalMap = weak.getConstructor(wrapper);\n  assign(InternalMap.prototype, methods);\n  meta.NEED = true;\n  each(['delete', 'has', 'get', 'set'], function(key){\n    var proto  = $WeakMap.prototype\n      , method = proto[key];\n    redefine(proto, key, function(a, b){\n      // store frozen objects on internal weakmap shim\n      if(isObject(a) && !isExtensible(a)){\n        if(!this._f)this._f = new InternalMap;\n        var result = this._f[key](a, b);\n        return key == 'set' ? this : result;\n      // store all the rest on native weakmap\n      } return method.call(this, a, b);\n    });\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.weak-map.js","'use strict';\nvar weak = require('./_collection-weak');\n\n// 23.4 WeakSet Objects\nrequire('./_collection')('WeakSet', function(get){\n  return function WeakSet(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.4.3.1 WeakSet.prototype.add(value)\n  add: function add(value){\n    return weak.def(this, value, true);\n  }\n}, weak, false, true);\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es6.weak-set.js","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export   = require('./_export')\n  , $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /*, fromIndex = 0 */){\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es7.array.includes.js","// https://github.com/tc39/proposal-object-values-entries\nvar $export  = require('./_export')\n  , $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it){\n    return $entries(it);\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es7.object.entries.js","// https://github.com/tc39/proposal-object-getownpropertydescriptors\nvar $export        = require('./_export')\n  , ownKeys        = require('./_own-keys')\n  , toIObject      = require('./_to-iobject')\n  , gOPD           = require('./_object-gopd')\n  , createProperty = require('./_create-property');\n\n$export($export.S, 'Object', {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object){\n    var O       = toIObject(object)\n      , getDesc = gOPD.f\n      , keys    = ownKeys(O)\n      , result  = {}\n      , i       = 0\n      , key;\n    while(keys.length > i)createProperty(result, key = keys[i++], getDesc(O, key));\n    return result;\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es7.object.get-own-property-descriptors.js","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export')\n  , $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it){\n    return $values(it);\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es7.object.values.js","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export')\n  , $pad    = require('./_string-pad');\n\n$export($export.P, 'String', {\n  padEnd: function padEnd(maxLength /*, fillString = ' ' */){\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es7.string.pad-end.js","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export')\n  , $pad    = require('./_string-pad');\n\n$export($export.P, 'String', {\n  padStart: function padStart(maxLength /*, fillString = ' ' */){\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/es7.string.pad-start.js","var $iterators    = require('./es6.array.iterator')\n  , redefine      = require('./_redefine')\n  , global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , wks           = require('./_wks')\n  , ITERATOR      = wks('iterator')\n  , TO_STRING_TAG = wks('toStringTag')\n  , ArrayValues   = Iterators.Array;\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype\n    , key;\n  if(proto){\n    if(!proto[ITERATOR])hide(proto, ITERATOR, ArrayValues);\n    if(!proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    for(key in $iterators)if(!proto[key])redefine(proto, key, $iterators[key], true);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/web.dom.iterable.js","var $export = require('./_export')\n  , $task   = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate:   $task.set,\n  clearImmediate: $task.clear\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/web.immediate.js","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_a-function.js","'use strict';\nvar $defineProperty = require('./_object-dp')\n  , createDesc      = require('./_property-desc');\n\nmodule.exports = function(object, index, value){\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_create-property.js","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_dom-create.js","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_enum-bug-keys.js","var MATCH = require('./_wks')('match');\nmodule.exports = function(KEY){\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch(e){\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch(f){ /* empty */ }\n  } return true;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_fails-is-regexp.js","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_iobject.js","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_iter-detect.js","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-create.js","var pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-gopd.js","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-gopn.js","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_shared-key.js","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_shared.js","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp')\n  , defined  = require('./_defined');\n\nmodule.exports = function(that, searchString, NAME){\n  if(isRegExp(searchString))throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_string-context.js","var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_task.js","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_to-primitive.js","import CellCoords from './../cell/coords';\n\n/**\n * A cell range is a set of exactly two CellCoords (that can be the same or different)\n *\n * @class CellRange\n */\nclass CellRange {\n  /**\n   * @param {CellCoords} highlight Used to draw bold border around a cell where selection was\n   *                                          started and to edit the cell when you press Enter\n   * @param {CellCoords} from Usually the same as highlight, but in Excel there is distinction - one can change\n   *                                     highlight within a selection\n   * @param {CellCoords} to End selection\n   */\n  constructor(highlight, from, to) {\n    this.highlight = highlight;\n    this.from = from;\n    this.to = to;\n  }\n\n  /**\n   * Checks if given coords are valid in context of a given Walkontable instance\n   *\n   * @param {Walkontable} wotInstance\n   * @returns {Boolean}\n   */\n  isValid(wotInstance) {\n    return this.from.isValid(wotInstance) && this.to.isValid(wotInstance);\n  }\n\n  /**\n   * Checks if this cell range is restricted to one cell\n   *\n   * @returns {Boolean}\n   */\n  isSingle() {\n    return this.from.row === this.to.row && this.from.col === this.to.col;\n  }\n\n  /**\n   * Returns selected range height (in number of rows)\n   *\n   * @returns {Number}\n   */\n  getHeight() {\n    return Math.max(this.from.row, this.to.row) - Math.min(this.from.row, this.to.row) + 1;\n  }\n\n  /**\n   * Returns selected range width (in number of columns)\n   *\n   * @returns {Number}\n   */\n  getWidth() {\n    return Math.max(this.from.col, this.to.col) - Math.min(this.from.col, this.to.col) + 1;\n  }\n\n  /**\n   * Checks if given cell coords is within `from` and `to` cell coords of this range\n   *\n   * @param {CellCoords} cellCoords\n   * @returns {Boolean}\n   */\n  includes(cellCoords) {\n    let {row, col} = cellCoords;\n    let topLeft = this.getTopLeftCorner();\n    let bottomRight = this.getBottomRightCorner();\n\n    return topLeft.row <= row && bottomRight.row >= row &&\n        topLeft.col <= col && bottomRight.col >= col;\n  }\n\n  /**\n   * Checks if given range is within of this range\n   *\n   * @param {CellRange} testedRange\n   * @returns {Boolean}\n   */\n  includesRange(testedRange) {\n    return this.includes(testedRange.getTopLeftCorner()) && this.includes(testedRange.getBottomRightCorner());\n  }\n\n  /**\n   * Checks if given range is equal to this range\n   *\n   * @param {CellRange} testedRange\n   * @returns {Boolean}\n   */\n  isEqual(testedRange) {\n    return (Math.min(this.from.row, this.to.row) == Math.min(testedRange.from.row, testedRange.to.row)) &&\n           (Math.max(this.from.row, this.to.row) == Math.max(testedRange.from.row, testedRange.to.row)) &&\n           (Math.min(this.from.col, this.to.col) == Math.min(testedRange.from.col, testedRange.to.col)) &&\n           (Math.max(this.from.col, this.to.col) == Math.max(testedRange.from.col, testedRange.to.col));\n  }\n\n  /**\n   * Checks if tested range overlaps with the range.\n   * Range A is considered to to be overlapping with range B if intersection of A and B or B and A is not empty.\n   *\n   * @param {CellRange} testedRange\n   * @returns {Boolean}\n   */\n  overlaps(testedRange) {\n    return testedRange.isSouthEastOf(this.getTopLeftCorner()) && testedRange.isNorthWestOf(this.getBottomRightCorner());\n  }\n\n  /**\n   * @param {CellRange} testedCoords\n   * @returns {Boolean}\n   */\n  isSouthEastOf(testedCoords) {\n    return this.getTopLeftCorner().isSouthEastOf(testedCoords) || this.getBottomRightCorner().isSouthEastOf(testedCoords);\n  }\n\n  /**\n   * @param {CellRange} testedCoords\n   * @returns {Boolean}\n   */\n  isNorthWestOf(testedCoords) {\n    return this.getTopLeftCorner().isNorthWestOf(testedCoords) || this.getBottomRightCorner().isNorthWestOf(testedCoords);\n  }\n\n  /**\n   * Adds a cell to a range (only if exceeds corners of the range). Returns information if range was expanded\n   *\n   * @param {CellCoords} cellCoords\n   * @returns {Boolean}\n   */\n  expand(cellCoords) {\n    let topLeft = this.getTopLeftCorner();\n    let bottomRight = this.getBottomRightCorner();\n\n    if (cellCoords.row < topLeft.row || cellCoords.col < topLeft.col ||\n        cellCoords.row > bottomRight.row || cellCoords.col > bottomRight.col) {\n      this.from = new CellCoords(Math.min(topLeft.row, cellCoords.row), Math.min(topLeft.col, cellCoords.col));\n      this.to = new CellCoords(Math.max(bottomRight.row, cellCoords.row), Math.max(bottomRight.col, cellCoords.col));\n\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * @param {CellRange} expandingRange\n   * @returns {Boolean}\n   */\n  expandByRange(expandingRange) {\n    if (this.includesRange(expandingRange) || !this.overlaps(expandingRange)) {\n      return false;\n    }\n\n    let topLeft = this.getTopLeftCorner();\n    let bottomRight = this.getBottomRightCorner();\n    let topRight = this.getTopRightCorner();\n    let bottomLeft = this.getBottomLeftCorner();\n\n    let expandingTopLeft = expandingRange.getTopLeftCorner();\n    let expandingBottomRight = expandingRange.getBottomRightCorner();\n\n    let resultTopRow = Math.min(topLeft.row, expandingTopLeft.row);\n    let resultTopCol = Math.min(topLeft.col, expandingTopLeft.col);\n    let resultBottomRow = Math.max(bottomRight.row, expandingBottomRight.row);\n    let resultBottomCol = Math.max(bottomRight.col, expandingBottomRight.col);\n\n    let finalFrom = new CellCoords(resultTopRow, resultTopCol),\n      finalTo = new CellCoords(resultBottomRow, resultBottomCol);\n    let isCorner = new CellRange(finalFrom, finalFrom, finalTo).isCorner(this.from, expandingRange),\n      onlyMerge = expandingRange.isEqual(new CellRange(finalFrom, finalFrom, finalTo));\n\n    if (isCorner && !onlyMerge) {\n      if (this.from.col > finalFrom.col) {\n        finalFrom.col = resultBottomCol;\n        finalTo.col = resultTopCol;\n      }\n      if (this.from.row > finalFrom.row) {\n        finalFrom.row = resultBottomRow;\n        finalTo.row = resultTopRow;\n      }\n    }\n    this.from = finalFrom;\n    this.to = finalTo;\n\n    return true;\n  }\n\n  /**\n   * @returns {String}\n   */\n  getDirection() {\n    if (this.from.isNorthWestOf(this.to)) { // NorthWest - SouthEast\n      return 'NW-SE';\n\n    } else if (this.from.isNorthEastOf(this.to)) { // NorthEast - SouthWest\n      return 'NE-SW';\n\n    } else if (this.from.isSouthEastOf(this.to)) { // SouthEast - NorthWest\n      return 'SE-NW';\n\n    } else if (this.from.isSouthWestOf(this.to)) { // SouthWest - NorthEast\n      return 'SW-NE';\n    }\n  }\n\n  /**\n   * @param {String} direction\n   */\n  setDirection(direction) {\n    switch (direction) {\n      case 'NW-SE':\n        [this.from, this.to] = [this.getTopLeftCorner(), this.getBottomRightCorner()];\n        break;\n      case 'NE-SW':\n        [this.from, this.to] = [this.getTopRightCorner(), this.getBottomLeftCorner()];\n        break;\n      case 'SE-NW':\n        [this.from, this.to] = [this.getBottomRightCorner(), this.getTopLeftCorner()];\n        break;\n      case 'SW-NE':\n        [this.from, this.to] = [this.getBottomLeftCorner(), this.getTopRightCorner()];\n        break;\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Get top left corner of this range\n   *\n   * @returns {CellCoords}\n   */\n  getTopLeftCorner() {\n    return new CellCoords(Math.min(this.from.row, this.to.row), Math.min(this.from.col, this.to.col));\n  }\n\n  /**\n   * Get bottom right corner of this range\n   *\n   * @returns {CellCoords}\n   */\n  getBottomRightCorner() {\n    return new CellCoords(Math.max(this.from.row, this.to.row), Math.max(this.from.col, this.to.col));\n  }\n\n  /**\n   * Get top right corner of this range\n   *\n   * @returns {CellCoords}\n   */\n  getTopRightCorner() {\n    return new CellCoords(Math.min(this.from.row, this.to.row), Math.max(this.from.col, this.to.col));\n  }\n\n  /**\n   * Get bottom left corner of this range\n   *\n   * @returns {CellCoords}\n   */\n  getBottomLeftCorner() {\n    return new CellCoords(Math.max(this.from.row, this.to.row), Math.min(this.from.col, this.to.col));\n  }\n\n  /**\n   * @param {CellCoords} coords\n   * @param {CellRange} expandedRange\n   * @returns {*}\n   */\n  isCorner(coords, expandedRange) {\n    if (expandedRange) {\n      if (expandedRange.includes(coords)) {\n        if (this.getTopLeftCorner().isEqual(new CellCoords(expandedRange.from.row, expandedRange.from.col)) ||\n            this.getTopRightCorner().isEqual(new CellCoords(expandedRange.from.row, expandedRange.to.col)) ||\n            this.getBottomLeftCorner().isEqual(new CellCoords(expandedRange.to.row, expandedRange.from.col)) ||\n            this.getBottomRightCorner().isEqual(new CellCoords(expandedRange.to.row, expandedRange.to.col))) {\n          return true;\n        }\n      }\n    }\n\n    return coords.isEqual(this.getTopLeftCorner()) || coords.isEqual(this.getTopRightCorner()) ||\n      coords.isEqual(this.getBottomLeftCorner()) || coords.isEqual(this.getBottomRightCorner());\n  }\n\n  /**\n   * @param {CellCoords} coords\n   * @param {CellRange} expandedRange\n   * @returns {CellCoords}\n   */\n  getOppositeCorner(coords, expandedRange) {\n    if (!(coords instanceof CellCoords)) {\n      return false;\n    }\n\n    if (expandedRange) {\n      if (expandedRange.includes(coords)) {\n        if (this.getTopLeftCorner().isEqual(new CellCoords(expandedRange.from.row, expandedRange.from.col))) {\n          return this.getBottomRightCorner();\n        }\n        if (this.getTopRightCorner().isEqual(new CellCoords(expandedRange.from.row, expandedRange.to.col))) {\n          return this.getBottomLeftCorner();\n        }\n        if (this.getBottomLeftCorner().isEqual(new CellCoords(expandedRange.to.row, expandedRange.from.col))) {\n          return this.getTopRightCorner();\n        }\n        if (this.getBottomRightCorner().isEqual(new CellCoords(expandedRange.to.row, expandedRange.to.col))) {\n          return this.getTopLeftCorner();\n        }\n      }\n    }\n\n    if (coords.isEqual(this.getBottomRightCorner())) {\n      return this.getTopLeftCorner();\n\n    } else if (coords.isEqual(this.getTopLeftCorner())) {\n      return this.getBottomRightCorner();\n\n    } else if (coords.isEqual(this.getTopRightCorner())) {\n      return this.getBottomLeftCorner();\n\n    } else if (coords.isEqual(this.getBottomLeftCorner())) {\n      return this.getTopRightCorner();\n    }\n  }\n\n  /**\n   * @param {CellRange} range\n   * @returns {Array}\n   */\n  getBordersSharedWith(range) {\n    if (!this.includesRange(range)) {\n      return [];\n    }\n\n    const thisBorders = {\n      top: Math.min(this.from.row, this.to.row),\n      bottom: Math.max(this.from.row, this.to.row),\n      left: Math.min(this.from.col, this.to.col),\n      right: Math.max(this.from.col, this.to.col)\n    };\n    const rangeBorders = {\n      top: Math.min(range.from.row, range.to.row),\n      bottom: Math.max(range.from.row, range.to.row),\n      left: Math.min(range.from.col, range.to.col),\n      right: Math.max(range.from.col, range.to.col)\n    };\n    const result = [];\n\n    if (thisBorders.top == rangeBorders.top) {\n      result.push('top');\n    }\n    if (thisBorders.right == rangeBorders.right) {\n      result.push('right');\n    }\n    if (thisBorders.bottom == rangeBorders.bottom) {\n      result.push('bottom');\n    }\n    if (thisBorders.left == rangeBorders.left) {\n      result.push('left');\n    }\n\n    return result;\n  }\n\n  /**\n   * Get inner selected cell coords defined by this range\n   *\n   * @returns {Array}\n   */\n  getInner() {\n    let topLeft = this.getTopLeftCorner();\n    let bottomRight = this.getBottomRightCorner();\n    let out = [];\n\n    for (let r = topLeft.row; r <= bottomRight.row; r++) {\n      for (let c = topLeft.col; c <= bottomRight.col; c++) {\n        if (!(this.from.row === r && this.from.col === c) && !(this.to.row === r && this.to.col === c)) {\n          out.push(new CellCoords(r, c));\n        }\n      }\n    }\n    return out;\n  }\n\n  /**\n   * Get all selected cell coords defined by this range\n   *\n   * @returns {Array}\n   */\n  getAll() {\n    let topLeft = this.getTopLeftCorner();\n    let bottomRight = this.getBottomRightCorner();\n    let out = [];\n\n    for (let r = topLeft.row; r <= bottomRight.row; r++) {\n      for (let c = topLeft.col; c <= bottomRight.col; c++) {\n        if (topLeft.row === r && topLeft.col === c) {\n          out.push(topLeft);\n\n        } else if (bottomRight.row === r && bottomRight.col === c) {\n          out.push(bottomRight);\n\n        } else {\n          out.push(new CellCoords(r, c));\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Runs a callback function against all cells in the range. You can break the iteration by returning\n   * `false` in the callback function\n   *\n   * @param callback {Function}\n   */\n  forAll(callback) {\n    let topLeft = this.getTopLeftCorner();\n    let bottomRight = this.getBottomRightCorner();\n\n    for (let r = topLeft.row; r <= bottomRight.row; r++) {\n      for (let c = topLeft.col; c <= bottomRight.col; c++) {\n        let breakIteration = callback(r, c);\n\n        if (breakIteration === false) {\n          return;\n        }\n      }\n    }\n  }\n}\n\nexport default CellRange;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/cell/range.js","import staticRegister from './../utils/staticRegister';\nimport {hasEditor, registerEditor} from './../editors';\nimport {hasRenderer, registerRenderer} from './../renderers';\nimport {hasValidator, registerValidator} from './../validators';\n\nimport autocompleteCellType from './autocompleteType';\nimport checkboxCellType from './checkboxType';\nimport dateCellType from './dateType';\nimport dropdownCellType from './dropdownType';\nimport handsontableCellType from './handsontableType';\nimport numericCellType from './numericType';\nimport passwordCellType from './passwordType';\nimport textCellType from './textType';\nimport timeCellType from './timeType';\n\nconst {\n register,\n getItem,\n hasItem,\n getNames,\n getValues,\n} = staticRegister('cellTypes');\n\n_register('autocomplete', autocompleteCellType);\n_register('checkbox', checkboxCellType);\n_register('date', dateCellType);\n_register('dropdown', dropdownCellType);\n_register('handsontable', handsontableCellType);\n_register('numeric', numericCellType);\n_register('password', passwordCellType);\n_register('text', textCellType);\n_register('time', timeCellType);\n\n/**\n * Retrieve cell type object.\n *\n * @param {String} name Cell type identification.\n * @returns {Object} Returns cell type object.\n */\nfunction _getItem(name) {\n  if (!hasItem(name)) {\n    throw Error(`You declared cell type \"${name}\" as a string that is not mapped to a known object.\n                 Cell type must be an object or a string mapped to an object registered by \"Handsontable.cellTypes.registerCellType\" method`);\n  }\n\n  return getItem(name);\n}\n\n/**\n * Register cell type under specified name.\n *\n * @param {String} name Cell type identification.\n * @param {Object} type An object with contains keys (eq: `editor`, `renderer`, `validator`) which describes specified behaviour of the cell.\n */\nfunction _register(name, type) {\n  const {editor, renderer, validator} = type;\n\n  if (editor) {\n    registerEditor(name, editor);\n  }\n  if (renderer) {\n    registerRenderer(name, renderer);\n  }\n  if (validator) {\n    registerValidator(name, validator);\n  }\n\n  register(name, type);\n}\n\nexport {\n  _register as registerCellType,\n  _getItem as getCellType,\n  hasItem as hasCellType,\n  getNames as getRegisteredCellTypeNames,\n  getValues as getRegisteredCellTypes,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/index.js","import numbro from 'numbro';\nimport {addClass, empty, isChildOfWebComponentTable, removeClass} from './helpers/dom/element';\nimport {columnFactory} from './helpers/setting';\nimport {isFunction} from './helpers/function';\nimport {isDefined, isUndefined, isRegExp} from './helpers/mixed';\nimport {isMobileBrowser} from './helpers/browser';\nimport DataMap from './dataMap';\nimport EditorManager from './editorManager';\nimport EventManager from './eventManager';\nimport {deepClone, duckSchema, extend, isObject, isObjectEquals, deepObjectSize, hasOwnProperty, createObjectPropListener} from './helpers/object';\nimport {arrayFlatten, arrayMap} from './helpers/array';\nimport {getPlugin} from './plugins';\nimport {getRenderer} from './renderers';\nimport {getValidator} from './validators';\nimport {randomString} from './helpers/string';\nimport {rangeEach} from './helpers/number';\nimport TableView from './tableView';\nimport DataSource from './dataSource';\nimport {translateRowsToColumns, cellMethodLookupFactory, spreadsheetColumnLabel} from './helpers/data';\nimport {getTranslator} from './utils/recordTranslator';\nimport {CellCoords, CellRange, ViewportColumnsCalculator} from './3rdparty/walkontable/src';\nimport Hooks from './pluginHooks';\nimport DefaultSettings from './defaultSettings';\nimport {getCellType} from './cellTypes';\n\nlet activeGuid = null;\n\n/**\n * Handsontable constructor\n *\n * @core\n * @dependencies numbro\n * @constructor Core\n * @description\n *\n * After Handsontable is constructed, you can modify the grid behavior using the available public methods.\n *\n * ---\n * ## How to call methods\n *\n * These are 2 equal ways to call a Handsontable method:\n *\n * ```js\n * // all following examples assume that you constructed Handsontable like this\n * var ht = new Handsontable(document.getElementById('example1'), options);\n *\n * // now, to use setDataAtCell method, you can either:\n * ht.setDataAtCell(0, 0, 'new value');\n * ```\n *\n * Alternatively, you can call the method using jQuery wrapper (__obsolete__, requires initialization using our jQuery guide\n * ```js\n *   $('#example1').handsontable('setDataAtCell', 0, 0, 'new value');\n * ```\n * ---\n */\nexport default function Core(rootElement, userSettings) {\n  var priv,\n    datamap,\n    dataSource,\n    grid,\n    selection,\n    editorManager,\n    instance = this,\n    GridSettings = function() {\n    },\n    eventManager = new EventManager(instance);\n\n  extend(GridSettings.prototype, DefaultSettings.prototype); // create grid settings as a copy of default settings\n  extend(GridSettings.prototype, userSettings); // overwrite defaults with user settings\n  extend(GridSettings.prototype, expandType(userSettings));\n\n  this.rootElement = rootElement;\n  this.isHotTableEnv = isChildOfWebComponentTable(this.rootElement);\n  EventManager.isHotTableEnv = this.isHotTableEnv;\n\n  this.container = document.createElement('DIV');\n  this.renderCall = false;\n\n  rootElement.insertBefore(this.container, rootElement.firstChild);\n\n  this.guid = `ht_${randomString()}`; // this is the namespace for global events\n\n  const recordTranslator = getTranslator(instance);\n\n  dataSource = new DataSource(instance);\n\n  if (!this.rootElement.id || this.rootElement.id.substring(0, 3) === 'ht_') {\n    this.rootElement.id = this.guid; // if root element does not have an id, assign a random id\n  }\n  priv = {\n    cellSettings: [],\n    columnSettings: [],\n    columnsSettingConflicts: ['data', 'width'],\n    settings: new GridSettings(), // current settings instance\n    selRange: null, // exposed by public method `getSelectedRange`\n    isPopulated: null,\n    scrollable: null,\n    firstRun: true,\n  };\n\n  grid = {\n    /**\n     * Inserts or removes rows and columns\n     *\n     * @memberof Core#\n     * @function alter\n     * @private\n     * @param {String} action Possible values: \"insert_row\", \"insert_col\", \"remove_row\", \"remove_col\"\n     * @param {Number} index\n     * @param {Number} amount\n     * @param {String} [source] Optional. Source of hook runner.\n     * @param {Boolean} [keepEmptyRows] Optional. Flag for preventing deletion of empty rows.\n     */\n    alter(action, index, amount, source, keepEmptyRows) {\n      var delta;\n\n      amount = amount || 1;\n\n      function spliceWith(data, index, count, toInject) {\n        let valueFactory = () => {\n          let result;\n\n          if (toInject === 'array') {\n            result = [];\n\n          } else if (toInject === 'object') {\n            result = {};\n          }\n\n          return result;\n        };\n        let spliceArgs = arrayMap(new Array(count), () => valueFactory());\n\n        spliceArgs.unshift(index, 0);\n        data.splice(...spliceArgs);\n      }\n\n      /* eslint-disable no-case-declarations */\n      switch (action) {\n        case 'insert_row':\n\n          const numberOfSourceRows = instance.countSourceRows();\n\n          if (instance.getSettings().maxRows === numberOfSourceRows) {\n            return;\n          }\n\n          index = (isDefined(index)) ? index : numberOfSourceRows;\n\n          delta = datamap.createRow(index, amount, source);\n          spliceWith(priv.cellSettings, index, amount, 'array');\n\n          if (delta) {\n            if (selection.isSelected() && priv.selRange.from.row >= index) {\n              priv.selRange.from.row += delta;\n              selection.transformEnd(delta, 0); // will call render() internally\n            } else {\n              selection.refreshBorders(); // it will call render and prepare methods\n            }\n          }\n          break;\n\n        case 'insert_col':\n          delta = datamap.createCol(index, amount, source);\n\n          for (let row = 0, len = instance.countSourceRows(); row < len; row++) {\n            if (priv.cellSettings[row]) {\n              spliceWith(priv.cellSettings[row], index, amount);\n            }\n          }\n\n          if (delta) {\n            if (Array.isArray(instance.getSettings().colHeaders)) {\n              var spliceArray = [index, 0];\n              spliceArray.length += delta; // inserts empty (undefined) elements at the end of an array\n              Array.prototype.splice.apply(instance.getSettings().colHeaders, spliceArray); // inserts empty (undefined) elements into the colHeader array\n            }\n\n            if (selection.isSelected() && priv.selRange.from.col >= index) {\n              priv.selRange.from.col += delta;\n              selection.transformEnd(0, delta); // will call render() internally\n            } else {\n              selection.refreshBorders(); // it will call render and prepare methods\n            }\n          }\n          break;\n\n        case 'remove_row':\n          datamap.removeRow(index, amount, source);\n          priv.cellSettings.splice(index, amount);\n\n          var totalRows = instance.countRows();\n          var fixedRowsTop = instance.getSettings().fixedRowsTop;\n          if (fixedRowsTop >= index + 1) {\n            instance.getSettings().fixedRowsTop -= Math.min(amount, fixedRowsTop - index);\n          }\n\n          var fixedRowsBottom = instance.getSettings().fixedRowsBottom;\n          if (fixedRowsBottom && index >= totalRows - fixedRowsBottom) {\n            instance.getSettings().fixedRowsBottom -= Math.min(amount, fixedRowsBottom);\n          }\n\n          grid.adjustRowsAndCols();\n          selection.refreshBorders(); // it will call render and prepare methods\n          break;\n\n        case 'remove_col':\n          let logicalColumnIndex = recordTranslator.toPhysicalColumn(index);\n\n          datamap.removeCol(index, amount, source);\n\n          for (let row = 0, len = instance.countSourceRows(); row < len; row++) {\n            if (priv.cellSettings[row]) {  // if row hasn't been rendered it wouldn't have cellSettings\n              priv.cellSettings[row].splice(logicalColumnIndex, amount);\n            }\n          }\n          var fixedColumnsLeft = instance.getSettings().fixedColumnsLeft;\n\n          if (fixedColumnsLeft >= index + 1) {\n            instance.getSettings().fixedColumnsLeft -= Math.min(amount, fixedColumnsLeft - index);\n          }\n\n          if (Array.isArray(instance.getSettings().colHeaders)) {\n            if (typeof logicalColumnIndex == 'undefined') {\n              logicalColumnIndex = -1;\n            }\n            instance.getSettings().colHeaders.splice(logicalColumnIndex, amount);\n          }\n\n          grid.adjustRowsAndCols();\n          selection.refreshBorders(); // it will call render and prepare methods\n\n          break;\n        default:\n          throw new Error(`There is no such action \"${action}\"`);\n      }\n\n      if (!keepEmptyRows) {\n        grid.adjustRowsAndCols(); // makes sure that we did not add rows that will be removed in next refresh\n      }\n    },\n\n    /**\n     * Makes sure there are empty rows at the bottom of the table\n     */\n    adjustRowsAndCols() {\n      if (priv.settings.minRows) {\n        // should I add empty rows to data source to meet minRows?\n        let rows = instance.countRows();\n\n        if (rows < priv.settings.minRows) {\n          for (let r = 0, minRows = priv.settings.minRows; r < minRows - rows; r++) {\n            datamap.createRow(instance.countRows(), 1, 'auto');\n          }\n        }\n      }\n      if (priv.settings.minSpareRows) {\n        let emptyRows = instance.countEmptyRows(true);\n\n        // should I add empty rows to meet minSpareRows?\n        if (emptyRows < priv.settings.minSpareRows) {\n          for (; emptyRows < priv.settings.minSpareRows && instance.countSourceRows() < priv.settings.maxRows; emptyRows++) {\n            datamap.createRow(instance.countRows(), 1, 'auto');\n          }\n        }\n      }\n      {\n        let emptyCols;\n\n        // count currently empty cols\n        if (priv.settings.minCols || priv.settings.minSpareCols) {\n          emptyCols = instance.countEmptyCols(true);\n        }\n\n        // should I add empty cols to meet minCols?\n        if (priv.settings.minCols && !priv.settings.columns && instance.countCols() < priv.settings.minCols) {\n          for (; instance.countCols() < priv.settings.minCols; emptyCols++) {\n            datamap.createCol(instance.countCols(), 1, 'auto');\n          }\n        }\n        // should I add empty cols to meet minSpareCols?\n        if (priv.settings.minSpareCols && !priv.settings.columns && instance.dataType === 'array' &&\n            emptyCols < priv.settings.minSpareCols) {\n          for (; emptyCols < priv.settings.minSpareCols && instance.countCols() < priv.settings.maxCols; emptyCols++) {\n            datamap.createCol(instance.countCols(), 1, 'auto');\n          }\n        }\n      }\n      let rowCount = instance.countRows();\n      let colCount = instance.countCols();\n\n      if (rowCount === 0 || colCount === 0) {\n        selection.deselect();\n      }\n\n      if (selection.isSelected()) {\n        let selectionChanged = false;\n        let fromRow = priv.selRange.from.row;\n        let fromCol = priv.selRange.from.col;\n        let toRow = priv.selRange.to.row;\n        let toCol = priv.selRange.to.col;\n\n        // if selection is outside, move selection to last row\n        if (fromRow > rowCount - 1) {\n          fromRow = rowCount - 1;\n          selectionChanged = true;\n\n          if (toRow > fromRow) {\n            toRow = fromRow;\n          }\n        } else if (toRow > rowCount - 1) {\n          toRow = rowCount - 1;\n          selectionChanged = true;\n\n          if (fromRow > toRow) {\n            fromRow = toRow;\n          }\n        }\n        // if selection is outside, move selection to last row\n        if (fromCol > colCount - 1) {\n          fromCol = colCount - 1;\n          selectionChanged = true;\n\n          if (toCol > fromCol) {\n            toCol = fromCol;\n          }\n        } else if (toCol > colCount - 1) {\n          toCol = colCount - 1;\n          selectionChanged = true;\n\n          if (fromCol > toCol) {\n            fromCol = toCol;\n          }\n        }\n\n        if (selectionChanged) {\n          instance.selectCell(fromRow, fromCol, toRow, toCol);\n        }\n      }\n      if (instance.view) {\n        instance.view.wt.wtOverlays.adjustElementsSize();\n      }\n    },\n\n    /**\n     * Populate the data from the provided 2d array from the given cell coordinates.\n     *\n     * @private\n     * @param {Object} start Start selection position.\n     * @param {Array} input 2d data array.\n     * @param {Object} [end] End selection position (only for drag-down mode).\n     * @param {String} [source=\"populateFromArray\"] Source information string.\n     * @param {String} [method=\"overwrite\"] Populate method. Possible options: `shift_down`, `shift_right`, `overwrite`.\n     * @param {String} direction (left|right|up|down) String specifying the direction.\n     * @param {Array} deltas The deltas array.\n     * @returns {Object|undefined} ending td in pasted area (only if any cell was changed).\n     */\n    populateFromArray(start, input, end, source, method, direction, deltas) {\n      var r,\n        rlen,\n        c,\n        clen,\n        setData = [],\n        current = {};\n\n      rlen = input.length;\n\n      if (rlen === 0) {\n        return false;\n      }\n\n      var repeatCol,\n        repeatRow,\n        cmax,\n        rmax,\n        baseEnd = {\n          row: end === null ? null : end.row,\n          col: end === null ? null : end.col\n        };\n\n      /* eslint-disable no-case-declarations */\n      // insert data with specified pasteMode method\n      switch (method) {\n        case 'shift_down' :\n          repeatCol = end ? end.col - start.col + 1 : 0;\n          repeatRow = end ? end.row - start.row + 1 : 0;\n          input = translateRowsToColumns(input);\n          for (c = 0, clen = input.length, cmax = Math.max(clen, repeatCol); c < cmax; c++) {\n            if (c < clen) {\n              for (r = 0, rlen = input[c].length; r < repeatRow - rlen; r++) {\n                input[c].push(input[c][r % rlen]);\n              }\n              input[c].unshift(start.col + c, start.row, 0);\n              instance.spliceCol(...input[c]);\n            } else {\n              input[c % clen][0] = start.col + c;\n              instance.spliceCol(...input[c % clen]);\n            }\n          }\n          break;\n\n        case 'shift_right':\n          repeatCol = end ? end.col - start.col + 1 : 0;\n          repeatRow = end ? end.row - start.row + 1 : 0;\n          for (r = 0, rlen = input.length, rmax = Math.max(rlen, repeatRow); r < rmax; r++) {\n            if (r < rlen) {\n              for (c = 0, clen = input[r].length; c < repeatCol - clen; c++) {\n                input[r].push(input[r][c % clen]);\n              }\n              input[r].unshift(start.row + r, start.col, 0);\n              instance.spliceRow(...input[r]);\n            } else {\n              input[r % rlen][0] = start.row + r;\n              instance.spliceRow(...input[r % rlen]);\n            }\n          }\n          break;\n\n        case 'overwrite':\n        default:\n          // overwrite and other not specified options\n          current.row = start.row;\n          current.col = start.col;\n\n          let selected = { // selected range\n            row: (end && start) ? (end.row - start.row + 1) : 1,\n            col: (end && start) ? (end.col - start.col + 1) : 1\n          };\n          let skippedRow = 0;\n          let skippedColumn = 0;\n          let pushData = true;\n          let cellMeta;\n\n          let getInputValue = function getInputValue(row, col = null) {\n            let rowValue = input[row % input.length];\n\n            if (col !== null) {\n              return rowValue[col % rowValue.length];\n            }\n\n            return rowValue;\n          };\n          let rowInputLength = input.length;\n          let rowSelectionLength = end ? end.row - start.row + 1 : 0;\n\n          if (end) {\n            rlen = rowSelectionLength;\n          } else {\n            rlen = Math.max(rowInputLength, rowSelectionLength);\n          }\n          for (r = 0; r < rlen; r++) {\n            if ((end && current.row > end.row && rowSelectionLength > rowInputLength) ||\n                (!priv.settings.allowInsertRow && current.row > instance.countRows() - 1) ||\n                (current.row >= priv.settings.maxRows)) {\n              break;\n            }\n            let logicalRow = r - skippedRow;\n            let colInputLength = getInputValue(logicalRow).length;\n            let colSelectionLength = end ? end.col - start.col + 1 : 0;\n\n            if (end) {\n              clen = colSelectionLength;\n            } else {\n              clen = Math.max(colInputLength, colSelectionLength);\n            }\n            current.col = start.col;\n            cellMeta = instance.getCellMeta(current.row, current.col);\n\n            if ((source === 'CopyPaste.paste' || source === 'Autofill.autofill') && cellMeta.skipRowOnPaste) {\n              skippedRow++;\n              current.row++;\n              rlen++;\n              /* eslint-disable no-continue */\n              continue;\n            }\n            skippedColumn = 0;\n\n            for (c = 0; c < clen; c++) {\n              if ((end && current.col > end.col && colSelectionLength > colInputLength) ||\n                  (!priv.settings.allowInsertColumn && current.col > instance.countCols() - 1) ||\n                  (current.col >= priv.settings.maxCols)) {\n                break;\n              }\n              cellMeta = instance.getCellMeta(current.row, current.col);\n\n              if ((source === 'CopyPaste.paste' || source === 'Autofill.fill') && cellMeta.skipColumnOnPaste) {\n                skippedColumn++;\n                current.col++;\n                clen++;\n                continue;\n              }\n              if (cellMeta.readOnly) {\n                current.col++;\n                /* eslint-disable no-continue */\n                continue;\n              }\n              let logicalColumn = c - skippedColumn;\n              let value = getInputValue(logicalRow, logicalColumn);\n              let orgValue = instance.getDataAtCell(current.row, current.col);\n              let index = {\n                row: logicalRow,\n                col: logicalColumn\n              };\n\n              if (source === 'Autofill.fill') {\n                let result = instance.runHooks('beforeAutofillInsidePopulate', index, direction, input, deltas, {}, selected);\n\n                if (result) {\n                  value = isUndefined(result.value) ? value : result.value;\n                }\n              }\n              if (value !== null && typeof value === 'object') {\n                if (orgValue === null || typeof orgValue !== 'object') {\n                  pushData = false;\n\n                } else {\n                  let orgValueSchema = duckSchema(orgValue[0] || orgValue);\n                  let valueSchema = duckSchema(value[0] || value);\n\n                  /* eslint-disable max-depth */\n                  if (isObjectEquals(orgValueSchema, valueSchema)) {\n                    value = deepClone(value);\n                  } else {\n                    pushData = false;\n                  }\n                }\n\n              } else if (orgValue !== null && typeof orgValue === 'object') {\n                pushData = false;\n              }\n              if (pushData) {\n                setData.push([current.row, current.col, value]);\n              }\n              pushData = true;\n              current.col++;\n            }\n            current.row++;\n          }\n          instance.setDataAtCell(setData, null, null, source || 'populateFromArray');\n          break;\n      }\n    },\n  };\n\n  /* eslint-disable no-multi-assign */\n  this.selection = selection = { // this public assignment is only temporary\n    inProgress: false,\n\n    selectedHeader: {\n      cols: false,\n      rows: false,\n    },\n\n    /**\n     * @param {Boolean} [rows=false]\n     * @param {Boolean} [cols=false]\n     * @param {Boolean} [corner=false]\n     */\n    setSelectedHeaders(rows = false, cols = false, corner = false) {\n      instance.selection.selectedHeader.rows = rows;\n      instance.selection.selectedHeader.cols = cols;\n      instance.selection.selectedHeader.corner = corner;\n    },\n\n    /**\n     * Sets inProgress to `true`. This enables onSelectionEnd and onSelectionEndByProp to function as desired.\n     */\n    begin() {\n      instance.selection.inProgress = true;\n    },\n\n    /**\n     * Sets inProgress to `false`. Triggers onSelectionEnd and onSelectionEndByProp.\n     */\n    finish() {\n      var sel = instance.getSelected();\n      instance.runHooks('afterSelectionEnd', sel[0], sel[1], sel[2], sel[3]);\n      instance.runHooks('afterSelectionEndByProp', sel[0], instance.colToProp(sel[1]), sel[2], instance.colToProp(sel[3]));\n      instance.selection.inProgress = false;\n    },\n\n    /**\n     * @returns {Boolean}\n     */\n    isInProgress() {\n      return instance.selection.inProgress;\n    },\n\n    /**\n     * Starts selection range on given td object.\n     *\n     * @param {CellCoords} coords\n     * @param keepEditorOpened\n     */\n    setRangeStart(coords, keepEditorOpened) {\n      instance.runHooks('beforeSetRangeStart', coords);\n      priv.selRange = new CellRange(coords, coords, coords);\n      selection.setRangeEnd(coords, null, keepEditorOpened);\n    },\n\n    /**\n     * Starts selection range on given td object.\n     *\n     * @param {CellCoords} coords\n     * @param keepEditorOpened\n     */\n    setRangeStartOnly(coords) {\n      instance.runHooks('beforeSetRangeStartOnly', coords);\n      priv.selRange = new CellRange(coords, coords, coords);\n    },\n\n    /**\n     * Ends selection range on given td object.\n     *\n     * @param {CellCoords} coords\n     * @param {Boolean} [scrollToCell=true] If `true`, viewport will be scrolled to range end\n     * @param {Boolean} [keepEditorOpened] If `true`, cell editor will be still opened after changing selection range\n     */\n    setRangeEnd(coords, scrollToCell, keepEditorOpened) {\n      if (priv.selRange === null) {\n        return;\n      }\n      var disableVisualSelection,\n        isHeaderSelected = false,\n        areCoordsPositive = true;\n\n      var firstVisibleRow = instance.view.wt.wtTable.getFirstVisibleRow();\n      var firstVisibleColumn = instance.view.wt.wtTable.getFirstVisibleColumn();\n      var newRangeCoords = {\n        row: null,\n        col: null,\n      };\n\n      // trigger handlers\n      instance.runHooks('beforeSetRangeEnd', coords);\n      instance.selection.begin();\n\n      newRangeCoords.row = coords.row < 0 ? firstVisibleRow : coords.row;\n      newRangeCoords.col = coords.col < 0 ? firstVisibleColumn : coords.col;\n\n      priv.selRange.to = new CellCoords(newRangeCoords.row, newRangeCoords.col);\n\n      if (!priv.settings.multiSelect) {\n        priv.selRange.from = coords;\n      }\n      // set up current selection\n      instance.view.wt.selections.current.clear();\n\n      disableVisualSelection = instance.getCellMeta(priv.selRange.highlight.row, priv.selRange.highlight.col).disableVisualSelection;\n\n      if (typeof disableVisualSelection === 'string') {\n        disableVisualSelection = [disableVisualSelection];\n      }\n\n      if (disableVisualSelection === false ||\n          Array.isArray(disableVisualSelection) && disableVisualSelection.indexOf('current') === -1) {\n        instance.view.wt.selections.current.add(priv.selRange.highlight);\n      }\n      // set up area selection\n      instance.view.wt.selections.area.clear();\n\n      if ((disableVisualSelection === false ||\n          Array.isArray(disableVisualSelection) && disableVisualSelection.indexOf('area') === -1) &&\n          selection.isMultiple()) {\n        instance.view.wt.selections.area.add(priv.selRange.from);\n        instance.view.wt.selections.area.add(priv.selRange.to);\n      }\n      // set up highlight\n      if (priv.settings.currentHeaderClassName || priv.settings.currentRowClassName || priv.settings.currentColClassName) {\n        instance.view.wt.selections.highlight.clear();\n        instance.view.wt.selections.highlight.add(priv.selRange.from);\n        instance.view.wt.selections.highlight.add(priv.selRange.to);\n      }\n\n      const preventScrolling = createObjectPropListener('value');\n\n      // trigger handlers\n      instance.runHooks('afterSelection',\n        priv.selRange.from.row, priv.selRange.from.col, priv.selRange.to.row, priv.selRange.to.col, preventScrolling);\n      instance.runHooks('afterSelectionByProp',\n        priv.selRange.from.row, datamap.colToProp(priv.selRange.from.col), priv.selRange.to.row, datamap.colToProp(priv.selRange.to.col), preventScrolling);\n\n      if ((priv.selRange.from.row === 0 && priv.selRange.to.row === instance.countRows() - 1 && instance.countRows() > 1) ||\n        (priv.selRange.from.col === 0 && priv.selRange.to.col === instance.countCols() - 1 && instance.countCols() > 1)) {\n        isHeaderSelected = true;\n      }\n\n      if (coords.row < 0 || coords.col < 0) {\n        areCoordsPositive = false;\n      }\n\n      if (preventScrolling.isTouched()) {\n        scrollToCell = !preventScrolling.value;\n      }\n\n      if (scrollToCell !== false && !isHeaderSelected && areCoordsPositive) {\n        if (priv.selRange.from && !selection.isMultiple()) {\n          instance.view.scrollViewport(priv.selRange.from);\n        } else {\n          instance.view.scrollViewport(coords);\n        }\n      }\n\n      if (selection.selectedHeader.rows && selection.selectedHeader.cols) {\n        addClass(instance.rootElement, ['ht__selection--rows', 'ht__selection--columns']);\n\n      } else if (selection.selectedHeader.rows) {\n        removeClass(instance.rootElement, 'ht__selection--columns');\n        addClass(instance.rootElement, 'ht__selection--rows');\n\n      } else if (selection.selectedHeader.cols) {\n        removeClass(instance.rootElement, 'ht__selection--rows');\n        addClass(instance.rootElement, 'ht__selection--columns');\n\n      } else {\n        removeClass(instance.rootElement, ['ht__selection--rows', 'ht__selection--columns']);\n      }\n\n      selection.refreshBorders(null, keepEditorOpened);\n    },\n\n    /**\n     * Destroys editor, redraws borders around cells, prepares editor.\n     *\n     * @param {Boolean} [revertOriginal]\n     * @param {Boolean} [keepEditor]\n     */\n    refreshBorders(revertOriginal, keepEditor) {\n      if (!keepEditor) {\n        editorManager.destroyEditor(revertOriginal);\n      }\n      instance.view.render();\n\n      if (selection.isSelected() && !keepEditor) {\n        editorManager.prepareEditor();\n      }\n    },\n\n    /**\n     * Returns information if we have a multiselection.\n     *\n     * @returns {Boolean}\n     */\n    isMultiple() {\n      var\n        isMultiple = !(priv.selRange.to.col === priv.selRange.from.col && priv.selRange.to.row === priv.selRange.from.row),\n        modifier = instance.runHooks('afterIsMultipleSelection', isMultiple);\n\n      if (isMultiple) {\n        return modifier;\n      }\n    },\n\n    /**\n     * Selects cell relative to current cell (if possible).\n     */\n    transformStart(rowDelta, colDelta, force, keepEditorOpened) {\n      var delta = new CellCoords(rowDelta, colDelta),\n        rowTransformDir = 0,\n        colTransformDir = 0,\n        totalRows,\n        totalCols,\n        coords,\n        fixedRowsBottom;\n\n      instance.runHooks('modifyTransformStart', delta);\n      totalRows = instance.countRows();\n      totalCols = instance.countCols();\n      fixedRowsBottom = instance.getSettings().fixedRowsBottom;\n\n      if (priv.selRange.highlight.row + rowDelta > totalRows - 1) {\n        if (force && priv.settings.minSpareRows > 0 && !(fixedRowsBottom && priv.selRange.highlight.row >= totalRows - fixedRowsBottom - 1)) {\n          instance.alter('insert_row', totalRows);\n          totalRows = instance.countRows();\n\n        } else if (priv.settings.autoWrapCol) {\n          delta.row = 1 - totalRows;\n          delta.col = priv.selRange.highlight.col + delta.col == totalCols - 1 ? 1 - totalCols : 1;\n        }\n      } else if (priv.settings.autoWrapCol && priv.selRange.highlight.row + delta.row < 0 && priv.selRange.highlight.col + delta.col >= 0) {\n        delta.row = totalRows - 1;\n        delta.col = priv.selRange.highlight.col + delta.col == 0 ? totalCols - 1 : -1;\n      }\n\n      if (priv.selRange.highlight.col + delta.col > totalCols - 1) {\n        if (force && priv.settings.minSpareCols > 0) {\n          instance.alter('insert_col', totalCols);\n          totalCols = instance.countCols();\n\n        } else if (priv.settings.autoWrapRow) {\n          delta.row = priv.selRange.highlight.row + delta.row == totalRows - 1 ? 1 - totalRows : 1;\n          delta.col = 1 - totalCols;\n        }\n      } else if (priv.settings.autoWrapRow && priv.selRange.highlight.col + delta.col < 0 && priv.selRange.highlight.row + delta.row >= 0) {\n        delta.row = priv.selRange.highlight.row + delta.row == 0 ? totalRows - 1 : -1;\n        delta.col = totalCols - 1;\n      }\n\n      coords = new CellCoords(priv.selRange.highlight.row + delta.row, priv.selRange.highlight.col + delta.col);\n\n      if (coords.row < 0) {\n        rowTransformDir = -1;\n        coords.row = 0;\n\n      } else if (coords.row > 0 && coords.row >= totalRows) {\n        rowTransformDir = 1;\n        coords.row = totalRows - 1;\n      }\n\n      if (coords.col < 0) {\n        colTransformDir = -1;\n        coords.col = 0;\n\n      } else if (coords.col > 0 && coords.col >= totalCols) {\n        colTransformDir = 1;\n        coords.col = totalCols - 1;\n      }\n      instance.runHooks('afterModifyTransformStart', coords, rowTransformDir, colTransformDir);\n      selection.setRangeStart(coords, keepEditorOpened);\n    },\n\n    /**\n     * Sets selection end cell relative to current selection end cell (if possible).\n     */\n    transformEnd(rowDelta, colDelta) {\n      var delta = new CellCoords(rowDelta, colDelta),\n        rowTransformDir = 0,\n        colTransformDir = 0,\n        totalRows,\n        totalCols,\n        coords;\n\n      instance.runHooks('modifyTransformEnd', delta);\n\n      totalRows = instance.countRows();\n      totalCols = instance.countCols();\n      coords = new CellCoords(priv.selRange.to.row + delta.row, priv.selRange.to.col + delta.col);\n\n      if (coords.row < 0) {\n        rowTransformDir = -1;\n        coords.row = 0;\n\n      } else if (coords.row > 0 && coords.row >= totalRows) {\n        rowTransformDir = 1;\n        coords.row = totalRows - 1;\n      }\n\n      if (coords.col < 0) {\n        colTransformDir = -1;\n        coords.col = 0;\n\n      } else if (coords.col > 0 && coords.col >= totalCols) {\n        colTransformDir = 1;\n        coords.col = totalCols - 1;\n      }\n      instance.runHooks('afterModifyTransformEnd', coords, rowTransformDir, colTransformDir);\n      selection.setRangeEnd(coords, true);\n    },\n\n    /**\n     * Returns `true` if currently there is a selection on screen, `false` otherwise.\n     *\n     * @returns {Boolean}\n     */\n    isSelected() {\n      return (priv.selRange !== null);\n    },\n\n    /**\n     * Returns `true` if coords is within current selection coords.\n     *\n     * @param {CellCoords} coords\n     * @returns {Boolean}\n     */\n    inInSelection(coords) {\n      if (!selection.isSelected()) {\n        return false;\n      }\n\n      return priv.selRange.includes(coords);\n    },\n\n    /**\n     * Deselects all selected cells\n     */\n    deselect() {\n      if (!selection.isSelected()) {\n        return;\n      }\n      instance.selection.inProgress = false; // needed by HT inception\n      priv.selRange = null;\n      instance.view.wt.selections.current.clear();\n      instance.view.wt.selections.area.clear();\n      if (priv.settings.currentHeaderClassName || priv.settings.currentRowClassName || priv.settings.currentColClassName) {\n        instance.view.wt.selections.highlight.clear();\n      }\n      editorManager.destroyEditor();\n      selection.refreshBorders();\n      removeClass(instance.rootElement, ['ht__selection--rows', 'ht__selection--columns']);\n      instance.runHooks('afterDeselect');\n    },\n\n    /**\n     * Select all cells\n     */\n    selectAll() {\n      if (!priv.settings.multiSelect) {\n        return;\n      }\n      selection.setSelectedHeaders(true, true, true);\n      selection.setRangeStart(new CellCoords(0, 0));\n      selection.setRangeEnd(new CellCoords(instance.countRows() - 1, instance.countCols() - 1), false);\n    },\n\n    /**\n     * Deletes data from selected cells\n     */\n    empty() {\n      if (!selection.isSelected()) {\n        return;\n      }\n      var topLeft = priv.selRange.getTopLeftCorner();\n      var bottomRight = priv.selRange.getBottomRightCorner();\n      var r,\n        c,\n        changes = [];\n\n      for (r = topLeft.row; r <= bottomRight.row; r++) {\n        for (c = topLeft.col; c <= bottomRight.col; c++) {\n          if (!instance.getCellMeta(r, c).readOnly) {\n            changes.push([r, c, '']);\n          }\n        }\n      }\n      instance.setDataAtCell(changes);\n    },\n  };\n\n  this.init = function() {\n    dataSource.setData(priv.settings.data);\n    instance.runHooks('beforeInit');\n\n    if (isMobileBrowser()) {\n      addClass(instance.rootElement, 'mobile');\n    }\n\n    this.updateSettings(priv.settings, true);\n\n    this.view = new TableView(this);\n    editorManager = new EditorManager(instance, priv, selection, datamap);\n\n    this.forceFullRender = true; // used when data was changed\n\n    instance.runHooks('init');\n    this.view.render();\n\n    if (typeof priv.firstRun === 'object') {\n      instance.runHooks('afterChange', priv.firstRun[0], priv.firstRun[1]);\n      priv.firstRun = false;\n    }\n    instance.runHooks('afterInit');\n  };\n\n  function ValidatorsQueue() { // moved this one level up so it can be used in any function here. Probably this should be moved to a separate file\n    var resolved = false;\n\n    return {\n      validatorsInQueue: 0,\n      valid: true,\n      addValidatorToQueue() {\n        this.validatorsInQueue++;\n        resolved = false;\n      },\n      removeValidatorFormQueue() {\n        this.validatorsInQueue = this.validatorsInQueue - 1 < 0 ? 0 : this.validatorsInQueue - 1;\n        this.checkIfQueueIsEmpty();\n      },\n      onQueueEmpty(valid) {\n      },\n      checkIfQueueIsEmpty() {\n        if (this.validatorsInQueue == 0 && resolved == false) {\n          resolved = true;\n          this.onQueueEmpty(this.valid);\n        }\n      }\n    };\n  }\n\n  function validateChanges(changes, source, callback) {\n    var waitingForValidator = new ValidatorsQueue();\n    waitingForValidator.onQueueEmpty = resolve;\n\n    for (var i = changes.length - 1; i >= 0; i--) {\n      if (changes[i] === null) {\n        changes.splice(i, 1);\n      } else {\n        var row = changes[i][0];\n        var col = datamap.propToCol(changes[i][1]);\n\n        var cellProperties = instance.getCellMeta(row, col);\n\n        if (cellProperties.type === 'numeric' && typeof changes[i][3] === 'string') {\n          if (changes[i][3].length > 0 && (/^-?[\\d\\s]*(\\.|,)?\\d*$/.test(changes[i][3]) || cellProperties.format)) {\n            var len = changes[i][3].length;\n\n            if (isUndefined(cellProperties.language)) {\n              numbro.culture('en-US');\n\n            } else if (changes[i][3].indexOf('.') === len - 3 && changes[i][3].indexOf(',') === -1) {\n              // this input in format XXXX.XX is likely to come from paste. Let's parse it using international rules\n              numbro.culture('en-US');\n            } else {\n\n              numbro.culture(cellProperties.language);\n            }\n\n            const {delimiters} = numbro.cultureData(numbro.culture());\n\n            // try to parse to float - https://github.com/foretagsplatsen/numbro/pull/183\n            if (numbro.validate(changes[i][3]) && !isNaN(changes[i][3])) {\n              changes[i][3] = parseFloat(changes[i][3]);\n\n            } else {\n              changes[i][3] = numbro().unformat(changes[i][3]) || changes[i][3];\n            }\n          }\n        }\n\n        /* eslint-disable no-loop-func */\n        if (instance.getCellValidator(cellProperties)) {\n          waitingForValidator.addValidatorToQueue();\n          instance.validateCell(changes[i][3], cellProperties, (function(i, cellProperties) {\n            return function(result) {\n              if (typeof result !== 'boolean') {\n                throw new Error('Validation error: result is not boolean');\n              }\n              if (result === false && cellProperties.allowInvalid === false) {\n                changes.splice(i, 1);         // cancel the change\n                cellProperties.valid = true;  // we cancelled the change, so cell value is still valid\n                const cell = instance.getCell(cellProperties.row, cellProperties.col);\n                removeClass(cell, instance.getSettings().invalidCellClassName);\n                --i;\n              }\n              waitingForValidator.removeValidatorFormQueue();\n            };\n          }(i, cellProperties)), source);\n        }\n      }\n    }\n    waitingForValidator.checkIfQueueIsEmpty();\n\n    function resolve() {\n      var beforeChangeResult;\n\n      if (changes.length) {\n        beforeChangeResult = instance.runHooks('beforeChange', changes, source);\n        if (isFunction(beforeChangeResult)) {\n          console.warn('Your beforeChange callback returns a function. It\\'s not supported since Handsontable 0.12.1 (and the returned function will not be executed).');\n        } else if (beforeChangeResult === false) {\n          changes.splice(0, changes.length); // invalidate all changes (remove everything from array)\n        }\n      }\n      callback(); // called when async validators are resolved and beforeChange was not async\n    }\n  }\n\n  /**\n   * Internal function to apply changes. Called after validateChanges\n   *\n   * @private\n   * @param {Array} changes Array in form of [row, prop, oldValue, newValue]\n   * @param {String} source String that identifies how this change will be described in changes array (useful in onChange callback)\n   * @fires Hooks#beforeChangeRender\n   * @fires Hooks#afterChange\n   */\n  function applyChanges(changes, source) {\n    let i = changes.length - 1;\n\n    if (i < 0) {\n      return;\n    }\n\n    for (; i >= 0; i--) {\n      let skipThisChange = false;\n\n      if (changes[i] === null) {\n        changes.splice(i, 1);\n        /* eslint-disable no-continue */\n        continue;\n      }\n\n      if (changes[i][2] == null && changes[i][3] == null) {\n        /* eslint-disable no-continue */\n        continue;\n      }\n\n      if (priv.settings.allowInsertRow) {\n        while (changes[i][0] > instance.countRows() - 1) {\n          let numberOfCreatedRows = datamap.createRow(void 0, void 0, source);\n\n          if (numberOfCreatedRows === 0) {\n            skipThisChange = true;\n            break;\n          }\n        }\n      }\n\n      if (skipThisChange) {\n        /* eslint-disable no-continue */\n        continue;\n      }\n\n      if (instance.dataType === 'array' && (!priv.settings.columns || priv.settings.columns.length === 0) && priv.settings.allowInsertColumn) {\n        while (datamap.propToCol(changes[i][1]) > instance.countCols() - 1) {\n          datamap.createCol(void 0, void 0, source);\n        }\n      }\n\n      datamap.set(changes[i][0], changes[i][1], changes[i][3]);\n    }\n\n    instance.forceFullRender = true; // used when data was changed\n    grid.adjustRowsAndCols();\n    instance.runHooks('beforeChangeRender', changes, source);\n    selection.refreshBorders(null, true);\n    instance.view.wt.wtOverlays.adjustElementsSize();\n    instance.runHooks('afterChange', changes, source || 'edit');\n\n    let activeEditor = instance.getActiveEditor();\n\n    if (activeEditor && isDefined(activeEditor.refreshValue)) {\n      activeEditor.refreshValue();\n    }\n  }\n\n  this.validateCell = function(value, cellProperties, callback, source) {\n    var validator = instance.getCellValidator(cellProperties);\n\n    function done(valid) {\n      var col = cellProperties.visualCol,\n        row = cellProperties.visualRow,\n        td = instance.getCell(row, col, true);\n\n      if (td && td.nodeName != 'TH') {\n        instance.view.wt.wtSettings.settings.cellRenderer(row, col, td);\n      }\n      callback(valid);\n    }\n\n    if (isRegExp(validator)) {\n      validator = (function(validator) {\n        return function(value, callback) {\n          callback(validator.test(value));\n        };\n      }(validator));\n    }\n\n    if (isFunction(validator)) {\n\n      value = instance.runHooks('beforeValidate', value, cellProperties.visualRow, cellProperties.prop, source);\n\n      // To provide consistent behaviour, validation should be always asynchronous\n      instance._registerTimeout(setTimeout(() => {\n        validator.call(cellProperties, value, (valid) => {\n          valid = instance.runHooks('afterValidate', valid, value, cellProperties.visualRow, cellProperties.prop, source);\n          cellProperties.valid = valid;\n\n          done(valid);\n          instance.runHooks('postAfterValidate', valid, value, cellProperties.visualRow, cellProperties.prop, source);\n        });\n      }, 0));\n\n    } else {\n      // resolve callback even if validator function was not found\n      instance._registerTimeout(setTimeout(() => {\n        cellProperties.valid = true;\n        done(cellProperties.valid);\n      }, 0));\n    }\n  };\n\n  function setDataInputToArray(row, propOrCol, value) {\n    if (typeof row === 'object') { // is it an array of changes\n      return row;\n    }\n    return [\n        [row, propOrCol, value]\n    ];\n\n  }\n\n  /**\n   * @description\n   * Set new value to a cell. To change many cells at once, pass an array of `changes` in format `[[row, col, value], ...]` as\n   * the only parameter. `col` is the index of a __visible__ column (note that if columns were reordered,\n   * the current visible order will be used). `source` is a flag for before/afterChange events. If you pass only array of\n   * changes then `source` could be set as second parameter.\n   *\n   * @memberof Core#\n   * @function setDataAtCell\n   * @param {Number|Array} row Row index or array of changes in format `[[row, col, value], ...]`.\n   * @param {Number} col Column index.\n   * @param {String} value New value.\n   * @param {String} [source] String that identifies how this change will be described in the changes array (useful in onAfterChange or onBeforeChange callback).\n   */\n  this.setDataAtCell = function(row, col, value, source) {\n    var\n      input = setDataInputToArray(row, col, value),\n      i,\n      ilen,\n      changes = [],\n      prop;\n\n    for (i = 0, ilen = input.length; i < ilen; i++) {\n      if (typeof input[i] !== 'object') {\n        throw new Error('Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter');\n      }\n      if (typeof input[i][1] !== 'number') {\n        throw new Error('Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`');\n      }\n      prop = datamap.colToProp(input[i][1]);\n      changes.push([\n        input[i][0],\n        prop,\n        dataSource.getAtCell(recordTranslator.toPhysicalRow(input[i][0]), input[i][1]),\n        input[i][2],\n      ]);\n    }\n\n    if (!source && typeof row === 'object') {\n      source = col;\n    }\n\n    instance.runHooks('afterSetDataAtCell', changes, source);\n\n    validateChanges(changes, source, () => {\n      applyChanges(changes, source);\n    });\n  };\n\n  /**\n   * @description\n   * Set new value to a cell. To change many cells at once, pass an array of `changes` in format `[[row, prop, value], ...]` as\n   * the only parameter. `prop` is the name of the object property (e.g. `first.name`). `source` is a flag for before/afterChange events.\n   * If you pass only array of changes then `source` could be set as second parameter.\n   *\n   * @memberof Core#\n   * @function setDataAtRowProp\n   * @param {Number|Array} row Row index or array of changes in format `[[row, prop, value], ...]`.\n   * @param {String} prop Property name or the source string.\n   * @param {String} value Value to be set.\n   * @param {String} [source] String that identifies how this change will be described in changes array (useful in onChange callback).\n   */\n  this.setDataAtRowProp = function(row, prop, value, source) {\n    var input = setDataInputToArray(row, prop, value),\n      i,\n      ilen,\n      changes = [];\n\n    for (i = 0, ilen = input.length; i < ilen; i++) {\n      changes.push([\n        input[i][0],\n        input[i][1],\n        dataSource.getAtCell(recordTranslator.toPhysicalRow(input[i][0]), input[i][1]),\n        input[i][2],\n      ]);\n    }\n\n    if (!source && typeof row === 'object') {\n      source = prop;\n    }\n\n    instance.runHooks('afterSetDataAtRowProp', changes, source);\n\n    validateChanges(changes, source, () => {\n      applyChanges(changes, source);\n    });\n  };\n\n  /**\n   * Listen to the keyboard input on document body.\n   *\n   * @memberof Core#\n   * @function listen\n   * @since 0.11\n   */\n  this.listen = function() {\n    activeGuid = instance.guid;\n  };\n\n  /**\n   * Stop listening to keyboard input on the document body.\n   *\n   * @memberof Core#\n   * @function unlisten\n   * @since 0.11\n   */\n  this.unlisten = function() {\n    activeGuid = null;\n  };\n\n  /**\n   * Returns `true` if the current Handsontable instance is listening to keyboard input on document body.\n   *\n   * @memberof Core#\n   * @function isListening\n   * @since 0.11\n   * @returns {Boolean} `true` if the instance is listening, `false` otherwise.\n   */\n  this.isListening = function() {\n    return activeGuid === instance.guid;\n  };\n\n  /**\n   * Destroys the current editor, renders and selects the current cell.\n   *\n   * @memberof Core#\n   * @function destroyEditor\n   * @param {Boolean} [revertOriginal] If != `true`, edited data is saved. Otherwise the previous value is restored.\n   */\n  this.destroyEditor = function(revertOriginal) {\n    selection.refreshBorders(revertOriginal);\n  };\n\n  /**\n   * Populate cells at position with 2D input array (e.g. `[[1, 2], [3, 4]]`).\n   * Use `endRow`, `endCol` when you want to cut input when a certain row is reached.\n   * Optional `source` parameter (default value \"populateFromArray\") is used to identify this call in the resulting events (beforeChange, afterChange).\n   * Optional `populateMethod` parameter (default value \"overwrite\", possible values \"shift_down\" and \"shift_right\")\n   * has the same effect as pasteMode option {@link Options#pasteMode}\n   *\n   * @memberof Core#\n   * @function populateFromArray\n   * @since 0.9.0\n   * @param {Number} row Start row\n   * @param {Number} col Start column\n   * @param {Array} input 2d array\n   * @param {Number} [endRow] End row (use when you want to cut input when certain row is reached)\n   * @param {Number} [endCol] End column (use when you want to cut input when certain column is reached)\n   * @param {String} [source=\"populateFromArray\"] Source string.\n   * @param {String} [method=\"overwrite\"] Populate method. Possible options: `shift_down`, `shift_right`, `overwrite`.\n   * @param {String} direction Populate direction. (left|right|up|down)\n   * @param {Array} deltas Deltas array.\n   * @returns {Object|undefined} The ending TD element in pasted area (only if any cells were changed).\n   */\n  this.populateFromArray = function(row, col, input, endRow, endCol, source, method, direction, deltas) {\n    var c;\n\n    if (!(typeof input === 'object' && typeof input[0] === 'object')) {\n      throw new Error('populateFromArray parameter `input` must be an array of arrays'); // API changed in 0.9-beta2, let's check if you use it correctly\n    }\n    c = typeof endRow === 'number' ? new CellCoords(endRow, endCol) : null;\n\n    return grid.populateFromArray(new CellCoords(row, col), input, c, source, method, direction, deltas);\n  };\n\n  /**\n   * Adds/removes data from the column. This function is modelled after Array.splice.\n   * Parameter `col` is the index of the column in which do you want to do splice.\n   * Parameter `index` is the row index at which to start changing the array.\n   * If negative, will begin that many elements from the end. Parameter `amount`, is the number of the old array elements to remove.\n   * If the amount is 0, no elements are removed. Fourth and further parameters are the `elements` to add to the array.\n   * If you don't specify any elements, spliceCol simply removes elements from the array.\n   * {@link DataMap#spliceCol}\n   *\n   * @memberof Core#\n   * @function spliceCol\n   * @since 0.9-beta2\n   * @param {Number} col Index of the column in which do you want to do splice.\n   * @param {Number} index Index at which to start changing the array. If negative, will begin that many elements from the end.\n   * @param {Number} amount An integer indicating the number of old array elements to remove. If amount is 0, no elements are removed.\n   * @param {*} [elements] The elements to add to the array. If you don't specify any elements, spliceCol simply removes elements from the array.\n   */\n  this.spliceCol = function(col, index, amount/* , elements... */) {\n    return datamap.spliceCol(...arguments);\n  };\n\n  /**\n   * Adds/removes data from the row. This function works is modelled after Array.splice.\n   * Parameter `row` is the index of row in which do you want to do splice.\n   * Parameter `index` is the column index at which to start changing the array.\n   * If negative, will begin that many elements from the end. Parameter `amount`, is the number of old array elements to remove.\n   * If the amount is 0, no elements are removed. Fourth and further parameters are the `elements` to add to the array.\n   * If you don't specify any elements, spliceCol simply removes elements from the array.\n   * {@link DataMap#spliceRow}\n   *\n   * @memberof Core#\n   * @function spliceRow\n   * @since 0.11\n   * @param {Number} row Index of column in which do you want to do splice.\n   * @param {Number} index Index at which to start changing the array. If negative, will begin that many elements from the end.\n   * @param {Number} amount An integer indicating the number of old array elements to remove. If amount is 0, no elements are removed.\n   * @param {*} [elements] The elements to add to the array. If you don't specify any elements, spliceCol simply removes elements from the array.\n   */\n  this.spliceRow = function(row, index, amount/* , elements... */) {\n    return datamap.spliceRow(...arguments);\n  };\n\n  /**\n   * Returns indexes of the currently selected cells as an array `[startRow, startCol, endRow, endCol]`.\n   *\n   * Start row and start col are the coordinates of the active cell (where the selection was started).\n   *\n   * @memberof Core#\n   * @function getSelected\n   * @returns {Array} Array of the selection's indexes.\n   */\n  this.getSelected = function() { // https://github.com/handsontable/handsontable/issues/44  //cjl\n    if (selection.isSelected()) {\n      return [priv.selRange.from.row, priv.selRange.from.col, priv.selRange.to.row, priv.selRange.to.col];\n    }\n  };\n\n  /**\n   * Returns the current selection as a CellRange object.\n   *\n   * @memberof Core#\n   * @function getSelectedRange\n   * @since 0.11\n   * @returns {CellRange} Selected range object or undefined` if there is no selection.\n   */\n  this.getSelectedRange = function() { // https://github.com/handsontable/handsontable/issues/44  //cjl\n    if (selection.isSelected()) {\n      return priv.selRange;\n    }\n  };\n\n  /**\n   * Rerender the table.\n   *\n   * @memberof Core#\n   * @function render\n   */\n  this.render = function() {\n    if (instance.view) {\n      instance.renderCall = true;\n      instance.forceFullRender = true; // used when data was changed\n      selection.refreshBorders(null, true);\n    }\n  };\n\n  /**\n   * Reset all cells in the grid to contain data from the data array.\n   *\n   * @memberof Core#\n   * @function loadData\n   * @param {Array} data Array of arrays or array of objects containing data.\n   * @fires Hooks#afterLoadData\n   * @fires Hooks#afterChange\n   */\n  this.loadData = function(data) {\n    if (Array.isArray(priv.settings.dataSchema)) {\n      instance.dataType = 'array';\n    } else if (isFunction(priv.settings.dataSchema)) {\n      instance.dataType = 'function';\n    } else {\n      instance.dataType = 'object';\n    }\n\n    if (datamap) {\n      datamap.destroy();\n    }\n    datamap = new DataMap(instance, priv, GridSettings);\n\n    if (typeof data === 'object' && data !== null) {\n      if (!(data.push && data.splice)) { // check if data is array. Must use duck-type check so Backbone Collections also pass it\n        // when data is not an array, attempt to make a single-row array of it\n        data = [data];\n      }\n\n    } else if (data === null) {\n      data = [];\n      var row;\n      var r = 0;\n      var rlen = 0;\n      var dataSchema = datamap.getSchema();\n\n      for (r = 0, rlen = priv.settings.startRows; r < rlen; r++) {\n        if ((instance.dataType === 'object' || instance.dataType === 'function') && priv.settings.dataSchema) {\n          row = deepClone(dataSchema);\n          data.push(row);\n\n        } else if (instance.dataType === 'array') {\n          row = deepClone(dataSchema[0]);\n          data.push(row);\n\n        } else {\n          row = [];\n\n          for (var c = 0, clen = priv.settings.startCols; c < clen; c++) {\n            row.push(null);\n          }\n\n          data.push(row);\n        }\n      }\n\n    } else {\n      throw new Error(`loadData only accepts array of objects or array of arrays (${typeof data} given)`);\n    }\n\n    priv.isPopulated = false;\n    GridSettings.prototype.data = data;\n\n    if (Array.isArray(data[0])) {\n      instance.dataType = 'array';\n    }\n\n    datamap.dataSource = data;\n    dataSource.data = data;\n    dataSource.dataType = instance.dataType;\n    dataSource.colToProp = datamap.colToProp.bind(datamap);\n    dataSource.propToCol = datamap.propToCol.bind(datamap);\n\n    clearCellSettingCache();\n\n    grid.adjustRowsAndCols();\n    instance.runHooks('afterLoadData', priv.firstRun);\n\n    if (priv.firstRun) {\n      priv.firstRun = [null, 'loadData'];\n    } else {\n      instance.runHooks('afterChange', null, 'loadData');\n      instance.render();\n    }\n    priv.isPopulated = true;\n\n    function clearCellSettingCache() {\n      priv.cellSettings.length = 0;\n    }\n  };\n\n  /**\n   * Returns the current data object (the same one that was passed by `data` configuration option or `loadData` method,\n   * unless the `modifyRow` hook was used to trim some of the rows. If that's the case - use the {@link Core#getSourceData} method.).\n   * Optionally you can provide cell range by defining `row`, `col`, `row2`, `col2` to get only a fragment of grid data.\n   *\n   * Note: getData functionality changed with the release of version 0.20. If you're looking for the previous functionality,\n   * you should use the {@link Core#getSourceData} method.\n   *\n   * @memberof Core#\n   * @function getData\n   * @param {Number} [r] From row.\n   * @param {Number} [c] From column.\n   * @param {Number} [r2] To row.\n   * @param {Number} [c2] To column.\n   * @returns {Array} Array with the data.\n   */\n  this.getData = function(r, c, r2, c2) {\n    if (isUndefined(r)) {\n      return datamap.getAll();\n    }\n    return datamap.getRange(new CellCoords(r, c), new CellCoords(r2, c2), datamap.DESTINATION_RENDERER);\n\n  };\n\n  /**\n   * Returns a string value of the selected range. Each column is separated by tab, each row is separated by a new line character.\n   * {@link DataMap#getCopyableText}\n   *\n   * @memberof Core#\n   * @function getCopyableText\n   * @since 0.11\n   * @param {Number} startRow From row.\n   * @param {Number} startCol From column.\n   * @param {Number} endRow To row.\n   * @param {Number} endCol To column.\n   * @returns {String}\n   */\n  this.getCopyableText = function(startRow, startCol, endRow, endCol) {\n    return datamap.getCopyableText(new CellCoords(startRow, startCol), new CellCoords(endRow, endCol));\n  };\n\n  /**\n   * Returns the data's copyable value at specified row and column index ({@link DataMap#getCopyable}).\n   *\n   * @memberof Core#\n   * @function getCopyableData\n   * @since 0.19.0\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @returns {String}\n   */\n  this.getCopyableData = function(row, column) {\n    return datamap.getCopyable(row, datamap.colToProp(column));\n  };\n\n  /**\n   * Returns schema provided by constructor settings. If it doesn't exist then it returns the schema based on the data\n   * structure in the first row.\n   *\n   * @memberof Core#\n   * @function getSchema\n   * @since 0.13.2\n   * @returns {Object} Schema object.\n   */\n  this.getSchema = function() {\n    return datamap.getSchema();\n  };\n\n  /**\n   * Use it if you need to change configuration after initialization. The `settings` parameter is an object containing the new\n   * settings, declared the same way as in the initial settings object.\n   * Note, that although the `updateSettings` method doesn't overwrite the previously declared settings, it might reset\n   * the settings made post-initialization. (for example - ignore changes made using the columnResize feature).\n   *\n   * @memberof Core#\n   * @function updateSettings\n   * @param {Object} settings New settings object.\n   * @param {Boolean} init\n   * @example\n   * ```js\n   * hot.updateSettings({\n   *    contextMenu: true,\n   *    colHeaders: true,\n   *    fixedRowsTop: 2\n   * });\n   * ```\n   * @fires Hooks#afterCellMetaReset\n   * @fires Hooks#afterUpdateSettings\n   */\n  this.updateSettings = function(settings, init) {\n    let columnsAsFunc = false;\n    let i;\n    let j;\n    let clen;\n\n    if (isDefined(settings.rows)) {\n      throw new Error('\"rows\" setting is no longer supported. do you mean startRows, minRows or maxRows?');\n    }\n    if (isDefined(settings.cols)) {\n      throw new Error('\"cols\" setting is no longer supported. do you mean startCols, minCols or maxCols?');\n    }\n\n    for (i in settings) {\n      if (i === 'data') {\n        /* eslint-disable no-continue */\n        continue; // loadData will be triggered later\n\n      } else if (Hooks.getSingleton().getRegistered().indexOf(i) > -1) {\n        if (isFunction(settings[i]) || Array.isArray(settings[i])) {\n          settings[i].initialHook = true;\n          instance.addHook(i, settings[i]);\n        }\n\n      } else if (!init && hasOwnProperty(settings, i)) { // Update settings\n        GridSettings.prototype[i] = settings[i];\n      }\n    }\n\n    // Load data or create data map\n    if (settings.data === void 0 && priv.settings.data === void 0) {\n      instance.loadData(null); // data source created just now\n\n    } else if (settings.data !== void 0) {\n      instance.loadData(settings.data); // data source given as option\n\n    } else if (settings.columns !== void 0) {\n      datamap.createMap();\n    }\n\n    clen = instance.countCols();\n\n    const columnSetting = settings.columns || GridSettings.prototype.columns;\n\n    // Init columns constructors configuration\n    if (columnSetting && isFunction(columnSetting)) {\n      clen = instance.countSourceCols();\n      columnsAsFunc = true;\n    }\n\n    // Clear cellSettings cache\n    if (settings.cell !== void 0 || settings.cells !== void 0 || settings.columns !== void 0) {\n      priv.cellSettings.length = 0;\n    }\n\n    if (clen > 0) {\n      let proto;\n      let column;\n\n      for (i = 0, j = 0; i < clen; i++) {\n        if (columnsAsFunc && !columnSetting(i)) {\n          /* eslint-disable no-continue */\n          continue;\n        }\n        priv.columnSettings[j] = columnFactory(GridSettings, priv.columnsSettingConflicts);\n\n        // shortcut for prototype\n        proto = priv.columnSettings[j].prototype;\n\n        // Use settings provided by user\n        if (columnSetting) {\n          if (columnsAsFunc) {\n            column = columnSetting(i);\n\n          } else {\n            column = columnSetting[j];\n          }\n\n          if (column) {\n            extend(proto, column);\n            extend(proto, expandType(column));\n          }\n        }\n\n        j++;\n      }\n    }\n\n    if (isDefined(settings.cell)) {\n      for (let key in settings.cell) {\n        if (hasOwnProperty(settings.cell, key)) {\n          let cell = settings.cell[key];\n\n          instance.setCellMetaObject(cell.row, cell.col, cell);\n        }\n      }\n    }\n\n    instance.runHooks('afterCellMetaReset');\n\n    if (isDefined(settings.className)) {\n      if (GridSettings.prototype.className) {\n        removeClass(instance.rootElement, GridSettings.prototype.className);\n      }\n      if (settings.className) {\n        addClass(instance.rootElement, settings.className);\n      }\n    }\n\n    let currentHeight = instance.rootElement.style.height;\n    if (currentHeight !== '') {\n      currentHeight = parseInt(instance.rootElement.style.height, 10);\n    }\n\n    let height = settings.height;\n    if (isFunction(height)) {\n      height = height();\n    }\n\n    if (init) {\n      let initialStyle = instance.rootElement.getAttribute('style');\n\n      if (initialStyle) {\n        instance.rootElement.setAttribute('data-initialstyle', instance.rootElement.getAttribute('style'));\n      }\n    }\n\n    if (height === null) {\n      let initialStyle = instance.rootElement.getAttribute('data-initialstyle');\n\n      if (initialStyle && (initialStyle.indexOf('height') > -1 || initialStyle.indexOf('overflow') > -1)) {\n        instance.rootElement.setAttribute('style', initialStyle);\n\n      } else {\n        instance.rootElement.style.height = '';\n        instance.rootElement.style.overflow = '';\n      }\n\n    } else if (height !== void 0) {\n      instance.rootElement.style.height = `${height}px`;\n      instance.rootElement.style.overflow = 'hidden';\n    }\n\n    if (typeof settings.width != 'undefined') {\n      var width = settings.width;\n\n      if (isFunction(width)) {\n        width = width();\n      }\n\n      instance.rootElement.style.width = `${width}px`;\n    }\n\n    if (!init) {\n      datamap.clearLengthCache(); // force clear cache length on updateSettings() #3416\n\n      if (instance.view) {\n        instance.view.wt.wtViewport.resetHasOversizedColumnHeadersMarked();\n      }\n\n      instance.runHooks('afterUpdateSettings');\n    }\n\n    grid.adjustRowsAndCols();\n    if (instance.view && !priv.firstRun) {\n      instance.forceFullRender = true; // used when data was changed\n      selection.refreshBorders(null, true);\n    }\n\n    if (!init && instance.view && (currentHeight === '' || height === '' || height === void 0) && currentHeight !== height) {\n      instance.view.wt.wtOverlays.updateMainScrollableElements();\n    }\n  };\n\n  /**\n   * Get value from the selected cell.\n   *\n   * @memberof Core#\n   * @function getValue\n   * @since 0.11\n   * @returns {*} Value of selected cell.\n   */\n  this.getValue = function() {\n    var sel = instance.getSelected();\n    if (GridSettings.prototype.getValue) {\n      if (isFunction(GridSettings.prototype.getValue)) {\n        return GridSettings.prototype.getValue.call(instance);\n      } else if (sel) {\n        return instance.getData()[sel[0]][GridSettings.prototype.getValue];\n      }\n    } else if (sel) {\n      return instance.getDataAtCell(sel[0], sel[1]);\n    }\n  };\n\n  function expandType(obj) {\n    if (!hasOwnProperty(obj, 'type')) {\n      // ignore obj.prototype.type\n      return;\n    }\n\n    var type,\n      expandedType = {};\n\n    if (typeof obj.type === 'object') {\n      type = obj.type;\n    } else if (typeof obj.type === 'string') {\n      type = getCellType(obj.type);\n    }\n\n    for (var i in type) {\n      if (hasOwnProperty(type, i) && !hasOwnProperty(obj, i)) {\n        expandedType[i] = type[i];\n      }\n    }\n\n    return expandedType;\n\n  }\n\n  /**\n   * Returns the object settings.\n   *\n   * @memberof Core#\n   * @function getSettings\n   * @returns {Object} Object containing the current grid settings.\n   */\n  this.getSettings = function() {\n    return priv.settings;\n  };\n\n  /**\n   * Clears the data from the grid. (The table settings remain intact.)\n   *\n   * @memberof Core#\n   * @function clear\n   * @since 0.11\n   */\n  this.clear = function() {\n    selection.selectAll();\n    selection.empty();\n  };\n\n  /**\n   * @memberof Core#\n   * @function alter\n   * @param {String} action See grid.alter for possible values: `\"insert_row\"`, `\"insert_col\"`, `\"remove_row\"`, `\"remove_col\"`\n   * @param {Number} index Index of the row/column before which the new row/column will be inserted/removed.\n   * @param {Number} [amount = 1] Amound of rows/columns to be inserted/removed.\n   * @param {String} [source] Source indicator.\n   * @param {Boolean} [keepEmptyRows] Flag for preventing deletion of empty rows.\n   * @description\n   *\n   * Allows altering the table structure by either inserting/removing rows or inserting/removing columns:\n   *\n   * Insert new row(s) above the row with a given `index`. If index is `null` or `undefined`, the new row will be\n   * added after the last row.\n   * ```js\n   * var hot = new Handsontable(document.getElementById('example'));\n   * hot.alter('insert_row', 10);\n   * ```\n   *\n   * Insert new column(s) before the column with a given `index`. If index is `null` or `undefined`, the new column\n   * will be added after the last column.\n   * ```js\n   * var hot = new Handsontable(document.getElementById('example'));\n   * hot.alter('insert_col', 10);\n   * ```\n   *\n   * Remove the row(s) at the given `index`.\n   * ```js\n   * var hot = new Handsontable(document.getElementById('example'));\n   * hot.alter('remove_row', 10);\n   * ```\n   *\n   * Remove the column(s) at the given `index`.\n   * ```js\n   * var hot = new Handsontable(document.getElementById('example'));\n   * hot.alter('remove_col', 10);\n   * ```\n   */\n  this.alter = function(action, index, amount, source, keepEmptyRows) {\n    grid.alter(action, index, amount, source, keepEmptyRows);\n  };\n\n  /**\n   * Returns a TD element for the given `row` and `col` arguments, if it is rendered on screen.\n   * Returns `null` if the TD is not rendered on screen (probably because that part of the table is not visible).\n   *\n   * @memberof Core#\n   * @function getCell\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {Boolean} topmost If set to true, it returns the TD element from the topmost overlay. For example,\n   * if the wanted cell is in the range of fixed rows, it will return a TD element from the `top` overlay.\n   * @returns {Element} The cell's TD element.\n   */\n  this.getCell = function(row, col, topmost) {\n    return instance.view.getCellAtCoords(new CellCoords(row, col), topmost);\n  };\n\n  /**\n   * Returns the coordinates of the cell, provided as a HTML Element.\n   *\n   * @memberof Core#\n   * @function getCoords\n   * @param {Element} elem The HTML Element representing the cell.\n   * @returns {CellCoords} Coordinates object.\n   */\n  this.getCoords = function(elem) {\n    return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable, elem);\n  };\n\n  /**\n   * Returns the property name that corresponds with the given column index. {@link DataMap#colToProp}\n   * If the data source is an array of arrays, it returns the columns index.\n   *\n   * @memberof Core#\n   * @function colToProp\n   * @param {Number} col Column index\n   * @returns {String|Number} Column property or column index.\n   */\n  this.colToProp = function(col) {\n    return datamap.colToProp(col);\n  };\n\n  /**\n   * Returns column index that corresponds with the given property. {@link DataMap#propToCol}\n   *\n   * @memberof Core#\n   * @function propToCol\n   * @param {String|Number} prop Property name or column index.\n   * @returns {Number} Column index.\n   */\n  this.propToCol = function(prop) {\n    return datamap.propToCol(prop);\n  };\n\n  /**\n   * Translate physical row index into visual.\n   *\n   * @since 0.29.0\n   * @memberof Core#\n   * @function toVisualRow\n   * @param {Number} row Physical row index.\n   * @returns {Number} Returns visual row index.\n   */\n  this.toVisualRow = (row) => recordTranslator.toVisualRow(row);\n\n  /**\n   * Translate physical column index into visual.\n   *\n   * @since 0.29.0\n   * @memberof Core#\n   * @function toVisualColumn\n   * @param {Number} column Physical column index.\n   * @returns {Number} Returns visual column index.\n   */\n  this.toVisualColumn = (column) => recordTranslator.toVisualColumn(column);\n\n  /**\n   * Translate visual row index into physical.\n   * If displayed rows order is different than the order of rows stored in memory (i.e. sorting is applied)\n   * to retrieve valid physical row index you can use this method.\n   *\n   * @since 0.29.0\n   * @memberof Core#\n   * @function toPhysicalRow\n   * @param {Number} row Visual row index.\n   * @returns {Number} Returns physical row index.\n   */\n  this.toPhysicalRow = (row) => recordTranslator.toPhysicalRow(row);\n\n  /**\n   * Translate visual column index into physical.\n   * If displayed columns order is different than the order of columns stored in memory (i.e. manual column move is applied)\n   * to retrieve valid physical column index you can use this method.\n   *\n   * @since 0.29.0\n   * @memberof Core#\n   * @function toPhysicalColumn\n   * @param {Number} column Visual column index.\n   * @returns {Number} Returns physical column index.\n   */\n  this.toPhysicalColumn = (column) => recordTranslator.toPhysicalColumn(column);\n\n  /**\n   * @description\n   * Returns the cell value at `row`, `col`. `row` and `col` are the __visible__ indexes (note, that if columns were reordered or sorted,\n   * the currently visible order will be used).\n   *\n   * @memberof Core#\n   * @function getDataAtCell\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @returns {String|Boolean|null} Data at cell.\n   */\n  this.getDataAtCell = function(row, col) {\n    return datamap.get(row, datamap.colToProp(col));\n  };\n\n  /**\n   * Return value at `row`, `prop`. (Uses {@link DataMap#get})\n   *\n   * @memberof Core#\n   * @function getDataAtRowProp\n   * @param {Number} row Row index.\n   * @param {String} prop Property name.\n   * @returns {*} Cell value.\n   */\n  this.getDataAtRowProp = function(row, prop) {\n    return datamap.get(row, prop);\n  };\n\n  /**\n   * @description\n   * Returns array of column values from the data source. `col` is the __visible__ index of the column.\n   * Note, that if columns were reordered or sorted, the currently visible order will be used.\n   *\n   * @memberof Core#\n   * @function getDataAtCol\n   * @since 0.9-beta2\n   * @param {Number} col Column index.\n   * @returns {Array} Array of cell values.\n   */\n  this.getDataAtCol = function(col) {\n    var out = [];\n    return out.concat(...datamap.getRange(\n        new CellCoords(0, col), new CellCoords(priv.settings.data.length - 1, col), datamap.DESTINATION_RENDERER));\n  };\n\n  this.getFilterDataAtCol = function(col) {\n    var out = [], len = this.countRows();\n    return out.concat(...datamap.getRange(\n      new CellCoords(0, col), new CellCoords(len - 1, col), datamap.DESTINATION_RENDERER));\n  };\n\n  this.getSummaryDataAtCol = function(col) {\n    var out = [];\n    return out.concat(...datamap.getRange(\n        new CellCoords(0, col), new CellCoords(priv.settings.data.length - 2, col), datamap.DESTINATION_RENDERER));\n  };\n\n  /**\n   * Given the object property name (e.g. `'first.name'`), returns an array of column's values from the data source.\n   * You can also provide a column index as the first argument.\n   *\n   * @memberof Core#\n   * @function getDataAtProp\n   * @since 0.9-beta2\n   * @param {String|Number} prop Property name / column index.\n   * @returns {Array} Array of cell values.\n   */\n  this.getDataAtProp = function(prop) {\n    var out = [],\n      range;\n\n    range = datamap.getRange(\n        new CellCoords(0, datamap.propToCol(prop)),\n        new CellCoords(priv.settings.data.length - 1, datamap.propToCol(prop)),\n        datamap.DESTINATION_RENDERER);\n\n    return out.concat(...range);\n  };\n\n  /**\n   * Returns the source data object (the same that was passed by `data` configuration option or `loadData` method).\n   * Optionally you can provide a cell range by using the `row`, `col`, `row2`, `col2` arguments, to get only a fragment of grid data.\n   *\n   * @memberof Core#\n   * @function getSourceData\n   * @since 0.20.0\n   * @param {Number} [r] From row.\n   * @param {Number} [c] From column.\n   * @param {Number} [r2] To row.\n   * @param {Number} [c2] To column.\n   * @returns {Array} Array of grid data.\n   */\n  this.getSourceData = function(r, c, r2, c2) {\n    let data;\n\n    if (r === void 0) {\n      data = dataSource.getData();\n    } else {\n      data = dataSource.getByRange(new CellCoords(r, c), new CellCoords(r2, c2));\n    }\n\n    return data;\n  };\n\n  /**\n   * Returns the source data object as an arrays of arrays format even when source data was provided in another format.\n   * Optionally you can provide a cell range by using the `row`, `col`, `row2`, `col2` arguments, to get only a fragment of grid data.\n   *\n   * @memberof Core#\n   * @function getSourceDataArray\n   * @since 0.28.0\n   * @param {Number} [r] From row.\n   * @param {Number} [c] From column.\n   * @param {Number} [r2] To row.\n   * @param {Number} [c2] To column.\n   * @returns {Array} An array of arrays.\n   */\n  this.getSourceDataArray = function(r, c, r2, c2) {\n    let data;\n\n    if (r === void 0) {\n      data = dataSource.getData(true);\n    } else {\n      data = dataSource.getByRange(new CellCoords(r, c), new CellCoords(r2, c2), true);\n    }\n\n    return data;\n  };\n\n  /**\n   * Returns an array of column values from the data source. `col` is the index of the row in the data source.\n   *\n   * @memberof Core#\n   * @function getSourceDataAtCol\n   * @since 0.11.0-beta3\n   * @param {Number} column Column index.\n   * @returns {Array} Array of the column's cell values.\n   */\n  this.getSourceDataAtCol = function(column) {\n    return dataSource.getAtColumn(column);\n  };\n\n  /**\n   * Returns a single row of the data (array or object, depending on what you have). `row` is the index of the row in the data source.\n   *\n   * @memberof Core#\n   * @function getSourceDataAtRow\n   * @since 0.11.0-beta3\n   * @param {Number} row Row index.\n   * @returns {Array|Object} Single row of data.\n   */\n  this.getSourceDataAtRow = function(row) {\n    return dataSource.getAtRow(row);\n  };\n\n  /**\n   * Returns a single value from the data source.\n   *\n   * @memberof Core#\n   * @function getSourceDataAtCell\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @returns {*} Cell data.\n   * @since 0.20.0\n   */\n  this.getSourceDataAtCell = function(row, column) {\n    return dataSource.getAtCell(row, column);\n  };\n\n  /**\n   * @description\n   * Returns a single row of the data. The `row` argument is the __visible__ index of the row.\n   *\n   * @memberof Core#\n   * @function getDataAtRow\n   * @param {Number} row Row index.\n   * @returns {Array} Array of row's cell data.\n   * @since 0.9-beta2\n   */\n  this.getDataAtRow = function(row) {\n    var data = datamap.getRange(new CellCoords(row, 0), new CellCoords(row, this.countCols() - 1), datamap.DESTINATION_RENDERER);\n\n    return data[0] || [];\n  };\n\n  /**\n   * @description\n   * Returns a data type defined in the Handsontable settings under the `type` key ([Options#type](http://docs.handsontable.com/Options.html#type)).\n   * If there are cells with different types in the selected range, it returns `'mixed'`.\n   *\n   * @since 0.18.1\n   * @memberof Core#\n   * @function getDataType\n   * @param {Number} rowFrom From row index.\n   * @param {Number} columnFrom To row index.\n   * @param {Number} rowTo From column index.\n   * @param {Number} columnTo To column index.\n   * @returns {String} Cell type (e.q: `'mixed'`, `'text'`, `'numeric'`, `'autocomplete'`).\n   */\n  this.getDataType = function(rowFrom, columnFrom, rowTo, columnTo) {\n    let previousType = null;\n    let currentType = null;\n\n    if (rowFrom === void 0) {\n      rowFrom = 0;\n      rowTo = this.countRows();\n      columnFrom = 0;\n      columnTo = this.countCols();\n    }\n    if (rowTo === void 0) {\n      rowTo = rowFrom;\n    }\n    if (columnTo === void 0) {\n      columnTo = columnFrom;\n    }\n    let type = 'mixed';\n\n    rangeEach(Math.min(rowFrom, rowTo), Math.max(rowFrom, rowTo), (row) => {\n      let isTypeEqual = true;\n\n      rangeEach(Math.min(columnFrom, columnTo), Math.max(columnFrom, columnTo), (column) => {\n        let cellType = this.getCellMeta(row, column);\n\n        currentType = cellType.type;\n\n        if (previousType) {\n          isTypeEqual = previousType === currentType;\n        } else {\n          previousType = currentType;\n        }\n\n        return isTypeEqual;\n      });\n      type = isTypeEqual ? currentType : 'mixed';\n\n      return isTypeEqual;\n    });\n\n    return type;\n  };\n\n  /**\n   * Remove a property defined by the `key` argument from the cell meta object for the provided `row` and `col` coordinates.\n   *\n   * @memberof Core#\n   * @function removeCellMeta\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {String} key Property name.\n   */\n  this.removeCellMeta = function(row, col, key) {\n    var cellMeta = instance.getCellMeta(row, col);\n    if (cellMeta[key] != undefined) {\n      delete priv.cellSettings[row][col][key];\n    }\n  };\n\n  /**\n   * Remove one or more rows from the cell meta object.\n   *\n   * @since 0.30.0\n   * @param {Number} index An integer that specifies at what position to add/remove items, Use negative values to specify the position from the end of the array.\n   * @param {Number} deleteAmount The number of items to be removed. If set to 0, no items will be removed.\n   * @param {Array} items The new items to be added to the array.\n   */\n  this.spliceCellsMeta = function(index, deleteAmount, ...items) {\n    priv.cellSettings.splice(index, deleteAmount, ...items);\n  };\n\n  /**\n   * Set cell meta data object defined by `prop` to the corresponding params `row` and `col`.\n   *\n   * @memberof Core#\n   * @function setCellMetaObject\n   * @since 0.11\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {Object} prop Meta object.\n   */\n  this.setCellMetaObject = function(row, col, prop) {\n    if (typeof prop === 'object') {\n      for (var key in prop) {\n        if (hasOwnProperty(prop, key)) {\n          var value = prop[key];\n          this.setCellMeta(row, col, key, value);\n        }\n      }\n    }\n  };\n\n  /**\n   * Sets a property defined by the `key` object to the meta object of a cell corresponding to params `row` and `col`.\n   *\n   * @memberof Core#\n   * @function setCellMeta\n   * @since 0.11\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {String} key Property name.\n   * @param {String} val Property value.\n   * @fires Hooks#afterSetCellMeta\n   */\n  this.setCellMeta = function(row, col, key, val) {\n    [row, col] = recordTranslator.toPhysical(row, col);\n\n    if (!priv.columnSettings[col]) {\n      priv.columnSettings[col] = columnFactory(GridSettings, priv.columnsSettingConflicts);\n    }\n\n    if (!priv.cellSettings[row]) {\n      priv.cellSettings[row] = [];\n    }\n    if (!priv.cellSettings[row][col]) {\n      priv.cellSettings[row][col] = new priv.columnSettings[col]();\n    }\n    priv.cellSettings[row][col][key] = val;\n    instance.runHooks('afterSetCellMeta', row, col, key, val);\n  };\n\n  /**\n   * Get all the cells meta settings at least once generated in the table (in order of cell initialization).\n   *\n   * @since 0.19.0\n   * @returns {Array} Returns Array of ColumnSettings object.\n   */\n  this.getCellsMeta = function() {\n    return arrayFlatten(priv.cellSettings);\n  };\n\n  /**\n   * Returns the cell properties object for the given `row` and `col` coordinates.\n   *\n   * @memberof Core#\n   * @function getCellMeta\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @returns {Object} The cell properties object.\n   * @fires Hooks#beforeGetCellMeta\n   * @fires Hooks#afterGetCellMeta\n   */\n  this.getCellMeta = function(row, col) {\n    var prop = datamap.colToProp(col),\n      cellProperties;\n\n    let visualRow = row;\n    let visualCol = col;\n\n    [row, col] = recordTranslator.toPhysical(row, col);\n\n    if (!priv.columnSettings[col]) {\n      priv.columnSettings[col] = columnFactory(GridSettings, priv.columnsSettingConflicts);\n    }\n\n    if (!priv.cellSettings[row]) {\n      priv.cellSettings[row] = [];\n    }\n    if (!priv.cellSettings[row][col]) {\n      priv.cellSettings[row][col] = new priv.columnSettings[col]();\n    }\n\n    cellProperties = priv.cellSettings[row][col]; // retrieve cellProperties from cache\n\n    cellProperties.row = row;\n    cellProperties.col = col;\n    cellProperties.visualRow = visualRow;\n    cellProperties.visualCol = visualCol;\n    cellProperties.prop = prop;\n    cellProperties.instance = instance;\n\n    instance.runHooks('beforeGetCellMeta', row, col, cellProperties);\n    extend(cellProperties, expandType(cellProperties)); // for `type` added in beforeGetCellMeta\n\n    if (cellProperties.cells) {\n      var settings = cellProperties.cells.call(cellProperties, row, col, prop);\n\n      if (settings) {\n        extend(cellProperties, settings);\n        extend(cellProperties, expandType(settings)); // for `type` added in cells\n      }\n    }\n\n    instance.runHooks('afterGetCellMeta', row, col, cellProperties);\n\n    return cellProperties;\n  };\n\n  /**\n   * Returns a row off the cell meta array.\n   *\n   * @memberof Core#\n   * @function getCellMetaAtRow\n   * @since 0.30.0\n   * @param {Number} row Index of the row to return cell meta for.\n   * @returns {Array}\n   */\n  this.getCellMetaAtRow = function(row) {\n    return priv.cellSettings[row];\n  };\n\n  /**\n   * Checks if the data format and config allows user to modify the column structure.\n   * @returns {boolean}\n   */\n  this.isColumnModificationAllowed = function() {\n    return !(instance.dataType === 'object' || instance.getSettings().columns);\n  };\n\n  const rendererLookup = cellMethodLookupFactory('renderer');\n\n  /**\n   * Returns the cell renderer function by given `row` and `col` arguments.\n   *\n   * @memberof Core#\n   * @function getCellRenderer\n   * @since 0.11\n   * @param {Number|Object} row Row index or cell meta object.\n   * @param {Number} [col] Column index.\n   * @returns {Function} The renderer function.\n   */\n  this.getCellRenderer = function(row, col) {\n    return getRenderer(rendererLookup.call(this, row, col));\n  };\n\n  /**\n   * Returns the cell editor by the provided `row` and `col` arguments.\n   *\n   * @memberof Core#\n   * @function getCellEditor\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @returns {Object} The Editor object.\n   */\n  this.getCellEditor = cellMethodLookupFactory('editor');\n\n  const validatorLookup = cellMethodLookupFactory('validator');\n\n  /**\n   * Returns the cell validator by `row` and `col`, provided a validator is defined. If not - it doesn't return anything.\n   *\n   * @memberof Core#\n   * @function getCellValidator\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @returns {Function|RegExp|undefined} The validator function.\n   */\n  this.getCellValidator = function(row, col) {\n    let validator = validatorLookup.call(this, row, col);\n\n    if (typeof validator === 'string') {\n      validator = getValidator(validator);\n    }\n\n    return validator;\n  };\n\n  /**\n   * Validates all cells using their validator functions and calls callback when finished.\n   *\n   * If one of the cells is invalid, the callback will be fired with `'valid'` arguments as `false` - otherwise it would equal `true`.\n   *\n   * @memberof Core#\n   * @function validateCells\n   * @param {Function} [callback] The callback function.\n   */\n  this.validateCells = function(callback) {\n    var waitingForValidator = new ValidatorsQueue();\n\n    if (callback) {\n      waitingForValidator.onQueueEmpty = callback;\n    }\n\n    let i = instance.countRows() - 1;\n\n    while (i >= 0) {\n      let j = instance.countCols() - 1;\n\n      while (j >= 0) {\n        waitingForValidator.addValidatorToQueue();\n\n        instance.validateCell(instance.getDataAtCell(i, j), instance.getCellMeta(i, j), (result) => {\n          if (typeof result !== 'boolean') {\n            throw new Error('Validation error: result is not boolean');\n          }\n          if (result === false) {\n            waitingForValidator.valid = false;\n          }\n          waitingForValidator.removeValidatorFormQueue();\n        }, 'validateCells');\n        j--;\n      }\n      i--;\n    }\n    waitingForValidator.checkIfQueueIsEmpty();\n  };\n\n  /**\n   * Returns an array of row headers' values (if they are enabled). If param `row` was given, it returns the header of the given row as a string.\n   *\n   * @memberof Core#\n   * @function getRowHeader\n   * @param {Number} [row] Row index.\n   * @fires Hooks#modifyRowHeader\n   * @returns {Array|String} Array of header values / single header value.\n   */\n  this.getRowHeader = function(row) {\n    let rowHeader = priv.settings.rowHeaders;\n\n    if (row !== void 0) {\n      row = instance.runHooks('modifyRowHeader', row);\n    }\n    if (row === void 0) {\n      rowHeader = [];\n      rangeEach(instance.countRows() - 1, (i) => {\n        rowHeader.push(instance.getRowHeader(i));\n      });\n\n    } else if (Array.isArray(rowHeader) && rowHeader[row] !== void 0) {\n      rowHeader = rowHeader[row];\n\n    } else if (isFunction(rowHeader)) {\n      rowHeader = rowHeader(row);\n\n    } else if (rowHeader && typeof rowHeader !== 'string' && typeof rowHeader !== 'number') {\n      rowHeader = row + 1;\n    }\n\n    return rowHeader;\n  };\n\n  /**\n   * Returns information about if this table is configured to display row headers.\n   *\n   * @memberof Core#\n   * @function hasRowHeaders\n   * @returns {Boolean} `true` if the instance has the row headers enabled, `false` otherwise.\n   * @since 0.11\n   */\n  this.hasRowHeaders = function() {\n    return !!priv.settings.rowHeaders;\n  };\n\n  /**\n   * Returns information about if this table is configured to display column headers.\n   *\n   * @memberof Core#\n   * @function hasColHeaders\n   * @since 0.11\n   * @returns {Boolean} `True` if the instance has the column headers enabled, `false` otherwise.\n   */\n  this.hasColHeaders = function() {\n    if (priv.settings.colHeaders !== void 0 && priv.settings.colHeaders !== null) { // Polymer has empty value = null\n      return !!priv.settings.colHeaders;\n    }\n    for (var i = 0, ilen = instance.countCols(); i < ilen; i++) {\n      if (instance.getColHeader(i)) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  /**\n   * Returns an array of column headers (in string format, if they are enabled). If param `col` is given, it returns the header at the given column as a string.\n   *\n   * @memberof Core#\n   * @function getColHeader\n   * @param {Number} [col] Column index.\n   * @fires Hooks#modifyColHeader\n   * @returns {Array|String} The column header(s).\n   */\n  this.getColHeader = function(col) {\n    let columnsAsFunc = priv.settings.columns && isFunction(priv.settings.columns);\n    let result = priv.settings.colHeaders;\n\n    col = instance.runHooks('modifyColHeader', col);\n\n    if (col === void 0) {\n      let out = [];\n      let ilen = columnsAsFunc ? instance.countSourceCols() : instance.countCols();\n\n      for (let i = 0; i < ilen; i++) {\n        out.push(instance.getColHeader(i));\n      }\n\n      result = out;\n\n    } else {\n      let translateVisualIndexToColumns = function(col) {\n        let arr = [];\n        let columnsLen = instance.countSourceCols();\n        let index = 0;\n\n        for (; index < columnsLen; index++) {\n          if (isFunction(instance.getSettings().columns) && instance.getSettings().columns(index)) {\n            arr.push(index);\n          }\n        }\n\n        return arr[col];\n      };\n      let baseCol = col;\n      col = instance.runHooks('modifyCol', col);\n\n      let prop = translateVisualIndexToColumns(col);\n\n      if (priv.settings.columns && isFunction(priv.settings.columns) && priv.settings.columns(prop) && priv.settings.columns(prop).title) {\n        result = priv.settings.columns(prop).title;\n\n      } else if (priv.settings.columns && priv.settings.columns[col] && priv.settings.columns[col].title) {\n        result = priv.settings.columns[col].title;\n\n      } else if (Array.isArray(priv.settings.colHeaders) && priv.settings.colHeaders[col] !== void 0) {\n        result = priv.settings.colHeaders[col];\n\n      } else if (isFunction(priv.settings.colHeaders)) {\n        result = priv.settings.colHeaders(col);\n\n      } else if (priv.settings.colHeaders && typeof priv.settings.colHeaders !== 'string' && typeof priv.settings.colHeaders !== 'number') {\n        result = spreadsheetColumnLabel(baseCol); // see #1458\n\n      }\n    }\n\n    return result;\n  };\n\n  /**\n   * Return column width from settings (no guessing). Private use intended.\n   *\n   * @private\n   * @memberof Core#\n   * @function _getColWidthFromSettings\n   * @param {Number} col\n   * @returns {Number}\n   */\n  this._getColWidthFromSettings = function(col) {\n    var cellProperties = instance.getCellMeta(0, col);\n    var width = cellProperties.width;\n\n    if (width === void 0 || width === priv.settings.width) {\n      width = cellProperties.colWidths;\n    }\n    if (width !== void 0 && width !== null) {\n      switch (typeof width) {\n        case 'object': // array\n          width = width[col];\n          break;\n\n        case 'function':\n          width = width(col);\n          break;\n        default:\n          break;\n      }\n      if (typeof width === 'string') {\n        width = parseInt(width, 10);\n      }\n    }\n\n    return width;\n  };\n\n  /**\n   * Returns the width of the requested column.\n   *\n   * @memberof Core#\n   * @function getColWidth\n   * @since 0.11\n   * @param {Number} col Column index.\n   * @returns {Number} Column width.\n   * @fires Hooks#modifyColWidth\n   */\n  this.getColWidth = function(col) {\n    let width = instance._getColWidthFromSettings(col);\n\n    width = instance.runHooks('modifyColWidth', width, col);\n\n    if (width === void 0) {\n      width = ViewportColumnsCalculator.DEFAULT_WIDTH;\n    }\n\n    return width;\n  };\n\n  /**\n   * Return row height from settings (no guessing). Private use intended.\n   *\n   * @private\n   * @memberof Core#\n   * @function _getRowHeightFromSettings\n   * @param {Number} row\n   * @returns {Number}\n   */\n  this._getRowHeightFromSettings = function(row) {\n    // let cellProperties = instance.getCellMeta(row, 0);\n    // let height = cellProperties.height;\n    //\n    // if (height === void 0 || height === priv.settings.height) {\n    //  height = cellProperties.rowHeights;\n    // }\n    var height = priv.settings.rowHeights;\n\n    if (height !== void 0 && height !== null) {\n      switch (typeof height) {\n        case 'object': // array\n          height = height[row];\n          break;\n\n        case 'function':\n          height = height(row);\n          break;\n        default:\n          break;\n      }\n      if (typeof height === 'string') {\n        height = parseInt(height, 10);\n      }\n    }\n\n    return height;\n  };\n\n  /**\n   * Returns the row height.\n   *\n   * @memberof Core#\n   * @function getRowHeight\n   * @since 0.11\n   * @param {Number} row Row index.\n   * @returns {Number} The given row's height.\n   * @fires Hooks#modifyRowHeight\n   */\n  this.getRowHeight = function(row) {\n    var height = instance._getRowHeightFromSettings(row);\n\n    height = instance.runHooks('modifyRowHeight', height, row);\n\n    return height;\n  };\n\n  /**\n   * Returns the total number of rows in the data source.\n   *\n   * @memberof Core#\n   * @function countSourceRows\n   * @since 0.20.0\n   * @returns {Number} Total number in rows in data source.\n   */\n  this.countSourceRows = function() {\n    let sourceLength = instance.runHooks('modifySourceLength');\n    return sourceLength || (instance.getSourceData() ? instance.getSourceData().length : 0);\n  };\n\n  /**\n   * Returns the total number of columns in the data source.\n   *\n   * @memberof Core#\n   * @function countSourceCols\n   * @since 0.26.1\n   * @returns {Number} Total number in columns in data source.\n   */\n  this.countSourceCols = function() {\n    let len = 0;\n    let obj = instance.getSourceData() && instance.getSourceData()[0] ? instance.getSourceData()[0] : [];\n\n    if (isObject(obj)) {\n      len = deepObjectSize(obj);\n\n    } else {\n      len = obj.length || 0;\n    }\n\n    return len;\n  };\n\n  /**\n   * Returns the total number of rows in the grid.\n   *\n   * @memberof Core#\n   * @function countRows\n   * @returns {Number} Total number in rows the grid.\n   */\n  this.countRows = function() {\n    return datamap.getLength();\n  };\n\n  /**\n   * Returns the total number of columns in the grid.\n   *\n   * @memberof Core#\n   * @function countCols\n   * @returns {Number} Total number of columns.\n   */\n  this.countCols = function() {\n    const maxCols = this.getSettings().maxCols;\n    let dataHasLength = false;\n    let dataLen = 0;\n\n    if (instance.dataType === 'array') {\n      dataHasLength = priv.settings.data && priv.settings.data[0] && priv.settings.data[0].length;\n    }\n\n    if (dataHasLength) {\n      dataLen = priv.settings.data[0].length;\n    }\n\n    if (priv.settings.columns) {\n      let columnsIsFunction = isFunction(priv.settings.columns);\n\n      if (columnsIsFunction) {\n        if (instance.dataType === 'array') {\n          let columnLen = 0;\n\n          for (let i = 0; i < dataLen; i++) {\n            if (priv.settings.columns(i)) {\n              columnLen++;\n            }\n          }\n\n          dataLen = columnLen;\n        } else if (instance.dataType === 'object' || instance.dataType === 'function') {\n          dataLen = datamap.colToPropCache.length;\n        }\n\n      } else {\n        dataLen = priv.settings.columns.length;\n      }\n\n    } else if (instance.dataType === 'object' || instance.dataType === 'function') {\n      dataLen = datamap.colToPropCache.length;\n    }\n\n    return Math.min(maxCols, dataLen);\n  };\n\n  /**\n   * Returns an index of the first rendered row.\n   *\n   * @memberof Core#\n   * @function rowOffset\n   * @returns {Number} Index of first rendered row.\n   */\n  this.rowOffset = function() {\n    return instance.view.wt.wtTable.getFirstRenderedRow();\n  };\n\n  /**\n   * Returns the index of the first rendered column.\n   *\n   * @memberof Core#\n   * @function colOffset\n   * @returns {Number} Index of the first visible column.\n   */\n  this.colOffset = function() {\n    return instance.view.wt.wtTable.getFirstRenderedColumn();\n  };\n\n  /**\n   * Returns the number of rendered rows (including rows partially or fully rendered outside viewport).\n   *\n   * @memberof Core#\n   * @function countRenderedRows\n   * @returns {Number} Returns -1 if table is not visible.\n   */\n  this.countRenderedRows = function() {\n    return instance.view.wt.drawn ? instance.view.wt.wtTable.getRenderedRowsCount() : -1;\n  };\n\n  /**\n   * Returns the number of visible rows (rendered rows that fully fit inside viewport).\n   *\n   * @memberof Core#\n   * @function countVisibleRows\n   * @returns {Number} Number of visible rows or -1.\n   */\n  this.countVisibleRows = function() {\n    return instance.view.wt.drawn ? instance.view.wt.wtTable.getVisibleRowsCount() : -1;\n  };\n\n  /**\n   * Returns the number of rendered columns (including columns partially or fully rendered outside viewport).\n   *\n   * @memberof Core#\n   * @function countRenderedCols\n   * @returns {Number} Returns -1 if table is not visible.\n   */\n  this.countRenderedCols = function() {\n    return instance.view.wt.drawn ? instance.view.wt.wtTable.getRenderedColumnsCount() : -1;\n  };\n\n  /**\n   * Returns the number of visible columns. Returns -1 if table is not visible\n   *\n   * @memberof Core#\n   * @function countVisibleCols\n   * @return {Number} Number of visible columns or -1.\n   */\n  this.countVisibleCols = function() {\n    return instance.view.wt.drawn ? instance.view.wt.wtTable.getVisibleColumnsCount() : -1;\n  };\n\n  /**\n   * Returns the number of empty rows. If the optional ending parameter is `true`, returns the\n   * number of empty rows at the bottom of the table.\n   *\n   * @memberof Core#\n   * @function countEmptyRows\n   * @param {Boolean} [ending] If `true`, will only count empty rows at the end of the data source.\n   * @returns {Number} Count empty rows\n   * @fires Hooks#modifyRow\n   */\n  this.countEmptyRows = function(ending) {\n    var i = instance.countRows() - 1,\n      empty = 0,\n      row;\n\n    while (i >= 0) {\n      row = instance.runHooks('modifyRow', i);\n\n      if (instance.isEmptyRow(row)) {\n        empty++;\n\n      } else if (ending) {\n        break;\n      }\n      i--;\n    }\n\n    return empty;\n  };\n\n  /**\n   * Returns the number of empty columns. If the optional ending parameter is `true`, returns the number of empty\n   * columns at right hand edge of the table.\n   *\n   * @memberof Core#\n   * @function countEmptyCols\n   * @param {Boolean} [ending] If `true`, will only count empty columns at the end of the data source row.\n   * @returns {Number} Count empty cols\n   */\n  this.countEmptyCols = function(ending) {\n    if (instance.countRows() < 1) {\n      return 0;\n    }\n    var i = instance.countCols() - 1,\n      empty = 0;\n\n    while (i >= 0) {\n      if (instance.isEmptyCol(i)) {\n        empty++;\n      } else if (ending) {\n        break;\n      }\n      i--;\n    }\n\n    return empty;\n  };\n\n  /**\n   * Check if all cells in the row declared by the `row` argument are empty.\n   *\n   * @memberof Core#\n   * @function isEmptyRow\n   * @param {Number} row Row index.\n   * @returns {Boolean} `true` if the row at the given `row` is empty, `false` otherwise.\n   */\n  this.isEmptyRow = function(row) {\n    return priv.settings.isEmptyRow.call(instance, row);\n  };\n\n  /**\n   * Check if all cells in the the column declared by the `col` argument are empty.\n   *\n   * @memberof Core#\n   * @function isEmptyCol\n   * @param {Number} col Column index.\n   * @returns {Boolean} `true` if the column at the given `col` is empty, `false` otherwise.\n   */\n  this.isEmptyCol = function(col) {\n    return priv.settings.isEmptyCol.call(instance, col);\n  };\n\n  /**\n   * Select cell specified by `row` and `col` values or a range of cells finishing at `endRow`, `endCol`.\n   * By default, viewport will be scrolled to selection.\n   * After the `selectCell` method had finished, the instance will be listening to keyboard input on the document.\n   *\n   * @memberof Core#\n   * @function selectCell\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {Number} [endRow] End row index (if selecting a range).\n   * @param {Number} [endCol] End column index (if selecting a range).\n   * @param {Boolean} [scrollToCell=true] If `true`, the viewport will be scrolled to the selection.\n   * @param {Boolean} [changeListener=true] If `false`, Handsontable will not change keyboard events listener to himself.\n   * @returns {Boolean} `true` if selection was successful, `false` otherwise.\n   */\n  this.selectCell = function(row, col, endRow, endCol, scrollToCell, changeListener) {\n    var coords;\n\n    changeListener = isUndefined(changeListener) || changeListener === true;\n\n    if (typeof row !== 'number' || row < 0 || row >= instance.countRows()) {\n      return false;\n    }\n    if (typeof col !== 'number' || col < 0 || col >= instance.countCols()) {\n      return false;\n    }\n    if (isDefined(endRow)) {\n      if (typeof endRow !== 'number' || endRow < 0 || endRow >= instance.countRows()) {\n        return false;\n      }\n      if (typeof endCol !== 'number' || endCol < 0 || endCol >= instance.countCols()) {\n        return false;\n      }\n    }\n    coords = new CellCoords(row, col);\n    priv.selRange = new CellRange(coords, coords, coords);\n\n    if (changeListener) {\n      instance.listen();\n    }\n\n    if (isUndefined(endRow)) {\n      selection.setRangeEnd(priv.selRange.from, scrollToCell);\n\n    } else {\n      selection.setRangeEnd(new CellCoords(endRow, endCol), scrollToCell);\n    }\n    instance.selection.finish();\n\n    return true;\n  };\n\n  /**\n   * Select the cell specified by the `row` and `prop` arguments, or a range finishing at `endRow`, `endProp`.\n   * By default, viewport will be scrolled to selection.\n   *\n   * @memberof Core#\n   * @function selectCellByProp\n   * @param {Number} row Row index.\n   * @param {String} prop Property name.\n   * @param {Number} [endRow] End row index (if selecting a range).\n   * @param {String} [endProp] End property name (if selecting a range).\n   * @param {Boolean} [scrollToCell=true] If `true`, viewport will be scrolled to the selection.\n   * @returns {Boolean} `true` if selection was successful, `false` otherwise.\n   */\n  this.selectCellByProp = function(row, prop, endRow, endProp, scrollToCell) {\n    arguments[1] = datamap.propToCol(arguments[1]);\n\n    if (isDefined(arguments[3])) {\n      arguments[3] = datamap.propToCol(arguments[3]);\n    }\n\n    return instance.selectCell(...arguments);\n  };\n\n  /**\n   * Deselects the current cell selection on grid.\n   *\n   * @memberof Core#\n   * @function deselectCell\n   */\n  this.deselectCell = function() {\n    selection.deselect();\n  };\n\n  /**\n   * Scroll viewport to coords specified by the `row` and `column` arguments.\n   *\n   * @since 0.24.3\n   * @memberof Core#\n   * @function scrollViewportTo\n   * @param {Number} [row] Row index.\n   * @param {Number} [column] Column index.\n   * @param {Boolean} [snapToBottom = false] If `true`, viewport is scrolled to show the cell on the bottom of the table.\n   * @param {Boolean} [snapToRight = false] If `true`, viewport is scrolled to show the cell on the right side of the table.\n   * @returns {Boolean} `true` if scroll was successful, `false` otherwise.\n   */\n  this.scrollViewportTo = function(row, column, snapToBottom = false, snapToRight = false) {\n    if (row !== void 0 && (row < 0 || row >= instance.countRows())) {\n      return false;\n    }\n    if (column !== void 0 && (column < 0 || column >= instance.countCols())) {\n      return false;\n    }\n\n    let result = false;\n\n    if (row !== void 0 && column !== void 0) {\n      instance.view.wt.wtOverlays.topOverlay.scrollTo(row, snapToBottom);\n      instance.view.wt.wtOverlays.leftOverlay.scrollTo(column, snapToRight);\n\n      result = true;\n    }\n    if (typeof row === 'number' && typeof column !== 'number') {\n      instance.view.wt.wtOverlays.topOverlay.scrollTo(row, snapToBottom);\n\n      result = true;\n    }\n    if (typeof column === 'number' && typeof row !== 'number') {\n      instance.view.wt.wtOverlays.leftOverlay.scrollTo(column, snapToRight);\n\n      result = true;\n    }\n\n    return result;\n  };\n\n  /**\n   * Removes grid from the DOM.\n   *\n   * @memberof Core#\n   * @function destroy\n   * @fires Hooks#afterDestroy\n   */\n  this.destroy = function() {\n\n    instance._clearTimeouts();\n    if (instance.view) { // in case HT is destroyed before initialization has finished\n      instance.view.destroy();\n    }\n    if (dataSource) {\n      dataSource.destroy();\n    }\n    dataSource = null;\n\n    empty(instance.rootElement);\n    eventManager.destroy();\n\n    instance.runHooks('afterDestroy');\n    Hooks.getSingleton().destroy(instance);\n\n    for (var i in instance) {\n      if (hasOwnProperty(instance, i)) {\n        // replace instance methods with post mortem\n        if (isFunction(instance[i])) {\n          instance[i] = postMortem;\n\n        } else if (i !== 'guid') {\n          // replace instance properties with null (restores memory)\n          // it should not be necessary but this prevents a memory leak side effects that show itself in Jasmine tests\n          instance[i] = null;\n        }\n      }\n    }\n\n    // replace private properties with null (restores memory)\n    // it should not be necessary but this prevents a memory leak side effects that show itself in Jasmine tests\n    if (datamap) {\n      datamap.destroy();\n    }\n    datamap = null;\n    priv = null;\n    grid = null;\n    selection = null;\n    editorManager = null;\n    instance = null;\n    GridSettings = null;\n  };\n\n  /**\n   * Replacement for all methods after Handsotnable was destroyed.\n   *\n   * @private\n   */\n  function postMortem() {\n    throw new Error('This method cannot be called because this Handsontable instance has been destroyed');\n  }\n\n  /**\n   * Returns the active editor object.\n   *\n   * @memberof Core#\n   * @function getActiveEditor\n   * @returns {Object} The active editor object.\n   */\n  this.getActiveEditor = function() {\n    return editorManager.getActiveEditor();\n  };\n\n  /**\n   * Returns plugin instance using the plugin name provided.\n   *\n   * @memberof Core#\n   * @function getPlugin\n   * @param {String} pluginName The plugin name.\n   * @returns {*} The plugin instance.\n   * @since 0.15.0\n   */\n  this.getPlugin = function(pluginName) {\n    return getPlugin(this, pluginName);\n  };\n\n  /**\n   * Returns the Handsontable instance.\n   *\n   * @memberof Core#\n   * @function getInstance\n   * @returns {Handsontable} The Handsontable instance.\n   */\n  this.getInstance = function() {\n    return instance;\n  };\n\n  /**\n   * Adds listener to the specified hook name (only for this Handsontable instance).\n   *\n   * @memberof Core#\n   * @function addHook\n   * @see Hooks#add\n   * @param {String} key Hook name.\n   * @param {Function|Array} callback Function or array of Functions.\n   *\n   * @example\n   * ```js\n   * hot.addHook('beforeInit', myCallback);\n   * ```\n   */\n  this.addHook = function(key, callback) {\n    Hooks.getSingleton().add(key, callback, instance);\n  };\n\n  /**\n   * Check if for a specified hook name there are added listeners (only for this Handsontable instance).\n   *\n   * @memberof Core#\n   * @function hasHook\n   * @see Hooks#has\n   * @param {String} key Hook name\n   * @return {Boolean}\n   *\n   * @example\n   * ```js\n   * var hasBeforeInitListeners = hot.hasHook('beforeInit');\n   * ```\n   */\n  this.hasHook = function(key) {\n    return Hooks.getSingleton().has(key, instance);\n  };\n\n  /**\n   * Adds listener to specified hook name (only for this Handsontable instance).\n   * After the listener is triggered, it will be automatically removed.\n   *\n   * @memberof Core#\n   * @function addHookOnce\n   * @see Hooks#once\n   * @param {String} key Hook name.\n   * @param {Function|Array} callback Function or array of Functions.\n   *\n   * @example\n   * ```js\n   * hot.addHookOnce('beforeInit', myCallback);\n   * ```\n   */\n  this.addHookOnce = function(key, callback) {\n    Hooks.getSingleton().once(key, callback, instance);\n  };\n\n  /**\n   * Removes the hook listener previously registered with {@link Core#addHook}.\n   *\n   * @memberof Core#\n   * @function removeHook\n   * @see Hooks#remove\n   * @param {String} key Hook name.\n   * @param {Function} callback Function which have been registered via {@link Core#addHook}.\n   *\n   * @example\n   * ```js\n   * hot.removeHook('beforeInit', myCallback);\n   * ```\n   */\n  this.removeHook = function(key, callback) {\n    Hooks.getSingleton().remove(key, callback, instance);\n  };\n\n  /**\n   * Run the callbacks for the hook provided in the `key` argument using the parameters given in the other arguments.\n   *\n   * @memberof Core#\n   * @function runHooks\n   * @see Hooks#run\n   * @param {String} key Hook name.\n   * @param {*} [p1] Argument passed to the callback.\n   * @param {*} [p2] Argument passed to the callback.\n   * @param {*} [p3] Argument passed to the callback.\n   * @param {*} [p4] Argument passed to the callback.\n   * @param {*} [p5] Argument passed to the callback.\n   * @param {*} [p6] Argument passed to the callback.\n   * @returns {*}\n   *\n   * @example\n   * ```js\n   * hot.runHooks('beforeInit');\n   * ```\n   */\n  this.runHooks = function(key, p1, p2, p3, p4, p5, p6) {\n    return Hooks.getSingleton().run(instance, key, p1, p2, p3, p4, p5, p6);\n  };\n\n  this.timeouts = [];\n\n  /**\n   * Sets timeout. Purpose of this method is to clear all known timeouts when `destroy` method is called.\n   *\n   * @param {*} handle\n   * @private\n   */\n  this._registerTimeout = function(handle) {\n    this.timeouts.push(handle);\n  };\n\n  /**\n   * Clears all known timeouts.\n   *\n   * @private\n   */\n  this._clearTimeouts = function() {\n    for (var i = 0, ilen = this.timeouts.length; i < ilen; i++) {\n      clearTimeout(this.timeouts[i]);\n    }\n  };\n\n  /**\n   * Handsontable version\n   *\n   * @type {String}\n   */\n  // this.version = Handsontable.version;\n\n  Hooks.getSingleton().run(instance, 'construct');\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/core.js","import {inherit} from './object';\n/* eslint-disable import/prefer-default-export */\n/**\n * Factory for columns constructors.\n *\n * @param {Object} GridSettings\n * @param {Array} conflictList\n * @return {Object} ColumnSettings\n */\nexport function columnFactory(GridSettings, conflictList) {\n  function ColumnSettings() {};\n\n  inherit(ColumnSettings, GridSettings);\n\n  // Clear conflict settings\n  for (let i = 0, len = conflictList.length; i < len; i++) {\n    ColumnSettings.prototype[conflictList[i]] = void 0;\n  }\n\n  return ColumnSettings;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/setting.js","import Core from './../../core';\nimport {\n  addClass,\n  empty,\n  fastInnerHTML,\n  getScrollbarWidth,\n  isChildOf,\n  removeClass,\n} from './../../helpers/dom/element';\nimport {arrayEach, arrayFilter, arrayReduce} from './../../helpers/array';\nimport Cursor from './cursor';\nimport EventManager from './../../eventManager';\nimport {mixin, hasOwnProperty} from './../../helpers/object';\nimport {debounce} from './../../helpers/function';\nimport {filterSeparators, hasSubMenu, isDisabled, isItemHidden, isSeparator, isSelectionDisabled, normalizeSelection} from './utils';\nimport {KEY_CODES} from './../../helpers/unicode';\nimport localHooks from './../../mixins/localHooks';\nimport {SEPARATOR} from './predefinedItems';\nimport {stopImmediatePropagation} from './../../helpers/dom/event';\n\n/**\n * @class Menu\n * @plugin ContextMenu\n */\nclass Menu {\n  constructor(hotInstance, options) {\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false\n    };\n    this.eventManager = new EventManager(this);\n    this.container = this.createContainer(this.options.name);\n    this.hotMenu = null;\n    this.hotSubMenus = {};\n    this.parentMenu = this.options.parent || null;\n    this.menuItems = null;\n    this.origOutsideClickDeselects = null;\n    this.keyEvent = false;\n\n    this.offset = {\n      above: 0,\n      below: 0,\n      left: 0,\n      right: 0\n    };\n    this._afterScrollCallback = null;\n\n    this.registerEvents();\n  }\n\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n  registerEvents() {\n    this.eventManager.addEventListener(document.documentElement, 'mousedown', (event) => this.onDocumentMouseDown(event));\n  }\n\n  /**\n   * Set array of objects which defines menu items.\n   *\n   * @param {Array} menuItems Menu items to display.\n   */\n  setMenuItems(menuItems) {\n    this.menuItems = menuItems;\n  }\n\n  /**\n   * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n   *\n   * @param {String} area Specified area name (`above`, `below`, `left` or `right`).\n   * @param {Number} offset Offset value.\n   */\n  setOffset(area, offset = 0) {\n    this.offset[area] = offset;\n  }\n\n  /**\n   * Check if menu is using as sub-menu.\n   *\n   * @returns {Boolean}\n   */\n  isSubMenu() {\n    return this.parentMenu !== null;\n  }\n\n  /**\n   * Open menu.\n   */\n  open() {\n    this.container.removeAttribute('style');\n    this.container.style.display = 'block';\n\n    const delayedOpenSubMenu = debounce((row) => this.openSubMenu(row), 300);\n\n    let filteredItems = arrayFilter(this.menuItems, (item) => isItemHidden(item, this.hot));\n\n    filteredItems = filterSeparators(filteredItems, SEPARATOR);\n\n    let settings = {\n      data: filteredItems,\n      colHeaders: false,\n      colWidths: [200],\n      autoRowSize: false,\n      readOnly: true,\n      copyPaste: false,\n      columns: [{\n        data: 'name',\n        renderer: (hot, TD, row, col, prop, value) => this.menuItemRenderer(hot, TD, row, col, prop, value)\n      }],\n      renderAllRows: true,\n      fragmentSelection: 'cell',\n      disableVisualSelection: 'area',\n      beforeKeyDown: (event) => this.onBeforeKeyDown(event),\n      afterOnCellMouseOver: (event, coords, TD) => {\n        if (this.isAllSubMenusClosed()) {\n          delayedOpenSubMenu(coords.row);\n        } else {\n          this.openSubMenu(coords.row);\n        }\n      },\n      rowHeights: (row) => (filteredItems[row].name === SEPARATOR ? 1 : 23)\n    };\n    this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n    this.hot.getSettings().outsideClickDeselects = false;\n    this.hotMenu = new Core(this.container, settings);\n    this.hotMenu.addHook('afterInit', () => this.onAfterInit());\n    this.hotMenu.addHook('afterSelection', (r, c, r2, c2, preventScrolling) => this.onAfterSelection(r, c, r2, c2, preventScrolling));\n    this.hotMenu.init();\n    this.hotMenu.listen();\n    this.blockMainTableCallbacks();\n    this.runLocalHooks('afterOpen');\n  }\n\n  /**\n   * Close menu.\n   *\n   * @param {Boolean} [closeParent=false] if `true` try to close parent menu if exists.\n   */\n  close(closeParent = false) {\n    if (!this.isOpened()) {\n      return;\n    }\n    if (closeParent && this.parentMenu) {\n      this.parentMenu.close();\n    } else {\n      this.closeAllSubMenus();\n      this.container.style.display = 'none';\n      this.releaseMainTableCallbacks();\n      this.hotMenu.destroy();\n      this.hotMenu = null;\n      this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n      this.runLocalHooks('afterClose');\n\n      if (this.parentMenu) {\n        this.parentMenu.hotMenu.listen();\n      }\n    }\n  }\n\n  /**\n   * Open sub menu at the provided row index.\n   *\n   * @param {Number} row Row index.\n   * @returns {Menu|Boolean} Returns created menu or `false` if no one menu was created.\n   */\n  openSubMenu(row) {\n    if (!this.hotMenu) {\n      return false;\n    }\n    let cell = this.hotMenu.getCell(row, 0);\n\n    this.closeAllSubMenus();\n\n    if (!cell || !hasSubMenu(cell)) {\n      return false;\n    }\n    let dataItem = this.hotMenu.getSourceDataAtRow(row);\n    let subMenu = new Menu(this.hot, {\n      parent: this,\n      name: dataItem.name,\n      className: this.options.className,\n      keepInViewport: true\n    });\n    subMenu.setMenuItems(dataItem.submenu.items);\n    subMenu.open();\n    subMenu.setPosition(cell.getBoundingClientRect());\n    this.hotSubMenus[dataItem.key] = subMenu;\n\n    return subMenu;\n  }\n\n  /**\n   * Close sub menu at row index.\n   *\n   * @param {Number} row Row index.\n   */\n  closeSubMenu(row) {\n    let dataItem = this.hotMenu.getSourceDataAtRow(row);\n    let menus = this.hotSubMenus[dataItem.key];\n\n    if (menus) {\n      menus.destroy();\n      delete this.hotSubMenus[dataItem.key];\n    }\n  }\n\n  /**\n   * Close all opened sub menus.\n   */\n  closeAllSubMenus() {\n    arrayEach(this.hotMenu.getData(), (value, row) => this.closeSubMenu(row));\n  }\n\n  /**\n   * Checks if all created and opened sub menus are closed.\n   *\n   * @returns {Boolean}\n   */\n  isAllSubMenusClosed() {\n    return Object.keys(this.hotSubMenus).length === 0;\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    this.clearLocalHooks();\n    this.close();\n    this.parentMenu = null;\n    this.eventManager.destroy();\n  }\n\n  /**\n   * Checks if menu was opened.\n   *\n   * @returns {Boolean} Returns `true` if menu was opened.\n   */\n  isOpened() {\n    return this.hotMenu !== null;\n  }\n\n  /**\n   * Execute menu command.\n   *\n   * @param {Event} [event]\n   */\n  executeCommand(event) {\n    if (!this.isOpened() || !this.hotMenu.getSelected()) {\n      return;\n    }\n    const selectedItem = this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelected()[0]);\n\n    this.runLocalHooks('select', selectedItem, event);\n\n    if (selectedItem.isCommand === false || selectedItem.name === SEPARATOR) {\n      return;\n    }\n    const selRange = this.hot.getSelectedRange();\n    const normalizedSelection = selRange ? normalizeSelection(selRange) : {};\n    let autoClose = true;\n\n    // Don't close context menu if item is disabled or it has submenu\n    if (selectedItem.disabled === true ||\n        (typeof selectedItem.disabled === 'function' && selectedItem.disabled.call(this.hot) === true) ||\n        selectedItem.submenu) {\n      autoClose = false;\n    }\n\n    this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n\n    if (this.isSubMenu()) {\n      this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    }\n\n    if (autoClose) {\n      this.close(true);\n    }\n  }\n\n  /**\n   * Set menu position based on dom event or based on literal object.\n   *\n   * @param {Event|Object} coords Event or literal Object with coordinates.\n   */\n  setPosition(coords) {\n    const cursor = new Cursor(coords);\n\n    if (this.options.keepInViewport) {\n      if (cursor.fitsBelow(this.container)) {\n        this.setPositionBelowCursor(cursor);\n\n      } else if (cursor.fitsAbove(this.container)) {\n        this.setPositionAboveCursor(cursor);\n\n      } else {\n        this.setPositionBelowCursor(cursor);\n      }\n      if (cursor.fitsOnRight(this.container)) {\n        this.setPositionOnRightOfCursor(cursor);\n      } else {\n        this.setPositionOnLeftOfCursor(cursor);\n      }\n    } else {\n      this.setPositionBelowCursor(cursor);\n      this.setPositionOnRightOfCursor(cursor);\n    }\n  }\n\n  /**\n   * Set menu position above cursor object.\n   *\n   * @param {Cursor} cursor `Cursor` object.\n   */\n  setPositionAboveCursor(cursor) {\n    let top = this.offset.above + cursor.top - this.container.offsetHeight;\n\n    if (this.isSubMenu()) {\n      top = cursor.top + cursor.cellHeight - this.container.offsetHeight + 3;\n    }\n    this.container.style.top = `${top}px`;\n  }\n\n  /**\n   * Set menu position below cursor object.\n   *\n   * @param {Cursor} cursor `Cursor` object.\n   */\n  setPositionBelowCursor(cursor) {\n    let top = this.offset.below + cursor.top;\n\n    if (this.isSubMenu()) {\n      top = cursor.top - 1;\n    }\n    this.container.style.top = `${top}px`;\n  }\n\n  /**\n   * Set menu position on the right of cursor object.\n   *\n   * @param {Cursor} cursor `Cursor` object.\n   */\n  setPositionOnRightOfCursor(cursor) {\n    let left;\n\n    if (this.isSubMenu()) {\n      left = 1 + cursor.left + cursor.cellWidth;\n    } else {\n      left = this.offset.right + 1 + cursor.left;\n    }\n\n    this.container.style.left = `${left}px`;\n  }\n\n  /**\n   * Set menu position on the left of cursor object.\n   *\n   * @param {Cursor} cursor `Cursor` object.\n   */\n  setPositionOnLeftOfCursor(cursor) {\n    let left = this.offset.left + cursor.left - this.container.offsetWidth + getScrollbarWidth() + 4;\n\n    this.container.style.left = `${left}px`;\n  }\n\n  /**\n   * Select first cell in opened menu.\n   */\n  selectFirstCell() {\n    let cell = this.hotMenu.getCell(0, 0);\n\n    if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n      this.selectNextCell(0, 0);\n    } else {\n      this.hotMenu.selectCell(0, 0);\n    }\n  }\n\n  /**\n   * Select last cell in opened menu.\n   */\n  selectLastCell() {\n    let lastRow = this.hotMenu.countRows() - 1;\n    let cell = this.hotMenu.getCell(lastRow, 0);\n\n    if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n      this.selectPrevCell(lastRow, 0);\n    } else {\n      this.hotMenu.selectCell(lastRow, 0);\n    }\n  }\n\n  /**\n   * Select next cell in opened menu.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   */\n  selectNextCell(row, col) {\n    let nextRow = row + 1;\n    let cell = nextRow < this.hotMenu.countRows() ? this.hotMenu.getCell(nextRow, col) : null;\n\n    if (!cell) {\n      return;\n    }\n    if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n      this.selectNextCell(nextRow, col);\n    } else {\n      this.hotMenu.selectCell(nextRow, col);\n    }\n  }\n\n  /**\n   * Select previous cell in opened menu.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   */\n  selectPrevCell(row, col) {\n    let prevRow = row - 1;\n    let cell = prevRow >= 0 ? this.hotMenu.getCell(prevRow, col) : null;\n\n    if (!cell) {\n      return;\n    }\n    if (isSeparator(cell) || isDisabled(cell) || isSelectionDisabled(cell)) {\n      this.selectPrevCell(prevRow, col);\n    } else {\n      this.hotMenu.selectCell(prevRow, col);\n    }\n  }\n\n  /**\n   * Menu item renderer.\n   *\n   * @private\n   */\n  menuItemRenderer(hot, TD, row, col, prop, value) {\n    let item = hot.getSourceDataAtRow(row);\n    let wrapper = document.createElement('div');\n\n    let isSubMenu = (item) => hasOwnProperty(item, 'submenu');\n    let itemIsSeparator = (item) => new RegExp(SEPARATOR, 'i').test(item.name);\n    let itemIsDisabled = (item) => item.disabled === true || (typeof item.disabled == 'function' && item.disabled.call(this.hot) === true);\n    let itemIsSelectionDisabled = (item) => item.disableSelection;\n\n    if (typeof value === 'function') {\n      value = value.call(this.hot);\n    }\n    empty(TD);\n    addClass(wrapper, 'htItemWrapper');\n    TD.appendChild(wrapper);\n\n    if (itemIsSeparator(item)) {\n      addClass(TD, 'htSeparator');\n\n    } else if (typeof item.renderer === 'function') {\n      addClass(TD, 'htCustomMenuRenderer');\n      TD.appendChild(item.renderer(hot, wrapper, row, col, prop, value));\n\n    } else {\n      fastInnerHTML(wrapper, value);\n    }\n    if (itemIsDisabled(item)) {\n      addClass(TD, 'htDisabled');\n      this.eventManager.addEventListener(TD, 'mouseenter', () => hot.deselectCell());\n\n    } else if (itemIsSelectionDisabled(item)) {\n      addClass(TD, 'htSelectionDisabled');\n      this.eventManager.addEventListener(TD, 'mouseenter', () => hot.deselectCell());\n\n    } else if (isSubMenu(item)) {\n      addClass(TD, 'htSubmenu');\n\n      if (itemIsSelectionDisabled(item)) {\n        this.eventManager.addEventListener(TD, 'mouseenter', () => hot.deselectCell());\n      } else {\n        this.eventManager.addEventListener(TD, 'mouseenter', () => hot.selectCell(row, col, void 0, void 0, false, false));\n      }\n    } else {\n      removeClass(TD, 'htSubmenu');\n      removeClass(TD, 'htDisabled');\n\n      if (itemIsSelectionDisabled(item)) {\n        this.eventManager.addEventListener(TD, 'mouseenter', () => hot.deselectCell());\n      } else {\n        this.eventManager.addEventListener(TD, 'mouseenter', () => hot.selectCell(row, col, void 0, void 0, false, false));\n      }\n    }\n  }\n\n  /**\n   * Create container/wrapper for handsontable.\n   *\n   * @private\n   * @param {String} [name] Class name.\n   * @returns {HTMLElement}\n   */\n  createContainer(name = null) {\n    if (name) {\n      name = name.replace(/[^A-z0-9]/g, '_');\n      name = `${this.options.className}Sub_${name}`;\n    }\n    let container;\n\n    if (name) {\n      container = document.querySelector(`.${this.options.className}.${name}`);\n    } else {\n      container = document.querySelector(`.${this.options.className}`);\n    }\n    if (!container) {\n      container = document.createElement('div');\n      addClass(container, `htMenu ${this.options.className}`);\n\n      if (name) {\n        addClass(container, name);\n      }\n      document.getElementsByTagName('body')[0].appendChild(container);\n    }\n\n    return container;\n  }\n\n  /**\n   * @private\n   */\n  blockMainTableCallbacks() {\n    this._afterScrollCallback = function() {};\n    this.hot.addHook('afterScrollVertically', this._afterScrollCallback);\n    this.hot.addHook('afterScrollHorizontally', this._afterScrollCallback);\n  }\n\n  /**\n   * @private\n   */\n  releaseMainTableCallbacks() {\n    if (this._afterScrollCallback) {\n      this.hot.removeHook('afterScrollVertically', this._afterScrollCallback);\n      this.hot.removeHook('afterScrollHorizontally', this._afterScrollCallback);\n      this._afterScrollCallback = null;\n    }\n  }\n\n  /**\n   * On before key down listener.\n   *\n   * @private\n   * @param {Event} event\n   */\n  onBeforeKeyDown(event) {\n    let selection = this.hotMenu.getSelected();\n    let stopEvent = false;\n    this.keyEvent = true;\n\n    switch (event.keyCode) {\n      case KEY_CODES.ESCAPE:\n        this.close();\n        stopEvent = true;\n        break;\n\n      case KEY_CODES.ENTER:\n        if (selection) {\n          if (this.hotMenu.getSourceDataAtRow(selection[0]).submenu) {\n            stopEvent = true;\n          } else {\n            this.executeCommand(event);\n            this.close(true);\n          }\n        }\n        break;\n\n      case KEY_CODES.ARROW_DOWN:\n        if (selection) {\n          this.selectNextCell(selection[0], selection[1]);\n        } else {\n          this.selectFirstCell();\n        }\n        stopEvent = true;\n        break;\n\n      case KEY_CODES.ARROW_UP:\n        if (selection) {\n          this.selectPrevCell(selection[0], selection[1]);\n        } else {\n          this.selectLastCell();\n        }\n        stopEvent = true;\n        break;\n\n      case KEY_CODES.ARROW_RIGHT:\n        if (selection) {\n          let menu = this.openSubMenu(selection[0]);\n\n          if (menu) {\n            menu.selectFirstCell();\n          }\n        }\n        stopEvent = true;\n\n        break;\n\n      case KEY_CODES.ARROW_LEFT:\n        if (selection && this.isSubMenu()) {\n          this.close();\n\n          if (this.parentMenu) {\n            this.parentMenu.hotMenu.listen();\n          }\n          stopEvent = true;\n        }\n        break;\n      default:\n        break;\n    }\n    if (stopEvent) {\n      event.preventDefault();\n      stopImmediatePropagation(event);\n    }\n\n    this.keyEvent = false;\n  }\n\n  /**\n   * On after init listener.\n   *\n   * @private\n   */\n  onAfterInit() {\n    const data = this.hotMenu.getSettings().data;\n    const hiderStyle = this.hotMenu.view.wt.wtTable.hider.style;\n    const holderStyle = this.hotMenu.view.wt.wtTable.holder.style;\n    let currentHiderWidth = parseInt(hiderStyle.width, 10);\n\n    let realHeight = arrayReduce(data, (accumulator, value) => accumulator + (value.name === SEPARATOR ? 1 : 26), 0);\n\n    holderStyle.width = `${currentHiderWidth + 22}px`;\n    holderStyle.height = `${realHeight + 4}px`;\n    hiderStyle.height = holderStyle.height;\n  }\n\n  /**\n   * On after selection listener.\n   *\n   * @param {Number} r Selection start row index.\n   * @param {Number} c Selection start column index.\n   * @param {Number} r2 Selection end row index.\n   * @param {Number} c2 Selection end column index.\n   * @param {Object} preventScrolling Object with `value` property where its value change will be observed.\n   */\n  onAfterSelection(r, c, r2, c2, preventScrolling) {\n    if (this.keyEvent === false) {\n      preventScrolling.value = true;\n    }\n  }\n\n  /**\n   * Document mouse down listener.\n   *\n   * @private\n   * @param {Event} event\n   */\n  onDocumentMouseDown(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n    if (this.container && isChildOf(event.target, this.container)) {\n      this.executeCommand(event);\n    }\n    // Close menu when clicked element is not belongs to menu itself\n    if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n      this.close(true);\n\n    // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n    } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) &&\n        (!isChildOf(event.target, '.htMenu') && isChildOf(event.target, document))) {\n      this.close(true);\n    }\n  }\n}\n\nmixin(Menu, localHooks);\n\nexport default Menu;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/menu.js","export const KEY = '---------';\n\nexport default function separatorItem() {\n  return {\n    name: KEY\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/separator.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {mixin} from 'handsontable/helpers/object';\nimport localHooks from 'handsontable/mixins/localHooks';\nimport stateSaver from 'handsontable/mixins/stateSaver';\n\n/**\n * @plugin Filters\n * @class BaseComponent\n */\nclass BaseComponent {\n  constructor(hotInstance) {\n    this.hot = hotInstance;\n    /**\n     * List of registered component UI elements.\n     *\n     * @type {Array}\n     */\n    this.elements = [];\n    /**\n     * Flag which determines if element is hidden.\n     *\n     * @type {Boolean}\n     */\n    this.hidden = false;\n  }\n\n  /**\n   * Reset elements to their initial state.\n   */\n  reset() {\n    arrayEach(this.elements, (ui) => ui.reset());\n  }\n\n  /**\n   * Hide component.\n   */\n  hide() {\n    this.hidden = true;\n  }\n\n  /**\n   * Show component.\n   */\n  show() {\n    this.hidden = false;\n  }\n\n  /**\n   * Check if component is hidden.\n   *\n   * @returns {Boolean}\n   */\n  isHidden() {\n    return this.hidden;\n  }\n\n  /**\n   * Destroy element.\n   */\n  destroy() {\n    this.clearLocalHooks();\n    arrayEach(this.elements, (ui) => ui.destroy());\n    this.elements = null;\n    this.hot = null;\n  }\n}\n\nmixin(BaseComponent, localHooks);\nmixin(BaseComponent, stateSaver);\n\nexport default BaseComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/component/_base.js","import {clone} from 'handsontable/helpers/object';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {SEPARATOR} from 'handsontable/plugins/contextMenu/predefinedItems';\nimport {getFormulaDescriptor} from './formulaRegisterer';\n\nimport {FORMULA_NAME as FORMULA_NONE} from './formula/none';\nimport {FORMULA_NAME as FORMULA_EMPTY} from './formula/empty';\nimport {FORMULA_NAME as FORMULA_NOT_EMPTY} from './formula/notEmpty';\nimport {FORMULA_NAME as FORMULA_EQUAL} from './formula/equal';\nimport {FORMULA_NAME as FORMULA_NOT_EQUAL} from './formula/notEqual';\nimport {FORMULA_NAME as FORMULA_GREATER_THAN} from './formula/greaterThan';\nimport {FORMULA_NAME as FORMULA_GREATER_THAN_OR_EQUAL} from './formula/greaterThanOrEqual';\nimport {FORMULA_NAME as FORMULA_LESS_THAN} from './formula/lessThan';\nimport {FORMULA_NAME as FORMULA_LESS_THAN_OR_EQUAL} from './formula/lessThanOrEqual';\nimport {FORMULA_NAME as FORMULA_BETWEEN} from './formula/between';\nimport {FORMULA_NAME as FORMULA_NOT_BETWEEN} from './formula/notBetween';\nimport {FORMULA_NAME as FORMULA_BEGINS_WITH} from './formula/beginsWith';\nimport {FORMULA_NAME as FORMULA_ENDS_WITH} from './formula/endsWith';\nimport {FORMULA_NAME as FORMULA_CONTAINS} from './formula/contains';\nimport {FORMULA_NAME as FORMULA_NOT_CONTAINS} from './formula/notContains';\nimport {FORMULA_NAME as FORMULA_DATE_BEFORE} from './formula/date/before';\nimport {FORMULA_NAME as FORMULA_DATE_AFTER} from './formula/date/after';\nimport {FORMULA_NAME as FORMULA_TOMORROW} from './formula/date/tomorrow';\nimport {FORMULA_NAME as FORMULA_TODAY} from './formula/date/today';\nimport {FORMULA_NAME as FORMULA_YESTERDAY} from './formula/date/yesterday';\nimport {FORMULA_NAME as FORMULA_BY_VALUE} from './formula/byValue';\n\nexport {\n  FORMULA_NONE,\n  FORMULA_EMPTY,\n  FORMULA_NOT_EMPTY,\n  FORMULA_EQUAL,\n  FORMULA_NOT_EQUAL,\n  FORMULA_GREATER_THAN,\n  FORMULA_GREATER_THAN_OR_EQUAL,\n  FORMULA_LESS_THAN,\n  FORMULA_LESS_THAN_OR_EQUAL,\n  FORMULA_BETWEEN,\n  FORMULA_NOT_BETWEEN,\n  FORMULA_BEGINS_WITH,\n  FORMULA_ENDS_WITH,\n  FORMULA_CONTAINS,\n  FORMULA_NOT_CONTAINS,\n  FORMULA_DATE_BEFORE,\n  FORMULA_DATE_AFTER,\n  FORMULA_TOMORROW,\n  FORMULA_TODAY,\n  FORMULA_YESTERDAY,\n  FORMULA_BY_VALUE\n};\n\nexport const TYPE_NUMERIC = 'numeric';\nexport const TYPE_TEXT = 'text';\nexport const TYPE_DATE = 'date';\n/**\n * Default types and order for filter conditions.\n *\n * @type {Object}\n */\nexport const TYPES = {\n  [TYPE_NUMERIC]: [\n    FORMULA_NONE,\n    SEPARATOR,\n    FORMULA_EMPTY,\n    FORMULA_NOT_EMPTY,\n    SEPARATOR,\n    FORMULA_EQUAL,\n    FORMULA_NOT_EQUAL,\n    SEPARATOR,\n    FORMULA_GREATER_THAN,\n    FORMULA_GREATER_THAN_OR_EQUAL,\n    FORMULA_LESS_THAN,\n    FORMULA_LESS_THAN_OR_EQUAL,\n    FORMULA_BETWEEN,\n    FORMULA_NOT_BETWEEN,\n  ],\n  [TYPE_TEXT]: [\n    FORMULA_NONE,\n    SEPARATOR,\n    FORMULA_EMPTY,\n    FORMULA_NOT_EMPTY,\n    SEPARATOR,\n    FORMULA_EQUAL,\n    FORMULA_NOT_EQUAL,\n    SEPARATOR,\n    FORMULA_BEGINS_WITH,\n    FORMULA_ENDS_WITH,\n    SEPARATOR,\n    FORMULA_CONTAINS,\n    FORMULA_NOT_CONTAINS,\n  ],\n  [TYPE_DATE]: [\n    FORMULA_NONE,\n    SEPARATOR,\n    FORMULA_EMPTY,\n    FORMULA_NOT_EMPTY,\n    SEPARATOR,\n    FORMULA_EQUAL,\n    FORMULA_NOT_EQUAL,\n    SEPARATOR,\n    FORMULA_DATE_BEFORE,\n    FORMULA_DATE_AFTER,\n    FORMULA_BETWEEN,\n    SEPARATOR,\n    FORMULA_TOMORROW,\n    FORMULA_TODAY,\n    FORMULA_YESTERDAY,\n  ],\n};\n\n/**\n * Get options list for conditional filter by data type (e.q: `'text'`, `'numeric'`, `'date'`).\n *\n * @returns {Object}\n */\nexport default function getOptionsList(type) {\n  const items = [];\n\n  if (!TYPES[type]) {\n    type = TYPE_TEXT;\n  }\n  arrayEach(TYPES[type], (type) => {\n    let option;\n\n    if (type === SEPARATOR) {\n      option = {name: SEPARATOR};\n\n    } else {\n      option = clone(getFormulaDescriptor(type));\n    }\n    items.push(option);\n  });\n\n  return items;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/constants.js","import {clone, extend, mixin, objectEach} from 'handsontable/helpers/object';\nimport localHooks from 'handsontable/mixins/localHooks';\nimport EventManager from 'handsontable/eventManager';\nimport {addClass} from 'handsontable/helpers/dom/element';\nimport {arrayEach} from 'handsontable/helpers/array';\n\nconst STATE_BUILT = 'built';\nconst STATE_BUILDING = 'building';\nconst EVENTS_TO_REGISTER = ['click', 'input', 'keydown', 'keypress', 'keyup', 'focus', 'blur'];\n\n/**\n * @class\n * @private\n */\nclass BaseUI {\n  static get DEFAULTS() {\n    return clone({\n      className: '',\n      value: '',\n      tagName: 'div',\n      children: [],\n      wrapIt: true,\n    });\n  }\n\n  constructor(hotInstance, options) {\n    /**\n     * Instance of Handsontable.\n     *\n     * @type {Core}\n     */\n    this.hot = hotInstance;\n    /**\n     * Instance of EventManager.\n     *\n     * @type {EventManager}\n     */\n    this.eventManager = new EventManager(this);\n    /**\n     * List of element options.\n     *\n     * @type {Object}\n     */\n    this.options = extend(BaseUI.DEFAULTS, options);\n    /**\n     * Build root DOM element.\n     *\n     * @type {Element}\n     * @private\n     */\n    this._element = document.createElement(this.options.wrapIt ? 'div' : this.options.tagName);\n    /**\n     * Flag which determines build state of element.\n     *\n     * @type {Boolean}\n     */\n    this.buildState = false;\n  }\n\n  /**\n   * Set the element value.\n   *\n   * @returns {*}\n   */\n  setValue(value) {\n    this.options.value = value;\n    this.update();\n  }\n\n  /**\n   * Get the element value.\n   *\n   * @returns {*}\n   */\n  getValue() {\n    return this.options.value;\n  }\n\n  /**\n   * Get element as a DOM object.\n   *\n   * @returns {Element}\n   */\n  get element() {\n    if (this.buildState === STATE_BUILDING) {\n      return this._element;\n    }\n    if (this.buildState === STATE_BUILT) {\n      this.update();\n\n      return this._element;\n    }\n    this.buildState = STATE_BUILDING;\n    this.build();\n    this.buildState = STATE_BUILT;\n\n    return this._element;\n  }\n\n  /**\n   * Check if element was built (built whole DOM structure).\n   *\n   * @returns {Boolean}\n   */\n  isBuilt() {\n    return this.buildState === STATE_BUILT;\n  }\n\n  /**\n   * Build DOM structure.\n   */\n  build() {\n    const registerEvent = (element, eventName) => {\n      this.eventManager.addEventListener(element, eventName, (event) => this.runLocalHooks(eventName, event, this));\n    };\n\n    if (!this.buildState) {\n      this.buildState = STATE_BUILDING;\n    }\n    if (this.options.className) {\n      addClass(this._element, this.options.className);\n    }\n    if (this.options.children.length) {\n      arrayEach(this.options.children, (element) => this._element.appendChild(element.element));\n\n    } else if (this.options.wrapIt) {\n      const element = document.createElement(this.options.tagName);\n\n      objectEach(this.options, (value, key) => {\n        if (element[key] !== void 0 && key !== 'className' && key !== 'tagName' && key !== 'children') {\n          element[key] = value;\n        }\n      });\n\n      this._element.appendChild(element);\n\n      arrayEach(EVENTS_TO_REGISTER, (eventName) => registerEvent(element, eventName));\n\n    } else {\n      arrayEach(EVENTS_TO_REGISTER, (eventName) => registerEvent(this._element, eventName));\n    }\n  }\n\n  /**\n   * Update DOM structure.\n   */\n  update() {\n\n  }\n\n  /**\n   * Reset to initial state.\n   */\n  reset() {\n    this.options.value = '';\n    this.update();\n  }\n\n  /**\n   * Show element.\n   */\n  show() {\n    this.element.style.display = '';\n  }\n\n  /**\n   * Hide element.\n   */\n  hide() {\n    this.element.style.display = 'none';\n  }\n\n  /**\n   * Focus element.\n   */\n  focus() {\n\n  }\n\n  destroy() {\n    this.eventManager.destroy();\n    this.eventManager = null;\n    this.hot = null;\n\n    if (this._element.parentNode) {\n      this._element.parentNode.removeChild(this._element);\n    }\n    this._element = null;\n  }\n}\n\nmixin(BaseUI, localHooks);\n\nexport default BaseUI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/ui/_base.js","import {addClass} from 'handsontable/helpers/dom/element';\nimport {clone, extend} from 'handsontable/helpers/object';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport BaseUI from './_base';\n\nconst privatePool = new WeakMap();\n\n/**\n * @class InputUI\n * @util\n */\nclass InputUI extends BaseUI {\n  static get DEFAULTS() {\n    return clone({\n      placeholder: '',\n      type: 'text',\n      tagName: 'input',\n    });\n  }\n\n  constructor(hotInstance, options) {\n    super(hotInstance, extend(InputUI.DEFAULTS, options));\n\n    privatePool.set(this, {});\n    this.registerHooks();\n  }\n\n  /**\n   * Register all necessary hooks.\n   */\n  registerHooks() {\n    this.addLocalHook('click', (event) => this.onClick(event));\n    this.addLocalHook('keyup', (event) => this.onKeyup(event));\n  }\n\n  /**\n   * Build DOM structure.\n   */\n  build() {\n    super.build();\n    let priv = privatePool.get(this);\n    let icon = document.createElement('div');\n\n    priv.input = this._element.firstChild;\n\n    addClass(this._element, 'htUIInput');\n    addClass(icon, 'htUIInputIcon');\n\n    this._element.appendChild(icon);\n\n    this.update();\n  }\n\n  /**\n   * Update element.\n   */\n  update() {\n    if (!this.isBuilt()) {\n      return;\n    }\n    let input = privatePool.get(this).input;\n\n    input.type = this.options.type;\n    input.value = this.options.value;\n  }\n\n  /**\n   * Focus element.\n   */\n  focus() {\n    if (this.isBuilt()) {\n      privatePool.get(this).input.focus();\n    }\n  }\n\n  /**\n   * OnClick listener.\n   *\n   * @param {Event} event\n   */\n  onClick(event) {\n\n  }\n\n  /**\n   * OnKeyup listener.\n   *\n   * @param {Event} event\n   */\n  onKeyup(event) {\n    this.options.value = event.target.value;\n  }\n}\n\nexport default InputUI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/ui/input.js","/**\n * Base class for the Nested Rows' UI sub-classes.\n *\n * @class\n * @util\n * @private\n */\nclass BaseUI {\n  constructor(pluginInstance, hotInstance) {\n    /**\n     * Instance of Handsontable.\n     *\n     * @type {Core}\n     */\n    this.hot = hotInstance;\n    /**\n     * Reference to the main plugin instance.\n     */\n    this.plugin = pluginInstance;\n  }\n}\n\nexport default BaseUI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/nestedRows/ui/_base.js","module.exports = __WEBPACK_EXTERNAL_MODULE_143__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"numbro\",\"commonjs2\":\"numbro\",\"commonjs\":\"numbro\",\"amd\":\"numbro\"}\n// module id = 143\n// module chunks = 0","import 'babel-polyfill';\n\nimport './css/bootstrap.css';\nimport './css/handsontable.css';\nimport './css/mobile.handsontable.css';\n\nimport {getRegisteredEditorNames, registerEditor, getEditor} from './editors';\nimport {getRegisteredRendererNames, getRenderer, registerRenderer} from './renderers';\nimport {getRegisteredValidatorNames, getValidator, registerValidator} from './validators';\nimport {getRegisteredCellTypeNames, getCellType, registerCellType} from './cellTypes';\n\nimport Core from './core';\nimport jQueryWrapper from './helpers/wrappers/jquery';\nimport EventManager, {getListenersCounter} from './eventManager';\nimport Hooks from './pluginHooks';\nimport GhostTable from './utils/ghostTable';\nimport * as arrayHelpers from './helpers/array';\nimport * as browserHelpers from './helpers/browser';\nimport * as dataHelpers from './helpers/data';\nimport * as dateHelpers from './helpers/date';\nimport * as featureHelpers from './helpers/feature';\nimport * as functionHelpers from './helpers/function';\nimport * as mixedHelpers from './helpers/mixed';\nimport * as numberHelpers from './helpers/number';\nimport * as objectHelpers from './helpers/object';\nimport * as settingHelpers from './helpers/setting';\nimport * as stringHelpers from './helpers/string';\nimport * as unicodeHelpers from './helpers/unicode';\nimport * as domHelpers from './helpers/dom/element';\nimport * as domEventHelpers from './helpers/dom/event';\nimport * as plugins from './plugins/index';\nimport {registerPlugin} from './plugins';\nimport DefaultSettings from './defaultSettings';\n\nfunction Handsontable(rootElement, userSettings) {\n  const instance = new Core(rootElement, userSettings || {});\n\n  instance.init();\n\n  return instance;\n}\n\njQueryWrapper(Handsontable);\n\nHandsontable.Core = Core;\nHandsontable.DefaultSettings = DefaultSettings;\nHandsontable.EventManager = EventManager;\nHandsontable._getListenersCounter = getListenersCounter; // For MemoryLeak tests\n\nHandsontable.buildDate = __HOT_BUILD_DATE__;\nHandsontable.packageName = __HOT_PACKAGE_NAME__;\nHandsontable.version = __HOT_VERSION__;\n\nconst baseVersion = __HOT_BASE_VERSION__;\n\nif (baseVersion) {\n  Handsontable.baseVersion = baseVersion;\n}\n\n// Export Hooks singleton\nHandsontable.hooks = Hooks.getSingleton();\n\n// TODO: Remove this exports after rewrite tests about this module\nHandsontable.__GhostTable = GhostTable;\n//\n\n// Export all helpers to the Handsontable object\nconst HELPERS = [\n  arrayHelpers,\n  browserHelpers,\n  dataHelpers,\n  dateHelpers,\n  featureHelpers,\n  functionHelpers,\n  mixedHelpers,\n  numberHelpers,\n  objectHelpers,\n  settingHelpers,\n  stringHelpers,\n  unicodeHelpers,\n];\nconst DOM = [\n  domHelpers,\n  domEventHelpers,\n];\n\nHandsontable.helper = {};\nHandsontable.dom = {};\n\n// Fill general helpers.\narrayHelpers.arrayEach(HELPERS, (helper) => {\n  arrayHelpers.arrayEach(Object.getOwnPropertyNames(helper), (key) => {\n    if (key.charAt(0) !== '_') {\n      Handsontable.helper[key] = helper[key];\n    }\n  });\n});\n\n// Fill DOM helpers.\narrayHelpers.arrayEach(DOM, (helper) => {\n  arrayHelpers.arrayEach(Object.getOwnPropertyNames(helper), (key) => {\n    if (key.charAt(0) !== '_') {\n      Handsontable.dom[key] = helper[key];\n    }\n  });\n});\n\n// Export cell types.\nHandsontable.cellTypes = {};\n\narrayHelpers.arrayEach(getRegisteredCellTypeNames(), (cellTypeName) => {\n  Handsontable.cellTypes[cellTypeName] = getCellType(cellTypeName);\n});\n\nHandsontable.cellTypes.registerCellType = registerCellType;\nHandsontable.cellTypes.getCellType = getCellType;\n\n// Export all registered editors from the Handsontable.\nHandsontable.editors = {};\n\narrayHelpers.arrayEach(getRegisteredEditorNames(), (editorName) => {\n  Handsontable.editors[`${stringHelpers.toUpperCaseFirst(editorName)}Editor`] = getEditor(editorName);\n});\n\nHandsontable.editors.registerEditor = registerEditor;\nHandsontable.editors.getEditor = getEditor;\n\n// Export all registered renderers from the Handsontable.\nHandsontable.renderers = {};\n\narrayHelpers.arrayEach(getRegisteredRendererNames(), (rendererName) => {\n  const renderer = getRenderer(rendererName);\n\n  if (rendererName === 'base') {\n    Handsontable.renderers.cellDecorator = renderer;\n  }\n  Handsontable.renderers[`${stringHelpers.toUpperCaseFirst(rendererName)}Renderer`] = renderer;\n});\n\nHandsontable.renderers.registerRenderer = registerRenderer;\nHandsontable.renderers.getRenderer = getRenderer;\n\n// Export all registered validators from the Handsontable.\nHandsontable.validators = {};\n\narrayHelpers.arrayEach(getRegisteredValidatorNames(), (validatorName) => {\n  Handsontable.validators[`${stringHelpers.toUpperCaseFirst(validatorName)}Validator`] = getValidator(validatorName);\n});\n\nHandsontable.validators.registerValidator = registerValidator;\nHandsontable.validators.getValidator = getValidator;\n\n// Export all registered plugins from the Handsontable.\nHandsontable.plugins = {};\n\narrayHelpers.arrayEach(Object.getOwnPropertyNames(plugins), (pluginName) => {\n  const plugin = plugins[pluginName];\n\n  if (pluginName === 'Base') {\n    Handsontable.plugins[`${pluginName}Plugin`] = plugin;\n  } else {\n    Handsontable.plugins[pluginName] = plugin;\n  }\n});\n\nHandsontable.plugins.registerPlugin = registerPlugin;\n\n// Export Handsontable\nmodule.exports = Handsontable;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/index.js","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_array-includes.js","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_classof.js","'use strict';\nvar dP          = require('./_object-dp').f\n  , create      = require('./_object-create')\n  , redefineAll = require('./_redefine-all')\n  , ctx         = require('./_ctx')\n  , anInstance  = require('./_an-instance')\n  , defined     = require('./_defined')\n  , forOf       = require('./_for-of')\n  , $iterDefine = require('./_iter-define')\n  , step        = require('./_iter-step')\n  , setSpecies  = require('./_set-species')\n  , DESCRIPTORS = require('./_descriptors')\n  , fastKey     = require('./_meta').fastKey\n  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)dP(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_collection-strong.js","'use strict';\nvar redefineAll       = require('./_redefine-all')\n  , getWeak           = require('./_meta').getWeak\n  , anObject          = require('./_an-object')\n  , isObject          = require('./_is-object')\n  , anInstance        = require('./_an-instance')\n  , forOf             = require('./_for-of')\n  , createArrayMethod = require('./_array-methods')\n  , $has              = require('./_has')\n  , arrayFind         = createArrayMethod(5)\n  , arrayFindIndex    = createArrayMethod(6)\n  , id                = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function(that){\n  return that._l || (that._l = new UncaughtFrozenStore);\n};\nvar UncaughtFrozenStore = function(){\n  this.a = [];\n};\nvar findUncaughtFrozen = function(store, key){\n  return arrayFind(store.a, function(it){\n    return it[0] === key;\n  });\n};\nUncaughtFrozenStore.prototype = {\n  get: function(key){\n    var entry = findUncaughtFrozen(this, key);\n    if(entry)return entry[1];\n  },\n  has: function(key){\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function(key, value){\n    var entry = findUncaughtFrozen(this, key);\n    if(entry)entry[1] = value;\n    else this.a.push([key, value]);\n  },\n  'delete': function(key){\n    var index = arrayFindIndex(this.a, function(it){\n      return it[0] === key;\n    });\n    if(~index)this.a.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = id++;      // collection id\n      that._l = undefined; // leak store for uncaught frozen objects\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function(key){\n        if(!isObject(key))return false;\n        var data = getWeak(key);\n        if(data === true)return uncaughtFrozenStore(this)['delete'](key);\n        return data && $has(data, this._i) && delete data[this._i];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key){\n        if(!isObject(key))return false;\n        var data = getWeak(key);\n        if(data === true)return uncaughtFrozenStore(this).has(key);\n        return data && $has(data, this._i);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var data = getWeak(anObject(key), true);\n    if(data === true)uncaughtFrozenStore(that).set(key, value);\n    else data[that._i] = value;\n    return that;\n  },\n  ufstore: uncaughtFrozenStore\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_collection-weak.js","module.exports = require('./_global').document && document.documentElement;\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_html.js","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_ie8-dom-define.js","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_is-array-iter.js","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_is-array.js","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object')\n  , floor    = Math.floor;\nmodule.exports = function isInteger(it){\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_is-integer.js","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object')\n  , cof      = require('./_cof')\n  , MATCH    = require('./_wks')('match');\nmodule.exports = function(it){\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_is-regexp.js","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_iter-call.js","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_iter-define.js","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_iter-step.js","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-assign.js","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-keys-internal.js","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject')\n  , isEnum    = require('./_object-pie').f;\nmodule.exports = function(isEntries){\n  return function(it){\n    var O      = toIObject(it)\n      , keys   = getKeys(O)\n      , length = keys.length\n      , i      = 0\n      , result = []\n      , key;\n    while(length > i)if(isEnum.call(O, key = keys[i++])){\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-to-array.js","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_set-proto.js","'use strict';\nvar global      = require('./_global')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_set-species.js","// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('./_to-length')\n  , repeat   = require('./_string-repeat')\n  , defined  = require('./_defined');\n\nmodule.exports = function(that, maxLength, fillString, left){\n  var S            = String(defined(that))\n    , stringLength = S.length\n    , fillStr      = fillString === undefined ? ' ' : String(fillString)\n    , intMaxLength = toLength(maxLength);\n  if(intMaxLength <= stringLength || fillStr == '')return S;\n  var fillLen = intMaxLength - stringLength\n    , stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if(stringFiller.length > fillLen)stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_string-pad.js","'use strict';\nvar toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n\nmodule.exports = function repeat(count){\n  var str = String(defined(this))\n    , res = ''\n    , n   = toInteger(count);\n  if(n < 0 || n == Infinity)throw RangeError(\"Count can't be negative\");\n  for(;n > 0; (n >>>= 1) && (str += str))if(n & 1)res += str;\n  return res;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_string-repeat.js","exports.f = require('./_wks');\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_wks-ext.js","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/core.get-iterator-method.js","/**\n * SheetClip - Spreadsheet Clipboard Parser\n * version 0.2\n *\n * This tiny library transforms JavaScript arrays to strings that are pasteable by LibreOffice, OpenOffice,\n * Google Docs and Microsoft Excel.\n *\n * Copyright 2012, Marcin Warpechowski\n * Licensed under the MIT license.\n * http://github.com/warpech/sheetclip/\n */\n/*jslint white: true*/\n(function (global) {\n  \"use strict\";\n\n  function countQuotes(str) {\n    return str.split('\"').length - 1;\n  }\n\n  var SheetClip = {\n    /**\n     * Decode spreadsheet string into array\n     *\n     * @param {String} str\n     * @returns {Array}\n     */\n    parse: function (str) {\n      var r, rLen, rows, arr = [], a = 0, c, cLen, multiline, last;\n\n      rows = str.split('\\n');\n\n      if (rows.length > 1 && rows[rows.length - 1] === '') {\n        rows.pop();\n      }\n      for (r = 0, rLen = rows.length; r < rLen; r += 1) {\n        rows[r] = rows[r].split('\\t');\n\n        for (c = 0, cLen = rows[r].length; c < cLen; c += 1) {\n          if (!arr[a]) {\n            arr[a] = [];\n          }\n          if (multiline && c === 0) {\n            last = arr[a].length - 1;\n            arr[a][last] = arr[a][last] + '\\n' + rows[r][0];\n\n            if (multiline && (countQuotes(rows[r][0]) & 1)) { //& 1 is a bitwise way of performing mod 2\n              multiline = false;\n              arr[a][last] = arr[a][last].substring(0, arr[a][last].length - 1).replace(/\"\"/g, '\"');\n            }\n          }\n          else {\n            if (c === cLen - 1 && rows[r][c].indexOf('\"') === 0 && (countQuotes(rows[r][c]) & 1)) {\n              arr[a].push(rows[r][c].substring(1).replace(/\"\"/g, '\"'));\n              multiline = true;\n            }\n            else {\n              arr[a].push(rows[r][c].replace(/\"\"/g, '\"'));\n              multiline = false;\n            }\n          }\n        }\n        if (!multiline) {\n          a += 1;\n        }\n      }\n\n      return arr;\n    },\n\n    /**\n     * Encode array into valid spreadsheet string\n     *\n     * @param arr\n     * @returns {String}\n     */\n    stringify: function (arr) {\n      var r, rLen, c, cLen, str = '', val;\n\n      for (r = 0, rLen = arr.length; r < rLen; r += 1) {\n        cLen = arr[r].length;\n\n        for (c = 0; c < cLen; c += 1) {\n          if (c > 0) {\n            str += '\\t';\n          }\n          val = arr[r][c];\n\n          if (typeof val === 'string') {\n            if (val.indexOf('\\n') > -1) {\n              str += '\"' + val.replace(/\"/g, '\"\"') + '\"';\n            }\n            else {\n              str += val;\n            }\n          }\n          else if (val === null || val === void 0) { // void 0 resolves to undefined\n            str += '';\n          }\n          else {\n            str += val;\n          }\n        }\n\n        if (r !== rLen - 1) {\n          str += '\\n';\n        }\n      }\n\n      return str;\n    }\n  };\n\n  if (typeof exports !== 'undefined') {\n    exports.parse = SheetClip.parse;\n    exports.stringify = SheetClip.stringify;\n  } else {\n    global.SheetClip = SheetClip;\n  }\n}(window));\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/lib/SheetClip/SheetClip.js","import {\n    getComputedStyle,\n    getTrimmingContainer,\n    innerWidth,\n    innerHeight,\n    offset,\n    outerHeight,\n    outerWidth,\n} from './../../../helpers/dom/element';\nimport {stopImmediatePropagation} from './../../../helpers/dom/event';\nimport {hasOwnProperty} from './../../../helpers/object';\nimport {isMobileBrowser} from './../../../helpers/browser';\nimport EventManager from './../../../eventManager';\nimport CellCoords from './cell/coords';\nimport Overlay from './overlay/_base.js';\n\n/**\n *\n */\nclass Border {\n  /**\n   * @param {Walkontable} wotInstance\n   * @param {Object} settings\n   */\n  constructor(wotInstance, settings) {\n    if (!settings) {\n      return;\n    }\n    this.eventManager = new EventManager(wotInstance);\n    this.instance = wotInstance;\n    this.wot = wotInstance;\n    this.settings = settings;\n    this.mouseDown = false;\n    this.main = null;\n\n    this.top = null;\n    this.left = null;\n    this.bottom = null;\n    this.right = null;\n\n    this.topStyle = null;\n    this.leftStyle = null;\n    this.bottomStyle = null;\n    this.rightStyle = null;\n\n    this.cornerDefaultStyle = {\n      width: '5px',\n      height: '5px',\n      borderWidth: '2px',\n      borderStyle: 'solid',\n      borderColor: '#FFF'\n    };\n    this.corner = null;\n    this.cornerStyle = null;\n\n    this.createBorders(settings);\n    this.registerListeners();\n  }\n\n  /**\n   * Register all necessary events\n   */\n  registerListeners() {\n    this.eventManager.addEventListener(document.body, 'mousedown', () => this.onMouseDown());\n    this.eventManager.addEventListener(document.body, 'mouseup', () => this.onMouseUp());\n\n    for (let c = 0, len = this.main.childNodes.length; c < len; c++) {\n      this.eventManager.addEventListener(this.main.childNodes[c], 'mouseenter', (event) => this.onMouseEnter(event, this.main.childNodes[c]));\n    }\n  }\n\n  /**\n   * Mouse down listener\n   *\n   * @private\n   */\n  onMouseDown() {\n    this.mouseDown = true;\n  }\n\n  /**\n   * Mouse up listener\n   *\n   * @private\n   */\n  onMouseUp() {\n    this.mouseDown = false;\n  }\n\n  /**\n   * Mouse enter listener for fragment selection functionality.\n   *\n   * @private\n   * @param {Event} event Dom event\n   * @param {HTMLElement} parentElement Part of border element.\n   */\n  onMouseEnter(event, parentElement) {\n    if (!this.mouseDown || !this.wot.getSetting('hideBorderOnMouseDownOver')) {\n      return;\n    }\n    event.preventDefault();\n    stopImmediatePropagation(event);\n\n    let _this = this;\n    let bounds = parentElement.getBoundingClientRect();\n    // Hide border to prevents selection jumping when fragmentSelection is enabled.\n    parentElement.style.display = 'none';\n\n    function isOutside(event) {\n      if (event.clientY < Math.floor(bounds.top)) {\n        return true;\n      }\n      if (event.clientY > Math.ceil(bounds.top + bounds.height)) {\n        return true;\n      }\n      if (event.clientX < Math.floor(bounds.left)) {\n        return true;\n      }\n      if (event.clientX > Math.ceil(bounds.left + bounds.width)) {\n        return true;\n      }\n    }\n\n    function handler(event) {\n      if (isOutside(event)) {\n        _this.eventManager.removeEventListener(document.body, 'mousemove', handler);\n        parentElement.style.display = 'block';\n      }\n    }\n\n    this.eventManager.addEventListener(document.body, 'mousemove', handler);\n  }\n\n  /**\n   * Create border elements\n   *\n   * @param {Object} settings\n   */\n  createBorders(settings) {\n    this.main = document.createElement('div');\n\n    let borderDivs = ['top', 'left', 'bottom', 'right', 'corner'];\n    let style = this.main.style;\n    style.position = 'absolute';\n    style.top = 0;\n    style.left = 0;\n\n    for (let i = 0; i < 5; i++) {\n      let position = borderDivs[i];\n      let div = document.createElement('div');\n      div.className = `wtBorder ${this.settings.className || ''}`; // + borderDivs[i];\n\n      if (this.settings[position] && this.settings[position].hide) {\n        div.className += ' hidden';\n      }\n      style = div.style;\n      style.backgroundColor = (this.settings[position] && this.settings[position].color) ? this.settings[position].color : settings.border.color;\n      style.height = (this.settings[position] && this.settings[position].width) ? `${this.settings[position].width}px` : `${settings.border.width}px`;\n      style.width = (this.settings[position] && this.settings[position].width) ? `${this.settings[position].width}px` : `${settings.border.width}px`;\n\n      this.main.appendChild(div);\n    }\n    this.top = this.main.childNodes[0];\n    this.left = this.main.childNodes[1];\n    this.bottom = this.main.childNodes[2];\n    this.right = this.main.childNodes[3];\n\n    this.topStyle = this.top.style;\n    this.leftStyle = this.left.style;\n    this.bottomStyle = this.bottom.style;\n    this.rightStyle = this.right.style;\n\n    this.corner = this.main.childNodes[4];\n    this.corner.className += ' corner';\n    this.cornerStyle = this.corner.style;\n    this.cornerStyle.width = this.cornerDefaultStyle.width;\n    this.cornerStyle.height = this.cornerDefaultStyle.height;\n    this.cornerStyle.border = [\n      this.cornerDefaultStyle.borderWidth,\n      this.cornerDefaultStyle.borderStyle,\n      this.cornerDefaultStyle.borderColor\n    ].join(' ');\n\n    if (isMobileBrowser()) {\n      this.createMultipleSelectorHandles();\n    }\n    this.disappear();\n\n    if (!this.wot.wtTable.bordersHolder) {\n      this.wot.wtTable.bordersHolder = document.createElement('div');\n      this.wot.wtTable.bordersHolder.className = 'htBorders';\n      this.wot.wtTable.spreader.appendChild(this.wot.wtTable.bordersHolder);\n    }\n    this.wot.wtTable.bordersHolder.insertBefore(this.main, this.wot.wtTable.bordersHolder.firstChild);\n  }\n\n  /**\n   * Create multiple selector handler for mobile devices\n   */\n  createMultipleSelectorHandles() {\n    this.selectionHandles = {\n      topLeft: document.createElement('DIV'),\n      topLeftHitArea: document.createElement('DIV'),\n      bottomRight: document.createElement('DIV'),\n      bottomRightHitArea: document.createElement('DIV')\n    };\n    let width = 10;\n    let hitAreaWidth = 40;\n\n    this.selectionHandles.topLeft.className = 'topLeftSelectionHandle';\n    this.selectionHandles.topLeftHitArea.className = 'topLeftSelectionHandle-HitArea';\n    this.selectionHandles.bottomRight.className = 'bottomRightSelectionHandle';\n    this.selectionHandles.bottomRightHitArea.className = 'bottomRightSelectionHandle-HitArea';\n\n    this.selectionHandles.styles = {\n      topLeft: this.selectionHandles.topLeft.style,\n      topLeftHitArea: this.selectionHandles.topLeftHitArea.style,\n      bottomRight: this.selectionHandles.bottomRight.style,\n      bottomRightHitArea: this.selectionHandles.bottomRightHitArea.style\n    };\n\n    let hitAreaStyle = {\n      position: 'absolute',\n      height: `${hitAreaWidth}px`,\n      width: `${hitAreaWidth}px`,\n      'border-radius': `${parseInt(hitAreaWidth / 1.5, 10)}px`,\n    };\n\n    for (let prop in hitAreaStyle) {\n      if (hasOwnProperty(hitAreaStyle, prop)) {\n        this.selectionHandles.styles.bottomRightHitArea[prop] = hitAreaStyle[prop];\n        this.selectionHandles.styles.topLeftHitArea[prop] = hitAreaStyle[prop];\n      }\n    }\n\n    let handleStyle = {\n      position: 'absolute',\n      height: `${width}px`,\n      width: `${width}px`,\n      'border-radius': `${parseInt(width / 1.5, 10)}px`,\n      background: '#F5F5FF',\n      border: '1px solid #4285c8'\n    };\n\n    for (let prop in handleStyle) {\n      if (hasOwnProperty(handleStyle, prop)) {\n        this.selectionHandles.styles.bottomRight[prop] = handleStyle[prop];\n        this.selectionHandles.styles.topLeft[prop] = handleStyle[prop];\n      }\n    }\n    this.main.appendChild(this.selectionHandles.topLeft);\n    this.main.appendChild(this.selectionHandles.bottomRight);\n    this.main.appendChild(this.selectionHandles.topLeftHitArea);\n    this.main.appendChild(this.selectionHandles.bottomRightHitArea);\n  }\n\n  isPartRange(row, col) {\n    if (this.wot.selections.area.cellRange) {\n      if (row != this.wot.selections.area.cellRange.to.row || col != this.wot.selections.area.cellRange.to.col) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  updateMultipleSelectionHandlesPosition(row, col, top, left, width, height) {\n    let handleWidth = parseInt(this.selectionHandles.styles.topLeft.width, 10);\n    let hitAreaWidth = parseInt(this.selectionHandles.styles.topLeftHitArea.width, 10);\n\n    this.selectionHandles.styles.topLeft.top = `${parseInt(top - handleWidth, 10)}px`;\n    this.selectionHandles.styles.topLeft.left = `${parseInt(left - handleWidth, 10)}px`;\n\n    this.selectionHandles.styles.topLeftHitArea.top = `${parseInt(top - ((hitAreaWidth / 4) * 3), 10)}px`;\n    this.selectionHandles.styles.topLeftHitArea.left = `${parseInt(left - ((hitAreaWidth / 4) * 3), 10)}px`;\n\n    this.selectionHandles.styles.bottomRight.top = `${parseInt(top + height, 10)}px`;\n    this.selectionHandles.styles.bottomRight.left = `${parseInt(left + width, 10)}px`;\n\n    this.selectionHandles.styles.bottomRightHitArea.top = `${parseInt(top + height - (hitAreaWidth / 4), 10)}px`;\n    this.selectionHandles.styles.bottomRightHitArea.left = `${parseInt(left + width - (hitAreaWidth / 4), 10)}px`;\n\n    if (this.settings.border.multipleSelectionHandlesVisible && this.settings.border.multipleSelectionHandlesVisible()) {\n      this.selectionHandles.styles.topLeft.display = 'block';\n      this.selectionHandles.styles.topLeftHitArea.display = 'block';\n\n      if (this.isPartRange(row, col)) {\n        this.selectionHandles.styles.bottomRight.display = 'none';\n        this.selectionHandles.styles.bottomRightHitArea.display = 'none';\n      } else {\n        this.selectionHandles.styles.bottomRight.display = 'block';\n        this.selectionHandles.styles.bottomRightHitArea.display = 'block';\n      }\n    } else {\n      this.selectionHandles.styles.topLeft.display = 'none';\n      this.selectionHandles.styles.bottomRight.display = 'none';\n      this.selectionHandles.styles.topLeftHitArea.display = 'none';\n      this.selectionHandles.styles.bottomRightHitArea.display = 'none';\n    }\n\n    if (row == this.wot.wtSettings.getSetting('fixedRowsTop') || col == this.wot.wtSettings.getSetting('fixedColumnsLeft')) {\n      this.selectionHandles.styles.topLeft.zIndex = '9999';\n      this.selectionHandles.styles.topLeftHitArea.zIndex = '9999';\n    } else {\n      this.selectionHandles.styles.topLeft.zIndex = '';\n      this.selectionHandles.styles.topLeftHitArea.zIndex = '';\n    }\n  }\n\n  /**\n   * Show border around one or many cells\n   *\n   * @param {Array} corners\n   */\n  appear(corners) {\n    if (this.disabled) {\n      return;\n    }\n    var isMultiple,\n      fromTD,\n      toTD,\n      fromOffset,\n      toOffset,\n      containerOffset,\n      top,\n      minTop,\n      left,\n      minLeft,\n      height,\n      width,\n      fromRow,\n      fromColumn,\n      toRow,\n      toColumn,\n      trimmingContainer,\n      cornerOverlappingContainer,\n      ilen;\n\n    ilen = this.wot.wtTable.getRenderedRowsCount();\n\n    for (let i = 0; i < ilen; i++) {\n      let s = this.wot.wtTable.rowFilter.renderedToSource(i);\n\n      if (s >= corners[0] && s <= corners[2]) {\n        fromRow = s;\n        break;\n      }\n    }\n\n    for (let i = ilen - 1; i >= 0; i--) {\n      let s = this.wot.wtTable.rowFilter.renderedToSource(i);\n\n      if (s >= corners[0] && s <= corners[2]) {\n        toRow = s;\n        break;\n      }\n    }\n\n    ilen = this.wot.wtTable.getRenderedColumnsCount();\n\n    for (let i = 0; i < ilen; i++) {\n      let s = this.wot.wtTable.columnFilter.renderedToSource(i);\n\n      if (s >= corners[1] && s <= corners[3]) {\n        fromColumn = s;\n        break;\n      }\n    }\n\n    for (let i = ilen - 1; i >= 0; i--) {\n      let s = this.wot.wtTable.columnFilter.renderedToSource(i);\n\n      if (s >= corners[1] && s <= corners[3]) {\n        toColumn = s;\n        break;\n      }\n    }\n    if (fromRow === void 0 || fromColumn === void 0) {\n      this.disappear();\n\n      return;\n    }\n    isMultiple = (fromRow !== toRow || fromColumn !== toColumn);\n    fromTD = this.wot.wtTable.getCell(new CellCoords(fromRow, fromColumn));\n    toTD = isMultiple ? this.wot.wtTable.getCell(new CellCoords(toRow, toColumn)) : fromTD;\n    fromOffset = offset(fromTD);\n    toOffset = isMultiple ? offset(toTD) : fromOffset;\n    containerOffset = offset(this.wot.wtTable.TABLE);\n\n    minTop = fromOffset.top;\n    height = toOffset.top + outerHeight(toTD) - minTop;\n    minLeft = fromOffset.left;\n    width = toOffset.left + outerWidth(toTD) - minLeft;\n\n    top = minTop - containerOffset.top - 1;\n    left = minLeft - containerOffset.left - 1;\n    let style = getComputedStyle(fromTD);\n\n    if (parseInt(style.borderTopWidth, 10) > 0) {\n      top += 1;\n      height = height > 0 ? height - 1 : 0;\n    }\n    if (parseInt(style.borderLeftWidth, 10) > 0) {\n      left += 1;\n      width = width > 0 ? width - 1 : 0;\n    }\n\n    this.topStyle.top = `${top}px`;\n    this.topStyle.left = `${left}px`;\n    this.topStyle.width = `${width}px`;\n    this.topStyle.display = 'block';\n\n    this.leftStyle.top = `${top}px`;\n    this.leftStyle.left = `${left}px`;\n    this.leftStyle.height = `${height}px`;\n    this.leftStyle.display = 'block';\n\n    let delta = Math.floor(this.settings.border.width / 2);\n\n    this.bottomStyle.top = `${top + height - delta}px`;\n    this.bottomStyle.left = `${left}px`;\n    this.bottomStyle.width = `${width}px`;\n    this.bottomStyle.display = 'block';\n\n    this.rightStyle.top = `${top}px`;\n    this.rightStyle.left = `${left + width - delta}px`;\n    this.rightStyle.height = `${height + 1}px`;\n    this.rightStyle.display = 'block';\n\n    if (isMobileBrowser() || (!this.hasSetting(this.settings.border.cornerVisible) || this.isPartRange(toRow, toColumn))) {\n      this.cornerStyle.display = 'none';\n    } else {\n      this.cornerStyle.top = `${top + height - 4}px`;\n      this.cornerStyle.left = `${left + width - 4}px`;\n      this.cornerStyle.borderRightWidth = this.cornerDefaultStyle.borderWidth;\n      this.cornerStyle.width = this.cornerDefaultStyle.width;\n\n      // Hide the fill handle, so the possible further adjustments won't force unneeded scrollbars.\n      this.cornerStyle.display = 'none';\n\n      trimmingContainer = getTrimmingContainer(this.wot.wtTable.TABLE);\n\n      if (toColumn === this.wot.getSetting('totalColumns') - 1) {\n        cornerOverlappingContainer = toTD.offsetLeft + outerWidth(toTD) + (parseInt(this.cornerDefaultStyle.width, 10) / 2) >= innerWidth(trimmingContainer);\n\n        if (cornerOverlappingContainer) {\n          this.cornerStyle.left = `${Math.floor(left + width - 3 - (parseInt(this.cornerDefaultStyle.width, 10) / 2))}px`;\n          this.cornerStyle.borderRightWidth = 0;\n        }\n      }\n\n      if (toRow === this.wot.getSetting('totalRows') - 1) {\n        cornerOverlappingContainer = toTD.offsetTop + outerHeight(toTD) + (parseInt(this.cornerDefaultStyle.height, 10) / 2) >= innerHeight(trimmingContainer);\n\n        if (cornerOverlappingContainer) {\n          this.cornerStyle.top = `${Math.floor(top + height - 3 - (parseInt(this.cornerDefaultStyle.height, 10) / 2))}px`;\n          this.cornerStyle.borderBottomWidth = 0;\n        }\n      }\n\n      this.cornerStyle.display = 'block';\n    }\n\n    if (isMobileBrowser()) {\n      this.updateMultipleSelectionHandlesPosition(fromRow, fromColumn, top, left, width, height);\n    }\n  }\n\n  /**\n   * Hide border\n   */\n  disappear() {\n    this.topStyle.display = 'none';\n    this.leftStyle.display = 'none';\n    this.bottomStyle.display = 'none';\n    this.rightStyle.display = 'none';\n    this.cornerStyle.display = 'none';\n\n    if (isMobileBrowser()) {\n      this.selectionHandles.styles.topLeft.display = 'none';\n      this.selectionHandles.styles.bottomRight.display = 'none';\n    }\n  }\n\n  /**\n   * @param {Function} setting\n   * @returns {*}\n   */\n  hasSetting(setting) {\n    if (typeof setting === 'function') {\n      return setting();\n    }\n\n    return !!setting;\n  }\n}\n\nexport default Border;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/border.js","const privatePool = new WeakMap();\n\n/**\n * Calculates indexes of columns to render OR columns that are visible.\n * To redo the calculation, you need to create a new calculator.\n *\n * @class ViewportColumnsCalculator\n */\nclass ViewportColumnsCalculator {\n  /**\n   * Default column width\n   *\n   * @type {Number}\n   */\n  static get DEFAULT_WIDTH() {\n    return 50;\n  }\n\n  /**\n   * @param {Number} viewportWidth Width of the viewport\n   * @param {Number} scrollOffset Current horizontal scroll position of the viewport\n   * @param {Number} totalColumns Total number of rows\n   * @param {Function} columnWidthFn Function that returns the width of the column at a given index (in px)\n   * @param {Function} overrideFn Function that changes calculated this.startRow, this.endRow (used by MergeCells plugin)\n   * @param {Boolean} onlyFullyVisible if `true`, only startRow and endRow will be indexes of rows that are fully in viewport\n   * @param {Boolean} stretchH\n   * @param {Function} [stretchingColumnWidthFn] Function that returns the new width of the stretched column.\n   */\n  constructor(viewportWidth, scrollOffset, totalColumns, columnWidthFn, overrideFn, onlyFullyVisible, stretchH,\n              stretchingColumnWidthFn = (width) => width) {\n    privatePool.set(this, {\n      viewportWidth,\n      scrollOffset,\n      totalColumns,\n      columnWidthFn,\n      overrideFn,\n      onlyFullyVisible,\n      stretchingColumnWidthFn,\n    });\n\n    /**\n     * Number of rendered/visible columns\n     *\n     * @type {Number}\n     */\n    this.count = 0;\n\n    /**\n     * Index of the first rendered/visible column (can be overwritten using overrideFn)\n     *\n     * @type {Number|null}\n     */\n    this.startColumn = null;\n\n    /**\n     * Index of the last rendered/visible column (can be overwritten using overrideFn)\n     *\n     * @type {null}\n     */\n    this.endColumn = null;\n\n    /**\n     * Position of the first rendered/visible column (in px)\n     *\n     * @type {Number|null}\n     */\n    this.startPosition = null;\n\n    this.stretchAllRatio = 0;\n    this.stretchLastWidth = 0;\n    this.stretch = stretchH;\n    this.totalTargetWidth = 0;\n    this.needVerifyLastColumnWidth = true;\n    this.stretchAllColumnsWidth = [];\n\n    this.calculate();\n  }\n\n  /**\n   * Calculates viewport\n   */\n  calculate() {\n    let sum = 0;\n    let needReverse = true;\n    let startPositions = [];\n    let columnWidth;\n\n    let priv = privatePool.get(this);\n    let onlyFullyVisible = priv.onlyFullyVisible;\n    let overrideFn = priv.overrideFn;\n    let scrollOffset = priv.scrollOffset;\n    let totalColumns = priv.totalColumns;\n    let viewportWidth = priv.viewportWidth;\n\n    for (let i = 0; i < totalColumns; i++) {\n      columnWidth = this._getColumnWidth(i);\n\n      if (sum <= scrollOffset && !onlyFullyVisible) {\n        this.startColumn = i;\n      }\n\n      // +1 pixel for row header width compensation for horizontal scroll > 0\n      let compensatedViewportWidth = scrollOffset > 0 ? viewportWidth + 1 : viewportWidth;\n\n      if (sum >= scrollOffset && sum + columnWidth <= scrollOffset + compensatedViewportWidth) {\n        if (this.startColumn == null) {\n          this.startColumn = i;\n        }\n        this.endColumn = i;\n      }\n      startPositions.push(sum);\n      sum += columnWidth;\n\n      if (!onlyFullyVisible) {\n        this.endColumn = i;\n      }\n      if (sum >= scrollOffset + viewportWidth) {\n        needReverse = false;\n        break;\n      }\n    }\n\n    if (this.endColumn === totalColumns - 1 && needReverse) {\n      this.startColumn = this.endColumn;\n\n      while (this.startColumn > 0) {\n        let viewportSum = startPositions[this.endColumn] + columnWidth - startPositions[this.startColumn - 1];\n\n        if (viewportSum <= viewportWidth || !onlyFullyVisible) {\n          this.startColumn--;\n        }\n        if (viewportSum > viewportWidth) {\n          break;\n        }\n      }\n    }\n\n    if (this.startColumn !== null && overrideFn) {\n      overrideFn(this);\n    }\n    this.startPosition = startPositions[this.startColumn];\n\n    if (this.startPosition == void 0) {\n      this.startPosition = null;\n    }\n    if (this.startColumn !== null) {\n      this.count = this.endColumn - this.startColumn + 1;\n    }\n  }\n\n  /**\n   * Recalculate columns stretching.\n   *\n   * @param {Number} totalWidth\n   */\n  refreshStretching(totalWidth) {\n    if (this.stretch === 'none') {\n      return;\n    }\n    this.totalTargetWidth = totalWidth;\n\n    let priv = privatePool.get(this);\n    let totalColumns = priv.totalColumns;\n    let sumAll = 0;\n\n    for (let i = 0; i < totalColumns; i++) {\n      let columnWidth = this._getColumnWidth(i);\n      let permanentColumnWidth = priv.stretchingColumnWidthFn(void 0, i);\n\n      if (typeof permanentColumnWidth === 'number') {\n        totalWidth -= permanentColumnWidth;\n      } else {\n        sumAll += columnWidth;\n      }\n    }\n    let remainingSize = totalWidth - sumAll;\n\n    if (this.stretch === 'all' && remainingSize > 0) {\n      this.stretchAllRatio = totalWidth / sumAll;\n      this.stretchAllColumnsWidth = [];\n      this.needVerifyLastColumnWidth = true;\n\n    } else if (this.stretch === 'last' && totalWidth !== Infinity) {\n      let columnWidth = this._getColumnWidth(totalColumns - 1);\n      let lastColumnWidth = remainingSize + columnWidth;\n\n      this.stretchLastWidth = lastColumnWidth >= 50 ? lastColumnWidth : columnWidth;\n    }\n  }\n\n  /**\n   * Get stretched column width based on stretchH (all or last) setting passed in handsontable instance.\n   *\n   * @param {Number} column\n   * @param {Number} baseWidth\n   * @returns {Number|null}\n   */\n  getStretchedColumnWidth(column, baseWidth) {\n    let result = null;\n\n    if (this.stretch === 'all' && this.stretchAllRatio !== 0) {\n      result = this._getStretchedAllColumnWidth(column, baseWidth);\n\n    } else if (this.stretch === 'last' && this.stretchLastWidth !== 0) {\n      result = this._getStretchedLastColumnWidth(column);\n    }\n\n    return result;\n  }\n\n  /**\n   * @param {Number} column\n   * @param {Number} baseWidth\n   * @returns {Number}\n   * @private\n   */\n  _getStretchedAllColumnWidth(column, baseWidth) {\n    let sumRatioWidth = 0;\n    let priv = privatePool.get(this);\n    let totalColumns = priv.totalColumns;\n\n    if (!this.stretchAllColumnsWidth[column]) {\n      let stretchedWidth = Math.round(baseWidth * this.stretchAllRatio);\n      let newStretchedWidth = priv.stretchingColumnWidthFn(stretchedWidth, column);\n\n      if (newStretchedWidth === void 0) {\n        this.stretchAllColumnsWidth[column] = stretchedWidth;\n      } else {\n        this.stretchAllColumnsWidth[column] = isNaN(newStretchedWidth) ? this._getColumnWidth(column) : newStretchedWidth;\n      }\n    }\n\n    if (this.stretchAllColumnsWidth.length === totalColumns && this.needVerifyLastColumnWidth) {\n      this.needVerifyLastColumnWidth = false;\n\n      for (let i = 0; i < this.stretchAllColumnsWidth.length; i++) {\n        sumRatioWidth += this.stretchAllColumnsWidth[i];\n      }\n      if (sumRatioWidth !== this.totalTargetWidth) {\n        this.stretchAllColumnsWidth[this.stretchAllColumnsWidth.length - 1] += this.totalTargetWidth - sumRatioWidth;\n      }\n    }\n\n    return this.stretchAllColumnsWidth[column];\n  }\n\n  /**\n   * @param {Number} column\n   * @returns {Number|null}\n   * @private\n   */\n  _getStretchedLastColumnWidth(column) {\n    let priv = privatePool.get(this);\n    let totalColumns = priv.totalColumns;\n\n    if (column === totalColumns - 1) {\n      return this.stretchLastWidth;\n    }\n\n    return null;\n  }\n\n  /**\n   * @param {Number} column Column index.\n   * @returns {Number}\n   * @private\n   */\n  _getColumnWidth(column) {\n    let width = privatePool.get(this).columnWidthFn(column);\n\n    if (width === void 0) {\n      width = ViewportColumnsCalculator.DEFAULT_WIDTH;\n    }\n\n    return width;\n  }\n}\n\nexport default ViewportColumnsCalculator;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/calculator/viewportColumns.js","const privatePool = new WeakMap();\n\n/**\n * Calculates indexes of rows to render OR rows that are visible.\n * To redo the calculation, you need to create a new calculator.\n *\n * @class ViewportRowsCalculator\n */\nclass ViewportRowsCalculator {\n  /**\n   * Default row height\n   *\n   * @type {Number}\n   */\n  static get DEFAULT_HEIGHT() {\n    return 23;\n  }\n\n  /**\n   * @param {Number} viewportHeight Height of the viewport\n   * @param {Number} scrollOffset Current vertical scroll position of the viewport\n   * @param {Number} totalRows Total number of rows\n   * @param {Function} rowHeightFn Function that returns the height of the row at a given index (in px)\n   * @param {Function} overrideFn Function that changes calculated this.startRow, this.endRow (used by MergeCells plugin)\n   * @param {Boolean} onlyFullyVisible if `true`, only startRow and endRow will be indexes of rows that are fully in viewport\n   * @param {Number} horizontalScrollbarHeight\n   */\n  constructor(viewportHeight, scrollOffset, totalRows, rowHeightFn, overrideFn, onlyFullyVisible, horizontalScrollbarHeight) {\n    privatePool.set(this, {\n      viewportHeight,\n      scrollOffset,\n      totalRows,\n      rowHeightFn,\n      overrideFn,\n      onlyFullyVisible,\n      horizontalScrollbarHeight\n    });\n\n    /**\n     * Number of rendered/visible rows\n     *\n     * @type {Number}\n     */\n    this.count = 0;\n\n    /**\n     * Index of the first rendered/visible row (can be overwritten using overrideFn)\n     *\n     * @type {Number|null}\n     */\n    this.startRow = null;\n\n    /**\n     * Index of the last rendered/visible row (can be overwritten using overrideFn)\n     *\n     * @type {null}\n     */\n    this.endRow = null;\n\n    /**\n     * Position of the first rendered/visible row (in px)\n     *\n     * @type {Number|null}\n     */\n    this.startPosition = null;\n\n    this.calculate();\n  }\n\n  /**\n   * Calculates viewport\n   */\n  calculate() {\n    let sum = 0;\n    let needReverse = true;\n    let startPositions = [];\n\n    let priv = privatePool.get(this);\n    let onlyFullyVisible = priv.onlyFullyVisible;\n    let overrideFn = priv.overrideFn;\n    let rowHeightFn = priv.rowHeightFn;\n    let scrollOffset = priv.scrollOffset;\n    let totalRows = priv.totalRows;\n    let viewportHeight = priv.viewportHeight;\n    let horizontalScrollbarHeight = priv.horizontalScrollbarHeight || 0;\n    let rowHeight;\n\n    // Calculate the number (start and end index) of rows needed\n    for (let i = 0; i < totalRows; i++) {\n      rowHeight = rowHeightFn(i);\n\n      if (rowHeight === undefined) {\n        rowHeight = ViewportRowsCalculator.DEFAULT_HEIGHT;\n      }\n      if (sum <= scrollOffset && !onlyFullyVisible) {\n        this.startRow = i;\n      }\n\n      // the row is within the \"visible range\"\n      if (sum >= scrollOffset && sum + rowHeight <= scrollOffset + viewportHeight - horizontalScrollbarHeight) {\n        if (this.startRow === null) {\n          this.startRow = i;\n        }\n        this.endRow = i;\n      }\n      startPositions.push(sum);\n      sum += rowHeight;\n\n      if (!onlyFullyVisible) {\n        this.endRow = i;\n      }\n      if (sum >= scrollOffset + viewportHeight - horizontalScrollbarHeight) {\n        needReverse = false;\n        break;\n      }\n    }\n\n    // If the estimation has reached the last row and there is still some space available in the viewport,\n    // we need to render in reverse in order to fill the whole viewport with rows\n    if (this.endRow === totalRows - 1 && needReverse) {\n      this.startRow = this.endRow;\n\n      while (this.startRow > 0) {\n        // rowHeight is the height of the last row\n        let viewportSum = startPositions[this.endRow] + rowHeight - startPositions[this.startRow - 1];\n\n        if (viewportSum <= viewportHeight - horizontalScrollbarHeight || !onlyFullyVisible) {\n          this.startRow--;\n        }\n        if (viewportSum >= viewportHeight - horizontalScrollbarHeight) {\n          break;\n        }\n      }\n    }\n\n    if (this.startRow !== null && overrideFn) {\n      overrideFn(this);\n    }\n    this.startPosition = startPositions[this.startRow];\n\n    if (this.startPosition == void 0) {\n      this.startPosition = null;\n    }\n    if (this.startRow !== null) {\n      this.count = this.endRow - this.startRow + 1;\n    }\n  }\n}\n\nexport default ViewportRowsCalculator;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/calculator/viewportRows.js","import {\n  addClass,\n  fastInnerText,\n  isVisible,\n  removeClass,\n} from './../../../helpers/dom/element';\nimport {objectEach} from './../../../helpers/object';\nimport {toUpperCaseFirst, randomString} from './../../../helpers/string';\nimport Event from './event';\nimport Overlays from './overlays';\nimport Scroll from './scroll';\nimport Settings from './settings';\nimport Table from './table';\nimport Viewport from './viewport';\n\n/**\n * @class Walkontable\n */\nclass Walkontable {\n  /**\n   * @param {Object} settings\n   */\n  constructor(settings) {\n    let originalHeaders = [];\n\n    // this is the namespace for global events\n    this.guid = `wt_${randomString()}`;\n\n    // bootstrap from settings\n    if (settings.cloneSource) {\n      this.cloneSource = settings.cloneSource;\n      this.cloneOverlay = settings.cloneOverlay;\n      this.wtSettings = settings.cloneSource.wtSettings;\n      this.wtTable = new Table(this, settings.table, settings.wtRootElement);\n      this.wtScroll = new Scroll(this);\n      this.wtViewport = settings.cloneSource.wtViewport;\n      this.wtEvent = new Event(this);\n      this.selections = this.cloneSource.selections;\n    } else {\n      this.wtSettings = new Settings(this, settings);\n      this.wtTable = new Table(this, settings.table);\n      this.wtScroll = new Scroll(this);\n      this.wtViewport = new Viewport(this);\n      this.wtEvent = new Event(this);\n      this.selections = this.getSetting('selections');\n      this.wtOverlays = new Overlays(this);\n      this.exportSettingsAsClassNames();\n    }\n\n    // find original headers\n    if (this.wtTable.THEAD.childNodes.length && this.wtTable.THEAD.childNodes[0].childNodes.length) {\n      for (let c = 0, clen = this.wtTable.THEAD.childNodes[0].childNodes.length; c < clen; c++) {\n        originalHeaders.push(this.wtTable.THEAD.childNodes[0].childNodes[c].innerHTML);\n      }\n      if (!this.getSetting('columnHeaders').length) {\n        this.update('columnHeaders', [\n          function(column, TH) {\n            fastInnerText(TH, originalHeaders[column]);\n          }\n        ]);\n      }\n    }\n    this.drawn = false;\n    this.drawInterrupted = false;\n  }\n\n  /**\n   * Force rerender of Walkontable\n   *\n   * @param {Boolean} [fastDraw=false] When `true`, try to refresh only the positions of borders without rerendering\n   *                                   the data. It will only work if Table.draw() does not force\n   *                                   rendering anyway\n   * @returns {Walkontable}\n   */\n  draw(fastDraw = false) {\n    this.drawInterrupted = false;\n\n    if (!fastDraw && !isVisible(this.wtTable.TABLE)) {\n      // draw interrupted because TABLE is not visible\n      this.drawInterrupted = true;\n    } else {\n      this.wtTable.draw(fastDraw);\n    }\n\n    return this;\n  }\n\n  /**\n   * Returns the TD at coords. If topmost is set to true, returns TD from the topmost overlay layer,\n   * if not set or set to false, returns TD from the master table.\n   *\n   * @param {CellCoords} coords\n   * @param {Boolean} [topmost=false]\n   * @returns {Object}\n   */\n  getCell(coords, topmost = false) {\n    if (!topmost) {\n      return this.wtTable.getCell(coords);\n    }\n\n    let totalRows = this.wtSettings.getSetting('totalRows');\n    let fixedRowsTop = this.wtSettings.getSetting('fixedRowsTop');\n    let fixedRowsBottom = this.wtSettings.getSetting('fixedRowsBottom');\n    let fixedColumns = this.wtSettings.getSetting('fixedColumnsLeft');\n\n    if (coords.row < fixedRowsTop && coords.col < fixedColumns) {\n      return this.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell(coords);\n\n    } else if (coords.row < fixedRowsTop) {\n      return this.wtOverlays.topOverlay.clone.wtTable.getCell(coords);\n\n    } else if (coords.col < fixedColumns && coords.row >= totalRows - fixedRowsBottom) {\n      if (this.wtOverlays.bottomLeftCornerOverlay && this.wtOverlays.bottomLeftCornerOverlay.clone) {\n        return this.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.getCell(coords);\n      }\n\n    } else if (coords.col < fixedColumns) {\n      return this.wtOverlays.leftOverlay.clone.wtTable.getCell(coords);\n\n    } else if (coords.row < totalRows && coords.row > totalRows - fixedRowsBottom) {\n      if (this.wtOverlays.bottomOverlay && this.wtOverlays.bottomOverlay.clone) {\n        return this.wtOverlays.bottomOverlay.clone.wtTable.getCell(coords);\n      }\n\n    }\n\n    return this.wtTable.getCell(coords);\n  }\n\n  /**\n   * @param {Object} settings\n   * @param {*} value\n   * @returns {Walkontable}\n   */\n  update(settings, value) {\n    return this.wtSettings.update(settings, value);\n  }\n\n  /**\n   * Scroll the viewport to a row at the given index in the data source\n   *\n   * @param {Number} row\n   * @returns {Walkontable}\n   */\n  scrollVertical(row) {\n    this.wtOverlays.topOverlay.scrollTo(row);\n    this.getSetting('onScrollVertically');\n\n    return this;\n  }\n\n  /**\n   * Scroll the viewport to a column at the given index in the data source\n   *\n   * @param {Number} column\n   * @returns {Walkontable}\n   */\n  scrollHorizontal(column) {\n    this.wtOverlays.leftOverlay.scrollTo(column);\n    this.getSetting('onScrollHorizontally');\n\n    return this;\n  }\n\n  /**\n   * Scrolls the viewport to a cell (rerenders if needed)\n   *\n   * @param {CellCoords} coords\n   * @returns {Walkontable}\n   */\n  scrollViewport(coords) {\n    this.wtScroll.scrollViewport(coords);\n\n    return this;\n  }\n\n  /**\n   * @returns {Array}\n   */\n  getViewport() {\n    return [\n      this.wtTable.getFirstVisibleRow(),\n      this.wtTable.getFirstVisibleColumn(),\n      this.wtTable.getLastVisibleRow(),\n      this.wtTable.getLastVisibleColumn()\n    ];\n  }\n\n  /**\n   * Get overlay name\n   *\n   * @returns {String}\n   */\n  getOverlayName() {\n    return this.cloneOverlay ? this.cloneOverlay.type : 'master';\n  }\n\n  /**\n   * Check overlay type of this Walkontable instance.\n   *\n   * @param {String} name Clone type @see {Overlay.CLONE_TYPES}.\n   * @returns {Boolean}\n   */\n  isOverlayName(name) {\n    if (this.cloneOverlay) {\n      return this.cloneOverlay.type === name;\n    }\n\n    return false;\n  }\n\n  /**\n   * Export settings as class names added to the parent element of the table.\n   */\n  exportSettingsAsClassNames() {\n    let toExport = {\n      rowHeaders: ['array'],\n      columnHeaders: ['array']\n    };\n    let allClassNames = [];\n    let newClassNames = [];\n\n    objectEach(toExport, (optionType, key) => {\n      if (optionType.indexOf('array') > -1 && this.getSetting(key).length) {\n        newClassNames.push(`ht${toUpperCaseFirst(key)}`);\n      }\n      allClassNames.push(`ht${toUpperCaseFirst(key)}`);\n    });\n    removeClass(this.wtTable.wtRootElement.parentNode, allClassNames);\n    addClass(this.wtTable.wtRootElement.parentNode, newClassNames);\n  }\n\n  /**\n   * Get/Set Walkontable instance setting\n   *\n   * @param {String} key\n   * @param {*} [param1]\n   * @param {*} [param2]\n   * @param {*} [param3]\n   * @param {*} [param4]\n   * @returns {*}\n   */\n  getSetting(key, param1, param2, param3, param4) {\n    // this is faster than .apply - https://github.com/handsontable/handsontable/wiki/JavaScript-&-DOM-performance-tips\n    return this.wtSettings.getSetting(key, param1, param2, param3, param4);\n  }\n\n  /**\n   * Checks if setting exists\n   *\n   * @param {String} key\n   * @returns {Boolean}\n   */\n  hasSetting(key) {\n    return this.wtSettings.has(key);\n  }\n\n  /**\n   * Destroy instance\n   */\n  destroy() {\n    this.wtOverlays.destroy();\n    this.wtEvent.destroy();\n  }\n}\n\nexport default Walkontable;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/core.js","import {\n  closestDown,\n  hasClass,\n  isChildOf,\n  getParent,\n} from './../../../helpers/dom/element';\nimport {partial} from './../../../helpers/function';\nimport {isMobileBrowser} from './../../../helpers/browser';\nimport EventManager from './../../../eventManager';\n\n/**\n *\n */\nfunction Event(instance) {\n  const that = this;\n  const eventManager = new EventManager(instance);\n\n  this.instance = instance;\n\n  var dblClickOrigin = [null, null];\n  this.dblClickTimeout = [null, null];\n\n  var onMouseDown = function(event) {\n    const activeElement = document.activeElement;\n    const getParentNode = partial(getParent, event.realTarget);\n    const realTarget = event.realTarget;\n\n    // ignore focusable element from mouse down processing (https://github.com/handsontable/handsontable/issues/3555)\n    if (realTarget === activeElement ||\n        getParentNode(0) === activeElement ||\n        getParentNode(1) === activeElement) {\n      return;\n    }\n\n    var cell = that.parentCell(realTarget);\n\n    if (hasClass(realTarget, 'corner')) {\n      that.instance.getSetting('onCellCornerMouseDown', event, realTarget);\n    } else if (cell.TD) {\n      if (that.instance.hasSetting('onCellMouseDown')) {\n        that.instance.getSetting('onCellMouseDown', event, cell.coords, cell.TD, that.instance);\n      }\n    }\n\n    if (event.button !== 2) { // if not right mouse button\n      if (cell.TD) {\n        dblClickOrigin[0] = cell.TD;\n        clearTimeout(that.dblClickTimeout[0]);\n        that.dblClickTimeout[0] = setTimeout(() => {\n          dblClickOrigin[0] = null;\n        }, 1000);\n      }\n    }\n  };\n\n  var onTouchMove = function(event) {\n    that.instance.touchMoving = true;\n  };\n\n  var longTouchTimeout;\n\n  var onTouchStart = function(event) {\n    var container = this;\n\n    eventManager.addEventListener(this, 'touchmove', onTouchMove);\n\n    // Prevent cell selection when scrolling with touch event - not the best solution performance-wise\n    that.checkIfTouchMove = setTimeout(() => {\n      if (that.instance.touchMoving === true) {\n        that.instance.touchMoving = void 0;\n\n        eventManager.removeEventListener('touchmove', onTouchMove, false);\n      }\n\n      onMouseDown(event);\n\n    }, 30);\n  };\n\n  var onMouseOver = function(event) {\n    var table,\n      td,\n      mainWOT;\n\n    if (that.instance.hasSetting('onCellMouseOver')) {\n      table = that.instance.wtTable.TABLE;\n      td = closestDown(event.realTarget, ['TD', 'TH'], table);\n      mainWOT = that.instance.cloneSource || that.instance;\n\n      if (td && td !== mainWOT.lastMouseOver && isChildOf(td, table)) {\n        mainWOT.lastMouseOver = td;\n\n        that.instance.getSetting('onCellMouseOver', event, that.instance.wtTable.getCoords(td), td, that.instance);\n      }\n    }\n  };\n\n  var onMouseOut = function(event) {\n    let table;\n    let lastTD;\n    let nextTD;\n\n    if (that.instance.hasSetting('onCellMouseOut')) {\n      table = that.instance.wtTable.TABLE;\n      lastTD = closestDown(event.realTarget, ['TD', 'TH'], table);\n      nextTD = closestDown(event.relatedTarget, ['TD', 'TH'], table);\n\n      if (lastTD && lastTD !== nextTD && isChildOf(lastTD, table)) {\n        that.instance.getSetting('onCellMouseOut', event, that.instance.wtTable.getCoords(lastTD), lastTD, that.instance);\n      }\n    }\n  };\n\n  var onMouseUp = function(event) {\n    if (event.button !== 2) { // if not right mouse button\n      var cell = that.parentCell(event.realTarget);\n\n      if (cell.TD === dblClickOrigin[0] && cell.TD === dblClickOrigin[1]) {\n        if (hasClass(event.realTarget, 'corner')) {\n          that.instance.getSetting('onCellCornerDblClick', event, cell.coords, cell.TD, that.instance);\n\n        } else {\n          that.instance.getSetting('onCellDblClick', event, cell.coords, cell.TD, that.instance);\n        }\n\n        dblClickOrigin[0] = null;\n        dblClickOrigin[1] = null;\n\n      } else if (cell.TD === dblClickOrigin[0]) {\n        that.instance.getSetting('onCellMouseUp', event, cell.coords, cell.TD, that.instance);\n\n        dblClickOrigin[1] = cell.TD;\n        clearTimeout(that.dblClickTimeout[1]);\n        that.dblClickTimeout[1] = setTimeout(() => {\n          dblClickOrigin[1] = null;\n        }, 500);\n\n      } else if (cell.TD && that.instance.hasSetting('onCellMouseUp')) {\n        that.instance.getSetting('onCellMouseUp', event, cell.coords, cell.TD, that.instance);\n      }\n    }\n  };\n\n  var onTouchEnd = function(event) {\n    clearTimeout(longTouchTimeout);\n    // that.instance.longTouch == void 0;\n\n    event.preventDefault();\n    onMouseUp(event);\n\n    // eventManager.removeEventListener(that.instance.wtTable.holder, \"mouseup\", onMouseUp);\n  };\n\n  eventManager.addEventListener(this.instance.wtTable.holder, 'mousedown', onMouseDown);\n  eventManager.addEventListener(this.instance.wtTable.TABLE, 'mouseover', onMouseOver);\n  eventManager.addEventListener(this.instance.wtTable.TABLE, 'mouseout', onMouseOut);\n  eventManager.addEventListener(this.instance.wtTable.holder, 'mouseup', onMouseUp);\n\n  // check if full HOT instance, or detached WOT AND run on mobile device\n  if (this.instance.wtTable.holder.parentNode.parentNode && isMobileBrowser() && !that.instance.wtTable.isWorkingOnClone()) {\n    var classSelector = `.${this.instance.wtTable.holder.parentNode.className.split(' ').join('.')}`;\n\n    eventManager.addEventListener(this.instance.wtTable.holder, 'touchstart', (event) => {\n      that.instance.touchApplied = true;\n      if (isChildOf(event.target, classSelector)) {\n        onTouchStart.call(event.target, event);\n      }\n    });\n    eventManager.addEventListener(this.instance.wtTable.holder, 'touchend', (event) => {\n      that.instance.touchApplied = false;\n      if (isChildOf(event.target, classSelector)) {\n        onTouchEnd.call(event.target, event);\n      }\n    });\n\n    if (!that.instance.momentumScrolling) {\n      that.instance.momentumScrolling = {};\n    }\n    eventManager.addEventListener(this.instance.wtTable.holder, 'scroll', (event) => {\n      clearTimeout(that.instance.momentumScrolling._timeout);\n\n      if (!that.instance.momentumScrolling.ongoing) {\n        that.instance.getSetting('onBeforeTouchScroll');\n      }\n      that.instance.momentumScrolling.ongoing = true;\n\n      that.instance.momentumScrolling._timeout = setTimeout(() => {\n        if (!that.instance.touchApplied) {\n          that.instance.momentumScrolling.ongoing = false;\n\n          that.instance.getSetting('onAfterMomentumScroll');\n        }\n      }, 200);\n    });\n  }\n\n  eventManager.addEventListener(window, 'resize', () => {\n    if (that.instance.getSetting('stretchH') !== 'none') {\n      that.instance.draw();\n    }\n  });\n\n  this.destroy = function() {\n    clearTimeout(this.dblClickTimeout[0]);\n    clearTimeout(this.dblClickTimeout[1]);\n\n    eventManager.destroy();\n  };\n}\n\nEvent.prototype.parentCell = function(elem) {\n  var cell = {};\n  var TABLE = this.instance.wtTable.TABLE;\n  var TD = closestDown(elem, ['TD', 'TH'], TABLE);\n\n  if (TD) {\n    cell.coords = this.instance.wtTable.getCoords(TD);\n    cell.TD = TD;\n\n  } else if (hasClass(elem, 'wtBorder') && hasClass(elem, 'current')) {\n    cell.coords = this.instance.selections.current.cellRange.highlight; // selections.current is current selected cell\n    cell.TD = this.instance.wtTable.getCell(cell.coords);\n\n  } else if (hasClass(elem, 'wtBorder') && hasClass(elem, 'area')) {\n    if (this.instance.selections.area.cellRange) {\n      cell.coords = this.instance.selections.area.cellRange.to; // selections.area is area selected cells\n      cell.TD = this.instance.wtTable.getCell(cell.coords);\n    }\n  }\n\n  return cell;\n};\n\nexport default Event;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/event.js","/**\n * @class ColumnFilter\n */\nclass ColumnFilter {\n  /**\n   * @param {Number} offset\n   * @param {Number} total\n   * @param {Number} countTH\n   */\n  constructor(offset, total, countTH) {\n    this.offset = offset;\n    this.total = total;\n    this.countTH = countTH;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  offsetted(index) {\n    return index + this.offset;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  unOffsetted(index) {\n    return index - this.offset;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  renderedToSource(index) {\n    return this.offsetted(index);\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  sourceToRendered(index) {\n    return this.unOffsetted(index);\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  offsettedTH(index) {\n    return index - this.countTH;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  unOffsettedTH(index) {\n    return index + this.countTH;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  visibleRowHeadedColumnToSourceColumn(index) {\n    return this.renderedToSource(this.offsettedTH(index));\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  sourceColumnToVisibleRowHeadedColumn(index) {\n    return this.unOffsettedTH(this.sourceToRendered(index));\n  }\n}\n\nexport default ColumnFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/filter/column.js","/**\n * @class RowFilter\n */\nclass RowFilter {\n  /**\n   * @param {Number} offset\n   * @param {Number} total\n   * @param {Number} countTH\n   */\n  constructor(offset, total, countTH) {\n    this.offset = offset;\n    this.total = total;\n    this.countTH = countTH;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  offsetted(index) {\n    return index + this.offset;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  unOffsetted(index) {\n    return index - this.offset;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  renderedToSource(index) {\n    return this.offsetted(index);\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  sourceToRendered(index) {\n    return this.unOffsetted(index);\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  offsettedTH(index) {\n    return index - this.countTH;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  unOffsettedTH(index) {\n    return index + this.countTH;\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  visibleColHeadedRowToSourceRow(index) {\n    return this.renderedToSource(this.offsettedTH(index));\n  }\n\n  /**\n   * @param index\n   * @returns {Number}\n   */\n  sourceRowToVisibleColHeadedRow(index) {\n    return this.unOffsettedTH(this.sourceToRendered(index));\n  }\n}\n\nexport default RowFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/filter/row.js","import {\n  getScrollableElement,\n  getScrollbarWidth,\n  getScrollLeft,\n  getScrollTop,\n} from './../../../helpers/dom/element';\nimport {arrayEach} from './../../../helpers/array';\nimport {isKey} from './../../../helpers/unicode';\nimport {isMobileBrowser} from './../../../helpers/browser';\nimport EventManager from './../../../eventManager';\nimport Overlay from './overlay/_base.js';\n\n/**\n * @class Overlays\n */\nclass Overlays {\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    this.wot = wotInstance;\n\n    // legacy support\n    this.instance = this.wot;\n    this.eventManager = new EventManager(this.wot);\n\n    this.wot.update('scrollbarWidth', getScrollbarWidth());\n    this.wot.update('scrollbarHeight', getScrollbarWidth());\n\n    this.scrollableElement = getScrollableElement(this.wot.wtTable.TABLE);\n\n    this.prepareOverlays();\n\n    this.destroyed = false;\n    this.keyPressed = false;\n    this.spreaderLastSize = {\n      width: null,\n      height: null,\n    };\n    this.overlayScrollPositions = {\n      master: {\n        top: 0,\n        left: 0,\n      },\n      top: {\n        top: null,\n        left: 0,\n      },\n      bottom: {\n        top: null,\n        left: 0\n      },\n      left: {\n        top: 0,\n        left: null\n      }\n    };\n\n    this.pendingScrollCallbacks = {\n      master: {\n        top: 0,\n        left: 0,\n      },\n      top: {\n        left: 0,\n      },\n      bottom: {\n        left: 0,\n      },\n      left: {\n        top: 0,\n      }\n    };\n\n    this.verticalScrolling = false;\n    this.horizontalScrolling = false;\n    this.delegatedScrollCallback = false;\n\n    this.registeredListeners = [];\n\n    this.registerListeners();\n  }\n\n  /**\n   * Prepare overlays based on user settings.\n   *\n   * @returns {Boolean} Returns `true` if changes applied to overlay needs scroll synchronization.\n   */\n  prepareOverlays() {\n    let syncScroll = false;\n\n    if (this.topOverlay) {\n      syncScroll = this.topOverlay.updateStateOfRendering() || syncScroll;\n    } else {\n      this.topOverlay = Overlay.createOverlay(Overlay.CLONE_TOP, this.wot);\n    }\n\n    if (!Overlay.hasOverlay(Overlay.CLONE_BOTTOM)) {\n      this.bottomOverlay = {\n        needFullRender: false,\n        updateStateOfRendering: () => false,\n      };\n    }\n    if (!Overlay.hasOverlay(Overlay.CLONE_BOTTOM_LEFT_CORNER)) {\n      this.bottomLeftCornerOverlay = {\n        needFullRender: false,\n        updateStateOfRendering: () => false,\n      };\n    }\n\n    if (this.bottomOverlay) {\n      syncScroll = this.bottomOverlay.updateStateOfRendering() || syncScroll;\n    } else {\n      this.bottomOverlay = Overlay.createOverlay(Overlay.CLONE_BOTTOM, this.wot);\n    }\n\n    if (this.leftOverlay) {\n      syncScroll = this.leftOverlay.updateStateOfRendering() || syncScroll;\n    } else {\n      this.leftOverlay = Overlay.createOverlay(Overlay.CLONE_LEFT, this.wot);\n    }\n\n    if (this.topOverlay.needFullRender && this.leftOverlay.needFullRender) {\n      if (this.topLeftCornerOverlay) {\n        syncScroll = this.topLeftCornerOverlay.updateStateOfRendering() || syncScroll;\n      } else {\n        this.topLeftCornerOverlay = Overlay.createOverlay(Overlay.CLONE_TOP_LEFT_CORNER, this.wot);\n      }\n    }\n\n    if (this.bottomOverlay.needFullRender && this.leftOverlay.needFullRender) {\n      if (this.bottomLeftCornerOverlay) {\n        syncScroll = this.bottomLeftCornerOverlay.updateStateOfRendering() || syncScroll;\n      } else {\n        this.bottomLeftCornerOverlay = Overlay.createOverlay(Overlay.CLONE_BOTTOM_LEFT_CORNER, this.wot);\n      }\n    }\n\n    if (this.wot.getSetting('debug') && !this.debug) {\n      this.debug = Overlay.createOverlay(Overlay.CLONE_DEBUG, this.wot);\n    }\n\n    return syncScroll;\n  }\n\n  /**\n   * Refresh and redraw table\n   */\n  refreshAll() {\n    if (!this.wot.drawn) {\n      return;\n    }\n    if (!this.wot.wtTable.holder.parentNode) {\n      // Walkontable was detached from DOM, but this handler was not removed\n      this.destroy();\n\n      return;\n    }\n    this.wot.draw(true);\n\n    if (this.verticalScrolling) {\n      this.leftOverlay.onScroll();\n    }\n\n    if (this.horizontalScrolling) {\n      this.topOverlay.onScroll();\n    }\n\n    this.verticalScrolling = false;\n    this.horizontalScrolling = false;\n  }\n\n  /**\n   * Register all necessary event listeners.\n   */\n  registerListeners() {\n    const topOverlayScrollable = this.topOverlay.mainTableScrollableElement;\n    const leftOverlayScrollable = this.leftOverlay.mainTableScrollableElement;\n\n    let listenersToRegister = [];\n    listenersToRegister.push([document.documentElement, 'keydown', (event) => this.onKeyDown(event)]);\n    listenersToRegister.push([document.documentElement, 'keyup', () => this.onKeyUp()]);\n    listenersToRegister.push([document, 'visibilitychange', () => this.onKeyUp()]);\n    listenersToRegister.push([topOverlayScrollable, 'scroll', (event) => this.onTableScroll(event)]);\n\n    if (topOverlayScrollable !== leftOverlayScrollable) {\n      listenersToRegister.push([leftOverlayScrollable, 'scroll', (event) => this.onTableScroll(event)]);\n    }\n\n    if (this.topOverlay.needFullRender) {\n      listenersToRegister.push([this.topOverlay.clone.wtTable.holder, 'scroll', (event) => this.onTableScroll(event)]);\n      listenersToRegister.push([this.topOverlay.clone.wtTable.holder, 'wheel', (event) => this.onTableScroll(event)]);\n    }\n\n    if (this.bottomOverlay.needFullRender) {\n      listenersToRegister.push([this.bottomOverlay.clone.wtTable.holder, 'scroll', (event) => this.onTableScroll(event)]);\n      listenersToRegister.push([this.bottomOverlay.clone.wtTable.holder, 'wheel', (event) => this.onTableScroll(event)]);\n    }\n\n    if (this.leftOverlay.needFullRender) {\n      listenersToRegister.push([this.leftOverlay.clone.wtTable.holder, 'scroll', (event) => this.onTableScroll(event)]);\n      listenersToRegister.push([this.leftOverlay.clone.wtTable.holder, 'wheel', (event) => this.onTableScroll(event)]);\n    }\n\n    if (this.topLeftCornerOverlay && this.topLeftCornerOverlay.needFullRender) {\n      listenersToRegister.push([this.topLeftCornerOverlay.clone.wtTable.holder, 'wheel', (event) => this.onTableScroll(event)]);\n    }\n\n    if (this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.needFullRender) {\n      listenersToRegister.push([this.bottomLeftCornerOverlay.clone.wtTable.holder, 'wheel', (event) => this.onTableScroll(event)]);\n    }\n\n    if (this.topOverlay.trimmingContainer !== window && this.leftOverlay.trimmingContainer !== window) {\n      // This is necessary?\n      // eventManager.addEventListener(window, 'scroll', (event) => this.refreshAll(event));\n      listenersToRegister.push([window, 'wheel', (event) => {\n        let overlay;\n        let deltaY = event.wheelDeltaY || event.deltaY;\n        let deltaX = event.wheelDeltaX || event.deltaX;\n\n        if (this.topOverlay.clone.wtTable.holder.contains(event.realTarget)) {\n          overlay = 'top';\n\n        } else if (this.bottomOverlay.clone && this.bottomOverlay.clone.wtTable.holder.contains(event.realTarget)) {\n          overlay = 'bottom';\n\n        } else if (this.leftOverlay.clone.wtTable.holder.contains(event.realTarget)) {\n          overlay = 'left';\n\n        } else if (this.topLeftCornerOverlay && this.topLeftCornerOverlay.clone && this.topLeftCornerOverlay.clone.wtTable.holder.contains(event.realTarget)) {\n          overlay = 'topLeft';\n\n        } else if (this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone && this.bottomLeftCornerOverlay.clone.wtTable.holder.contains(event.realTarget)) {\n          overlay = 'bottomLeft';\n        }\n\n        if ((overlay == 'top' && deltaY !== 0) ||\n          (overlay == 'left' && deltaX !== 0) ||\n          (overlay == 'bottom' && deltaY !== 0) ||\n          ((overlay === 'topLeft' || overlay === 'bottomLeft') && (deltaY !== 0 || deltaX !== 0))) {\n\n          event.preventDefault();\n        }\n      }]);\n    }\n\n    while (listenersToRegister.length) {\n      let listener = listenersToRegister.pop();\n      this.eventManager.addEventListener(listener[0], listener[1], listener[2]);\n\n      this.registeredListeners.push(listener);\n    }\n  }\n\n  /**\n   * Deregister all previously registered listeners.\n   */\n  deregisterListeners() {\n    while (this.registeredListeners.length) {\n      let listener = this.registeredListeners.pop();\n      this.eventManager.removeEventListener(listener[0], listener[1], listener[2]);\n    }\n  }\n\n  /**\n   * Scroll listener\n   *\n   * @param {Event} event\n   */\n  onTableScroll(event) {\n    // if mobile browser, do not update scroll positions, as the overlays are hidden during the scroll\n    if (isMobileBrowser()) {\n      return;\n    }\n    const masterHorizontal = this.leftOverlay.mainTableScrollableElement;\n    const masterVertical = this.topOverlay.mainTableScrollableElement;\n    const target = event.target;\n\n    // For key press, sync only master -> overlay position because while pressing Walkontable.render is triggered\n    // by hot.refreshBorder\n    if (this.keyPressed) {\n      if ((masterVertical !== window && target !== window && !event.target.contains(masterVertical)) ||\n          (masterHorizontal !== window && target !== window && !event.target.contains(masterHorizontal))) {\n        return;\n      }\n    }\n\n    if (event.type === 'scroll') {\n      this.syncScrollPositions(event);\n\n    } else {\n      this.translateMouseWheelToScroll(event);\n    }\n  }\n\n  /**\n   * Key down listener\n   */\n  onKeyDown(event) {\n    this.keyPressed = isKey(event.keyCode, 'ARROW_UP|ARROW_RIGHT|ARROW_DOWN|ARROW_LEFT');\n  }\n\n  /**\n   * Key up listener\n   */\n  onKeyUp() {\n    this.keyPressed = false;\n  }\n\n  /**\n   * Translate wheel event into scroll event and sync scroll overlays position\n   *\n   * @private\n   * @param {Event} event\n   * @returns {Boolean}\n   */\n  translateMouseWheelToScroll(event) {\n    const topOverlay = this.topOverlay.clone.wtTable.holder;\n    const bottomOverlay = this.bottomOverlay.clone ? this.bottomOverlay.clone.wtTable.holder : null;\n    const leftOverlay = this.leftOverlay.clone.wtTable.holder;\n    const topLeftCornerOverlay = this.topLeftCornerOverlay && this.topLeftCornerOverlay.clone ? this.topLeftCornerOverlay.clone.wtTable.holder : null;\n    const bottomLeftCornerOverlay = this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone ? this.bottomLeftCornerOverlay.clone.wtTable.holder : null;\n    const mouseWheelSpeedRatio = -0.2;\n    let deltaY = event.wheelDeltaY || (-1) * event.deltaY;\n    let deltaX = event.wheelDeltaX || (-1) * event.deltaX;\n    let parentHolder = null;\n    let eventMockup = {type: 'wheel'};\n    let tempElem = event.target;\n    let delta = null;\n\n    // Fix for extremely slow header scrolling with a mousewheel on Firefox\n    if (event.deltaMode === 1) {\n      deltaY *= 120;\n      deltaX *= 120;\n    }\n\n    while (tempElem != document && tempElem != null) {\n      if (tempElem.className.indexOf('wtHolder') > -1) {\n        parentHolder = tempElem;\n        break;\n      }\n      tempElem = tempElem.parentNode;\n    }\n    eventMockup.target = parentHolder;\n\n    if (parentHolder === topLeftCornerOverlay || parentHolder === bottomLeftCornerOverlay) {\n      this.syncScrollPositions(eventMockup, mouseWheelSpeedRatio * deltaX, 'x');\n      this.syncScrollPositions(eventMockup, mouseWheelSpeedRatio * deltaY, 'y');\n\n    } else {\n      if (parentHolder === topOverlay || parentHolder === bottomOverlay) {\n        delta = deltaY;\n\n      } else if (parentHolder === leftOverlay) {\n        delta = deltaX;\n      }\n\n      this.syncScrollPositions(eventMockup, mouseWheelSpeedRatio * delta);\n    }\n\n    return false;\n  }\n\n  /**\n   * Synchronize scroll position between master table and overlay table.\n   *\n   * @private\n   * @param {Event|Object} event\n   * @param {Number} [fakeScrollValue=null]\n   * @param {String} [fakeScrollDirection=null] `x` or `y`.\n   */\n  syncScrollPositions(event, fakeScrollValue = null, fakeScrollDirection = null) {\n    if (this.destroyed) {\n      return;\n    }\n    if (arguments.length === 0) {\n      this.syncScrollWithMaster();\n\n      return;\n    }\n    let masterHorizontal = this.leftOverlay.mainTableScrollableElement;\n    let masterVertical = this.topOverlay.mainTableScrollableElement;\n    let target = event.target;\n    let tempScrollValue = 0;\n    let scrollValueChanged = false;\n    let topOverlay;\n    let leftOverlay;\n    let topLeftCornerOverlay;\n    let bottomLeftCornerOverlay;\n    let bottomOverlay;\n    let delegatedScroll = false;\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n\n    if (this.topOverlay.needFullRender) {\n      topOverlay = this.topOverlay.clone.wtTable.holder;\n    }\n\n    if (this.bottomOverlay.needFullRender) {\n      bottomOverlay = this.bottomOverlay.clone.wtTable.holder;\n    }\n\n    if (this.leftOverlay.needFullRender) {\n      leftOverlay = this.leftOverlay.clone.wtTable.holder;\n    }\n\n    if (this.leftOverlay.needFullRender && this.topOverlay.needFullRender) {\n      topLeftCornerOverlay = this.topLeftCornerOverlay.clone.wtTable.holder;\n    }\n\n    if (this.leftOverlay.needFullRender && this.bottomOverlay.needFullRender) {\n      bottomLeftCornerOverlay = this.bottomLeftCornerOverlay.clone.wtTable.holder;\n    }\n\n    if (target === document) {\n      target = window;\n    }\n\n    if (target === masterHorizontal || target === masterVertical) {\n      if (preventOverflow) {\n        tempScrollValue = getScrollLeft(this.scrollableElement);\n      } else {\n        tempScrollValue = getScrollLeft(target);\n      }\n\n      // if scrolling the master table - populate the scroll values to both top and left overlays\n      this.horizontalScrolling = true;\n      this.overlayScrollPositions.master.left = tempScrollValue;\n      scrollValueChanged = true;\n\n      if (this.pendingScrollCallbacks.master.left > 0) {\n        this.pendingScrollCallbacks.master.left--;\n\n      } else {\n        if (topOverlay && topOverlay.scrollLeft !== tempScrollValue) {\n\n          if (fakeScrollValue == null) {\n            this.pendingScrollCallbacks.top.left++;\n          }\n\n          topOverlay.scrollLeft = tempScrollValue;\n          delegatedScroll = (masterHorizontal !== window);\n        }\n\n        if (bottomOverlay && bottomOverlay.scrollLeft !== tempScrollValue) {\n\n          if (fakeScrollValue == null) {\n            this.pendingScrollCallbacks.bottom.left++;\n          }\n\n          bottomOverlay.scrollLeft = tempScrollValue;\n          delegatedScroll = (masterHorizontal !== window);\n        }\n      }\n\n      tempScrollValue = getScrollTop(target);\n\n      this.verticalScrolling = true;\n      this.overlayScrollPositions.master.top = tempScrollValue;\n      scrollValueChanged = true;\n\n      if (this.pendingScrollCallbacks.master.top > 0) {\n        this.pendingScrollCallbacks.master.top--;\n\n      } else if (leftOverlay && leftOverlay.scrollTop !== tempScrollValue) {\n        if (fakeScrollValue == null) {\n          this.pendingScrollCallbacks.left.top++;\n        }\n\n        leftOverlay.scrollTop = tempScrollValue;\n        delegatedScroll = (masterVertical !== window);\n      }\n\n    } else if (target === bottomOverlay) {\n      tempScrollValue = getScrollLeft(target);\n\n      // if scrolling the bottom overlay - populate the horizontal scroll to the master table\n      this.horizontalScrolling = true;\n      this.overlayScrollPositions.bottom.left = tempScrollValue;\n      scrollValueChanged = true;\n\n      if (this.pendingScrollCallbacks.bottom.left > 0) {\n        this.pendingScrollCallbacks.bottom.left--;\n\n      } else {\n        if (fakeScrollValue == null) {\n          this.pendingScrollCallbacks.master.left++;\n        }\n\n        masterHorizontal.scrollLeft = tempScrollValue;\n\n        if (topOverlay && topOverlay.scrollLeft !== tempScrollValue) {\n          if (fakeScrollValue == null) {\n            this.pendingScrollCallbacks.top.left++;\n          }\n\n          topOverlay.scrollLeft = tempScrollValue;\n          delegatedScroll = (masterVertical !== window);\n        }\n\n      }\n\n      // \"fake\" scroll value calculated from the mousewheel event\n      if (fakeScrollValue !== null) {\n        scrollValueChanged = true;\n        masterVertical.scrollTop += fakeScrollValue;\n      }\n\n    } else if (target === topOverlay) {\n      tempScrollValue = getScrollLeft(target);\n\n      // if scrolling the top overlay - populate the horizontal scroll to the master table\n      this.horizontalScrolling = true;\n      this.overlayScrollPositions.top.left = tempScrollValue;\n      scrollValueChanged = true;\n\n      if (this.pendingScrollCallbacks.top.left > 0) {\n        this.pendingScrollCallbacks.top.left--;\n\n      } else {\n\n        if (fakeScrollValue == null) {\n          this.pendingScrollCallbacks.master.left++;\n        }\n\n        masterHorizontal.scrollLeft = tempScrollValue;\n      }\n\n      // \"fake\" scroll value calculated from the mousewheel event\n      if (fakeScrollValue !== null) {\n        scrollValueChanged = true;\n        masterVertical.scrollTop += fakeScrollValue;\n      }\n\n      if (bottomOverlay && bottomOverlay.scrollLeft !== tempScrollValue) {\n        if (fakeScrollValue == null) {\n          this.pendingScrollCallbacks.bottom.left++;\n        }\n\n        bottomOverlay.scrollLeft = tempScrollValue;\n        delegatedScroll = (masterVertical !== window);\n      }\n\n    } else if (target === leftOverlay) {\n      tempScrollValue = getScrollTop(target);\n\n      // if scrolling the left overlay - populate the vertical scroll to the master table\n      if (this.overlayScrollPositions.left.top !== tempScrollValue) {\n        this.verticalScrolling = true;\n        this.overlayScrollPositions.left.top = tempScrollValue;\n        scrollValueChanged = true;\n\n        if (this.pendingScrollCallbacks.left.top > 0) {\n          this.pendingScrollCallbacks.left.top--;\n\n        } else {\n          if (fakeScrollValue == null) {\n            this.pendingScrollCallbacks.master.top++;\n          }\n\n          masterVertical.scrollTop = tempScrollValue;\n        }\n      }\n\n      // \"fake\" scroll value calculated from the mousewheel event\n      if (fakeScrollValue !== null) {\n        scrollValueChanged = true;\n        masterVertical.scrollLeft += fakeScrollValue;\n      }\n    } else if (target === topLeftCornerOverlay || target === bottomLeftCornerOverlay) {\n      if (fakeScrollValue !== null) {\n        scrollValueChanged = true;\n\n        if (fakeScrollDirection === 'x') {\n          masterVertical.scrollLeft += fakeScrollValue;\n        } else if (fakeScrollDirection === 'y') {\n          masterVertical.scrollTop += fakeScrollValue;\n        }\n      }\n    }\n\n    if (!this.keyPressed && scrollValueChanged && event.type === 'scroll') {\n      if (this.delegatedScrollCallback) {\n        this.delegatedScrollCallback = false;\n      } else {\n        this.refreshAll();\n      }\n\n      if (delegatedScroll) {\n        this.delegatedScrollCallback = true;\n      }\n    }\n  }\n\n  /**\n   * Synchronize overlay scrollbars with the master scrollbar\n   */\n  syncScrollWithMaster() {\n    const master = this.topOverlay.mainTableScrollableElement;\n    const {scrollLeft, scrollTop} = master;\n\n    if (this.topOverlay.needFullRender) {\n      this.topOverlay.clone.wtTable.holder.scrollLeft = scrollLeft;\n    }\n    if (this.bottomOverlay.needFullRender) {\n      this.bottomOverlay.clone.wtTable.holder.scrollLeft = scrollLeft;\n    }\n    if (this.leftOverlay.needFullRender) {\n      this.leftOverlay.clone.wtTable.holder.scrollTop = scrollTop;\n    }\n  }\n\n  /**\n   * Update the main scrollable elements for all the overlays.\n   */\n  updateMainScrollableElements() {\n    this.deregisterListeners();\n\n    this.leftOverlay.updateMainScrollableElement();\n    this.topOverlay.updateMainScrollableElement();\n\n    if (this.bottomOverlay.needFullRender) {\n      this.bottomOverlay.updateMainScrollableElement();\n    }\n\n    this.scrollableElement = getScrollableElement(this.wot.wtTable.TABLE);\n\n    this.registerListeners();\n  }\n\n  /**\n   *\n   */\n  destroy() {\n    this.eventManager.destroy();\n    this.topOverlay.destroy();\n\n    if (this.bottomOverlay.clone) {\n      this.bottomOverlay.destroy();\n    }\n    this.leftOverlay.destroy();\n\n    if (this.topLeftCornerOverlay) {\n      this.topLeftCornerOverlay.destroy();\n    }\n\n    if (this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone) {\n      this.bottomLeftCornerOverlay.destroy();\n    }\n\n    if (this.debug) {\n      this.debug.destroy();\n    }\n    this.destroyed = true;\n  }\n\n  /**\n   * @param {Boolean} [fastDraw=false]\n   */\n  refresh(fastDraw = false) {\n    if (this.topOverlay.areElementSizesAdjusted && this.leftOverlay.areElementSizesAdjusted) {\n      let container = this.wot.wtTable.wtRootElement.parentNode || this.wot.wtTable.wtRootElement;\n      let width = container.clientWidth;\n      let height = container.clientHeight;\n\n      if (width !== this.spreaderLastSize.width || height !== this.spreaderLastSize.height) {\n        this.spreaderLastSize.width = width;\n        this.spreaderLastSize.height = height;\n        this.adjustElementsSize();\n      }\n    }\n\n    if (this.bottomOverlay.clone) {\n      this.bottomOverlay.refresh(fastDraw);\n    }\n\n    this.leftOverlay.refresh(fastDraw);\n    this.topOverlay.refresh(fastDraw);\n\n    if (this.topLeftCornerOverlay) {\n      this.topLeftCornerOverlay.refresh(fastDraw);\n    }\n\n    if (this.bottomLeftCornerOverlay && this.bottomLeftCornerOverlay.clone) {\n      this.bottomLeftCornerOverlay.refresh(fastDraw);\n    }\n\n    if (this.debug) {\n      this.debug.refresh(fastDraw);\n    }\n  }\n\n  /**\n   * Adjust overlays elements size and master table size\n   *\n   * @param {Boolean} [force=false]\n   */\n  adjustElementsSize(force = false) {\n    let totalColumns = this.wot.getSetting('totalColumns');\n    let totalRows = this.wot.getSetting('totalRows');\n    let headerRowSize = this.wot.wtViewport.getRowHeaderWidth();\n    let headerColumnSize = this.wot.wtViewport.getColumnHeaderHeight();\n    let hiderStyle = this.wot.wtTable.hider.style;\n\n    hiderStyle.width = `${headerRowSize + this.leftOverlay.sumCellSizes(0, totalColumns)}px`;\n    hiderStyle.height = `${headerColumnSize + this.topOverlay.sumCellSizes(0, totalRows) + 1}px`;\n\n    this.topOverlay.adjustElementsSize(force);\n    this.leftOverlay.adjustElementsSize(force);\n\n    if (this.bottomOverlay.clone) {\n      this.bottomOverlay.adjustElementsSize(force);\n    }\n  }\n\n  /**\n   *\n   */\n  applyToDOM() {\n    if (!this.topOverlay.areElementSizesAdjusted || !this.leftOverlay.areElementSizesAdjusted) {\n      this.adjustElementsSize();\n    }\n    this.topOverlay.applyToDOM();\n\n    if (this.bottomOverlay.clone) {\n      this.bottomOverlay.applyToDOM();\n    }\n\n    this.leftOverlay.applyToDOM();\n  }\n\n  /**\n   * Get the parent overlay of the provided element.\n   *\n   * @param {HTMLElement} element\n   * @returns {Object|null}\n   */\n  getParentOverlay(element) {\n    if (!element) {\n      return null;\n    }\n\n    let overlays = [\n      this.topOverlay,\n      this.leftOverlay,\n      this.bottomOverlay,\n      this.topLeftCornerOverlay,\n      this.bottomLeftCornerOverlay\n    ];\n    let result = null;\n\n    arrayEach(overlays, (elem, i) => {\n      if (!elem) {\n        return;\n      }\n\n      if (elem.clone && elem.clone.wtTable.TABLE.contains(element)) {\n        result = elem.clone;\n      }\n    });\n\n    return result;\n  }\n}\n\nexport default Overlays;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/overlays.js","import {\n  innerHeight,\n  innerWidth,\n  getScrollLeft,\n  getScrollTop,\n  offset,\n} from './../../../helpers/dom/element';\nimport {rangeEach, rangeEachReverse} from './../../../helpers/number';\n\n/**\n * @class Scroll\n */\nclass Scroll {\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    this.wot = wotInstance;\n\n    // legacy support\n    this.instance = wotInstance;\n  }\n\n  /**\n   * Scrolls viewport to a cell by minimum number of cells\n   *\n   * @param {CellCoords} coords\n   */\n  scrollViewport(coords) {\n    if (!this.wot.drawn) {\n      return;\n    }\n\n    const {\n      topOverlay,\n      leftOverlay,\n      totalRows,\n      totalColumns,\n      fixedRowsTop,\n      fixedRowsBottom,\n      fixedColumnsLeft,\n      } = this._getVariables();\n\n    if (coords.row < 0 || coords.row > Math.max(totalRows - 1, 0)) {\n      throw new Error(`row ${coords.row} does not exist`);\n    }\n\n    if (coords.col < 0 || coords.col > Math.max(totalColumns - 1, 0)) {\n      throw new Error(`column ${coords.col} does not exist`);\n    }\n\n    if (coords.row >= fixedRowsTop && coords.row < this.getFirstVisibleRow()) {\n      topOverlay.scrollTo(coords.row);\n\n    } else if (coords.row > this.getLastVisibleRow() && coords.row < totalRows - fixedRowsBottom) {\n      topOverlay.scrollTo(coords.row, true);\n    }\n\n    if (coords.col >= fixedColumnsLeft && coords.col < this.getFirstVisibleColumn()) {\n      leftOverlay.scrollTo(coords.col);\n\n    } else if (coords.col > this.getLastVisibleColumn()) {\n      leftOverlay.scrollTo(coords.col, true);\n    }\n  }\n\n  /**\n   * Get first visible row based on virtual dom and how table is visible in browser window viewport.\n   *\n   * @returns {Number}\n   */\n  getFirstVisibleRow() {\n    const {\n      topOverlay,\n      wtTable,\n      wtViewport,\n      totalRows,\n      fixedRowsTop,\n      } = this._getVariables();\n\n    let firstVisibleRow = wtTable.getFirstVisibleRow();\n\n    if (topOverlay.mainTableScrollableElement === window) {\n      const rootElementOffset = offset(wtTable.wtRootElement);\n      const totalTableHeight = innerHeight(wtTable.hider);\n      const windowHeight = innerHeight(window);\n      const windowScrollTop = getScrollTop(window);\n\n      // Only calculate firstVisibleRow when table didn't filled (from up) whole viewport space\n      if (rootElementOffset.top + totalTableHeight - windowHeight <= windowScrollTop) {\n        let rowsHeight = wtViewport.getColumnHeaderHeight();\n\n        rowsHeight += topOverlay.sumCellSizes(0, fixedRowsTop);\n\n        rangeEachReverse(totalRows, 1, (row) => {\n          rowsHeight += topOverlay.sumCellSizes(row - 1, row);\n\n          if (rootElementOffset.top + totalTableHeight - rowsHeight <= windowScrollTop) {\n            // Return physical row + 1\n            firstVisibleRow = row;\n\n            return false;\n          }\n        });\n      }\n    }\n\n    return firstVisibleRow;\n  }\n\n  /**\n   * Get last visible row based on virtual dom and how table is visible in browser window viewport.\n   *\n   * @returns {Number}\n   */\n  getLastVisibleRow() {\n    const {\n      topOverlay,\n      wtTable,\n      wtViewport,\n      totalRows,\n      } = this._getVariables();\n\n    let lastVisibleRow = wtTable.getLastVisibleRow();\n\n    if (topOverlay.mainTableScrollableElement === window) {\n      const rootElementOffset = offset(wtTable.wtRootElement);\n      const windowHeight = innerHeight(window);\n      const windowScrollTop = getScrollTop(window);\n\n      // Only calculate lastVisibleRow when table didn't filled (from bottom) whole viewport space\n      if (rootElementOffset.top > windowScrollTop) {\n        let rowsHeight = wtViewport.getColumnHeaderHeight();\n\n        rangeEach(1, totalRows, (row) => {\n          rowsHeight += topOverlay.sumCellSizes(row - 1, row);\n\n          if (rootElementOffset.top + rowsHeight - windowScrollTop >= windowHeight) {\n            // Return physical row - 1 (-2 because rangeEach gives row index + 1 - sumCellSizes requirements)\n            lastVisibleRow = row - 2;\n\n            return false;\n          }\n        });\n      }\n    }\n\n    return lastVisibleRow;\n  }\n\n  /**\n   * Get first visible column based on virtual dom and how table is visible in browser window viewport.\n   *\n   * @returns {Number}\n   */\n  getFirstVisibleColumn() {\n    const {\n      leftOverlay,\n      wtTable,\n      wtViewport,\n      totalColumns,\n      fixedColumnsLeft,\n      } = this._getVariables();\n\n    let firstVisibleColumn = wtTable.getFirstVisibleColumn();\n\n    if (leftOverlay.mainTableScrollableElement === window) {\n      const rootElementOffset = offset(wtTable.wtRootElement);\n      const totalTableWidth = innerWidth(wtTable.hider);\n      const windowWidth = innerWidth(window);\n      const windowScrollLeft = getScrollLeft(window);\n\n      // Only calculate firstVisibleColumn when table didn't filled (from left) whole viewport space\n      if (rootElementOffset.left + totalTableWidth - windowWidth <= windowScrollLeft) {\n        let columnsWidth = wtViewport.getRowHeaderWidth();\n\n        rangeEachReverse(totalColumns, 1, (column) => {\n          columnsWidth += leftOverlay.sumCellSizes(column - 1, column);\n\n          if (rootElementOffset.left + totalTableWidth - columnsWidth <= windowScrollLeft) {\n            // Return physical column + 1\n            firstVisibleColumn = column;\n\n            return false;\n          }\n        });\n      }\n    }\n\n    return firstVisibleColumn;\n  }\n\n  /**\n   * Get last visible column based on virtual dom and how table is visible in browser window viewport.\n   *\n   * @returns {Number}\n   */\n  getLastVisibleColumn() {\n    const {\n      leftOverlay,\n      wtTable,\n      wtViewport,\n      totalColumns,\n      } = this._getVariables();\n\n    let lastVisibleColumn = wtTable.getLastVisibleColumn();\n\n    if (leftOverlay.mainTableScrollableElement === window) {\n      const rootElementOffset = offset(wtTable.wtRootElement);\n      const windowWidth = innerWidth(window);\n      const windowScrollLeft = getScrollLeft(window);\n\n      // Only calculate lastVisibleColumn when table didn't filled (from right) whole viewport space\n      if (rootElementOffset.left > windowScrollLeft) {\n        let columnsWidth = wtViewport.getRowHeaderWidth();\n\n        rangeEach(1, totalColumns, (column) => {\n          columnsWidth += leftOverlay.sumCellSizes(column - 1, column);\n\n          if (rootElementOffset.left + columnsWidth - windowScrollLeft >= windowWidth) {\n            // Return physical column - 1 (-2 because rangeEach gives column index + 1 - sumCellSizes requirements)\n            lastVisibleColumn = column - 2;\n\n            return false;\n          }\n        });\n      }\n    }\n\n    return lastVisibleColumn;\n  }\n\n  /**\n   * Returns collection of variables used to rows and columns visibility calculations.\n   *\n   * @returns {Object}\n   * @private\n   */\n  _getVariables() {\n    const wot = this.wot;\n    const topOverlay = wot.wtOverlays.topOverlay;\n    const leftOverlay = wot.wtOverlays.leftOverlay;\n    const wtTable = wot.wtTable;\n    const wtViewport = wot.wtViewport;\n    const totalRows = wot.getSetting('totalRows');\n    const totalColumns = wot.getSetting('totalColumns');\n    const fixedRowsTop = wot.getSetting('fixedRowsTop');\n    const fixedRowsBottom = wot.getSetting('fixedRowsBottom');\n    const fixedColumnsLeft = wot.getSetting('fixedColumnsLeft');\n\n    return {\n      topOverlay,\n      leftOverlay,\n      wtTable,\n      wtViewport,\n      totalRows,\n      totalColumns,\n      fixedRowsTop,\n      fixedRowsBottom,\n      fixedColumnsLeft\n    };\n  }\n}\n\nexport default Scroll;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/scroll.js","import {fastInnerText} from './../../../helpers/dom/element';\nimport {hasOwnProperty} from './../../../helpers/object';\n\n/**\n * @class Settings\n */\nclass Settings {\n  /**\n   * @param {Walkontable} wotInstance\n   * @param {Object} settings\n   */\n  constructor(wotInstance, settings) {\n    this.wot = wotInstance;\n\n    // legacy support\n    this.instance = wotInstance;\n\n    // default settings. void 0 means it is required, null means it can be empty\n    this.defaults = {\n      table: void 0,\n      debug: false, // shows WalkontableDebugOverlay\n\n      // presentation mode\n      externalRowCalculator: false,\n      stretchH: 'none', // values: all, last, none\n      currentRowClassName: null,\n      currentColumnClassName: null,\n      preventOverflow() {\n        return false;\n      },\n\n      // data source\n      data: void 0,\n      freezeOverlays: false,\n      fixedColumnsLeft: 0,\n      fixedRowsTop: 0,\n      fixedRowsBottom: 0,\n      minSpareRows: 0,\n\n      // this must be array of functions: [function (row, TH) {}]\n      rowHeaders() {\n        return [];\n      },\n\n      // this must be array of functions: [function (column, TH) {}]\n      columnHeaders() {\n        return [];\n      },\n      totalRows: void 0,\n      totalColumns: void 0,\n      cellRenderer: (row, column, TD) => {\n        let cellData = this.getSetting('data', row, column);\n\n        fastInnerText(TD, cellData === void 0 || cellData === null ? '' : cellData);\n      },\n\n      // columnWidth: 50,\n      columnWidth(col) {\n         // return undefined means use default size for the rendered cell content\n      },\n      rowHeight(row) {\n         // return undefined means use default size for the rendered cell content\n      },\n      defaultRowHeight: 23,\n      defaultColumnWidth: 50,\n      selections: null,\n      hideBorderOnMouseDownOver: false,\n      viewportRowCalculatorOverride: null,\n      viewportColumnCalculatorOverride: null,\n\n      // callbacks\n      onCellMouseDown: null,\n      onCellMouseOver: null,\n      onCellMouseOut: null,\n      onCellMouseUp: null,\n\n      //    onCellMouseOut: null,\n      onCellDblClick: null,\n      onCellCornerMouseDown: null,\n      onCellCornerDblClick: null,\n      beforeDraw: null,\n      onDraw: null,\n      onBeforeDrawBorders: null,\n      onScrollVertically: null,\n      onScrollHorizontally: null,\n      onBeforeTouchScroll: null,\n      onAfterMomentumScroll: null,\n      onBeforeStretchingColumnWidth: (width) => width,\n      onModifyRowHeaderWidth: null,\n\n      // constants\n      scrollbarWidth: 10,\n      scrollbarHeight: 10,\n\n      renderAllRows: false,\n      groups: false,\n      rowHeaderWidth: null,\n      columnHeaderHeight: null,\n      headerClassName: null\n    };\n\n    // reference to settings\n    this.settings = {};\n\n    for (let i in this.defaults) {\n      if (hasOwnProperty(this.defaults, i)) {\n        if (settings[i] !== void 0) {\n          this.settings[i] = settings[i];\n\n        } else if (this.defaults[i] === void 0) {\n          throw new Error(`A required setting \"${i}\" was not provided`);\n\n        } else {\n          this.settings[i] = this.defaults[i];\n        }\n      }\n    }\n  }\n\n  /**\n   * Update settings\n   *\n   * @param {Object} settings\n   * @param {*} value\n   * @returns {Walkontable}\n   */\n  update(settings, value) {\n    if (value === void 0) { // settings is object\n      for (let i in settings) {\n        if (hasOwnProperty(settings, i)) {\n          this.settings[i] = settings[i];\n        }\n      }\n    } else { // if value is defined then settings is the key\n      this.settings[settings] = value;\n    }\n    return this.wot;\n  }\n\n  /**\n   * Get setting by name\n   *\n   * @param {String} key\n   * @param {*} param1\n   * @param {*} param2\n   * @param {*} param3\n   * @param {*} param4\n   * @returns {*}\n   */\n  getSetting(key, param1, param2, param3, param4) {\n    if (typeof this.settings[key] === 'function') {\n      // this is faster than .apply - https://github.com/handsontable/handsontable/wiki/JavaScript-&-DOM-performance-tips\n      return this.settings[key](param1, param2, param3, param4);\n\n    } else if (param1 !== void 0 && Array.isArray(this.settings[key])) {\n      // perhaps this can be removed, it is only used in tests\n      return this.settings[key][param1];\n\n    }\n\n    return this.settings[key];\n  }\n\n  /**\n   * Checks if setting exists\n   *\n   * @param {Boolean} key\n   * @returns {Boolean}\n   */\n  has(key) {\n    return !!this.settings[key];\n  }\n}\n\nexport default Settings;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/settings.js","import {\n    getStyle,\n    getTrimmingContainer,\n    hasClass,\n    index,\n    offset,\n    removeClass,\n    removeTextNodes,\n    overlayContainsElement,\n    closest\n} from './../../../helpers/dom/element';\nimport {isFunction} from './../../../helpers/function';\nimport CellCoords from './cell/coords';\nimport CellRange from './cell/range';\nimport ColumnFilter from './filter/column';\nimport RowFilter from './filter/row';\nimport TableRenderer from './tableRenderer';\nimport Overlay from './overlay/_base';\n\n/**\n *\n */\nclass Table {\n  /**\n   * @param {Walkontable} wotInstance\n   * @param {HTMLTableElement} table\n   */\n  constructor(wotInstance, table) {\n    this.wot = wotInstance;\n\n    // legacy support\n    this.instance = this.wot;\n    this.TABLE = table;\n    this.TBODY = null;\n    this.THEAD = null;\n    this.COLGROUP = null;\n    this.tableOffset = 0;\n    this.holderOffset = 0;\n\n    removeTextNodes(this.TABLE);\n\n    this.spreader = this.createSpreader(this.TABLE);\n    this.hider = this.createHider(this.spreader);\n    this.holder = this.createHolder(this.hider);\n\n    this.wtRootElement = this.holder.parentNode;\n    this.alignOverlaysWithTrimmingContainer();\n    this.fixTableDomTree();\n\n    this.colgroupChildrenLength = this.COLGROUP.childNodes.length;\n    this.theadChildrenLength = this.THEAD.firstChild ? this.THEAD.firstChild.childNodes.length : 0;\n    this.tbodyChildrenLength = this.TBODY.childNodes.length;\n\n    this.rowFilter = null;\n    this.columnFilter = null;\n    this.correctHeaderWidth = false;\n\n    const origRowHeaderWidth = this.wot.wtSettings.settings.rowHeaderWidth;\n\n    // Fix for jumping row headers (https://github.com/handsontable/handsontable/issues/3850)\n    this.wot.wtSettings.settings.rowHeaderWidth = () => this._modifyRowHeaderWidth(origRowHeaderWidth);\n  }\n\n  /**\n   *\n   */\n  fixTableDomTree() {\n    this.TBODY = this.TABLE.querySelector('tbody');\n\n    if (!this.TBODY) {\n      this.TBODY = document.createElement('tbody');\n      this.TABLE.appendChild(this.TBODY);\n    }\n    this.THEAD = this.TABLE.querySelector('thead');\n\n    if (!this.THEAD) {\n      this.THEAD = document.createElement('thead');\n      this.TABLE.insertBefore(this.THEAD, this.TBODY);\n    }\n    this.COLGROUP = this.TABLE.querySelector('colgroup');\n\n    if (!this.COLGROUP) {\n      this.COLGROUP = document.createElement('colgroup');\n      this.TABLE.insertBefore(this.COLGROUP, this.THEAD);\n    }\n\n    if (this.wot.getSetting('columnHeaders').length && !this.THEAD.childNodes.length) {\n      this.THEAD.appendChild(document.createElement('TR'));\n    }\n  }\n\n  /**\n   * @param table\n   * @returns {HTMLElement}\n   */\n  createSpreader(table) {\n    const parent = table.parentNode;\n    let spreader;\n\n    if (!parent || parent.nodeType !== 1 || !hasClass(parent, 'wtHolder')) {\n      spreader = document.createElement('div');\n      spreader.className = 'wtSpreader';\n\n      if (parent) {\n        // if TABLE is detached (e.g. in Jasmine test), it has no parentNode so we cannot attach holder to it\n        parent.insertBefore(spreader, table);\n      }\n      spreader.appendChild(table);\n    }\n    spreader.style.position = 'relative';\n\n    return spreader;\n  }\n\n  /**\n   * @param spreader\n   * @returns {HTMLElement}\n   */\n  createHider(spreader) {\n    const parent = spreader.parentNode;\n    let hider;\n\n    if (!parent || parent.nodeType !== 1 || !hasClass(parent, 'wtHolder')) {\n      hider = document.createElement('div');\n      hider.className = 'wtHider';\n\n      if (parent) {\n        // if TABLE is detached (e.g. in Jasmine test), it has no parentNode so we cannot attach holder to it\n        parent.insertBefore(hider, spreader);\n      }\n      hider.appendChild(spreader);\n    }\n\n    return hider;\n  }\n\n  /**\n   *\n   * @param hider\n   * @returns {HTMLElement}\n   */\n  createHolder(hider) {\n    const parent = hider.parentNode;\n    let holder;\n\n    if (!parent || parent.nodeType !== 1 || !hasClass(parent, 'wtHolder')) {\n      holder = document.createElement('div');\n      holder.style.position = 'relative';\n      holder.className = 'wtHolder';\n\n      if (parent) {\n        // if TABLE is detached (e.g. in Jasmine test), it has no parentNode so we cannot attach holder to it\n        parent.insertBefore(holder, hider);\n      }\n      if (!this.isWorkingOnClone()) {\n        holder.parentNode.className += 'ht_master handsontable';\n      }\n      holder.appendChild(hider);\n    }\n\n    return holder;\n  }\n\n  alignOverlaysWithTrimmingContainer() {\n    const trimmingElement = getTrimmingContainer(this.wtRootElement);\n\n    if (!this.isWorkingOnClone()) {\n      this.holder.parentNode.style.position = 'relative';\n\n      if (trimmingElement === window) {\n        let preventOverflow = this.wot.getSetting('preventOverflow');\n\n        if (!preventOverflow) {\n          this.holder.style.overflow = 'visible';\n          this.wtRootElement.style.overflow = 'visible';\n        }\n      } else {\n        this.holder.style.width = getStyle(trimmingElement, 'width');\n        this.holder.style.height = getStyle(trimmingElement, 'height');\n        this.holder.style.overflow = '';\n      }\n    }\n  }\n\n  isWorkingOnClone() {\n    return !!this.wot.cloneSource;\n  }\n\n  /**\n   * Redraws the table\n   *\n   * @param {Boolean} fastDraw If TRUE, will try to avoid full redraw and only update the border positions. If FALSE or UNDEFINED, will perform a full redraw\n   * @returns {Table}\n   */\n  draw(fastDraw) {\n    const {wtOverlays, wtViewport} = this.wot;\n    let totalRows = this.instance.getSetting('totalRows');\n    let rowHeaders = this.wot.getSetting('rowHeaders').length;\n    let columnHeaders = this.wot.getSetting('columnHeaders').length;\n    let syncScroll = false;\n\n    if (!this.isWorkingOnClone()) {\n      this.holderOffset = offset(this.holder);\n      fastDraw = wtViewport.createRenderCalculators(fastDraw);\n\n      if (rowHeaders && !this.wot.getSetting('fixedColumnsLeft')) {\n        const leftScrollPos = wtOverlays.leftOverlay.getScrollPosition();\n        const previousState = this.correctHeaderWidth;\n\n        this.correctHeaderWidth = leftScrollPos > 0;\n\n        if (previousState !== this.correctHeaderWidth) {\n          fastDraw = false;\n        }\n      }\n    }\n\n    if (!this.isWorkingOnClone()) {\n      syncScroll = wtOverlays.prepareOverlays();\n    }\n\n    if (fastDraw) {\n      if (!this.isWorkingOnClone()) {\n        // in case we only scrolled without redraw, update visible rows information in oldRowsCalculator\n        wtViewport.createVisibleCalculators();\n      }\n      if (wtOverlays) {\n        wtOverlays.refresh(true);\n      }\n    } else {\n      if (this.isWorkingOnClone()) {\n        this.tableOffset = this.wot.cloneSource.wtTable.tableOffset;\n      } else {\n        this.tableOffset = offset(this.TABLE);\n      }\n      let startRow;\n\n      if (Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_DEBUG) ||\n          Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_TOP) ||\n          Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_TOP_LEFT_CORNER)) {\n        startRow = 0;\n      } else if (Overlay.isOverlayTypeOf(this.instance.cloneOverlay, Overlay.CLONE_BOTTOM) ||\n          Overlay.isOverlayTypeOf(this.instance.cloneOverlay, Overlay.CLONE_BOTTOM_LEFT_CORNER)) {\n        startRow = Math.max(totalRows - this.wot.getSetting('fixedRowsBottom'), 0);\n      } else {\n        startRow = wtViewport.rowsRenderCalculator.startRow;\n      }\n      let startColumn;\n\n      if (Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_DEBUG) ||\n          Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_LEFT) ||\n          Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_TOP_LEFT_CORNER) ||\n          Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_BOTTOM_LEFT_CORNER)) {\n        startColumn = 0;\n      } else {\n        startColumn = wtViewport.columnsRenderCalculator.startColumn;\n      }\n      this.rowFilter = new RowFilter(startRow, totalRows, columnHeaders);\n      this.columnFilter = new ColumnFilter(startColumn, this.wot.getSetting('totalColumns'), rowHeaders);\n\n      this.alignOverlaysWithTrimmingContainer();\n      this._doDraw(); // creates calculator after draw\n    }\n    this.refreshSelections(fastDraw);\n\n    if (!this.isWorkingOnClone()) {\n      wtOverlays.topOverlay.resetFixedPosition();\n\n      if (wtOverlays.bottomOverlay.clone) {\n        wtOverlays.bottomOverlay.resetFixedPosition();\n      }\n\n      wtOverlays.leftOverlay.resetFixedPosition();\n\n      if (wtOverlays.topLeftCornerOverlay) {\n        wtOverlays.topLeftCornerOverlay.resetFixedPosition();\n      }\n\n      if (wtOverlays.bottomLeftCornerOverlay && wtOverlays.bottomLeftCornerOverlay.clone) {\n        wtOverlays.bottomLeftCornerOverlay.resetFixedPosition();\n      }\n    }\n    if (syncScroll) {\n      wtOverlays.syncScrollWithMaster();\n    }\n    this.wot.drawn = true;\n\n    return this;\n  }\n\n  _doDraw() {\n    const wtRenderer = new TableRenderer(this);\n\n    wtRenderer.render();\n  }\n\n  removeClassFromCells(className) {\n    const nodes = this.TABLE.querySelectorAll(`.${className}`);\n\n    for (let i = 0, len = nodes.length; i < len; i++) {\n      removeClass(nodes[i], className);\n    }\n  }\n\n  refreshSelections(fastDraw) {\n    if (!this.wot.selections) {\n      return;\n    }\n    let len = this.wot.selections.length;\n\n    if (fastDraw) {\n      for (let i = 0; i < len; i++) {\n        // there was no rerender, so we need to remove classNames by ourselves\n        if (this.wot.selections[i].settings.className) {\n          this.removeClassFromCells(this.wot.selections[i].settings.className);\n        }\n        if (this.wot.selections[i].settings.highlightHeaderClassName) {\n          this.removeClassFromCells(this.wot.selections[i].settings.highlightHeaderClassName);\n        }\n        if (this.wot.selections[i].settings.highlightRowClassName) {\n          this.removeClassFromCells(this.wot.selections[i].settings.highlightRowClassName);\n        }\n        if (this.wot.selections[i].settings.highlightColumnClassName) {\n          this.removeClassFromCells(this.wot.selections[i].settings.highlightColumnClassName);\n        }\n      }\n    }\n    for (let i = 0; i < len; i++) {\n      this.wot.selections[i].draw(this.wot, fastDraw);\n    }\n  }\n\n  /**\n   * Get cell element at coords.\n   *\n   * @param {CellCoords} coords\n   * @returns {HTMLElement|Number} HTMLElement on success or Number one of the exit codes on error:\n   *  -1 row before viewport\n   *  -2 row after viewport\n   */\n  getCell(coords) {\n    if (this.isRowBeforeRenderedRows(coords.row)) {\n      // row before rendered rows\n      return -1;\n\n    } else if (this.isRowAfterRenderedRows(coords.row)) {\n      // row after rendered rows\n      return -2;\n    }\n\n    const TR = this.TBODY.childNodes[this.rowFilter.sourceToRendered(coords.row)];\n\n    if (TR) {\n      return TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(coords.col)];\n    }\n  }\n\n  /**\n   * getColumnHeader\n   *\n   * @param {Number} col Column index\n   * @param {Number} [level=0] Header level (0 = most distant to the table)\n   * @returns {Object} HTMLElement on success or undefined on error\n   */\n  getColumnHeader(col, level = 0) {\n    const TR = this.THEAD.childNodes[level];\n\n    if (TR) {\n      return TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(col)];\n    }\n  }\n\n  /**\n   * getRowHeader\n   *\n   * @param {Number} row Row index\n   * @returns {HTMLElement} HTMLElement on success or Number one of the exit codes on error: `null table doesn't have row headers`\n   */\n  getRowHeader(row) {\n    if (this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0) === 0) {\n      return null;\n    }\n    const TR = this.TBODY.childNodes[this.rowFilter.sourceToRendered(row)];\n\n    if (TR) {\n      return TR.childNodes[0];\n    }\n  }\n\n  /**\n   * Returns cell coords object for a given TD (or a child element of a TD element).\n   *\n   * @param {HTMLTableCellElement} TD A cell DOM element (or a child of one).\n   * @returns {CellCoords|null} The coordinates of the provided TD element (or the closest TD element) or null, if the provided element is not applicable.\n   */\n  getCoords(TD) {\n    if (TD.nodeName !== 'TD' && TD.nodeName !== 'TH') {\n      TD = closest(TD, ['TD', 'TH']);\n    }\n\n    if (TD === null) {\n      return null;\n    }\n\n    const TR = TD.parentNode;\n    const CONTAINER = TR.parentNode;\n    let row = index(TR);\n    let col = TD.cellIndex;\n\n    if (overlayContainsElement(Overlay.CLONE_TOP_LEFT_CORNER, TD) || overlayContainsElement(Overlay.CLONE_TOP, TD)) {\n      if (CONTAINER.nodeName === 'THEAD') {\n        row -= CONTAINER.childNodes.length;\n      }\n\n    } else if (CONTAINER === this.THEAD) {\n      row = this.rowFilter.visibleColHeadedRowToSourceRow(row);\n\n    } else {\n      row = this.rowFilter.renderedToSource(row);\n    }\n\n    if (overlayContainsElement(Overlay.CLONE_TOP_LEFT_CORNER, TD) || overlayContainsElement(Overlay.CLONE_LEFT, TD)) {\n      col = this.columnFilter.offsettedTH(col);\n\n    } else {\n      col = this.columnFilter.visibleRowHeadedColumnToSourceColumn(col);\n    }\n\n    return new CellCoords(row, col);\n  }\n\n  getTrForRow(row) {\n    return this.TBODY.childNodes[this.rowFilter.sourceToRendered(row)];\n  }\n\n  getFirstRenderedRow() {\n    return this.wot.wtViewport.rowsRenderCalculator.startRow;\n  }\n\n  getFirstVisibleRow() {\n    return this.wot.wtViewport.rowsVisibleCalculator.startRow;\n  }\n\n  getFirstRenderedColumn() {\n    return this.wot.wtViewport.columnsRenderCalculator.startColumn;\n  }\n\n  /**\n   * @returns {Number} Returns -1 if no row is visible\n   */\n  getFirstVisibleColumn() {\n    return this.wot.wtViewport.columnsVisibleCalculator.startColumn;\n  }\n\n  /**\n   * @returns {Number} Returns -1 if no row is visible\n   */\n  getLastRenderedRow() {\n    return this.wot.wtViewport.rowsRenderCalculator.endRow;\n  }\n\n  getLastVisibleRow() {\n    return this.wot.wtViewport.rowsVisibleCalculator.endRow;\n  }\n\n  getLastRenderedColumn() {\n    return this.wot.wtViewport.columnsRenderCalculator.endColumn;\n  }\n\n  /**\n   * @returns {Number} Returns -1 if no column is visible\n   */\n  getLastVisibleColumn() {\n    return this.wot.wtViewport.columnsVisibleCalculator.endColumn;\n  }\n\n  isRowBeforeRenderedRows(row) {\n    return this.rowFilter && (this.rowFilter.sourceToRendered(row) < 0 && row >= 0);\n  }\n\n  isRowAfterViewport(row) {\n    return this.rowFilter && (this.rowFilter.sourceToRendered(row) > this.getLastVisibleRow());\n  }\n\n  isRowAfterRenderedRows(row) {\n    return this.rowFilter && (this.rowFilter.sourceToRendered(row) > this.getLastRenderedRow());\n  }\n\n  isColumnBeforeViewport(column) {\n    return this.columnFilter && (this.columnFilter.sourceToRendered(column) < 0 && column >= 0);\n  }\n\n  isColumnAfterViewport(column) {\n    return this.columnFilter && (this.columnFilter.sourceToRendered(column) > this.getLastVisibleColumn());\n  }\n\n  isLastRowFullyVisible() {\n    return this.getLastVisibleRow() === this.getLastRenderedRow();\n  }\n\n  isLastColumnFullyVisible() {\n    return this.getLastVisibleColumn() === this.getLastRenderedColumn();\n  }\n\n  getRenderedColumnsCount() {\n    let columnsCount = this.wot.wtViewport.columnsRenderCalculator.count;\n    let totalColumns = this.wot.getSetting('totalColumns');\n\n    if (this.wot.isOverlayName(Overlay.CLONE_DEBUG)) {\n      columnsCount = totalColumns;\n\n    } else if (this.wot.isOverlayName(Overlay.CLONE_LEFT) ||\n               this.wot.isOverlayName(Overlay.CLONE_TOP_LEFT_CORNER) ||\n               this.wot.isOverlayName(Overlay.CLONE_BOTTOM_LEFT_CORNER)) {\n      return Math.min(this.wot.getSetting('fixedColumnsLeft'), totalColumns);\n\n    }\n\n    return columnsCount;\n  }\n\n  getRenderedRowsCount() {\n    let rowsCount = this.wot.wtViewport.rowsRenderCalculator.count;\n    let totalRows = this.wot.getSetting('totalRows');\n\n    if (this.wot.isOverlayName(Overlay.CLONE_DEBUG)) {\n      rowsCount = totalRows;\n\n    } else if (this.wot.isOverlayName(Overlay.CLONE_TOP) ||\n               this.wot.isOverlayName(Overlay.CLONE_TOP_LEFT_CORNER)) {\n      rowsCount = Math.min(this.wot.getSetting('fixedRowsTop'), totalRows);\n\n    } else if (this.wot.isOverlayName(Overlay.CLONE_BOTTOM) ||\n               this.wot.isOverlayName(Overlay.CLONE_BOTTOM_LEFT_CORNER)) {\n      rowsCount = Math.min(this.wot.getSetting('fixedRowsBottom'), totalRows);\n    }\n\n    return rowsCount;\n  }\n\n  getVisibleRowsCount() {\n    return this.wot.wtViewport.rowsVisibleCalculator.count;\n  }\n\n  allRowsInViewport() {\n    return this.wot.getSetting('totalRows') == this.getVisibleRowsCount();\n  }\n\n  /**\n   * Checks if any of the row's cells content exceeds its initial height, and if so, returns the oversized height\n   *\n   * @param {Number} sourceRow\n   * @returns {Number}\n   */\n  getRowHeight(sourceRow) {\n    let height = this.wot.wtSettings.settings.rowHeight(sourceRow);\n    let oversizedHeight = this.wot.wtViewport.oversizedRows[sourceRow];\n\n    if (oversizedHeight !== void 0) {\n      height = height === void 0 ? oversizedHeight : Math.max(height, oversizedHeight);\n    }\n\n    return height;\n  }\n\n  getColumnHeaderHeight(level) {\n    let height = this.wot.wtSettings.settings.defaultRowHeight;\n    let oversizedHeight = this.wot.wtViewport.oversizedColumnHeaders[level];\n\n    if (oversizedHeight !== void 0) {\n      height = height ? Math.max(height, oversizedHeight) : oversizedHeight;\n    }\n\n    return height;\n  }\n\n  getVisibleColumnsCount() {\n    return this.wot.wtViewport.columnsVisibleCalculator.count;\n  }\n\n  allColumnsInViewport() {\n    return this.wot.getSetting('totalColumns') == this.getVisibleColumnsCount();\n  }\n\n  getColumnWidth(sourceColumn) {\n    let width = this.wot.wtSettings.settings.columnWidth;\n\n    if (typeof width === 'function') {\n      width = width(sourceColumn);\n\n    } else if (typeof width === 'object') {\n      width = width[sourceColumn];\n    }\n\n    return width || this.wot.wtSettings.settings.defaultColumnWidth;\n  }\n\n  getStretchedColumnWidth(sourceColumn) {\n    let columnWidth = this.getColumnWidth(sourceColumn);\n    let width = columnWidth == null ? this.instance.wtSettings.settings.defaultColumnWidth : columnWidth;\n    let calculator = this.wot.wtViewport.columnsRenderCalculator;\n\n    if (calculator) {\n      let stretchedWidth = calculator.getStretchedColumnWidth(sourceColumn, width);\n\n      if (stretchedWidth) {\n        width = stretchedWidth;\n      }\n    }\n\n    return width;\n  }\n\n  /**\n   * Modify row header widths provided by user in class contructor.\n   *\n   * @private\n   */\n  _modifyRowHeaderWidth(rowHeaderWidthFactory) {\n    let widths = isFunction(rowHeaderWidthFactory) ? rowHeaderWidthFactory() : null;\n\n    if (Array.isArray(widths)) {\n      widths = [...widths];\n      widths[widths.length - 1] = this._correctRowHeaderWidth(widths[widths.length - 1]);\n    } else {\n      widths = this._correctRowHeaderWidth(widths);\n    }\n\n    return widths;\n  }\n\n  /**\n   * Correct row header width if necessary.\n   *\n   * @private\n   */\n  _correctRowHeaderWidth(width) {\n    if (typeof width !== 'number') {\n      width = this.wot.getSetting('defaultColumnWidth');\n    }\n    if (this.correctHeaderWidth) {\n      width++;\n    }\n\n    return width;\n  }\n}\n\nexport default Table;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/table.js","import {\n  addClass,\n  empty,\n  getScrollbarWidth,\n  hasClass,\n  innerHeight,\n  outerWidth\n} from './../../../helpers/dom/element';\nimport Overlay from './overlay/_base';\n\nlet performanceWarningAppeared = false;\n\n/**\n * @class TableRenderer\n */\nclass TableRenderer {\n  /**\n   * @param {WalkontableTable} wtTable\n   */\n  constructor(wtTable) {\n    this.wtTable = wtTable;\n    this.wot = wtTable.instance;\n\n    // legacy support\n    this.instance = wtTable.instance;\n\n    this.rowFilter = wtTable.rowFilter;\n    this.columnFilter = wtTable.columnFilter;\n\n    this.TABLE = wtTable.TABLE;\n    this.THEAD = wtTable.THEAD;\n    this.TBODY = wtTable.TBODY;\n    this.COLGROUP = wtTable.COLGROUP;\n\n    this.rowHeaders = [];\n    this.rowHeaderCount = 0;\n    this.columnHeaders = [];\n    this.columnHeaderCount = 0;\n    this.fixedRowsTop = 0;\n    this.fixedRowsBottom = 0;\n  }\n\n  /**\n   *\n   */\n  render() {\n    if (!this.wtTable.isWorkingOnClone()) {\n      const skipRender = {};\n      this.wot.getSetting('beforeDraw', true, skipRender);\n\n      if (skipRender.skipRender === true) {\n        return;\n      }\n    }\n\n    this.rowHeaders = this.wot.getSetting('rowHeaders');\n    this.rowHeaderCount = this.rowHeaders.length;\n    this.fixedRowsTop = this.wot.getSetting('fixedRowsTop');\n    this.fixedRowsBottom = this.wot.getSetting('fixedRowsBottom');\n    this.columnHeaders = this.wot.getSetting('columnHeaders');\n    this.columnHeaderCount = this.columnHeaders.length;\n\n    let columnsToRender = this.wtTable.getRenderedColumnsCount();\n    let rowsToRender = this.wtTable.getRenderedRowsCount();\n    let totalColumns = this.wot.getSetting('totalColumns');\n    let totalRows = this.wot.getSetting('totalRows');\n    let workspaceWidth;\n    let adjusted = false;\n\n    if (Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_BOTTOM) ||\n        Overlay.isOverlayTypeOf(this.wot.cloneOverlay, Overlay.CLONE_BOTTOM_LEFT_CORNER)) {\n\n      // do NOT render headers on the bottom or bottom-left corner overlay\n      this.columnHeaders = [];\n      this.columnHeaderCount = 0;\n    }\n\n    if (totalColumns >= 0) {\n      // prepare COL and TH elements for rendering\n      this.adjustAvailableNodes();\n      adjusted = true;\n\n      // adjust column widths according to user widths settings\n      this.renderColumnHeaders();\n\n      // Render table rows\n      this.renderRows(totalRows, rowsToRender, columnsToRender);\n\n      if (!this.wtTable.isWorkingOnClone()) {\n        workspaceWidth = this.wot.wtViewport.getWorkspaceWidth();\n        this.wot.wtViewport.containerWidth = null;\n      }\n\n      this.adjustColumnWidths(columnsToRender);\n      this.markOversizedColumnHeaders();\n      this.adjustColumnHeaderHeights();\n    }\n\n    if (!adjusted) {\n      this.adjustAvailableNodes();\n    }\n    this.removeRedundantRows(rowsToRender);\n\n    if (!this.wtTable.isWorkingOnClone() || this.wot.isOverlayName(Overlay.CLONE_BOTTOM)) {\n      this.markOversizedRows();\n    }\n    if (!this.wtTable.isWorkingOnClone()) {\n      this.wot.wtViewport.createVisibleCalculators();\n      this.wot.wtOverlays.refresh(false);\n\n      this.wot.wtOverlays.applyToDOM();\n\n      let hiderWidth = outerWidth(this.wtTable.hider);\n      let tableWidth = outerWidth(this.wtTable.TABLE);\n\n      if (hiderWidth !== 0 && (tableWidth !== hiderWidth)) {\n        // Recalculate the column widths, if width changes made in the overlays removed the scrollbar, thus changing the viewport width.\n        this.adjustColumnWidths(columnsToRender);\n      }\n\n      if (workspaceWidth !== this.wot.wtViewport.getWorkspaceWidth()) {\n        // workspace width changed though to shown/hidden vertical scrollbar. Let's reapply stretching\n        this.wot.wtViewport.containerWidth = null;\n\n        let firstRendered = this.wtTable.getFirstRenderedColumn();\n        let lastRendered = this.wtTable.getLastRenderedColumn();\n        let defaultColumnWidth = this.wot.getSetting('defaultColumnWidth');\n        let rowHeaderWidthSetting = this.wot.getSetting('rowHeaderWidth');\n\n        rowHeaderWidthSetting = this.instance.getSetting('onModifyRowHeaderWidth', rowHeaderWidthSetting);\n\n        if (rowHeaderWidthSetting != null) {\n          for (let i = 0; i < this.rowHeaderCount; i++) {\n            let width = Array.isArray(rowHeaderWidthSetting) ? rowHeaderWidthSetting[i] : rowHeaderWidthSetting;\n\n            width = width == null ? defaultColumnWidth : width;\n\n            this.COLGROUP.childNodes[i].style.width = `${width}px`;\n          }\n        }\n\n        for (let i = firstRendered; i < lastRendered; i++) {\n          let width = this.wtTable.getStretchedColumnWidth(i);\n          let renderedIndex = this.columnFilter.sourceToRendered(i);\n\n          this.COLGROUP.childNodes[renderedIndex + this.rowHeaderCount].style.width = `${width}px`;\n        }\n      }\n\n      this.wot.getSetting('onDraw', true);\n\n    } else if (this.wot.isOverlayName(Overlay.CLONE_BOTTOM)) {\n      this.wot.cloneSource.wtOverlays.adjustElementsSize();\n    }\n  }\n\n  /**\n   * @param {Number} renderedRowsCount\n   */\n  removeRedundantRows(renderedRowsCount) {\n    while (this.wtTable.tbodyChildrenLength > renderedRowsCount) {\n      this.TBODY.removeChild(this.TBODY.lastChild);\n      this.wtTable.tbodyChildrenLength--;\n    }\n  }\n\n  /**\n   * @param {Number} totalRows\n   * @param {Number} rowsToRender\n   * @param {Number} columnsToRender\n   */\n  renderRows(totalRows, rowsToRender, columnsToRender) {\n    let lastTD,\n      TR;\n    let visibleRowIndex = 0;\n    let sourceRowIndex = this.rowFilter.renderedToSource(visibleRowIndex);\n    let isWorkingOnClone = this.wtTable.isWorkingOnClone();\n\n    while (sourceRowIndex < totalRows && sourceRowIndex >= 0) {\n      if (!performanceWarningAppeared && visibleRowIndex > 1000) {\n        performanceWarningAppeared = true;\n        console.warn('Performance tip: Handsontable rendered more than 1000 visible rows. Consider limiting the number ' +\n                     'of rendered rows by specifying the table height and/or turning off the \"renderAllRows\" option.');\n      }\n      if (rowsToRender !== void 0 && visibleRowIndex === rowsToRender) {\n        // We have as much rows as needed for this clone\n        break;\n      }\n      TR = this.getOrCreateTrForRow(visibleRowIndex, TR);\n\n      // Render row headers\n      this.renderRowHeaders(sourceRowIndex, TR);\n      // Add and/or remove TDs to TR to match the desired number\n      this.adjustColumns(TR, columnsToRender + this.rowHeaderCount);\n\n      lastTD = this.renderCells(sourceRowIndex, TR, columnsToRender);\n\n      if (!isWorkingOnClone ||\n          // Necessary to refresh oversized row heights after editing cell in overlays\n          this.wot.isOverlayName(Overlay.CLONE_BOTTOM)) {\n        // Reset the oversized row cache for this row\n        this.resetOversizedRow(sourceRowIndex);\n      }\n\n      if (TR.firstChild) {\n        // if I have 2 fixed columns with one-line content and the 3rd column has a multiline content, this is\n        // the way to make sure that the overlay will has same row height\n        let height = this.wot.wtTable.getRowHeight(sourceRowIndex);\n\n        if (height) {\n          // Decrease height. 1 pixel will be \"replaced\" by 1px border top\n          height--;\n          TR.firstChild.style.height = `${height}px`;\n        } else {\n          TR.firstChild.style.height = '';\n        }\n      }\n      visibleRowIndex++;\n      sourceRowIndex = this.rowFilter.renderedToSource(visibleRowIndex);\n    }\n  }\n\n  /**\n   * Reset the oversized row cache for the provided index\n   *\n   * @param {Number} sourceRow Row index\n   */\n  resetOversizedRow(sourceRow) {\n    if (this.wot.getSetting('externalRowCalculator')) {\n      return;\n    }\n    if (this.wot.wtViewport.oversizedRows && this.wot.wtViewport.oversizedRows[sourceRow]) {\n      this.wot.wtViewport.oversizedRows[sourceRow] = void 0;\n    }\n  }\n\n  /**\n   * Check if any of the rendered rows is higher than expected, and if so, cache them\n   */\n  markOversizedRows() {\n    if (this.wot.getSetting('externalRowCalculator')) {\n      return;\n    }\n    let rowCount = this.instance.wtTable.TBODY.childNodes.length;\n    let expectedTableHeight = rowCount * this.instance.wtSettings.settings.defaultRowHeight;\n    let actualTableHeight = innerHeight(this.instance.wtTable.TBODY) - 1;\n    let previousRowHeight;\n    let rowInnerHeight;\n    let sourceRowIndex;\n    let currentTr;\n    let rowHeader;\n    let totalRows = this.instance.getSetting('totalRows');\n\n    if (expectedTableHeight === actualTableHeight && !this.instance.getSetting('fixedRowsBottom')) {\n      // If the actual table height equals rowCount * default single row height, no row is oversized -> no need to iterate over them\n      return;\n    }\n\n    while (rowCount) {\n      rowCount--;\n      sourceRowIndex = this.instance.wtTable.rowFilter.renderedToSource(rowCount);\n      previousRowHeight = this.instance.wtTable.getRowHeight(sourceRowIndex);\n      currentTr = this.instance.wtTable.getTrForRow(sourceRowIndex);\n      rowHeader = currentTr.querySelector('th');\n\n      if (rowHeader) {\n        rowInnerHeight = innerHeight(rowHeader);\n      } else {\n        rowInnerHeight = innerHeight(currentTr) - 1;\n      }\n\n      if ((!previousRowHeight && this.instance.wtSettings.settings.defaultRowHeight < rowInnerHeight ||\n          previousRowHeight < rowInnerHeight)) {\n        this.instance.wtViewport.oversizedRows[sourceRowIndex] = ++rowInnerHeight;\n      }\n    }\n  }\n\n  /**\n   * Check if any of the rendered columns is higher than expected, and if so, cache them.\n   */\n  markOversizedColumnHeaders() {\n    let overlayName = this.wot.getOverlayName();\n\n    if (!this.columnHeaderCount || this.wot.wtViewport.hasOversizedColumnHeadersMarked[overlayName] || this.wtTable.isWorkingOnClone()) {\n      return;\n    }\n    let columnCount = this.wtTable.getRenderedColumnsCount();\n\n    for (let i = 0; i < this.columnHeaderCount; i++) {\n      for (let renderedColumnIndex = (-1) * this.rowHeaderCount; renderedColumnIndex < columnCount; renderedColumnIndex++) {\n        this.markIfOversizedColumnHeader(renderedColumnIndex);\n      }\n    }\n    this.wot.wtViewport.hasOversizedColumnHeadersMarked[overlayName] = true;\n  }\n\n  /**\n   *\n   */\n  adjustColumnHeaderHeights() {\n    let columnHeaders = this.wot.getSetting('columnHeaders');\n    let children = this.wot.wtTable.THEAD.childNodes;\n    let oversizedColumnHeaders = this.wot.wtViewport.oversizedColumnHeaders;\n\n    for (let i = 0, len = columnHeaders.length; i < len; i++) {\n      if (oversizedColumnHeaders[i]) {\n        if (!children[i] || children[i].childNodes.length === 0) {\n          return;\n        }\n        children[i].childNodes[0].style.height = `${oversizedColumnHeaders[i]}px`;\n      }\n    }\n  }\n\n  /**\n   * Check if column header for the specified column is higher than expected, and if so, cache it\n   *\n   * @param {Number} col Index of column\n   */\n  markIfOversizedColumnHeader(col) {\n    let sourceColIndex = this.wot.wtTable.columnFilter.renderedToSource(col);\n    let level = this.columnHeaderCount;\n    let defaultRowHeight = this.wot.wtSettings.settings.defaultRowHeight;\n    let previousColHeaderHeight;\n    let currentHeader;\n    let currentHeaderHeight;\n    let columnHeaderHeightSetting = this.wot.getSetting('columnHeaderHeight') || [];\n\n    while (level) {\n      level--;\n\n      previousColHeaderHeight = this.wot.wtTable.getColumnHeaderHeight(level);\n      currentHeader = this.wot.wtTable.getColumnHeader(sourceColIndex, level);\n\n      if (!currentHeader) {\n        /* eslint-disable no-continue */\n        continue;\n      }\n      currentHeaderHeight = innerHeight(currentHeader);\n\n      if (!previousColHeaderHeight && defaultRowHeight < currentHeaderHeight || previousColHeaderHeight < currentHeaderHeight) {\n        this.wot.wtViewport.oversizedColumnHeaders[level] = currentHeaderHeight;\n      }\n\n      if (Array.isArray(columnHeaderHeightSetting)) {\n        if (columnHeaderHeightSetting[level] != null) {\n          this.wot.wtViewport.oversizedColumnHeaders[level] = columnHeaderHeightSetting[level];\n        }\n\n      } else if (!isNaN(columnHeaderHeightSetting)) {\n        this.wot.wtViewport.oversizedColumnHeaders[level] = columnHeaderHeightSetting;\n      }\n\n      if (this.wot.wtViewport.oversizedColumnHeaders[level] < (columnHeaderHeightSetting[level] || columnHeaderHeightSetting)) {\n        this.wot.wtViewport.oversizedColumnHeaders[level] = (columnHeaderHeightSetting[level] || columnHeaderHeightSetting);\n      }\n    }\n  }\n\n  /**\n   * @param {Number} sourceRowIndex\n   * @param {HTMLTableRowElement} TR\n   * @param {Number} columnsToRender\n   * @returns {HTMLTableCellElement}\n   */\n  renderCells(sourceRowIndex, TR, columnsToRender) {\n    let TD;\n    let sourceColIndex;\n\n    for (let visibleColIndex = 0; visibleColIndex < columnsToRender; visibleColIndex++) {\n      sourceColIndex = this.columnFilter.renderedToSource(visibleColIndex);\n\n      if (visibleColIndex === 0) {\n        TD = TR.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(sourceColIndex)];\n      } else {\n        TD = TD.nextSibling; // http://jsperf.com/nextsibling-vs-indexed-childnodes\n      }\n      // If the number of headers has been reduced, we need to replace excess TH with TD\n      if (TD.nodeName == 'TH') {\n        TD = replaceThWithTd(TD, TR);\n      }\n      if (!hasClass(TD, 'hide')) {\n        TD.className = '';\n      }\n      TD.removeAttribute('style');\n      this.wot.wtSettings.settings.cellRenderer(sourceRowIndex, sourceColIndex, TD);\n    }\n\n    return TD;\n  }\n\n  /**\n   * @param {Number} columnsToRender Number of columns to render.\n   */\n  adjustColumnWidths(columnsToRender) {\n    let scrollbarCompensation = 0;\n    let sourceInstance = this.wot.cloneSource ? this.wot.cloneSource : this.wot;\n    let mainHolder = sourceInstance.wtTable.holder;\n    let defaultColumnWidth = this.wot.getSetting('defaultColumnWidth');\n    let rowHeaderWidthSetting = this.wot.getSetting('rowHeaderWidth');\n\n    if (mainHolder.offsetHeight < mainHolder.scrollHeight) {\n      scrollbarCompensation = getScrollbarWidth();\n    }\n    this.wot.wtViewport.columnsRenderCalculator.refreshStretching(this.wot.wtViewport.getViewportWidth() - scrollbarCompensation);\n\n    rowHeaderWidthSetting = this.instance.getSetting('onModifyRowHeaderWidth', rowHeaderWidthSetting);\n\n    if (rowHeaderWidthSetting != null) {\n      for (let i = 0; i < this.rowHeaderCount; i++) {\n        let width = Array.isArray(rowHeaderWidthSetting) ? rowHeaderWidthSetting[i] : rowHeaderWidthSetting;\n\n        width = width == null ? defaultColumnWidth : width;\n\n        this.COLGROUP.childNodes[i].style.width = `${width}px`;\n      }\n    }\n\n    for (let renderedColIndex = 0; renderedColIndex < columnsToRender; renderedColIndex++) {\n      let width = this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(renderedColIndex));\n\n      this.COLGROUP.childNodes[renderedColIndex + this.rowHeaderCount].style.width = `${width}px`;\n    }\n  }\n\n  /**\n   * @param {HTMLTableCellElement} TR\n   */\n  appendToTbody(TR) {\n    this.TBODY.appendChild(TR);\n    this.wtTable.tbodyChildrenLength++;\n  }\n\n  /**\n   * @param {Number} rowIndex\n   * @param {HTMLTableRowElement} currentTr\n   * @returns {HTMLTableCellElement}\n   */\n  getOrCreateTrForRow(rowIndex, currentTr) {\n    let TR;\n\n    if (rowIndex >= this.wtTable.tbodyChildrenLength) {\n      TR = this.createRow();\n      this.appendToTbody(TR);\n\n    } else if (rowIndex === 0) {\n      TR = this.TBODY.firstChild;\n\n    } else {\n      // http://jsperf.com/nextsibling-vs-indexed-childnodes\n      TR = currentTr.nextSibling;\n    }\n    if (TR.className) {\n      TR.removeAttribute('class');\n    }\n\n    return TR;\n  }\n\n  /**\n   * @returns {HTMLTableCellElement}\n   */\n  createRow() {\n    let TR = document.createElement('TR');\n\n    for (let visibleColIndex = 0; visibleColIndex < this.rowHeaderCount; visibleColIndex++) {\n      TR.appendChild(document.createElement('TH'));\n    }\n\n    return TR;\n  }\n\n  /**\n   * @param {Number} row\n   * @param {Number} col\n   * @param {HTMLTableCellElement} TH\n   */\n  renderRowHeader(row, col, TH) {\n    TH.className = '';\n    TH.removeAttribute('style');\n    this.rowHeaders[col](row, TH, col);\n  }\n\n  /**\n   * @param {Number} row\n   * @param {HTMLTableCellElement} TR\n   */\n  renderRowHeaders(row, TR) {\n    for (let TH = TR.firstChild, visibleColIndex = 0; visibleColIndex < this.rowHeaderCount; visibleColIndex++) {\n      // If the number of row headers increased we need to create TH or replace an existing TD node with TH\n      if (!TH) {\n        TH = document.createElement('TH');\n        TR.appendChild(TH);\n\n      } else if (TH.nodeName == 'TD') {\n        TH = replaceTdWithTh(TH, TR);\n      }\n      this.renderRowHeader(row, visibleColIndex, TH);\n      // http://jsperf.com/nextsibling-vs-indexed-childnodes\n      TH = TH.nextSibling;\n    }\n  }\n\n  /**\n   * Adjust the number of COL and TH elements to match the number of columns and headers that need to be rendered\n   */\n  adjustAvailableNodes() {\n    this.adjustColGroups();\n    this.adjustThead();\n  }\n\n  /**\n   * Renders the column headers\n   */\n  renderColumnHeaders() {\n    if (!this.columnHeaderCount) {\n      return;\n    }\n    let columnCount = this.wtTable.getRenderedColumnsCount();\n\n    for (let i = 0; i < this.columnHeaderCount; i++) {\n      let TR = this.getTrForColumnHeaders(i);\n\n      for (let renderedColumnIndex = (-1) * this.rowHeaderCount; renderedColumnIndex < columnCount; renderedColumnIndex++) {\n        let sourceCol = this.columnFilter.renderedToSource(renderedColumnIndex);\n\n        this.renderColumnHeader(i, sourceCol, TR.childNodes[renderedColumnIndex + this.rowHeaderCount]);\n      }\n    }\n  }\n\n  /**\n   * Adjusts the number of COL elements to match the number of columns that need to be rendered\n   */\n  adjustColGroups() {\n    let columnCount = this.wtTable.getRenderedColumnsCount();\n\n    while (this.wtTable.colgroupChildrenLength < columnCount + this.rowHeaderCount) {\n      this.COLGROUP.appendChild(document.createElement('COL'));\n      this.wtTable.colgroupChildrenLength++;\n    }\n    while (this.wtTable.colgroupChildrenLength > columnCount + this.rowHeaderCount) {\n      this.COLGROUP.removeChild(this.COLGROUP.lastChild);\n      this.wtTable.colgroupChildrenLength--;\n    }\n    if (this.rowHeaderCount) {\n      addClass(this.COLGROUP.childNodes[0], 'rowHeader');\n    }\n  }\n\n  /**\n   * Adjusts the number of TH elements in THEAD to match the number of headers and columns that need to be rendered\n   */\n  adjustThead() {\n    let columnCount = this.wtTable.getRenderedColumnsCount();\n    let TR = this.THEAD.firstChild;\n\n    if (this.columnHeaders.length) {\n      for (let i = 0, len = this.columnHeaders.length; i < len; i++) {\n        TR = this.THEAD.childNodes[i];\n\n        if (!TR) {\n          TR = document.createElement('TR');\n          this.THEAD.appendChild(TR);\n        }\n        this.theadChildrenLength = TR.childNodes.length;\n\n        while (this.theadChildrenLength < columnCount + this.rowHeaderCount) {\n          TR.appendChild(document.createElement('TH'));\n          this.theadChildrenLength++;\n        }\n        while (this.theadChildrenLength > columnCount + this.rowHeaderCount) {\n          TR.removeChild(TR.lastChild);\n          this.theadChildrenLength--;\n        }\n      }\n      let theadChildrenLength = this.THEAD.childNodes.length;\n\n      if (theadChildrenLength > this.columnHeaders.length) {\n        for (let i = this.columnHeaders.length; i < theadChildrenLength; i++) {\n          this.THEAD.removeChild(this.THEAD.lastChild);\n        }\n      }\n    } else if (TR) {\n      empty(TR);\n    }\n  }\n\n  /**\n   * @param {Number} index\n   * @returns {HTMLTableCellElement}\n   */\n  getTrForColumnHeaders(index) {\n    return this.THEAD.childNodes[index];\n  }\n\n  /**\n   * @param {Number} row\n   * @param {Number} col\n   * @param {HTMLTableCellElement} TH\n   * @returns {*}\n   */\n  renderColumnHeader(row, col, TH) {\n    TH.className = '';\n    TH.removeAttribute('style');\n\n    return this.columnHeaders[row](col, TH, row);\n  }\n\n  /**\n   * Add and/or remove the TDs to match the desired number\n   *\n   * @param {HTMLTableCellElement} TR Table row in question\n   * @param {Number} desiredCount The desired number of TDs in the TR\n   */\n  adjustColumns(TR, desiredCount) {\n    let count = TR.childNodes.length;\n\n    while (count < desiredCount) {\n      let TD = document.createElement('TD');\n\n      TR.appendChild(TD);\n      count++;\n    }\n    while (count > desiredCount) {\n      TR.removeChild(TR.lastChild);\n      count--;\n    }\n  }\n\n  /**\n   * @param {Number} columnsToRender\n   */\n  removeRedundantColumns(columnsToRender) {\n    while (this.wtTable.tbodyChildrenLength > columnsToRender) {\n      this.TBODY.removeChild(this.TBODY.lastChild);\n      this.wtTable.tbodyChildrenLength--;\n    }\n  }\n}\n\nfunction replaceTdWithTh(TD, TR) {\n  let TH = document.createElement('TH');\n\n  TR.insertBefore(TH, TD);\n  TR.removeChild(TD);\n\n  return TH;\n}\n\nfunction replaceThWithTd(TH, TR) {\n  let TD = document.createElement('TD');\n\n  TR.insertBefore(TD, TH);\n  TR.removeChild(TH);\n\n  return TD;\n}\n\nexport default TableRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/tableRenderer.js","import {\n  getScrollbarWidth,\n  getScrollTop,\n  getStyle,\n  offset,\n  outerHeight,\n  outerWidth,\n} from './../../../helpers/dom/element';\nimport {objectEach} from './../../../helpers/object';\nimport EventManager from './../../../eventManager';\nimport ViewportColumnsCalculator from './calculator/viewportColumns';\nimport ViewportRowsCalculator from './calculator/viewportRows';\n\n/**\n * @class Viewport\n */\nclass Viewport {\n  /**\n   * @param wotInstance\n   */\n  constructor(wotInstance) {\n    this.wot = wotInstance;\n    // legacy support\n    this.instance = this.wot;\n\n    this.oversizedRows = [];\n    this.oversizedColumnHeaders = [];\n    this.hasOversizedColumnHeadersMarked = {};\n    this.clientHeight = 0;\n    this.containerWidth = NaN;\n    this.rowHeaderWidth = NaN;\n    this.rowsVisibleCalculator = null;\n    this.columnsVisibleCalculator = null;\n\n    this.eventManager = new EventManager(this.wot);\n    this.eventManager.addEventListener(window, 'resize', () => {\n      this.clientHeight = this.getWorkspaceHeight();\n    });\n  }\n\n  /**\n   * @returns {number}\n   */\n  getWorkspaceHeight() {\n    let trimmingContainer = this.instance.wtOverlays.topOverlay.trimmingContainer;\n    let elemHeight;\n    let height = 0;\n\n    if (trimmingContainer === window) {\n      height = document.documentElement.clientHeight;\n\n    } else {\n      elemHeight = outerHeight(trimmingContainer);\n      // returns height without DIV scrollbar\n      height = (elemHeight > 0 && trimmingContainer.clientHeight > 0) ? trimmingContainer.clientHeight : Infinity;\n    }\n\n    return height;\n  }\n\n  getWorkspaceWidth() {\n    let width;\n    let totalColumns = this.wot.getSetting('totalColumns');\n    let trimmingContainer = this.instance.wtOverlays.leftOverlay.trimmingContainer;\n    let overflow;\n    let stretchSetting = this.wot.getSetting('stretchH');\n    let docOffsetWidth = document.documentElement.offsetWidth;\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n\n    if (preventOverflow) {\n      return outerWidth(this.instance.wtTable.wtRootElement);\n    }\n\n    if (this.wot.getSetting('freezeOverlays')) {\n      width = Math.min(docOffsetWidth - this.getWorkspaceOffset().left, docOffsetWidth);\n    } else {\n      width = Math.min(this.getContainerFillWidth(), docOffsetWidth - this.getWorkspaceOffset().left, docOffsetWidth);\n    }\n\n    if (trimmingContainer === window && totalColumns > 0 && this.sumColumnWidths(0, totalColumns - 1) > width) {\n      // in case sum of column widths is higher than available stylesheet width, let's assume using the whole window\n      // otherwise continue below, which will allow stretching\n      // this is used in `scroll_window.html`\n      // TODO test me\n      return document.documentElement.clientWidth;\n    }\n\n    if (trimmingContainer !== window) {\n      overflow = getStyle(this.instance.wtOverlays.leftOverlay.trimmingContainer, 'overflow');\n\n      if (overflow == 'scroll' || overflow == 'hidden' || overflow == 'auto') {\n        // this is used in `scroll.html`\n        // TODO test me\n        return Math.max(width, trimmingContainer.clientWidth);\n      }\n    }\n\n    if (stretchSetting === 'none' || !stretchSetting) {\n      // if no stretching is used, return the maximum used workspace width\n      return Math.max(width, outerWidth(this.instance.wtTable.TABLE));\n    }\n      // if stretching is used, return the actual container width, so the columns can fit inside it\n    return width;\n\n  }\n\n  /**\n   * Checks if viewport has vertical scroll\n   *\n   * @returns {Boolean}\n   */\n  hasVerticalScroll() {\n    return this.getWorkspaceActualHeight() > this.getWorkspaceHeight();\n  }\n\n  /**\n   * Checks if viewport has horizontal scroll\n   *\n   * @returns {Boolean}\n   */\n  hasHorizontalScroll() {\n    return this.getWorkspaceActualWidth() > this.getWorkspaceWidth();\n  }\n\n  /**\n   * @param from\n   * @param length\n   * @returns {Number}\n   */\n  sumColumnWidths(from, length) {\n    let sum = 0;\n\n    while (from < length) {\n      sum += this.wot.wtTable.getColumnWidth(from);\n      from++;\n    }\n\n    return sum;\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getContainerFillWidth() {\n    if (this.containerWidth) {\n      return this.containerWidth;\n    }\n    let mainContainer = this.instance.wtTable.holder;\n    let fillWidth;\n    let dummyElement;\n\n    dummyElement = document.createElement('div');\n    dummyElement.style.width = '100%';\n    dummyElement.style.height = '1px';\n    mainContainer.appendChild(dummyElement);\n    fillWidth = dummyElement.offsetWidth;\n\n    this.containerWidth = fillWidth;\n    mainContainer.removeChild(dummyElement);\n\n    return fillWidth;\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getWorkspaceOffset() {\n    return offset(this.wot.wtTable.TABLE);\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getWorkspaceActualHeight() {\n    return outerHeight(this.wot.wtTable.TABLE);\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getWorkspaceActualWidth() {\n    return outerWidth(this.wot.wtTable.TABLE) ||\n      outerWidth(this.wot.wtTable.TBODY) ||\n      outerWidth(this.wot.wtTable.THEAD); // IE8 reports 0 as <table> offsetWidth;\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getColumnHeaderHeight() {\n    if (isNaN(this.columnHeaderHeight)) {\n      this.columnHeaderHeight = outerHeight(this.wot.wtTable.THEAD);\n    }\n\n    return this.columnHeaderHeight;\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getViewportHeight() {\n    let containerHeight = this.getWorkspaceHeight();\n    let columnHeaderHeight;\n\n    if (containerHeight === Infinity) {\n      return containerHeight;\n    }\n    columnHeaderHeight = this.getColumnHeaderHeight();\n\n    if (columnHeaderHeight > 0) {\n      containerHeight -= columnHeaderHeight;\n    }\n\n    return containerHeight;\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getRowHeaderWidth() {\n    let rowHeadersHeightSetting = this.instance.getSetting('rowHeaderWidth');\n    let rowHeaders = this.instance.getSetting('rowHeaders');\n\n    if (rowHeadersHeightSetting) {\n      this.rowHeaderWidth = 0;\n\n      for (let i = 0, len = rowHeaders.length; i < len; i++) {\n        this.rowHeaderWidth += rowHeadersHeightSetting[i] || rowHeadersHeightSetting;\n      }\n    }\n\n    if (this.wot.cloneSource) {\n      return this.wot.cloneSource.wtViewport.getRowHeaderWidth();\n    }\n\n    if (isNaN(this.rowHeaderWidth)) {\n\n      if (rowHeaders.length) {\n        let TH = this.instance.wtTable.TABLE.querySelector('TH');\n        this.rowHeaderWidth = 0;\n\n        for (let i = 0, len = rowHeaders.length; i < len; i++) {\n          if (TH) {\n            this.rowHeaderWidth += outerWidth(TH);\n            TH = TH.nextSibling;\n\n          } else {\n            // yes this is a cheat but it worked like that before, just taking assumption from CSS instead of measuring.\n            // TODO: proper fix\n            this.rowHeaderWidth += 50;\n          }\n        }\n      } else {\n        this.rowHeaderWidth = 0;\n      }\n    }\n\n    this.rowHeaderWidth = this.instance.getSetting('onModifyRowHeaderWidth', this.rowHeaderWidth) || this.rowHeaderWidth;\n\n    return this.rowHeaderWidth;\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getViewportWidth() {\n    let containerWidth = this.getWorkspaceWidth();\n    let rowHeaderWidth;\n\n    if (containerWidth === Infinity) {\n      return containerWidth;\n    }\n    rowHeaderWidth = this.getRowHeaderWidth();\n\n    if (rowHeaderWidth > 0) {\n      return containerWidth - rowHeaderWidth;\n    }\n\n    return containerWidth;\n  }\n\n  /**\n   * Creates:\n   *  - rowsRenderCalculator (before draw, to qualify rows for rendering)\n   *  - rowsVisibleCalculator (after draw, to measure which rows are actually visible)\n   *\n   * @returns {ViewportRowsCalculator}\n   */\n  createRowsCalculator(visible = false) {\n    let height;\n    let pos;\n    let fixedRowsTop;\n    let scrollbarHeight;\n    let fixedRowsBottom;\n    let fixedRowsHeight;\n    let totalRows;\n\n    this.rowHeaderWidth = NaN;\n\n    if (this.wot.wtSettings.settings.renderAllRows) {\n      height = Infinity;\n    } else {\n      height = this.getViewportHeight();\n    }\n    pos = this.wot.wtOverlays.topOverlay.getScrollPosition() - this.wot.wtOverlays.topOverlay.getTableParentOffset();\n\n    if (pos < 0) {\n      pos = 0;\n    }\n    fixedRowsTop = this.wot.getSetting('fixedRowsTop');\n    fixedRowsBottom = this.wot.getSetting('fixedRowsBottom');\n    totalRows = this.wot.getSetting('totalRows');\n\n    if (fixedRowsTop) {\n      fixedRowsHeight = this.wot.wtOverlays.topOverlay.sumCellSizes(0, fixedRowsTop);\n      pos += fixedRowsHeight;\n      height -= fixedRowsHeight;\n    }\n\n    if (fixedRowsBottom && this.wot.wtOverlays.bottomOverlay.clone) {\n      fixedRowsHeight = this.wot.wtOverlays.bottomOverlay.sumCellSizes(totalRows - fixedRowsBottom, totalRows);\n\n      height -= fixedRowsHeight;\n    }\n\n    if (this.wot.wtTable.holder.clientHeight === this.wot.wtTable.holder.offsetHeight) {\n      scrollbarHeight = 0;\n    } else {\n      scrollbarHeight = getScrollbarWidth();\n    }\n\n    return new ViewportRowsCalculator(\n      height,\n      pos,\n      this.wot.getSetting('totalRows'),\n      (sourceRow) => this.wot.wtTable.getRowHeight(sourceRow),\n      visible ? null : this.wot.wtSettings.settings.viewportRowCalculatorOverride,\n      visible,\n      scrollbarHeight\n    );\n  }\n\n  /**\n   * Creates:\n   *  - columnsRenderCalculator (before draw, to qualify columns for rendering)\n   *  - columnsVisibleCalculator (after draw, to measure which columns are actually visible)\n   *\n   * @returns {ViewportRowsCalculator}\n   */\n  createColumnsCalculator(visible = false) {\n    let width = this.getViewportWidth();\n    let pos;\n    let fixedColumnsLeft;\n\n    this.columnHeaderHeight = NaN;\n\n    pos = this.wot.wtOverlays.leftOverlay.getScrollPosition() - this.wot.wtOverlays.leftOverlay.getTableParentOffset();\n\n    if (pos < 0) {\n      pos = 0;\n    }\n    fixedColumnsLeft = this.wot.getSetting('fixedColumnsLeft');\n\n    if (fixedColumnsLeft) {\n      let fixedColumnsWidth = this.wot.wtOverlays.leftOverlay.sumCellSizes(0, fixedColumnsLeft);\n      pos += fixedColumnsWidth;\n      width -= fixedColumnsWidth;\n    }\n    if (this.wot.wtTable.holder.clientWidth !== this.wot.wtTable.holder.offsetWidth) {\n      width -= getScrollbarWidth();\n    }\n\n    return new ViewportColumnsCalculator(\n      width,\n      pos,\n      this.wot.getSetting('totalColumns'),\n      (sourceCol) => this.wot.wtTable.getColumnWidth(sourceCol),\n      visible ? null : this.wot.wtSettings.settings.viewportColumnCalculatorOverride,\n      visible,\n      this.wot.getSetting('stretchH'),\n      (stretchedWidth, column) => this.wot.getSetting('onBeforeStretchingColumnWidth', stretchedWidth, column)\n    );\n  }\n\n  /**\n   * Creates rowsRenderCalculator and columnsRenderCalculator (before draw, to determine what rows and\n   * cols should be rendered)\n   *\n   * @param fastDraw {Boolean} If `true`, will try to avoid full redraw and only update the border positions.\n   *                           If `false` or `undefined`, will perform a full redraw\n   * @returns fastDraw {Boolean} The fastDraw value, possibly modified\n   */\n  createRenderCalculators(fastDraw = false) {\n    if (fastDraw) {\n      let proposedRowsVisibleCalculator = this.createRowsCalculator(true);\n      let proposedColumnsVisibleCalculator = this.createColumnsCalculator(true);\n\n      if (!(this.areAllProposedVisibleRowsAlreadyRendered(proposedRowsVisibleCalculator) &&\n          this.areAllProposedVisibleColumnsAlreadyRendered(proposedColumnsVisibleCalculator))) {\n        fastDraw = false;\n      }\n    }\n\n    if (!fastDraw) {\n      this.rowsRenderCalculator = this.createRowsCalculator();\n      this.columnsRenderCalculator = this.createColumnsCalculator();\n    }\n    // delete temporarily to make sure that renderers always use rowsRenderCalculator, not rowsVisibleCalculator\n    this.rowsVisibleCalculator = null;\n    this.columnsVisibleCalculator = null;\n\n    return fastDraw;\n  }\n\n  /**\n   * Creates rowsVisibleCalculator and columnsVisibleCalculator (after draw, to determine what are\n   * the actually visible rows and columns)\n   */\n  createVisibleCalculators() {\n    this.rowsVisibleCalculator = this.createRowsCalculator(true);\n    this.columnsVisibleCalculator = this.createColumnsCalculator(true);\n  }\n\n  /**\n   * Returns information whether proposedRowsVisibleCalculator viewport\n   * is contained inside rows rendered in previous draw (cached in rowsRenderCalculator)\n   *\n   * @param {Object} proposedRowsVisibleCalculator\n   * @returns {Boolean} Returns `true` if all proposed visible rows are already rendered (meaning: redraw is not needed).\n   *                    Returns `false` if at least one proposed visible row is not already rendered (meaning: redraw is needed)\n   */\n  areAllProposedVisibleRowsAlreadyRendered(proposedRowsVisibleCalculator) {\n    if (this.rowsVisibleCalculator) {\n      if (proposedRowsVisibleCalculator.startRow < this.rowsRenderCalculator.startRow ||\n          (proposedRowsVisibleCalculator.startRow === this.rowsRenderCalculator.startRow &&\n          proposedRowsVisibleCalculator.startRow > 0)) {\n        return false;\n\n      } else if (proposedRowsVisibleCalculator.endRow > this.rowsRenderCalculator.endRow ||\n          (proposedRowsVisibleCalculator.endRow === this.rowsRenderCalculator.endRow &&\n          proposedRowsVisibleCalculator.endRow < this.wot.getSetting('totalRows') - 1)) {\n        return false;\n\n      }\n      return true;\n\n    }\n\n    return false;\n  }\n\n  /**\n   * Returns information whether proposedColumnsVisibleCalculator viewport\n   * is contained inside column rendered in previous draw (cached in columnsRenderCalculator)\n   *\n   * @param {Object} proposedColumnsVisibleCalculator\n   * @returns {Boolean} Returns `true` if all proposed visible columns are already rendered (meaning: redraw is not needed).\n   *                    Returns `false` if at least one proposed visible column is not already rendered (meaning: redraw is needed)\n   */\n  areAllProposedVisibleColumnsAlreadyRendered(proposedColumnsVisibleCalculator) {\n    if (this.columnsVisibleCalculator) {\n      if (proposedColumnsVisibleCalculator.startColumn < this.columnsRenderCalculator.startColumn ||\n          (proposedColumnsVisibleCalculator.startColumn === this.columnsRenderCalculator.startColumn &&\n          proposedColumnsVisibleCalculator.startColumn > 0)) {\n        return false;\n\n      } else if (proposedColumnsVisibleCalculator.endColumn > this.columnsRenderCalculator.endColumn ||\n          (proposedColumnsVisibleCalculator.endColumn === this.columnsRenderCalculator.endColumn &&\n          proposedColumnsVisibleCalculator.endColumn < this.wot.getSetting('totalColumns') - 1)) {\n        return false;\n\n      }\n      return true;\n\n    }\n\n    return false;\n  }\n\n  /**\n   * Resets values in keys of the hasOversizedColumnHeadersMarked object after updateSettings.\n   */\n  resetHasOversizedColumnHeadersMarked() {\n    objectEach(this.hasOversizedColumnHeadersMarked, (value, key, object) => {\n      object[key] = void 0;\n    });\n  }\n}\n\nexport default Viewport;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/viewport.js","import {isDefined} from './helpers/mixed';\n\n/**\n * @alias Options\n * @constructor\n * @description\n\n * ## Constructor options\n *\n * Constructor options are applied using an object literal passed as a second argument to the Handsontable constructor.\n *\n * ```js\n * var hot = new Handsontable(document.getElementById('example1'), {\n *   data: myArray,\n *   width: 400,\n *   height: 300\n * });\n * ```\n *\n * ---\n * ## Cascading configuration\n *\n * Handsontable 0.9 and newer is using *Cascading Configuration*, which is a fast way to provide configuration options\n * for the entire table, including its columns and particular cells.\n *\n * Consider the following example:\n * ```js\n * var hot = new Handsontable(document.getElementById('example'), {\n *   readOnly: true,\n *   columns: [\n *     {readOnly: false},\n *     {},\n *     {}\n *   ],\n *   cells: function (row, col, prop) {\n *     var cellProperties = {};\n *\n *     if (row === 0 && col === 0) {\n *       cellProperties.readOnly = true;\n *     }\n *\n *     return cellProperties;\n *   }\n * });\n * ```\n *\n * The above notation will result in all TDs being *read only*, except for first column TDs which will be *editable*, except for the TD in top left corner which will still be *read only*.\n *\n * ### The Cascading Configuration model\n *\n * ##### 1. Constructor\n *\n * Configuration options that are provided using first-level `handsontable(container, {option: \"value\"})` and `updateSettings` method.\n *\n * ##### 2. Columns\n *\n * Configuration options that are provided using second-level object `handsontable(container, {columns: {option: \"value\"}]})`\n *\n * ##### 3. Cells\n *\n * Configuration options that are provided using second-level function `handsontable(container, {cells: function: (row, col, prop){ }})`\n *\n * ---\n * ## Architecture performance\n *\n * The Cascading Configuration model is based on prototypical inheritance. It is much faster and memory efficient compared\n * to the previous model that used jQuery extend. See: [http://jsperf.com/extending-settings](http://jsperf.com/extending-settings).\n *\n * ---\n * __Important notice:__ In order for the data separation to work properly, make sure that each instance of Handsontable has a unique `id`.\n */\nfunction DefaultSettings() {};\n\nDefaultSettings.prototype = {\n  /**\n   * @description\n   * Initial data source that will be bound to the data grid __by reference__ (editing data grid alters the data source).\n   * Can be declared as an Array of Arrays, Array of Objects or a Function.\n   *\n   * See [Understanding binding as reference](http://docs.handsontable.com/tutorial-data-binding.html#page-reference).\n   *\n   * @type {Array|Function}\n   * @default undefined\n   */\n  data: void 0,\n\n  /**\n   * @description\n   * Defines the structure of a new row when data source is an array of objects.\n   *\n   * See [data-schema](http://docs.handsontable.com/tutorial-data-sources.html#page-data-schema) for examples.\n   *\n   * @type {Object}\n   * @default undefined\n   */\n  dataSchema: void 0,\n\n  /**\n   * Width of the grid. Can be a value or a function that returns a value.\n   *\n   * @type {Number|Function}\n   * @default undefined\n   */\n  width: void 0,\n\n  /**\n   * Height of the grid. Can be a number or a function that returns a number.\n   *\n   * @type {Number|Function}\n   * @default undefined\n   */\n  height: void 0,\n\n  /**\n   * @description\n   * Initial number of rows.\n   *\n   * __Notice:__ This option only has effect in Handsontable constructor and only if `data` option is not provided\n   *\n   * @type {Number}\n   * @default 5\n   */\n  startRows: 5,\n\n  /**\n   * @description\n   * Initial number of columns.\n   *\n   * __Notice:__ This option only has effect in Handsontable constructor and only if `data` option is not provided\n   *\n   * @type {Number}\n   * @default 5\n   */\n  startCols: 5,\n\n  /**\n   * Setting `true` or `false` will enable or disable the default row headers (1, 2, 3).\n   * You can also define an array `['One', 'Two', 'Three', ...]` or a function to define the headers.\n   * If a function is set the index of the row is passed as a parameter.\n   *\n   * @type {Boolean|Array|Function}\n   * @default null\n   * @example\n   * ```js\n   * ...\n   * // as boolean\n   * rowHeaders: true,\n   * ...\n   *\n   * ...\n   * // as array\n   * rowHeaders: [1, 2, 3],\n   * ...\n   *\n   * ...\n   * // as function\n   * rowHeaders: function(index) {\n   *   return index + ': AB';\n   * },\n   * ...\n   * ```\n   */\n  rowHeaders: void 0,\n\n  /**\n   * Setting `true` or `false` will enable or disable the default column headers (A, B, C).\n   * You can also define an array `['One', 'Two', 'Three', ...]` or a function to define the headers.\n   * If a function is set, then the index of the column is passed as a parameter.\n   *\n   * @type {Boolean|Array|Function}\n   * @default null\n   * @example\n   * ```js\n   * ...\n   * // as boolean\n   * colHeaders: true,\n   * ...\n   *\n   * ...\n   * // as array\n   * colHeaders: ['A', 'B', 'C'],\n   * ...\n   *\n   * ...\n   * // as function\n   * colHeaders: function(index) {\n   *   return index + ': AB';\n   * },\n   * ...\n   * ```\n   */\n  colHeaders: null,\n\n  /**\n   * Defines column widths in pixels. Accepts number, string (that will be converted to a number),\n   * array of numbers (if you want to define column width separately for each column) or a\n   * function (if you want to set column width dynamically on each render).\n   *\n   * @type {Array|Function|Number|String}\n   * @default undefined\n   */\n  colWidths: void 0,\n\n  /**\n   * Defines row heights in pixels. Accepts numbers, strings (that will be converted into a number),\n   * array of numbers (if you want to define row height separately for each row) or a\n   * function (if you want to set row height dynamically on each render).\n   *\n   * @type {Array|Function|Number|String}\n   * @default undefined\n   */\n  rowHeights: void 0,\n\n  /**\n   * @description\n   * Defines the cell properties and data binding for certain columns.\n   *\n   * __Notice:__ Using this option sets a fixed number of columns (options `startCols`, `minCols`, `maxCols` will be ignored).\n   *\n   * See [documentation -> datasources.html](http://docs.handsontable.com/tutorial-data-sources.html#page-nested) for examples.\n   *\n   * @type {Array}\n   * @default undefined\n   * @example\n   * ```js\n   * ...\n   * columns: [\n   *   {\n   *     // column options for the first column\n   *     type: 'numeric',\n   *     format: '0,0.00 $'\n   *   },\n   *   {\n   *     // column options for the second column\n   *     type: 'text',\n   *     readOnly: true\n   *   }\n   * ],\n   * ...\n   * ```\n   */\n  columns: void 0,\n\n  /**\n   * @description\n   * Defines the cell properties for given `row`, `col`, `prop` coordinates.\n   * Any constructor or column option may be overwritten for a particular cell (row/column combination)\n   * using the `cells` property in the Handsontable constructor.\n   *\n   * __Note:__ Parameters `row` and `col` always represent __physical indexes__. Example below show how to execute\n   * operations based on the __visual__ representation of Handsontable.\n   *\n   * @type {Function}\n   * @default undefined\n   * @example\n   * ```js\n   * ...\n   * cells: function (row, col, prop) {\n   *   var cellProperties = {};\n   *   var visualRowIndex = this.instance.toVisualRow(row);\n   *   var visualColIndex = this.instance.toVisualColumn(col);\n   *\n   *   if (visualRowIndex === 0 && visualColIndex === 0) {\n   *     cellProperties.readOnly = true;\n   *   }\n   *\n   *   return cellProperties;\n   * },\n   * ...\n   * ```\n   */\n  cells: void 0,\n\n  /**\n   * Any constructor or column option may be overwritten for a particular cell (row/column combination), using `cell`\n   * array passed to the Handsontable constructor.\n   *\n   * @type {Array}\n   * @default []\n   * @example\n   * ```js\n   * ...\n   * cell: [\n   *   {row: 0, col: 0, readOnly: true}\n   * ],\n   * ...\n   * ```\n   */\n  cell: [],\n\n  /**\n   * @description\n   * If `true`, enables the {@link Comments} plugin, which enables an option to apply cell comments through the context menu\n   * (configurable with context menu keys `commentsAddEdit`, `commentsRemove`).\n   *\n   * To initialize Handsontable with predefined comments, provide cell coordinates and comment text values in a form of an array.\n   *\n   * See [Comments](http://docs.handsontable.com/demo-comments_.html) demo for examples.\n   *\n   * @since 0.11.0\n   * @type {Boolean|Array}\n   * @default false\n   * @example\n   * ```js\n   * ...\n   * comments: [{row: 1, col: 1, comment: {value: \"Test comment\"}}],\n   * ...\n   * ```\n   */\n  comments: false,\n\n  /**\n   * @description\n   * If `true`, enables the Custom Borders plugin, which enables an option to apply custom borders through the context menu (configurable with context menu key `borders`).\n   *\n   * To initialize Handsontable with predefined custom borders, provide cell coordinates and border styles in a form of an array.\n   *\n   * See [Custom Borders](http://docs.handsontable.com/demo-custom-borders.html) demo for examples.\n   *\n   * @since 0.11.0\n   * @type {Boolean|Array}\n   * @default false\n   * @example\n   * ```js\n   * ...\n   * customBorders: [\n   *   {range: {\n   *     from: {row: 1, col: 1},\n   *     to: {row: 3, col: 4}},\n   *     left: {},\n   *     right: {},\n   *     top: {},\n   *     bottom: {}\n   *   }\n   * ],\n   * ...\n   *\n   * // or\n   * ...\n   * customBorders: [\n   *   {row: 2, col: 2, left: {width: 2, color: 'red'},\n   *     right: {width: 1, color: 'green'}, top: '', bottom: ''}\n   * ],\n   * ...\n   * ```\n   */\n  customBorders: false,\n\n  /**\n   * Minimum number of rows. At least that number of rows will be created during initialization.\n   *\n   * @type {Number}\n   * @default 0\n   */\n  minRows: 0,\n\n  /**\n   * Minimum number of columns. At least that number of columns will be created during initialization.\n   *\n   * @type {Number}\n   * @default 0\n   */\n  minCols: 0,\n\n  /**\n   * Maximum number of rows. If set to a value lower than the initial row count, the data will be trimmed to the provided value as the number of rows.\n   *\n   * @type {Number}\n   * @default Infinity\n   */\n  maxRows: Infinity,\n\n  /**\n   * Maximum number of cols. If set to a value lower than the initial col count, the data will be trimmed to the provided value as the number of cols.\n   *\n   * @type {Number}\n   * @default Infinity\n   */\n  maxCols: Infinity,\n\n  /**\n   * When set to 1 (or more), Handsontable will add a new row at the end of grid if there are no more empty rows.\n   * (unless the number of rows exceeds the one set in the `maxRows` property)\n   *\n   * @type {Number}\n   * @default 0\n   */\n  minSpareRows: 0,\n\n  /**\n   * When set to 1 (or more), Handsontable will add a new column at the end of grid if there are no more empty columns.\n   * (unless the number of rows exceeds the one set in the `maxCols` property)\n   *\n   * @type {Number}\n   * @default 0\n   */\n  minSpareCols: 0,\n\n  /**\n   * If set to `false`, there won't be an option to insert new rows in the Context Menu.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  allowInsertRow: true,\n\n  /**\n   * If set to `false`, there won't be an option to insert new columns in the Context Menu.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  allowInsertColumn: true,\n\n  /**\n   * If set to `false`, there won't be an option to remove rows in the Context Menu.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  allowRemoveRow: true,\n\n  /**\n   * If set to `false`, there won't be an option to remove columns in the Context Menu.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  allowRemoveColumn: true,\n\n  /**\n   * If true, selection of multiple cells using keyboard or mouse is allowed.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  multiSelect: true,\n\n  /**\n   * Enables the fill handle (drag-down and copy-down) functionality, which shows a small rectangle in bottom\n   * right corner of the selected area, that let's you expand values to the adjacent cells.\n   *\n   * Possible values: `true` (to enable in all directions), `'vertical'` or `'horizontal'` (to enable in one direction),\n   * `false` (to disable completely). Setting to `true` enables the fillHandle plugin.\n   *\n   * Since 0.23.0 you can pass object to plugin which allows you to add more options for this functionality. If `autoInsertRow`\n   * option is `true`, fill-handler will create new rows till it reaches the last row. It is enabled by default.\n   *\n   * @example\n   * ```js\n   * ...\n   * fillHandle: true // enable plugin in all directions and with autoInsertRow as true\n   * ...\n   * // or\n   * ...\n   * fillHandle: 'vertical' // enable plugin in vertical direction and with autoInsertRow as true\n   * ...\n   * // or\n   * ...\n   * fillHandle: { // enable plugin in both directions and with autoInsertRow as false\n   *   autoInsertRow: false,\n   * }\n   * // or\n   * ...\n   * fillHandle: { // enable plugin in vertical direction and with autoInsertRow as false\n   *   autoInsertRow: false,\n   *   direction: 'vertical' // 'vertical' or 'horizontal'\n   * }\n   * ```\n   *\n   * @type {Boolean|String|Object}\n   * @default true\n   */\n  fillHandle: true,\n\n  /**\n   * Allows to specify the number of fixed (or *frozen*) rows at the top of the table.\n   *\n   * @type {Number}\n   * @default 0\n   * @example\n   * ```js\n   * fixedRowsTop: 3 // This would freeze the top 3 rows of the table.\n   * ```\n   */\n  fixedRowsTop: 0,\n\n  /**\n   * Allows to specify the number of fixed (or *frozen*) rows at the bottom of the table.\n   *\n   * @pro\n   * @type {Number}\n   * @default 0\n   * @example\n   * ```js\n   * fixedRowsBottom: 3 // This would freeze the top 3 rows of the table.\n   * ```\n   */\n  fixedRowsBottom: 0,\n\n  /**\n   * Allows to specify the number of fixed (or *frozen*) columns on the left of the table.\n   *\n   * @type {Number}\n   * @default 0\n   * @example\n   * ```js\n   * fixedColumnsLeft: 3 // This would freeze the top 3 rows of the table.\n   * ```\n   */\n  fixedColumnsLeft: 0,\n\n  /**\n   * If `true`, mouse click outside the grid will deselect the current selection.\n   * Can be a function that takes the click event target and returns a boolean.\n   *\n   * @type {Boolean|Function}\n   * @default true\n   */\n  outsideClickDeselects: true,\n\n  /**\n   * If `true`, <kbd>ENTER</kbd> begins editing mode (like in Google Docs). If `false`, <kbd>ENTER</kbd> moves to next\n   * row (like Excel) and adds a new row if necessary. <kbd>TAB</kbd> adds new column if necessary.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  enterBeginsEditing: true,\n\n  /**\n   * Defines the cursor movement after <kbd>ENTER</kbd> was pressed (<kbd>SHIFT</kbd> + <kbd>ENTER</kbd> uses a negative vector).\n   * Can be an object or a function that returns an object. The event argument passed to the function\n   * is a DOM Event object received after the <kbd>ENTER</kbd> key has been pressed. This event object can be used to check\n   * whether user pressed <kbd>ENTER</kbd> or <kbd>SHIFT</kbd> + <kbd>ENTER</kbd>.\n   *\n   * @type {Object|Function}\n   * @default {row: 1, col: 0}\n   */\n  enterMoves: {row: 1, col: 0},\n\n  /**\n   * Defines the cursor movement after <kbd>TAB</kbd> is pressed (<kbd>SHIFT</kbd> + <kbd>TAB</kbd> uses a negative vector).\n   * Can be an object or a function that returns an object. The event argument passed to the function\n   * is a DOM Event object received after the <kbd>TAB</kbd> key has been pressed. This event object can be used to check\n   * whether user pressed <kbd>TAB</kbd> or <kbd>SHIFT</kbd> + <kbd>TAB</kbd>.\n   *\n   * @type {Object}\n   * @default {row: 0, col: 1}\n   */\n  tabMoves: {row: 0, col: 1},\n\n  /**\n   * If `true`, pressing <kbd>TAB</kbd> or right arrow in the last column will move to first column in next row.\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  autoWrapRow: false,\n\n  /**\n   * If `true`, pressing <kbd>ENTER</kbd> or down arrow in the last row will move to the first row in the next column.\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  autoWrapCol: false,\n\n  /**\n   * Maximum number of rows than can be copied to clipboard using <kbd>CTRL</kbd> + <kbd>C</kbd>.\n   *\n   * @type {Number}\n   * @default 1000\n   */\n  copyRowsLimit: 1000,\n\n  /**\n   * Maximum number of columns than can be copied to clipboard using <kbd>CTRL</kbd> + <kbd>C</kbd>.\n   *\n   * @type {Number}\n   * @default 1000\n   */\n  copyColsLimit: 1000,\n\n  /**\n   * @description\n   * Defines paste (<kbd>CTRL</kbd> + <kbd>V</kbd>) behavior.\n   * * Default value `\"overwrite\"` will paste clipboard value over current selection.\n   * * When set to `\"shift_down\"`, clipboard data will be pasted in place of current selection, while all selected cells are moved down.\n   * * When set to `\"shift_right\"`, clipboard data will be pasted in place of current selection, while all selected cells are moved right.\n   *\n   * @type {String}\n   * @default 'overwrite'\n   */\n  pasteMode: 'overwrite',\n\n  /**\n   * @description\n   * Turns on saving the state of column sorting, column positions and column sizes in local storage.\n   *\n   * You can save any sort of data in local storage to preserve table state between page reloads.\n   * In order to enable data storage mechanism, `persistentState` option must be set to `true` (you can set it\n   * either during Handsontable initialization or using the `updateSettings` method). When `persistentState` is enabled it exposes 3 hooks:\n   *\n   * __persistentStateSave__ (key: String, value: Mixed)\n   *\n   *   * Saves value under given key in browser local storage.\n   *\n   * __persistentStateLoad__ (key: String, valuePlaceholder: Object)\n   *\n   *   * Loads `value`, saved under given key, form browser local storage. The loaded `value` will be saved in `valuePlaceholder.value`\n   *     (this is due to specific behaviour of `Hooks.run()` method). If no value have been saved under key `valuePlaceholder.value`\n   *     will be `undefined`.\n   *\n   * __persistentStateReset__ (key: String)\n   *\n   *   * Clears the value saved under `key`. If no `key` is given, all values associated with table will be cleared.\n   *\n   * __Note:__ The main reason behind using `persistentState` hooks rather than regular LocalStorage API is that it\n   * ensures separation of data stored by multiple Handsontable instances. In other words, if you have two (or more)\n   * instances of Handsontable on one page, data saved by one instance won't be accessible by the second instance.\n   * Those two instances can store data under the same key and no data would be overwritten.\n   *\n   * __Important:__ In order for the data separation to work properly, make sure that each instance of Handsontable has a unique `id`.\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  persistentState: void 0,\n\n  /**\n   * Class name for all visible rows in the current selection.\n   *\n   * @type {String}\n   * @default undefined\n   * @example\n   * ```js\n   * currentRowClassName: 'currentRow' // This will add a 'currentRow' class name to appropriate table cells.\n   * ```\n   */\n  currentRowClassName: void 0,\n\n  /**\n   * Class name for all visible columns in the current selection.\n   *\n   * @type {String}\n   * @default undefined\n   * @example\n   * ```js\n   * currentColClassName: 'currentColumn' // This will add a 'currentColumn' class name to appropriate table cells.\n   * ```\n   */\n  currentColClassName: void 0,\n\n  /**\n   * Class name for all visible headers in current selection.\n   *\n   * @type {String}\n   * @since 0.27.0\n   * @default 'ht__highlight'\n   * @example\n   * ```js\n   * currentHeaderClassName: 'ht__highlight' // This will add a 'ht__highlight' class name to appropriate table headers.\n   * ```\n   */\n  currentHeaderClassName: 'ht__highlight',\n  /**\n   * Class name for the Handsontable container element.\n   *\n   * @type {String|Array}\n   * @default undefined\n   */\n  className: void 0,\n\n  /**\n   * Class name for all tables inside container element.\n   *\n   * @since 0.17.0\n   * @type {String|Array}\n   * @default undefined\n   */\n  tableClassName: void 0,\n\n  /**\n   * @description\n   * Defines how the columns react, when the declared table width is different than the calculated sum of all column widths.\n   * [See more](http://docs.handsontable.com/demo-stretching.html) mode. Possible values:\n   *  * `'none'` Disable stretching\n   *  * `'last'` Stretch only the last column\n   *  * `'all'` Stretch all the columns evenly\n   *\n   * @type {String}\n   * @default 'none'\n   */\n  stretchH: 'none',\n\n  /**\n   * Lets you overwrite the default `isEmptyRow` method, which checks if row at the provided index is empty.\n   *\n   * @type {Function}\n   * @param {Number} row\n   * @returns {Boolean}\n   */\n  isEmptyRow(row) {\n    var col,\n      colLen,\n      value,\n      meta;\n\n    for (col = 0, colLen = this.countCols(); col < colLen; col++) {\n      value = this.getDataAtCell(row, col);\n\n      if (value !== '' && value !== null && isDefined(value)) {\n        if (typeof value === 'object') {\n          meta = this.getCellMeta(row, col);\n\n          return isObjectEquals(this.getSchema()[meta.prop], value);\n        }\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\n   * Lets you overwrite the default `isEmptyCol` method, which checks if column at the provided index is empty.\n   *\n   * @type {Function}\n   * @param {Number} col\n   * @returns {Boolean}\n   */\n  isEmptyCol(col) {\n    var row,\n      rowLen,\n      value;\n\n    for (row = 0, rowLen = this.countRows(); row < rowLen; row++) {\n      value = this.getDataAtCell(row, col);\n\n      if (value !== '' && value !== null && isDefined(value)) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\n   * When set to `true`, the table is re-rendered when it is detected that it was made visible in DOM.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  observeDOMVisibility: true,\n\n  /**\n   * If set to `true`, Handsontable will accept values that were marked as invalid by the cell `validator`.\n   * It will result with *invalid* cells being treated as *valid* (will save the *invalid* value into the Handsontable data source).\n   * If set to `false`, Handsontable will *not* accept the invalid values and won't allow the user to close the editor.\n   * This option will be particularly useful when used with the Autocomplete's `strict` mode.\n   *\n   * @type {Boolean}\n   * @default true\n   * @since 0.9.5\n   */\n  allowInvalid: true,\n\n  /**\n   * If set to `true`, Handsontable will accept values that are empty (`null`, `undefined` or `''`).\n   * If set to `false`, Handsontable will *not* accept the empty values and mark cell as invalid.\n   *\n   * @example\n   * ```js\n   * ...\n   * allowEmpty: true // allow empty values for all cells (whole table)\n   * ...\n   * // or\n   * ...\n   * columns: [\n   *   // allow empty values only for 'date' column\n   *   {data: 'date', dateFormat: 'DD/MM/YYYY', allowEmpty: true}\n   * ]\n   * ...\n   * ```\n   *\n   * @type {Boolean}\n   * @default true\n   * @since 0.23.0\n   */\n  allowEmpty: true,\n\n  /**\n   * CSS class name for cells that did not pass validation.\n   *\n   * @type {String}\n   * @default 'htInvalid'\n   */\n  invalidCellClassName: 'htInvalid',\n\n  /**\n   * When set to an non-empty string, displayed as the cell content for empty cells. If a value of a different type is provided,\n   * it will be stringified and applied as a string.\n   *\n   * @type {Mixed}\n   * @default false\n   */\n  placeholder: false,\n\n  /**\n   * CSS class name for cells that have a placeholder in use.\n   *\n   * @type {String}\n   * @default 'htPlaceholder'\n   */\n  placeholderCellClassName: 'htPlaceholder',\n\n  /**\n   * CSS class name for read-only cells.\n   *\n   * @type {String}\n   * @default 'htDimmed'\n   */\n  readOnlyCellClassName: 'htDimmed',\n\n  /**\n   * @description\n   * If a string is provided, it may be one of the following predefined values:\n   * * `autocomplete`,\n   * * `checkbox`,\n   * * `html`,\n   * * `numeric`,\n   * * `password`.\n   * * `text`.\n   *\n   * Or you can [register](http://docs.handsontable.com/demo-custom-renderers.html) the custom renderer under specified name and use\n   * its name as an alias in your configuration.\n   *\n   * If a function is provided, it will receive the following arguments:\n   * ```js\n   * function(instance, TD, row, col, prop, value, cellProperties) {}\n   * ```\n   *\n   * You can read more about custom renderes [in the documentation](http://docs.handsontable.com/demo-custom-renderers.html).\n   *\n   * @example\n   * ```js\n   * ...\n   * Handsontable.renderers.registerRenderer('my.renderer', function(instance, TD, row, col, prop, value, cellProperties) {\n   *   TD.innerHTML = value;\n   * });\n   * ...\n   * columns: [\n   *   {\n   *     editor: 'select',\n   *     renderer: 'autocomplete' // as string\n   *   },\n   *   {\n   *     renderer: 'my.renderer' // custom renderer as an alias\n   *   },\n   *   {\n   *     // renderer as custom function\n   *     renderer: function(hotInstance, TD, row, col, prop, value, cellProperties) {\n   *       TD.style.color = 'blue';\n   *       TD.innerHTML = value;\n   *     }\n   *   }\n   * ]\n   * ...\n   * ```\n   *\n   * @type {String|Function}\n   * @default undefined\n   */\n  renderer: void 0,\n\n  /**\n   * CSS class name added to the commented cells.\n   *\n   * @type {String}\n   * @default 'htCommentCell'\n   */\n  commentedCellClassName: 'htCommentCell',\n\n  /**\n   * If set to `true`, it enables the browser's native selection of a fragment of the text within a single cell, between adjacent cells or in a whole table.\n   * If set to `'cell'`, it enables the possibility of selecting a fragment of the text within a single cell's body.\n   *\n   * @type {Boolean|String}\n   * @default false\n   */\n  fragmentSelection: false,\n\n  /**\n   * @description\n   * Make cell [read only](http://docs.handsontable.com/demo-read-only.html).\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  readOnly: false,\n\n  /**\n   * @description\n   * When added to a `column` property, it skips the column on paste and pastes the data on the next column to the right.\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  skipColumnOnPaste: false,\n\n  /**\n   * @description\n   * Setting to true enables the search plugin (see [demo](http://docs.handsontable.com/demo-search-for-values.html)).\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  search: false,\n\n  /**\n   * @description\n   * Shortcut to define the combination of the cell renderer, editor and validator for the column, cell or whole table.\n   *\n   * Possible values:\n   *  * [autocomplete](http://docs.handsontable.com/demo-autocomplete.html)\n   *  * [checkbox](http://docs.handsontable.com/demo-checkbox.html)\n   *  * [date](http://docs.handsontable.com/demo-date.html)\n   *  * [dropdown](http://docs.handsontable.com/demo-dropdown.html)\n   *  * [handsontable](http://docs.handsontable.com/demo-handsontable.html)\n   *  * [numeric](http://docs.handsontable.com/demo-numeric.html)\n   *  * [password](http://docs.handsontable.com/demo-password.html)\n   *  * text\n   *  * [time](http://docs.handsontable.com/demo-time.html)\n   *\n   * Or you can register the custom cell type under specified name and use\n   * its name as an alias in your configuration.\n   *\n   * @example\n   * ```js\n   * ...\n   * Handsontable.cellTypes.registerCellType('my.type', {\n   *   editor: MyEditorClass,\n   *   renderer: function(hot, td, row, col, prop, value, cellProperties) {\n   *     td.innerHTML = value;\n   *   },\n   *   validator: function(value, callback) {\n   *     callback(value === 'foo' ? true : false);\n   *   }\n   * });\n   * ...\n   * columns: [\n   *   {\n   *     type: 'text'\n   *   },\n   *   {\n   *     type: 'my.type' // an alias to custom type\n   *   },\n   *   {\n   *     type: 'checkbox'\n   *   }\n   * ]\n   * ...\n   * ```\n   *\n   * @type {String}\n   * @default 'text'\n   */\n  type: 'text',\n\n  /**\n   * @description\n   * Make cell copyable (pressing <kbd>CTRL</kbd> + <kbd>C</kbd> on your keyboard moves its value to system clipboard).\n   *\n   * __Note:__ this setting is `false` by default for cells with type `password`.\n   *\n   * @type {Boolean}\n   * @default true\n   * @since 0.10.2\n   */\n  copyable: true,\n\n  /**\n   * Defines the editor for the table/column/cell.\n   *\n   * If a string is provided, it may be one of the following predefined values:\n   *  * [autocomplete](http://docs.handsontable.com/demo-autocomplete.html)\n   *  * [checkbox](http://docs.handsontable.com/demo-checkbox.html)\n   *  * [date](http://docs.handsontable.com/demo-date.html)\n   *  * [dropdown](http://docs.handsontable.com/demo-dropdown.html)\n   *  * [handsontable](http://docs.handsontable.com/demo-handsontable.html)\n   *  * [mobile](http://docs.handsontable.com/demo-mobiles-and-tablets.html)\n   *  * [password](http://docs.handsontable.com/demo-password.html)\n   *  * [select](http://docs.handsontable.com/demo-select.html)\n   *  * text\n   *\n   * Or you can [register](http://docs.handsontable.com/tutorial-cell-editor.html#registering-an-editor) the custom editor under specified name and use\n   * its name as an alias in your configuration.\n   *\n   * To disable cell editing completely set `editor` property to `false`.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [\n   *   {\n   *     editor: 'select'\n   *   },\n   *   {\n   *     editor: false\n   *   }\n   * ]\n   * ...\n   * ```\n   *\n   * @type {String|Function|Boolean}\n   * @default 'text'\n   */\n  editor: void 0,\n\n  /**\n   * @description\n   * Autocomplete definitions. See [autocomplete demo](http://docs.handsontable.com/demo-autocomplete.html) for examples and definitions.\n   *\n   * @type {Array}\n   * @default undefined\n   */\n  autoComplete: void 0,\n\n  /**\n   * Control number of choices for the autocomplete (or dropdown) typed cells. After exceeding it, a scrollbar for the dropdown list of choices will appear.\n   *\n   * @since 0.18.0\n   * @type {Number}\n   * @default 10\n   */\n  visibleRows: 10,\n\n  /**\n   * Makes autocomplete or dropdown width the same as the edited cell width. If `false` then editor will be scaled\n   * according to its content.\n   *\n   * @since 0.17.0\n   * @type {Boolean}\n   * @default true\n   */\n  trimDropdown: true,\n\n  /**\n   * Setting to true enables the debug mode, currently used to test the correctness of the row and column\n   * header fixed positioning on a layer above the master table.\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  debug: false,\n\n  /**\n   * When set to `true`, the text of the cell content is wrapped if it does not fit in the fixed column width.\n   *\n   * @type {Boolean}\n   * @default true\n   * @since 0.11.0\n   */\n  wordWrap: true,\n\n  /**\n   * CSS class name added to cells with cell meta `wordWrap: false`.\n   *\n   * @type {String}\n   * @default 'htNoWrap'\n   * @since 0.11.0\n   */\n  noWordWrapClassName: 'htNoWrap',\n\n  /**\n   * @description\n   * Defines if the right-click context menu should be enabled. Context menu allows to create new row or\n   * column at any place in the grid among [other features](http://docs.handsontable.com/demo-context-menu.html).\n   * Possible values:\n   * * `true` (to enable default options),\n   * * `false` (to disable completely)\n   *\n   * or array of any available strings:\n   * * `[\"row_above\", \"row_below\", \"col_left\", \"col_right\",\n   * \"remove_row\", \"remove_col\", \"---------\", \"undo\", \"redo\"]`.\n   *\n   * See [the context menu demo](http://docs.handsontable.com/demo-context-menu.html) for examples.\n   *\n   * @example\n   * ```js\n   * ...\n   * // as a boolean\n   * contextMenu: true\n   * ...\n   * // as a array\n   * contextMenu: ['row_above', 'row_below', '--------', 'undo', 'redo']\n   * ...\n   * ```\n   *\n   * @type {Boolean|Array|Object}\n   * @default undefined\n   */\n  contextMenu: void 0,\n\n  /**\n   * @description\n   * Defines new actions copy/paste for context menu. This functionality is dependent on ZeroClipboard from which you\n   * should pass the swf file path under `swfPath` object key.\n   *\n   * @example\n   * ```js\n   * ...\n   * contextMenuCopyPaste: {swfPath: '[path to file]'}\n   * ...\n   * ```\n   *\n   * @type {Object}\n   */\n  contextMenuCopyPaste: void 0,\n\n  /**\n   * @description\n   * Disable or enable the copy/paste functionality.\n   *\n   * @example\n   * ```js\n   * ...\n   * copyPaste: false,\n   * ...\n   * ```\n   *\n   * @type {Boolean}\n   * @default undefined\n   */\n  copyPaste: void 0,\n\n  /**\n   * If `true`, undo/redo functionality is enabled.\n   *\n   * @type {Boolean}\n   * @default undefined\n   */\n  undo: void 0,\n\n  /**\n   * @description\n   * Turns on [Column sorting](http://docs.handsontable.com/demo-sorting-data.html).\n   * Can be either a boolean (true/false) or an object with a declared sorting options. See the below example:\n   *\n   * @example\n   * ```js\n   * ...\n   * // as boolean\n   * columnSorting: true\n   * ...\n   * // as a object with initial order (sort ascending column at index 2)\n   * columnSorting: {\n   *   column: 2,\n   *   sortOrder: true, // true = ascending, false = descending, undefined = original order\n   *   sortEmptyCells: true // true = the table sorts empty cells, false = the table moves all empty cells to the end of the table\n   * }\n   * ...\n   * ```\n   *\n   * @type {Boolean|Object}\n   * @default undefined\n   */\n  columnSorting: void 0,\n\n  /**\n   * @description\n   * Turns on [Manual column move](http://docs.handsontable.com/demo-moving-rows-and-columns.html), if set to a boolean or define initial\n   * column order, if set to an array of column indexes.\n   *\n   * @example\n   * ```js\n   * ...\n   * // as boolean\n   * manualColumnMove: true\n   * ...\n   * // as a array with initial order (move column index at 0 to 1 and move column index at 1 to 4)\n   * manualColumnMove: [1, 4]\n   * ...\n   * ```\n   *\n   * @type {Boolean|Array}\n   * @default undefined\n   */\n  manualColumnMove: void 0,\n\n  /**\n   * @description\n   * Turns on [Manual column resize](http://docs.handsontable.com/demo-resizing.html), if set to a boolean or define initial\n   * column resized widths, if set to an array of numbers.\n   *\n   * @example\n   * ```js\n   * ...\n   * // as boolean\n   * manualColumnResize: true\n   * ...\n   * // as a array with initial widths (column at 0 index has 40px and column at 1 index has 50px)\n   * manualColumnResize: [40, 50]\n   * ...\n   * ```\n   *\n   * @type {Boolean|Array}\n   * @default undefined\n   */\n  manualColumnResize: void 0,\n\n  /**\n   * @description\n   * Turns on [Manual row move](http://docs.handsontable.com/demo-moving-rows-and-columns.html), if set to a boolean or define initial\n   * row order, if set to an array of row indexes.\n   *\n   * @example\n   * ```js\n   * ...\n   * // as boolean\n   * manualRowMove: true\n   * ...\n   * // as a array with initial order (move row index at 0 to 1 and move row index at 1 to 4)\n   * manualRowMove: [1, 4]\n   * ...\n   * ```\n   *\n   * @type {Boolean|Array}\n   * @default undefined\n   * @since 0.11.0\n   */\n  manualRowMove: void 0,\n\n  /**\n   * @description\n   * Turns on [Manual row resize](http://docs.handsontable.com/demo-resizing.html), if set to a boolean or define initial\n   * row resized heights, if set to an array of numbers.\n   *\n   * @example\n   * ```js\n   * ...\n   * // as boolean\n   * manualRowResize: true\n   * ...\n   * // as a array with initial heights (row at 0 index has 40px and row at 1 index has 50px)\n   * manualRowResize: [40, 50]\n   * ...\n   * ```\n   *\n   * @type {Boolean|Array}\n   * @default undefined\n   * @since 0.11.0\n   */\n  manualRowResize: void 0,\n\n  /**\n   * @description\n   * If set to `true`, it enables a possibility to merge cells. If set to an array of objects, it merges the cells provided in the objects (see the example below).\n   * [More information on the demo page.](http://docs.handsontable.com/demo-merge-cells.html)\n   *\n   * @example\n   * ```js\n   * // enables the mergeCells plugin:\n   * margeCells: true\n   * ...\n   * // declares a list of merged sections:\n   * mergeCells: [\n   *   {row: 1, col: 1, rowspan: 3, colspan: 3}, // rowspan and colspan properties declare the width and height of a merged section in cells\n   *   {row: 3, col: 4, rowspan: 2, colspan: 2},\n   *   {row: 5, col: 6, rowspan: 3, colspan: 3}\n   * ]\n   * ```\n   * @type {Boolean|Array}\n   * @default false\n   */\n  mergeCells: false,\n\n  /**\n   * Number of rows to be rendered outside of the visible part of the table.\n   * By default, it's set to `'auto'`, which makes Handsontable to attempt to calculate the best offset performance-wise.\n   *\n   * You may test out different values to find the best one that works for your specific implementation.\n   *\n   * @type {Number|String}\n   * @default 'auto'\n   */\n  viewportRowRenderingOffset: 'auto',\n\n  /**\n   * Number of columns to be rendered outside of the visible part of the table.\n   * By default, it's set to `'auto'`, which makes Handsontable try calculating the best offset performance-wise.\n   *\n   * You may experiment with the value to find the one that works best for your specific implementation.\n   *\n   * @type {Number|String}\n   * @default 'auto'\n   */\n  viewportColumnRenderingOffset: 'auto',\n\n  /**\n   * A function, regular expression or a string, which will be used in the process of cell validation.\n   * If a function is used, be sure to execute the callback argument with either `true` (`callback(true)`) if the validation passed\n   * or with `false` (`callback(false)`), if the validation failed.\n   * Note, that `this` in the function points to the `cellProperties` object.\n   *\n   * If a string is provided, it may be one of the following predefined values:\n   * * `autocomplete`,\n   * * `date`,\n   * * `numeric`,\n   * * `time`.\n   *\n   * Or you can [register](http://docs.handsontable.com/demo-data-validation.html) the validator function under specified name and use\n   * its name as an alias in your configuration.\n   *\n   * See more [in the demo](http://docs.handsontable.com/demo-data-validation.html).\n   *\n   * @example\n   * ```js\n   * // as a function\n   * columns: [\n   *    {\n   *      validator: function(value, callback) { // validation rules }\n   *    }\n   * ]\n   * ...\n   * // as a regexp\n   * columns: [\n   *    {\n   *      validator: /^[0-9]$/ // regular expression\n   *    }\n   * ]\n   * // as a string\n   * columns: [\n   *    {\n   *      validator: 'numeric'\n   *    }\n   * ]\n   * ```\n   * @type {Function|RegExp|String}\n   * @default undefined\n   * @since 0.9.5\n   */\n  validator: void 0,\n\n  /**\n   * @description\n   * Disable visual cells selection.\n   *\n   * Possible values:\n   *  * `true` - Disables any type of visual selection (current and area selection),\n   *  * `false` - Enables any type of visual selection. This is default value.\n   *  * `current` - Disables the selection of a currently selected cell, the area selection is still present.\n   *  * `area` - Disables the area selection, the currently selected cell selection is still present.\n   *\n   * @type {Boolean|String|Array}\n   * @default false\n   * @since 0.13.2\n   * @example\n   * ```js\n   * ...\n   * // as boolean\n   * disableVisualSelection: true,\n   * ...\n   *\n   * ...\n   * // as string ('current' or 'area')\n   * disableVisualSelection: 'current',\n   * ...\n   *\n   * ...\n   * // as array\n   * disableVisualSelection: ['current', 'area'],\n   * ...\n   * ```\n   */\n  disableVisualSelection: false,\n\n  /**\n   * @description\n   * Set whether to display the current sorting order indicator (a triangle icon in the column header, specifying the sorting order).\n   *\n   * @type {Boolean}\n   * @default false\n   * @since 0.15.0-beta3\n   */\n  sortIndicator: void 0,\n\n  /**\n   * Disable or enable ManualColumnFreeze plugin.\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  manualColumnFreeze: void 0,\n\n  /**\n   * @description\n   * Defines whether Handsontable should trim the whitespace at the beginning and the end of the cell contents.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  trimWhitespace: true,\n\n  settings: void 0,\n\n  /**\n   * @description\n   * Defines data source for Autocomplete or Dropdown cell types.\n   *\n   * @example\n   * ```js\n   * ...\n   * // source as a array\n   * columns: [{\n   *   type: 'autocomplete',\n   *   source: ['A', 'B', 'C', 'D']\n   * }]\n   * ...\n   * // source as a function\n   * columns: [{\n   *   type: 'autocomplete',\n   *   source: function(query, callback) {\n   *     fetch('http://example.com/query?q=' + query, function(response) {\n   *       callback(response.items);\n   *     })\n   *   }\n   * }]\n   * ...\n   * ```\n   *\n   * @type {Array|Function}\n   * @default undefined\n   */\n  source: void 0,\n\n  /**\n   * @description\n   * Defines the column header name.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *     title: 'First name',\n   *     type: 'text',\n   *   },\n   *   {\n   *     title: 'Last name',\n   *     type: 'text',\n   *   }]\n   * ...\n   * ```\n   *\n   * @type {String}\n   * @default undefined\n   */\n  title: void 0,\n\n  /**\n   * Data template for `'checkbox'` type when checkbox is checked.\n   *\n   * @example\n   * ```js\n   * checkedTemplate: 'good'\n   *\n   * // if a checkbox-typed cell is checked, then getDataAtCell(x,y), where x and y are the coordinates of the cell\n   * // will return 'good'.\n   * ```\n   * @type {Boolean|String}\n   * @default true\n   */\n  checkedTemplate: void 0,\n\n  /**\n   * Data template for `'checkbox'` type when checkbox is unchecked.\n   *\n   * @example\n   * ```js\n   * uncheckedTemplate: 'bad'\n   *\n   * // if a checkbox-typed cell is not checked, then getDataAtCell(x,y), where x and y are the coordinates of the cell\n   * // will return 'bad'.\n   * ```\n   * @type {Boolean|String}\n   * @default false\n   */\n  uncheckedTemplate: void 0,\n\n  /**\n   * @description\n   * Object which describes if renderer should create checkbox element with label element as a parent. Option desired for\n   * [checkbox](http://docs.handsontable.com/demo-checkbox.html)-typed cells.\n   *\n   * By default the [checkbox](http://docs.handsontable.com/demo-checkbox.html) renderer renders the checkbox without a label.\n   *\n   * Possible object properties:\n   *  * `property` - Defines the property name of the data object, which will to be used as a label.\n   *  (eg. `label: {property: 'name.last'}`). This option works only if data was passed as an array of objects.\n   *  * `position` - String which describes where to place the label text (before or after checkbox element).\n   * Valid values are `'before'` and '`after`' (defaults to `'after'`).\n   *  * `value` - String or a Function which will be used as label text.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   type: 'checkbox',\n   *   label: {position: 'after', value: 'My label: '}\n   * }]\n   * ...\n   * ```\n   *\n   * @since 0.19.0\n   * @type {Object}\n   * @default undefined\n   */\n  label: void 0,\n\n  /**\n   * Display format. See [numbrojs](http://numbrojs.com). This option is desired for\n   * [numeric](http://docs.handsontable.com/demo-numeric.html)-typed cells.\n   *\n   * Since 0.26.0 Handsontable uses [numbro](http://numbrojs.com/) as a main library for numbers formatting.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   type: 'numeric',\n   *   format: '0,00'\n   * }]\n   * ...\n   * ```\n   *\n   * @type {String}\n   * @default '0'\n   */\n  format: void 0,\n\n  /**\n   * Language display format. See [numbrojs](http://numbrojs.com/languages.html#supported-languages). This option is desired for\n   * [numeric](http://docs.handsontable.com/demo-numeric.html)-typed cells.\n   *\n   * Since 0.26.0 Handsontable uses [numbro](http://numbrojs.com/) as a main library for numbers formatting.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   type: 'numeric',\n   *   language: 'en-US'\n   * }]\n   * ...\n   * ```\n   *\n   * @type {String}\n   * @default 'en-US'\n   */\n  language: void 0,\n\n  /**\n   * @description\n   * Data source for [select](http://docs.handsontable.com/demo-select.html)-typed cells.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   editor: 'select',\n   *   selectOptions: ['A', 'B', 'C'],\n   * }]\n   * ...\n   * ```\n   *\n   * @type {Array}\n   */\n  selectOptions: void 0,\n\n  /**\n   * Enables or disables the autoColumnSize plugin. Default value is `undefined`, which has the same effect as `true`.\n   * Disabling this plugin can increase performance, as no size-related calculations would be done.\n   *\n   * Column width calculations are divided into sync and async part. Each of this parts has their own advantages and\n   * disadvantages. Synchronous calculations are faster but they block the browser UI, while the slower asynchronous operations don't\n   * block the browser UI.\n   *\n   * To configure the sync/async distribution, you can pass an absolute value (number of columns) or a percentage value.\n   * `syncLimit` option is available since 0.16.0.\n   *\n   * You can also use the `useHeaders` option to take the column headers with into calculation.\n   *\n   * @example\n   * ```js\n   * ...\n   * // as a number (300 columns in sync, rest async)\n   * autoColumnSize: {syncLimit: 300},\n   * ...\n   *\n   * ...\n   * // as a string (percent)\n   * autoColumnSize: {syncLimit: '40%'},\n   * ...\n   *\n   * ...\n   * // use headers width while calculation the column width\n   * autoColumnSize: {useHeaders: true},\n   * ...\n   *\n   * ```\n   *\n   * @type {Object|Boolean}\n   * @default {syncLimit: 50}\n   */\n  autoColumnSize: void 0,\n\n  /**\n   * Enables or disables autoRowSize plugin. Default value is `undefined`, which has the same effect as `false` (disabled).\n   * Enabling this plugin can decrease performance, as size-related calculations would be performed.\n   *\n   * Row height calculations are divided into sync and async stages. Each of these stages has their own advantages and\n   * disadvantages. Synchronous calculations are faster but they block the browser UI, while the slower asynchronous operations don't\n   * block the browser UI.\n   *\n   * To configure the sync/async distribution, you can pass an absolute value (number of columns) or a percentage value.\n   * `syncLimit` options is available since 0.16.0.\n   *\n   * @example\n   * ```js\n   * ...\n   * // as number (300 columns in sync, rest async)\n   * autoRowSize: {syncLimit: 300},\n   * ...\n   *\n   * ...\n   * // as string (percent)\n   * autoRowSize: {syncLimit: '40%'},\n   * ...\n   * ```\n   * @type {Object|Boolean}\n   * @default {syncLimit: 1000}\n   */\n  autoRowSize: void 0,\n\n  /**\n   * Date validation format.\n   *\n   * Option desired for `'date'` - typed cells.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   type: 'date',\n   *   dateFormat: 'MM/DD/YYYY'\n   * }]\n   * ...\n   * ```\n   *\n   * @type {String}\n   * @default 'DD/MM/YYYY'\n   */\n  dateFormat: void 0,\n\n  /**\n   * If `true` then dates will be automatically formatted to match the desired format.\n   *\n   * Option desired for `'date'`-typed typed cells.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   type: 'date',\n   *   dateFormat: 'YYYY-MM-DD',\n   *   correctFormat: true\n   * }]\n   * ...\n   * ```\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  correctFormat: false,\n\n  /**\n   * Definition of default value which will fill the empty cells.\n   *\n   * Option desired for `'date'`-typed cells.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   type: 'date',\n   *   defaultData: '2015-02-02'\n   * }]\n   * ...\n   * ```\n   *\n   * @type {String}\n   */\n  defaultDate: void 0,\n\n  /**\n   * If set to `true`, the value entered into the cell must match (case-sensitive) the autocomplete source. Otherwise, cell won't pass the validation.\n   * When filtering the autocomplete source list, the editor will be working in case-insensitive mode.\n   *\n   * Option desired for `autocomplete`-typed cells.\n   *\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   type: 'autocomplete',\n   *   source: ['A', 'B', 'C'],\n   *   strict: true\n   * }]\n   * ...\n   * ```\n   *\n   * @type {Boolean}\n   */\n  strict: void 0,\n\n  /**\n   * @description\n   * If typed `true`, data defined in `source` of the autocomplete or dropdown cell will be treated as HTML.\n   *\n   * __Warning:__ Enabling this option can cause serious XSS vulnerabilities.\n   *\n   * Option desired for `'autocomplete'`-typed cells.\n   * @example\n   * ```js\n   * ...\n   * columns: [{\n   *   type: 'autocomplete',\n   *   allowHtml: true,\n   *   source: ['<b>foo</b>', '<b>bar</b>']\n   * }]\n   * ...\n   * ```\n   * @type {Boolean}\n   * @default false\n   */\n  allowHtml: false,\n\n  /**\n   * If typed `true` then virtual rendering mechanism for handsontable will be disabled.\n   *\n   * @type {Boolean}\n   */\n  renderAllRows: void 0,\n\n  /**\n   * Prevents table to overlap outside the parent element. If `'horizontal'` option is chosen then table will appear horizontal\n   * scrollbar in case where parent's width is narrower then table's width.\n   *\n   * Possible values:\n   *  * `false` - Disables functionality (Default option).\n   *  * `horizontal` - Prevents horizontal overflow table.\n   *  * `vertical` - Prevents vertical overflow table (Not implemented yet).\n   *\n   * @since 0.20.3\n   * @example\n   * ```js\n   * ...\n   * preventOverflow: 'horizontal'\n   * ...\n   * ```\n   *\n   * @type {String|Boolean}\n   */\n  preventOverflow: false,\n\n  /**\n   * @description\n   * Plugin allowing binding the table rows with their headers.\n   * If the plugin is enabled, the table row headers will \"stick\" to the rows, when they are hidden/moved. Basically, if at the initialization\n   * row 0 has a header titled \"A\", it will have it no matter what you do with the table.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Boolean|String}\n   * @example\n   *\n   * ```js\n   * ...\n   * var hot = new Handsontable(document.getElementById('example'), {\n   *   date: getData(),\n   *   bindRowsWithHeaders: true\n   * });\n   * ...\n   * ```\n   *\n   */\n  bindRowsWithHeaders: void 0,\n\n  /**\n   * @description\n   * The CollapsibleColumns plugin allows collapsing of columns, covered by a header with the `colspan` property defined.\n   *\n   * Clicking the \"collapse/expand\" button collapses (or expands) all \"child\" headers except the first one.\n   *\n   * Setting the `collapsibleColumns` property to `true` will display a \"collapse/expand\" button in every header with a defined\n   * `colspan` property.\n   *\n   * To limit this functionality to a smaller group of headers, define the `collapsibleColumns` property as an array of objects, as in\n   * the example below.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Boolean|Array}\n   * @example\n   * ```js\n   * ...\n   *  collapsibleColumns: [\n   *    {row: -4, col: 1, collapsible: true},\n   *    {row: -3, col: 5, collapsible: true}\n   *  ]\n   * ...\n   * // or\n   * ...\n   *  collapsibleColumns: true\n   * ...\n   * ```\n   */\n  collapsibleColumns: void 0,\n\n  /**\n   * @description\n   * Allows making pre-defined calculations on the cell values and display the results within Handsontable.\n   * See the demo for more information.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Object}\n   */\n  columnSummary: void 0,\n\n  /**\n   * This plugin allows adding a configurable dropdown menu to the table's column headers.\n   * The dropdown menu acts like the Context Menu, but is triggered by clicking the button in the header.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Boolean|Object|Array}\n   */\n  dropdownMenu: void 0,\n\n  /**\n   * The filters plugin.\n   * It allows filtering the table data either by the built-in component or with the API.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Boolean}\n   */\n  filters: void 0,\n\n  /**\n   * It allows Handsontable to process formula expressions defined in the provided data.\n   *\n   * @pro\n   * @since 1.7.0\n   * @type {Boolean}\n   */\n  formulas: void 0,\n\n  /**\n   * @description\n   * GanttChart plugin enables a possibility to create a Gantt chart using a Handsontable instance.\n   * In this case, the whole table becomes read-only.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Object}\n   */\n  ganttChart: void 0,\n\n  /**\n   * @description\n   * Allows adding a tooltip to the table headers.\n   *\n   * Available options:\n   * * the `rows` property defines if tooltips should be added to row headers,\n   * * the `columns` property defines if tooltips should be added to column headers,\n   * * the `onlyTrimmed` property defines if tooltips should be added only to headers, which content is trimmed by the header itself (the content being wider then the header).\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Boolean|Object}\n   */\n  headerTooltips: void 0,\n\n  /**\n   * Plugin allowing hiding of certain columns.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Boolean|Object}\n   */\n  hiddenColumns: void 0,\n\n  /**\n   * @description\n   * Plugin allowing hiding of certain rows.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Boolean|Object}\n   */\n  hiddenRows: void 0,\n\n  /**\n   * @description\n   * Allows creating a nested header structure, using the HTML's colspan attribute.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Array}\n   */\n  nestedHeaders: void 0,\n\n  /**\n   * @description\n   * Plugin allowing hiding of certain rows.\n   *\n   * @pro\n   * @since 1.0.0-beta1\n   * @type {Boolean|Array}\n   */\n  trimRows: void 0,\n\n  /**\n   * @description\n   * Allows setting a custom width of the row headers. You can provide a number or an array of widths, if many row header levels are defined.\n   *\n   * @since 0.22.0\n   * @type {Number|Array}\n   */\n  rowHeaderWidth: void 0,\n\n  /**\n   * @description\n   * Allows setting a custom height of the column headers. You can provide a number or an array of heights, if many column header levels are defined.\n   *\n   * @since 0.22.0\n   * @type {Number|Array}\n   */\n  columnHeaderHeight: void 0,\n\n  /**\n   * @description\n   * Enabling this plugin switches table into one-way data binding where changes are applied into data source (from outside table)\n   * will be automatically reflected in the table.\n   *\n   * For every data change [afterChangesObserved](Hooks.html#event:afterChangesObserved) hook will be fired.\n   *\n   * @type {Boolean}\n   * @default false\n   */\n  observeChanges: void 0,\n\n  /**\n   * @description\n   * When passed to the `column` property, allows specifying a custom sorting function for the desired column.\n   *\n   * @since 0.24.0\n   * @type {Function}\n   * @example\n   * ```js\n   * columns: [\n   *   {\n   *     sortFunction: function(sortOrder) {\n   *        return function(a, b) {\n   *          // sorting function body.\n   *          //\n   *          // Function parameters:\n   *          // sortOrder: If true, the order is ascending, if false - descending. undefined = original order\n   *          // a, b: Two compared elements. These are 2-element arrays, with the first element being the row index, the second - cell value.\n   *        }\n   *     }\n   *   }\n   * ]\n   * ```\n   */\n  sortFunction: void 0,\n\n  /**\n   * If defined as 'true', the Autocomplete's suggestion list would be sorted by relevance (the closer to the left the match is, the higher the suggestion).\n   *\n   * Option desired for cells of the `'autocomplete'` type.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  sortByRelevance: true,\n\n  /**\n   * If defined as 'true', when the user types into the input area the Autocomplete's suggestion list is updated to only\n   * include those choices starting with what has been typed; if defined as 'false' all suggestions remain shown, with\n   * those matching what has been typed marked in bold.\n   *\n   * @type {Boolean}\n   * @default true\n   */\n  filter: true,\n\n  /**\n   * If defined as 'true', filtering in the Autocomplete Editor will be case-sensitive.\n   *\n   * @type {Boolean}\n   * @default: false\n   */\n  filteringCaseSensitive: false,\n};\n\nexport default DefaultSettings;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/defaultSettings.js","import {KEY_CODES, isPrintableChar} from './../helpers/unicode';\nimport {stringify, isDefined} from './../helpers/mixed';\nimport {stripTags} from './../helpers/string';\nimport {pivot, arrayMap} from './../helpers/array';\nimport {\n  addClass,\n  getCaretPosition,\n  getScrollbarWidth,\n  getSelectionEndPosition,\n  outerWidth,\n  outerHeight,\n  offset,\n  getTrimmingContainer,\n  setCaretPosition,\n} from './../helpers/dom/element';\nimport HandsontableEditor from './handsontableEditor';\n\nconst AutocompleteEditor = HandsontableEditor.prototype.extend();\n\n/**\n * @private\n * @editor AutocompleteEditor\n * @class AutocompleteEditor\n * @dependencies HandsontableEditor\n */\nAutocompleteEditor.prototype.init = function() {\n  HandsontableEditor.prototype.init.apply(this, arguments);\n  this.query = null;\n  this.strippedChoices = [];\n  this.rawChoices = [];\n};\n\nAutocompleteEditor.prototype.getValue = function() {\n  const selectedValue = this.rawChoices.find((value) => {\n    const strippedValue = this.stripValueIfNeeded(value);\n\n    return strippedValue === this.TEXTAREA.value;\n  });\n\n  if (isDefined(selectedValue)) {\n    return selectedValue;\n  }\n\n  return this.TEXTAREA.value;\n};\n\nAutocompleteEditor.prototype.createElements = function() {\n  HandsontableEditor.prototype.createElements.apply(this, arguments);\n\n  addClass(this.htContainer, 'autocompleteEditor');\n  addClass(this.htContainer, window.navigator.platform.indexOf('Mac') === -1 ? '' : 'htMacScroll');\n};\n\nvar skipOne = false;\nfunction onBeforeKeyDown(event) {\n  skipOne = false;\n  let editor = this.getActiveEditor();\n\n  if (isPrintableChar(event.keyCode) || event.keyCode === KEY_CODES.BACKSPACE ||\n    event.keyCode === KEY_CODES.DELETE || event.keyCode === KEY_CODES.INSERT) {\n    let timeOffset = 0;\n\n    // on ctl+c / cmd+c don't update suggestion list\n    if (event.keyCode === KEY_CODES.C && (event.ctrlKey || event.metaKey)) {\n      return;\n    }\n    if (!editor.isOpened()) {\n      timeOffset += 10;\n    }\n\n    if (editor.htEditor) {\n      editor.instance._registerTimeout(setTimeout(() => {\n        editor.queryChoices(editor.TEXTAREA.value);\n        skipOne = true;\n      }, timeOffset));\n    }\n  }\n}\n\nAutocompleteEditor.prototype.prepare = function() {\n  this.instance.addHook('beforeKeyDown', onBeforeKeyDown);\n  HandsontableEditor.prototype.prepare.apply(this, arguments);\n};\n\nAutocompleteEditor.prototype.open = function() {\n  // Ugly fix for handsontable which grab window object for autocomplete scroll listener instead table element.\n  this.TEXTAREA_PARENT.style.overflow = 'auto';\n  HandsontableEditor.prototype.open.apply(this, arguments);\n  this.TEXTAREA_PARENT.style.overflow = '';\n\n  let choicesListHot = this.htEditor.getInstance();\n  let _this = this;\n  let trimDropdown = this.cellProperties.trimDropdown === void 0 ? true : this.cellProperties.trimDropdown;\n\n  this.TEXTAREA.style.visibility = 'visible';\n  this.focus();\n\n  choicesListHot.updateSettings({\n    colWidths: trimDropdown ? [outerWidth(this.TEXTAREA) - 2] : void 0,\n    width: trimDropdown ? outerWidth(this.TEXTAREA) + getScrollbarWidth() + 2 : void 0,\n    afterRenderer(TD, row, col, prop, value, cellProperties) {\n      let {filteringCaseSensitive, allowHtml} = _this.cellProperties;\n      let indexOfMatch;\n      let match;\n\n      value = stringify(value);\n\n      if (value && !allowHtml) {\n        indexOfMatch = filteringCaseSensitive === true ? value.indexOf(this.query) : value.toLowerCase().indexOf(_this.query.toLowerCase());\n\n        if (indexOfMatch !== -1) {\n          match = value.substr(indexOfMatch, _this.query.length);\n          value = value.replace(match, `<strong>${match}</strong>`);\n        }\n      }\n      TD.innerHTML = value;\n    },\n    autoColumnSize: true,\n    modifyColWidth(width, col) {\n      // workaround for <strong> text overlapping the dropdown, not really accurate\n      let autoWidths = this.getPlugin('autoColumnSize').widths;\n\n      if (autoWidths[col]) {\n        width = autoWidths[col];\n      }\n\n      return trimDropdown ? width : width + 15;\n    }\n  });\n\n  // Add additional space for autocomplete holder\n  this.htEditor.view.wt.wtTable.holder.parentNode.style['padding-right'] = `${getScrollbarWidth() + 2}px`;\n\n  if (skipOne) {\n    skipOne = false;\n  }\n\n  _this.instance._registerTimeout(setTimeout(() => {\n    _this.queryChoices(_this.TEXTAREA.value);\n  }, 0));\n};\n\nAutocompleteEditor.prototype.close = function() {\n  HandsontableEditor.prototype.close.apply(this, arguments);\n};\nAutocompleteEditor.prototype.queryChoices = function(query) {\n  this.query = query;\n  const source = this.cellProperties.source;\n\n  if (typeof source == 'function') {\n    source.call(this.cellProperties, query, (choices) => {\n      this.rawChoices = choices;\n      this.updateChoicesList(this.stripValuesIfNeeded(choices));\n    });\n\n  } else if (Array.isArray(source)) {\n    this.rawChoices = source;\n    this.updateChoicesList(this.stripValuesIfNeeded(source));\n\n  } else {\n    this.updateChoicesList([]);\n  }\n};\n\nAutocompleteEditor.prototype.updateChoicesList = function(choices) {\n  let pos = getCaretPosition(this.TEXTAREA);\n  let endPos = getSelectionEndPosition(this.TEXTAREA);\n  let sortByRelevanceSetting = this.cellProperties.sortByRelevance;\n  let filterSetting = this.cellProperties.filter;\n  let orderByRelevance = null;\n  let highlightIndex = null;\n\n  if (sortByRelevanceSetting) {\n    orderByRelevance = AutocompleteEditor.sortByRelevance(\n      this.stripValueIfNeeded(this.getValue()),\n      choices,\n      this.cellProperties.filteringCaseSensitive\n    );\n  }\n  let orderByRelevanceLength = Array.isArray(orderByRelevance) ? orderByRelevance.length : 0;\n\n  if (filterSetting === false) {\n    if (orderByRelevanceLength) {\n      highlightIndex = orderByRelevance[0];\n    }\n  } else {\n    let sorted = [];\n\n    for (let i = 0, choicesCount = choices.length; i < choicesCount; i++) {\n      if (sortByRelevanceSetting && orderByRelevanceLength <= i) {\n        break;\n      }\n      if (orderByRelevanceLength) {\n        sorted.push(choices[orderByRelevance[i]]);\n      } else {\n        sorted.push(choices[i]);\n      }\n    }\n\n    highlightIndex = 0;\n    choices = sorted;\n  }\n\n  this.strippedChoices = choices;\n  this.htEditor.loadData(pivot([choices]));\n\n  this.updateDropdownHeight();\n\n  this.flipDropdownIfNeeded();\n\n  if (this.cellProperties.strict === true) {\n    this.highlightBestMatchingChoice(highlightIndex);\n  }\n\n  this.instance.listen();\n  this.TEXTAREA.focus();\n  setCaretPosition(this.TEXTAREA, pos, (pos === endPos ? void 0 : endPos));\n};\n\nAutocompleteEditor.prototype.flipDropdownIfNeeded = function() {\n  let textareaOffset = offset(this.TEXTAREA);\n  let textareaHeight = outerHeight(this.TEXTAREA);\n  let dropdownHeight = this.getDropdownHeight();\n  let trimmingContainer = getTrimmingContainer(this.instance.view.wt.wtTable.TABLE);\n  let trimmingContainerScrollTop = trimmingContainer.scrollTop;\n  let headersHeight = outerHeight(this.instance.view.wt.wtTable.THEAD);\n  let containerOffset = {\n    row: 0,\n    col: 0\n  };\n\n  if (trimmingContainer !== window) {\n    containerOffset = offset(trimmingContainer);\n  }\n\n  let spaceAbove = textareaOffset.top - containerOffset.top - headersHeight + trimmingContainerScrollTop;\n  let spaceBelow = trimmingContainer.scrollHeight - spaceAbove - headersHeight - textareaHeight;\n  let flipNeeded = dropdownHeight > spaceBelow && spaceAbove > spaceBelow;\n\n  if (flipNeeded) {\n    this.flipDropdown(dropdownHeight);\n  } else {\n    this.unflipDropdown();\n  }\n\n  this.limitDropdownIfNeeded(flipNeeded ? spaceAbove : spaceBelow, dropdownHeight);\n\n  return flipNeeded;\n};\n\nAutocompleteEditor.prototype.limitDropdownIfNeeded = function(spaceAvailable, dropdownHeight) {\n  if (dropdownHeight > spaceAvailable) {\n    let tempHeight = 0;\n    let i = 0;\n    let lastRowHeight = 0;\n    let height = null;\n\n    do {\n      lastRowHeight = this.htEditor.getRowHeight(i) || this.htEditor.view.wt.wtSettings.settings.defaultRowHeight;\n      tempHeight += lastRowHeight;\n      i++;\n    } while (tempHeight < spaceAvailable);\n\n    height = tempHeight - lastRowHeight;\n\n    if (this.htEditor.flipped) {\n      this.htEditor.rootElement.style.top = `${parseInt(this.htEditor.rootElement.style.top, 10) + dropdownHeight - height}px`;\n    }\n\n    this.setDropdownHeight(tempHeight - lastRowHeight);\n  }\n};\n\nAutocompleteEditor.prototype.flipDropdown = function(dropdownHeight) {\n  let dropdownStyle = this.htEditor.rootElement.style;\n\n  dropdownStyle.position = 'absolute';\n  dropdownStyle.top = `${-dropdownHeight}px`;\n\n  this.htEditor.flipped = true;\n};\n\nAutocompleteEditor.prototype.unflipDropdown = function() {\n  let dropdownStyle = this.htEditor.rootElement.style;\n\n  if (dropdownStyle.position === 'absolute') {\n    dropdownStyle.position = '';\n    dropdownStyle.top = '';\n  }\n\n  this.htEditor.flipped = void 0;\n};\n\nAutocompleteEditor.prototype.updateDropdownHeight = function() {\n  var currentDropdownWidth = this.htEditor.getColWidth(0) + getScrollbarWidth() + 2;\n  var trimDropdown = this.cellProperties.trimDropdown;\n\n  this.htEditor.updateSettings({\n    height: this.getDropdownHeight(),\n    width: trimDropdown ? void 0 : currentDropdownWidth\n  });\n\n  this.htEditor.view.wt.wtTable.alignOverlaysWithTrimmingContainer();\n};\n\nAutocompleteEditor.prototype.setDropdownHeight = function(height) {\n  this.htEditor.updateSettings({\n    height\n  });\n};\n\nAutocompleteEditor.prototype.finishEditing = function(restoreOriginalValue) {\n  if (!restoreOriginalValue) {\n    this.instance.removeHook('beforeKeyDown', onBeforeKeyDown);\n  }\n  HandsontableEditor.prototype.finishEditing.apply(this, arguments);\n};\n\nAutocompleteEditor.prototype.highlightBestMatchingChoice = function(index) {\n  if (typeof index === 'number') {\n    this.htEditor.selectCell(index, 0);\n  } else {\n    this.htEditor.deselectCell();\n  }\n};\n\n/**\n * Filters and sorts by relevance\n * @param value\n * @param choices\n * @param caseSensitive\n * @returns {Array} array of indexes in original choices array\n */\nAutocompleteEditor.sortByRelevance = function(value, choices, caseSensitive) {\n  let choicesRelevance = [];\n  let currentItem;\n  let valueLength = value.length;\n  let valueIndex;\n  let charsLeft;\n  let result = [];\n  let i;\n  let choicesCount = choices.length;\n\n  if (valueLength === 0) {\n    for (i = 0; i < choicesCount; i++) {\n      result.push(i);\n    }\n    return result;\n  }\n\n  for (i = 0; i < choicesCount; i++) {\n    currentItem = stripTags(stringify(choices[i]));\n\n    if (caseSensitive) {\n      valueIndex = currentItem.indexOf(value);\n    } else {\n      valueIndex = currentItem.toLowerCase().indexOf(value.toLowerCase());\n    }\n\n    if (valueIndex !== -1) {\n      charsLeft = currentItem.length - valueIndex - valueLength;\n\n      choicesRelevance.push({\n        baseIndex: i,\n        index: valueIndex,\n        charsLeft,\n        value: currentItem\n      });\n    }\n  }\n\n  choicesRelevance.sort((a, b) => {\n\n    if (b.index === -1) {\n      return -1;\n    }\n    if (a.index === -1) {\n      return 1;\n    }\n\n    if (a.index < b.index) {\n      return -1;\n    } else if (b.index < a.index) {\n      return 1;\n    } else if (a.index === b.index) {\n      if (a.charsLeft < b.charsLeft) {\n        return -1;\n      } else if (a.charsLeft > b.charsLeft) {\n        return 1;\n      }\n    }\n\n    return 0;\n  });\n\n  for (i = 0, choicesCount = choicesRelevance.length; i < choicesCount; i++) {\n    result.push(choicesRelevance[i].baseIndex);\n  }\n\n  return result;\n};\n\nAutocompleteEditor.prototype.getDropdownHeight = function() {\n  let firstRowHeight = this.htEditor.getInstance().getRowHeight(0) || 23;\n  let visibleRows = this.cellProperties.visibleRows;\n\n  return this.strippedChoices.length >= visibleRows ? (visibleRows * firstRowHeight) : (this.strippedChoices.length * firstRowHeight) + 8;\n};\n\nAutocompleteEditor.prototype.stripValueIfNeeded = function (value) {\n  return this.stripValuesIfNeeded([value])[0];\n};\n\nAutocompleteEditor.prototype.stripValuesIfNeeded = function (values) {\n  const {allowHtml} = this.cellProperties;\n\n  const stringifiedValues = arrayMap(values, (value) => stringify(value));\n  const strippedValues = arrayMap(stringifiedValues, (value) => (allowHtml ? value : stripTags(value)));\n\n  return strippedValues;\n};\n\nAutocompleteEditor.prototype.allowKeyEventPropagation = function(keyCode) {\n  let selected = {row: this.htEditor.getSelectedRange() ? this.htEditor.getSelectedRange().from.row : -1};\n  let allowed = false;\n\n  if (keyCode === KEY_CODES.ARROW_DOWN && selected.row > 0 && selected.row < this.htEditor.countRows() - 1) {\n    allowed = true;\n  }\n  if (keyCode === KEY_CODES.ARROW_UP && selected.row > -1) {\n    allowed = true;\n  }\n\n  return allowed;\n};\n\nAutocompleteEditor.prototype.discardEditor = function(result) {\n  HandsontableEditor.prototype.discardEditor.apply(this, arguments);\n\n  this.instance.view.render();\n};\n\nexport default AutocompleteEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/autocompleteEditor.js","import {KEY_CODES} from './../helpers/unicode';\nimport {extend} from './../helpers/object';\nimport {setCaretPosition} from './../helpers/dom/element';\nimport {stopImmediatePropagation, isImmediatePropagationStopped} from './../helpers/dom/event';\nimport TextEditor from './textEditor';\n\nconst HandsontableEditor = TextEditor.prototype.extend();\n\n/**\n * @private\n * @editor HandsontableEditor\n * @class HandsontableEditor\n * @dependencies TextEditor\n */\nHandsontableEditor.prototype.createElements = function() {\n  TextEditor.prototype.createElements.apply(this, arguments);\n\n  var DIV = document.createElement('DIV');\n  DIV.className = 'handsontableEditor';\n  this.TEXTAREA_PARENT.appendChild(DIV);\n\n  this.htContainer = DIV;\n  this.assignHooks();\n};\n\nHandsontableEditor.prototype.prepare = function(td, row, col, prop, value, cellProperties) {\n  TextEditor.prototype.prepare.apply(this, arguments);\n\n  var parent = this;\n  var options = {\n    startRows: 0,\n    startCols: 0,\n    minRows: 0,\n    minCols: 0,\n    className: 'listbox',\n    copyPaste: false,\n    autoColumnSize: false,\n    autoRowSize: false,\n    readOnly: true,\n    fillHandle: false,\n    afterOnCellMouseDown(_, coords) {\n      var value = this.getSourceData(coords.row, coords.col);\n\n      // if the value is undefined then it means we don't want to set the value\n      if (value !== void 0) {\n        parent.setValue(value);\n      }\n      parent.instance.destroyEditor();\n    }\n  };\n\n  if (this.cellProperties.handsontable) {\n    extend(options, cellProperties.handsontable);\n  }\n  this.htOptions = options;\n};\n\nvar onBeforeKeyDown = function(event) {\n  if (isImmediatePropagationStopped(event)) {\n    return;\n  }\n  var editor = this.getActiveEditor();\n\n  var innerHOT = editor.htEditor.getInstance();\n\n  var rowToSelect;\n  var selectedRow;\n\n  if (event.keyCode == KEY_CODES.ARROW_DOWN) {\n    if (!innerHOT.getSelected() && !innerHOT.flipped) {\n      rowToSelect = 0;\n    } else if (innerHOT.getSelected()) {\n      if (innerHOT.flipped) {\n        rowToSelect = innerHOT.getSelected()[0] + 1;\n      } else if (!innerHOT.flipped) {\n        selectedRow = innerHOT.getSelected()[0];\n        var lastRow = innerHOT.countRows() - 1;\n        rowToSelect = Math.min(lastRow, selectedRow + 1);\n      }\n    }\n  } else if (event.keyCode == KEY_CODES.ARROW_UP) {\n    if (!innerHOT.getSelected() && innerHOT.flipped) {\n      rowToSelect = innerHOT.countRows() - 1;\n\n    } else if (innerHOT.getSelected()) {\n      if (innerHOT.flipped) {\n        selectedRow = innerHOT.getSelected()[0];\n        rowToSelect = Math.max(0, selectedRow - 1);\n      } else {\n        selectedRow = innerHOT.getSelected()[0];\n        rowToSelect = selectedRow - 1;\n      }\n    }\n  }\n\n  if (rowToSelect !== void 0) {\n    if (rowToSelect < 0 || (innerHOT.flipped && rowToSelect > innerHOT.countRows() - 1)) {\n      innerHOT.deselectCell();\n    } else {\n      innerHOT.selectCell(rowToSelect, 0);\n    }\n    if (innerHOT.getData().length) {\n      event.preventDefault();\n      stopImmediatePropagation(event);\n\n      editor.instance.listen();\n      editor.TEXTAREA.focus();\n    }\n  }\n};\n\nHandsontableEditor.prototype.open = function() {\n  this.instance.addHook('beforeKeyDown', onBeforeKeyDown);\n\n  TextEditor.prototype.open.apply(this, arguments);\n\n  if (this.htEditor) {\n    this.htEditor.destroy();\n  }\n  this.htEditor = new Handsontable(this.htContainer, this.htOptions);\n\n  if (this.cellProperties.strict) {\n    this.htEditor.selectCell(0, 0);\n    this.TEXTAREA.style.visibility = 'hidden';\n  } else {\n    this.htEditor.deselectCell();\n    this.TEXTAREA.style.visibility = 'visible';\n  }\n\n  setCaretPosition(this.TEXTAREA, 0, this.TEXTAREA.value.length);\n};\n\nHandsontableEditor.prototype.close = function() {\n  this.instance.removeHook('beforeKeyDown', onBeforeKeyDown);\n  this.instance.listen();\n\n  TextEditor.prototype.close.apply(this, arguments);\n};\n\nHandsontableEditor.prototype.focus = function() {\n  this.instance.listen();\n  TextEditor.prototype.focus.apply(this, arguments);\n};\n\nHandsontableEditor.prototype.beginEditing = function(initialValue) {\n  var onBeginEditing = this.instance.getSettings().onBeginEditing;\n\n  if (onBeginEditing && onBeginEditing() === false) {\n    return;\n  }\n  TextEditor.prototype.beginEditing.apply(this, arguments);\n};\n\nHandsontableEditor.prototype.finishEditing = function(isCancelled, ctrlDown) {\n  if (this.htEditor && this.htEditor.isListening()) { // if focus is still in the HOT editor\n\n    this.instance.listen(); // return the focus to the parent HOT instance\n  }\n\n  if (this.htEditor && this.htEditor.getSelected()) {\n    var value = this.htEditor.getInstance().getValue();\n\n    if (value !== void 0) { // if the value is undefined then it means we don't want to set the value\n      this.setValue(value);\n    }\n  }\n\n  return TextEditor.prototype.finishEditing.apply(this, arguments);\n};\n\nHandsontableEditor.prototype.assignHooks = function() {\n  var _this = this;\n\n  this.instance.addHook('afterDestroy', () => {\n    if (_this.htEditor) {\n      _this.htEditor.destroy();\n    }\n  });\n};\n\nexport default HandsontableEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/handsontableEditor.js","/* eslint-disable import/prefer-default-export */\n\n/**\n * Get normalized Date object for the ISO formatted date strings.\n * Natively, the date object parsed from a ISO 8601 string will be offsetted by the timezone difference, which may result in returning a wrong date.\n * See: Github issue #3338.\n *\n * @param {String} dateString String representing the date.\n * @returns {Date} The proper Date object.\n */\nexport function getNormalizedDate(dateString) {\n  let nativeDate = new Date(dateString);\n\n  // NaN if dateString is not in ISO format\n  if (!isNaN(new Date(`${dateString}T00:00`).getDate())) {\n\n    // Compensate timezone offset\n    return new Date(nativeDate.getTime() + (nativeDate.getTimezoneOffset() * 60000));\n  }\n\n  return nativeDate;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/date.js","import {addClass, outerHeight, outerWidth} from './../helpers/dom/element';\nimport {arrayEach} from './../helpers/array';\n\n/**\n * @class GhostTable\n * @util\n */\nclass GhostTable {\n  constructor(hotInstance) {\n    /**\n     * Handsontable instance.\n     *\n     * @type {Core}\n     */\n    this.hot = hotInstance;\n    /**\n     * Container element where every table will be injected.\n     *\n     * @type {HTMLElement|null}\n     */\n    this.container = null;\n    /**\n     * Flag which determine is table was injected to DOM.\n     *\n     * @type {Boolean}\n     */\n    this.injected = false;\n    /**\n     * Added rows collection.\n     *\n     * @type {Array}\n     */\n    this.rows = [];\n    /**\n     * Added columns collection.\n     *\n     * @type {Array}\n     */\n    this.columns = [];\n    /**\n     * Samples prepared for calculations.\n     *\n     * @type {Map}\n     * @default {null}\n     */\n    this.samples = null;\n    /**\n     * Ghost table settings.\n     *\n     * @type {Object}\n     * @default {Object}\n     */\n    this.settings = {\n      useHeaders: true\n    };\n  }\n\n  /**\n   * Add row.\n   *\n   * @param {Number} row Row index.\n   * @param {Map} samples Samples Map object.\n   */\n  addRow(row, samples) {\n    if (this.columns.length) {\n      throw new Error('Doesn\\'t support multi-dimensional table');\n    }\n    if (!this.rows.length) {\n      this.container = this.createContainer(this.hot.rootElement.className);\n    }\n    const rowObject = {row};\n    this.rows.push(rowObject);\n\n    this.samples = samples;\n    this.table = this.createTable(this.hot.table.className);\n    this.table.colGroup.appendChild(this.createColGroupsCol());\n    this.table.tr.appendChild(this.createRow(row));\n    this.container.container.appendChild(this.table.fragment);\n\n    rowObject.table = this.table.table;\n  }\n\n  /**\n   * Add a row consisting of the column headers.\n   */\n  addColumnHeadersRow(samples) {\n    if (this.hot.getColHeader(0) != null) {\n      const rowObject = {row: -1};\n      this.rows.push(rowObject);\n\n      this.container = this.createContainer(this.hot.rootElement.className);\n\n      this.samples = samples;\n      this.table = this.createTable(this.hot.table.className);\n      this.table.colGroup.appendChild(this.createColGroupsCol());\n      this.table.tHead.appendChild(this.createColumnHeadersRow());\n      this.container.container.appendChild(this.table.fragment);\n\n      rowObject.table = this.table.table;\n    }\n  }\n\n  /**\n   * Add column.\n   *\n   * @param {Number} column Column index.\n   * @param {Map} samples Samples Map object.\n   */\n  addColumn(column, samples) {\n    if (this.rows.length) {\n      throw new Error('Doesn\\'t support multi-dimensional table');\n    }\n    if (!this.columns.length) {\n      this.container = this.createContainer(this.hot.rootElement.className);\n    }\n    const columnObject = {col: column};\n    this.columns.push(columnObject);\n\n    this.samples = samples;\n    this.table = this.createTable(this.hot.table.className);\n\n    if (this.getSetting('useHeaders') && this.hot.getColHeader(column) !== null) {\n      this.hot.view.appendColHeader(column, this.table.th);\n    }\n    this.table.tBody.appendChild(this.createCol(column));\n    this.container.container.appendChild(this.table.fragment);\n\n    columnObject.table = this.table.table;\n  }\n\n  /**\n   * Get calculated heights.\n   *\n   * @param {Function} callback Callback which will be fired for each calculated row.\n   */\n  getHeights(callback) {\n    if (!this.injected) {\n      this.injectTable();\n    }\n    arrayEach(this.rows, (row) => {\n      // -1 <- reduce border-top from table\n      callback(row.row, outerHeight(row.table) - 1);\n    });\n  }\n\n  /**\n   * Get calculated widths.\n   *\n   * @param {Function} callback Callback which will be fired for each calculated column.\n   */\n  getWidths(callback) {\n    if (!this.injected) {\n      this.injectTable();\n    }\n    arrayEach(this.columns, (column) => {\n      callback(column.col, outerWidth(column.table));\n    });\n  }\n\n  /**\n   * Set the Ghost Table settings to the provided object.\n   *\n   * @param {Object} settings New Ghost Table Settings\n   */\n  setSettings(settings) {\n    this.settings = settings;\n  }\n\n  /**\n   * Set a single setting of the Ghost Table.\n   *\n   * @param {String} name Setting name.\n   * @param {*} value Setting value.\n   */\n  setSetting(name, value) {\n    if (!this.settings) {\n      this.settings = {};\n    }\n\n    this.settings[name] = value;\n  }\n\n  /**\n   * Get the Ghost Table settings.\n   *\n   * @returns {Object|null}\n   */\n  getSettings() {\n    return this.settings;\n  }\n\n  /**\n   * Get a single Ghost Table setting.\n   *\n   * @param {String} name\n   * @returns {Boolean|null}\n   */\n  getSetting(name) {\n    if (this.settings) {\n      return this.settings[name];\n    }\n    return null;\n\n  }\n\n  /**\n   * Create colgroup col elements.\n   *\n   * @returns {DocumentFragment}\n   */\n  createColGroupsCol() {\n    const d = document;\n    const fragment = d.createDocumentFragment();\n\n    if (this.hot.hasRowHeaders()) {\n      fragment.appendChild(this.createColElement(-1));\n    }\n\n    this.samples.forEach((sample) => {\n      arrayEach(sample.strings, (string) => {\n        fragment.appendChild(this.createColElement(string.col));\n      });\n    });\n\n    return fragment;\n  }\n\n  /**\n   * Create table row element.\n   *\n   * @param {Number} row Row index.\n   * @returns {DocumentFragment} Returns created table row elements.\n   */\n  createRow(row) {\n    const d = document;\n    const fragment = d.createDocumentFragment();\n    const th = d.createElement('th');\n\n    if (this.hot.hasRowHeaders()) {\n      this.hot.view.appendRowHeader(row, th);\n\n      fragment.appendChild(th);\n    }\n\n    this.samples.forEach((sample) => {\n      arrayEach(sample.strings, (string) => {\n        let column = string.col;\n        let cellProperties = this.hot.getCellMeta(row, column);\n\n        cellProperties.col = column;\n        cellProperties.row = row;\n\n        let renderer = this.hot.getCellRenderer(cellProperties);\n        const td = d.createElement('td');\n\n        renderer(this.hot, td, row, column, this.hot.colToProp(column), string.value, cellProperties);\n        fragment.appendChild(td);\n      });\n    });\n\n    return fragment;\n  }\n\n  createColumnHeadersRow() {\n    const d = document;\n    const fragment = d.createDocumentFragment();\n\n    if (this.hot.hasRowHeaders()) {\n      const th = d.createElement('th');\n      this.hot.view.appendColHeader(-1, th);\n      fragment.appendChild(th);\n    }\n\n    this.samples.forEach((sample) => {\n      arrayEach(sample.strings, (string) => {\n        let column = string.col;\n\n        const th = d.createElement('th');\n\n        this.hot.view.appendColHeader(column, th);\n        fragment.appendChild(th);\n      });\n    });\n\n    return fragment;\n  }\n\n  /**\n   * Create table column elements.\n   *\n   * @param {Number} column Column index.\n   * @returns {DocumentFragment} Returns created column table column elements.\n   */\n  createCol(column) {\n    const d = document;\n    const fragment = d.createDocumentFragment();\n\n    this.samples.forEach((sample) => {\n      arrayEach(sample.strings, (string) => {\n        let row = string.row;\n        let cellProperties = this.hot.getCellMeta(row, column);\n\n        cellProperties.col = column;\n        cellProperties.row = row;\n\n        let renderer = this.hot.getCellRenderer(cellProperties);\n        const td = d.createElement('td');\n        const tr = d.createElement('tr');\n\n        renderer(this.hot, td, row, column, this.hot.colToProp(column), string.value, cellProperties);\n        tr.appendChild(td);\n        fragment.appendChild(tr);\n      });\n    });\n\n    return fragment;\n  }\n\n  /**\n   * Remove table from document and reset internal state.\n   */\n  clean() {\n    this.rows.length = 0;\n    this.rows[-1] = void 0;\n    this.columns.length = 0;\n\n    if (this.samples) {\n      this.samples.clear();\n    }\n    this.samples = null;\n    this.removeTable();\n  }\n\n  /**\n   * Inject generated table into document.\n   *\n   * @param {HTMLElement} [parent=null]\n   */\n  injectTable(parent = null) {\n    if (!this.injected) {\n      (parent || this.hot.rootElement).appendChild(this.container.fragment);\n      this.injected = true;\n    }\n  }\n\n  /**\n   * Remove table from document.\n   */\n  removeTable() {\n    if (this.injected && this.container.container.parentNode) {\n      this.container.container.parentNode.removeChild(this.container.container);\n      this.container = null;\n      this.injected = false;\n    }\n  }\n\n  /**\n   * Create col element.\n   *\n   * @param {Number} column Column index.\n   * @returns {HTMLElement}\n   */\n  createColElement(column) {\n    const d = document;\n    const col = d.createElement('col');\n\n    col.style.width = `${this.hot.view.wt.wtTable.getStretchedColumnWidth(column)}px`;\n\n    return col;\n  }\n\n  /**\n   * Create table element.\n   *\n   * @param {String} className\n   * @returns {Object}\n   */\n  createTable(className = '') {\n    const d = document;\n    const fragment = d.createDocumentFragment();\n    const table = d.createElement('table');\n    const tHead = d.createElement('thead');\n    const tBody = d.createElement('tbody');\n    const colGroup = d.createElement('colgroup');\n    const tr = d.createElement('tr');\n    const th = d.createElement('th');\n\n    if (this.isVertical()) {\n      table.appendChild(colGroup);\n    }\n    if (this.isHorizontal()) {\n      tr.appendChild(th);\n      tHead.appendChild(tr);\n      table.style.tableLayout = 'auto';\n      table.style.width = 'auto';\n    }\n    table.appendChild(tHead);\n\n    if (this.isVertical()) {\n      tBody.appendChild(tr);\n    }\n    table.appendChild(tBody);\n    addClass(table, className);\n    fragment.appendChild(table);\n\n    return {fragment, table, tHead, tBody, colGroup, tr, th};\n  }\n\n  /**\n   * Create container for tables.\n   *\n   * @param {String} className\n   * @returns {Object}\n   */\n  createContainer(className = '') {\n    const d = document;\n    const fragment = d.createDocumentFragment();\n    const container = d.createElement('div');\n\n    className = `htGhostTable htAutoSize ${className.trim()}`;\n    addClass(container, className);\n    fragment.appendChild(container);\n\n    return {fragment, container};\n  }\n\n  /**\n   * Checks if table is raised vertically (checking rows).\n   *\n   * @returns {Boolean}\n   */\n  isVertical() {\n    return !!(this.rows.length && !this.columns.length);\n  }\n\n  /**\n   * Checks if table is raised horizontally (checking columns).\n   *\n   * @returns {Boolean}\n   */\n  isHorizontal() {\n    return !!(this.columns.length && !this.rows.length);\n  }\n}\n\nexport default GhostTable;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/utils/ghostTable.js","import LinkedList from '../dataStructures/linkedList';\n\n/**\n * Refactored implementation of mergeSort (part of javascript-algorithms project) by Github users:\n * mgechev, AndriiHeonia and lekkas (part of javascript-algorithms project - all project contributors\n * at repository website)\n *\n * Link to repository: https://github.com/mgechev/javascript-algorithms\n */\n\n/**\n * Specifies a function that defines the sort order. The array is sorted according to each\n * character's Unicode code point value, according to the string conversion of each element.\n *\n * @param a {*} first compared element.\n * @param b {*} second compared element.\n * @returns {Number}\n */\nconst defaultCompareFunction = function(a, b) {\n  // sort lexically\n\n  const firstValue = a.toString();\n  const secondValue = b.toString();\n\n  if (firstValue === secondValue) {\n    return 0;\n\n  } else if (firstValue < secondValue) {\n    return -1;\n\n  }\n  return 1;\n\n};\n\n/**\n * Mergesort method which is recursively called for sorting the input array.\n *\n * @param {Array} array The array which should be sorted.\n * @param {Function} compareFunction Compares two items in an array. If compareFunction is not supplied,\n * elements are sorted by converting them to strings and comparing strings in Unicode code point order.\n * @param {Number} startIndex Left side of the subarray.\n * @param {Number} endIndex Right side of the subarray.\n * @returns {Array} Array with sorted subarray.\n */\nexport default function mergeSort(array, compareFunction = defaultCompareFunction, startIndex = 0, endIndex = array.length) {\n  if (Math.abs(endIndex - startIndex) <= 1) {\n    return [];\n  }\n\n  const middleIndex = Math.ceil((startIndex + endIndex) / 2);\n\n  mergeSort(array, compareFunction, startIndex, middleIndex);\n  mergeSort(array, compareFunction, middleIndex, endIndex);\n\n  return merge(array, compareFunction, startIndex, middleIndex, endIndex);\n}\n\n/**\n * Devides and sort merges two subarrays of given array\n *\n * @param {Array} array The array which subarrays should be sorted.\n * @param {Number} startIndex The start of the first subarray.\n *   This subarray is with end middle - 1.\n * @param {Number} middleIndex The start of the second array.\n * @param {Number} endIndex end - 1 is the end of the second array.\n * @returns {Array} The array with sorted subarray.\n */\nexport function merge(array, compareFunction, startIndex, middleIndex, endIndex) {\n  const leftElements = new LinkedList();\n  const rightElements = new LinkedList();\n  const leftSize = middleIndex - startIndex;\n  const rightSize = endIndex - middleIndex;\n  const maxSize = Math.max(leftSize, rightSize);\n  const size = endIndex - startIndex;\n\n  for (let i = 0; i < maxSize; i += 1) {\n    if (i < leftSize) {\n      leftElements.push(array[startIndex + i]);\n    }\n\n    if (i < rightSize) {\n      rightElements.push(array[middleIndex + i]);\n    }\n  }\n\n  let i = 0;\n\n  while (i < size) {\n    if (leftElements.first && rightElements.first) {\n      if (compareFunction(leftElements.first.data, rightElements.first.data) > 0) {\n        array[startIndex + i] = rightElements.shift().data;\n\n      } else {\n        array[startIndex + i] = leftElements.shift().data;\n      }\n\n    } else if (leftElements.first) {\n\n      array[startIndex + i] = leftElements.shift().data;\n    } else {\n\n      array[startIndex + i] = rightElements.shift().data;\n    }\n\n    i += 1;\n  }\n\n  return array;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/utils/sortingAlgorithms/mergeSort.js","import {arrayEach} from 'handsontable/helpers/array';\n\n/**\n * @class DataFilter\n * @plugin Filters\n * @pro\n */\nclass DataFilter {\n  constructor(formulaCollection, columnDataFactory = (column) => []) {\n    /**\n     * Reference to the instance of {FormulaCollection}.\n     *\n     * @type {FormulaCollection}\n     */\n    this.formulaCollection = formulaCollection;\n    /**\n     * Function which provide source data factory for specified column.\n     *\n     * @type {Function}\n     */\n    this.columnDataFactory = columnDataFactory;\n  }\n\n  /**\n   * Filter data based on the formulas collection.\n   *\n   * @returns {Array}\n   */\n  filter() {\n    let filteredData = [];\n\n    if (!this.formulaCollection.isEmpty()) {\n      arrayEach(this.formulaCollection.orderStack, (column, index) => {\n        let columnData = this.columnDataFactory(column);\n\n        if (index) {\n          columnData = this._getIntersectData(columnData, filteredData);\n        }\n\n        filteredData = this.filterByColumn(column, columnData);\n      });\n    }\n\n    return filteredData;\n  }\n\n  /**\n   * Filter data based on specified column index.\n   *\n   * @param {Number} column Column index.\n   * @param {Array} [dataSource] Data source as array of objects with `value` and `meta` keys (e.g. `{value: 'foo', meta: {}}`).\n   * @returns {Array} Returns filtered data.\n   */\n  filterByColumn(column, dataSource = []) {\n    const filteredData = [];\n\n    arrayEach(dataSource, (dataRow) => {\n      if (dataRow !== void 0 && this.formulaCollection.isMatch(dataRow, column)) {\n        filteredData.push(dataRow);\n      }\n    });\n\n    return filteredData;\n  }\n\n  /**\n   * Intersect data.\n   *\n   * @private\n   * @param {Array} data\n   * @param {Array} needles\n   * @returns {Array}\n   */\n  _getIntersectData(data, needles) {\n    const result = [];\n\n    arrayEach(needles, (needleRow) => {\n      const row = needleRow.meta.visualRow;\n\n      if (data[row] !== void 0) {\n        result[row] = data[row];\n      }\n    });\n\n    return result;\n  }\n}\n\nexport default DataFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/dataFilter.js","import {arrayEach, arrayMap, arrayFilter} from 'handsontable/helpers/array';\nimport {objectEach, mixin} from 'handsontable/helpers/object';\nimport localHooks from 'handsontable/mixins/localHooks';\nimport {getFormula} from './formulaRegisterer';\n\n/**\n * @class FormulaCollection\n * @plugin Filters\n */\nclass FormulaCollection {\n  constructor() {\n    /**\n     * Formulas collection grouped by column index.\n     *\n     * @type {Object}\n     */\n    this.formulas = Object.create(null);\n    /**\n     * Order of added formula filters.\n     *\n     * @type {Array}\n     */\n    this.orderStack = [];\n  }\n\n  /**\n   * Check if formula collection is empty (so no needed to filter data).\n   *\n   * @returns {Boolean}\n   */\n  isEmpty() {\n    return !this.orderStack.length;\n  }\n\n  /**\n   * Check if value is matched to the criteria of formulas chain.\n   *\n   * @param {Object} value Object with `value` and `meta` keys.\n   * @param {Number} [column] Column index.\n   * @returns {Boolean}\n   */\n  isMatch(value, column) {\n    let result = true;\n\n    if (column === void 0) {\n      objectEach(this.formulas, (formulas) => {\n        result = this.isMatchInFormulas(formulas, value);\n\n        return result;\n      });\n\n    } else {\n      result = this.isMatchInFormulas(this.getFormulas(column), value);\n    }\n\n    return result;\n  }\n\n  /**\n   * Check if the value is matches the formulas.\n   *\n   * @param {Array} formulas List of formulas.\n   * @param {Object} value Object with `value` and `meta` keys.\n   * @returns {Boolean}\n   */\n  isMatchInFormulas(formulas, value) {\n    let result = false;\n\n    if (formulas.length) {\n      arrayEach(formulas, (formula) => {\n        result = formula.func(value);\n\n        return result;\n      });\n\n    } else {\n      result = true;\n    }\n\n    return result;\n  }\n\n  /**\n   * Add formula to the collection.\n   *\n   * @param {Number} column Column index.\n   * @param {Object} formulaDefinition Object with keys:\n   *  * `command` Object, Command object with formula name as `key` property.\n   *  * `args` Array, Formula arguments.\n   * @fires FormulaCollection#beforeAdd\n   * @fires FormulaCollection#afterAdd\n   */\n  addFormula(column, formulaDefinition) {\n    let args = arrayMap(formulaDefinition.args, (v) => (typeof v === 'string' ? v.toLowerCase() : v));\n    let name = formulaDefinition.name || formulaDefinition.command.key;\n\n    this.runLocalHooks('beforeAdd', column);\n\n    if (this.orderStack.indexOf(column) === -1) {\n      this.orderStack.push(column);\n    }\n    if (this.hasFormulas(column, name)) {\n      // Update formula\n      arrayEach(this.getFormulas(column), (formula) => {\n        if (formula.name === name) {\n          formula.func = getFormula(formula.name, args);\n          formula.args = args;\n\n          return false;\n        }\n      });\n    } else {\n      // Add formula\n      this.getFormulas(column).push({\n        name,\n        args,\n        func: getFormula(name, args)\n      });\n    }\n    this.runLocalHooks('afterAdd', column);\n  }\n\n  /**\n   * Get all added formulas from the collection at specified column index.\n   *\n   * @param {Number} column Column index.\n   * @returns {Array} Returns formulas collection as an array.\n   */\n  getFormulas(column) {\n    if (!this.formulas[column]) {\n      this.formulas[column] = [];\n    }\n\n    return this.formulas[column];\n  }\n\n  /**\n   * Export all previously added formulas.\n   *\n   * @returns {Array}\n   */\n  exportAllFormulas() {\n    let result = [];\n\n    arrayEach(this.orderStack, (column) => {\n      const formulas = arrayMap(this.getFormulas(column), ({name, args} = formula) => ({name, args}));\n\n      result.push({\n        column,\n        formulas\n      });\n    });\n\n    return result;\n  }\n\n  /**\n   * Import formulas to the collection.\n   */\n  importAllFormulas(formulas) {\n    this.clean();\n\n    arrayEach(formulas, (stack) => {\n      this.orderStack.push(stack.column);\n\n      arrayEach(stack.formulas, (formula) => this.addFormula(stack.column, formula));\n    });\n  }\n\n  /**\n   * Remove formulas at given column index.\n   *\n   * @param {Number} column Column index.\n   * @fires FormulaCollection#beforeRemove\n   * @fires FormulaCollection#afterRemove\n   */\n  removeFormulas(column) {\n    this.runLocalHooks('beforeRemove', column);\n\n    if (this.orderStack.indexOf(column) >= 0) {\n      this.orderStack.splice(this.orderStack.indexOf(column), 1);\n    }\n    this.clearFormulas(column);\n    this.runLocalHooks('afterRemove', column);\n  }\n\n  /**\n   * Clear formulas at specified column index but without clearing stack order.\n   *\n   * @param {Number }column Column index.\n   * @fires FormulaCollection#beforeClear\n   * @fires FormulaCollection#afterClear\n   */\n  clearFormulas(column) {\n    this.runLocalHooks('beforeClear', column);\n    this.getFormulas(column).length = 0;\n    this.runLocalHooks('afterClear', column);\n  }\n\n  /**\n   * Check if at least one formula was added at specified column index. And if second parameter is passed then additionally\n   * check if formula exists under its name.\n   *\n   * @param {Number} column Column index.\n   * @param {String} [name] Formula name.\n   * @returns {Boolean}\n   */\n  hasFormulas(column, name) {\n    let result = false;\n    let formulas = this.getFormulas(column);\n\n    if (name) {\n      result = arrayFilter(formulas, (formula) => formula.name === name).length > 0;\n    } else {\n      result = formulas.length > 0;\n    }\n\n    return result;\n  }\n\n  /**\n   * Clean all formulas collection and reset order stack.\n   *\n   * @fires FormulaCollection#beforeClean\n   * @fires FormulaCollection#afterClean\n   */\n  clean() {\n    this.runLocalHooks('beforeClean');\n    this.formulas = Object.create(null);\n    this.orderStack.length = 0;\n    this.runLocalHooks('afterClean');\n  }\n\n  /**\n   * Destroy object.\n   */\n  destroy() {\n    this.clearLocalHooks();\n    this.formulas = null;\n    this.orderStack = null;\n  }\n}\n\nmixin(FormulaCollection, localHooks);\n\nexport default FormulaCollection;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formulaCollection.js","import {registerFormula, getFormula} from './../formulaRegisterer';\nimport {FORMULA_NAME as FORMULA_DATE_AFTER} from './date/after';\nimport {FORMULA_NAME as FORMULA_DATE_BEFORE} from './date/before';\n\nexport const FORMULA_NAME = 'between';\n\nexport function formula(dataRow, [from, to] = inputValues) {\n  if (dataRow.meta.type === 'numeric') {\n    let _from = parseFloat(from, 10);\n    let _to = parseFloat(to, 10);\n\n    from = Math.min(_from, _to);\n    to = Math.max(_from, _to);\n\n  } else if (dataRow.meta.type === 'date') {\n    let dateBefore = getFormula(FORMULA_DATE_BEFORE, [to]);\n    let dateAfter = getFormula(FORMULA_DATE_AFTER, [from]);\n\n    return dateBefore(dataRow) && dateAfter(dataRow);\n  }\n\n  return dataRow.value >= from && dataRow.value <= to;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Is between',\n  inputsCount: 2\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/between.js","import {stringify} from 'handsontable/helpers/mixed';\nimport {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'contains';\n\nexport function formula(dataRow, [value] = inputValues) {\n  return stringify(dataRow.value).toLowerCase().indexOf(stringify(value)) >= 0;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Contains',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/contains.js","import moment from 'moment';\nimport {registerFormula} from './../../formulaRegisterer';\n\nexport const FORMULA_NAME = 'date_after';\n\nexport function formula(dataRow, [value] = inputValues) {\n  let date = moment(dataRow.value, dataRow.meta.dateFormat);\n  let inputDate = moment(value, dataRow.meta.dateFormat);\n\n  if (!date.isValid() || !inputDate.isValid()) {\n    return false;\n  }\n\n  return date.diff(inputDate) >= 0;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'After',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/date/after.js","import moment from 'moment';\nimport {registerFormula} from './../../formulaRegisterer';\n\nexport const FORMULA_NAME = 'date_before';\n\nexport function formula(dataRow, [value] = inputValues) {\n  let date = moment(dataRow.value, dataRow.meta.dateFormat);\n  let inputDate = moment(value, dataRow.meta.dateFormat);\n\n  if (!date.isValid() || !inputDate.isValid()) {\n    return false;\n  }\n\n  return date.diff(inputDate) <= 0;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Before',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/date/before.js","import {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'empty';\n\nexport function formula(dataRow) {\n  return dataRow.value === '' || dataRow.value === null || dataRow.value === void 0;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Is empty',\n  inputsCount: 0\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/empty.js","import {stringify} from 'handsontable/helpers/mixed';\nimport {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'eq';\n\nexport function formula(dataRow, [value] = inputValues) {\n  return stringify(dataRow.value).toLowerCase() === stringify(value);\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Is equal to',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/equal.js","import {isObject} from 'handsontable/helpers/object';\nimport {toLabel} from 'hot-formula-parser';\n\n/**\n * @class BaseCell\n * @util\n */\nclass BaseCell {\n  constructor(row, column) {\n    const rowObject = isObject(row);\n    const columnObject = isObject(column);\n\n    this._row = rowObject ? row.index : row;\n    this.rowAbsolute = rowObject ? row.isAbsolute : true;\n    this._column = columnObject ? column.index : column;\n    this.columnAbsolute = columnObject ? column.isAbsolute : true;\n    this.rowOffset = 0;\n    this.columnOffset = 0;\n\n    // TODO: Change syntax to es6 after upgrade tests to newer version of phantom and jasmine.\n    Object.defineProperty(this, 'row', {\n      get: function() {\n        return this.rowOffset + this._row;\n      },\n      set: function(row) {\n        this._row = row;\n      },\n      enumerable: true,\n      configurable: true\n    });\n    Object.defineProperty(this, 'column', {\n      get: function() {\n        return this.columnOffset + this._column;\n      },\n      set: function(column) {\n        this._column = column;\n      },\n      enumerable: true,\n      configurable: true\n    });\n  }\n\n  /**\n   * Translate cell coordinates.\n   *\n   * @param {Number} rowOffset Row offset to move.\n   * @param {Number} columnOffset Column offset to move.\n   */\n  translateTo(rowOffset, columnOffset) {\n    this.row = this.row + rowOffset;\n    this.column = this.column + columnOffset;\n  }\n\n  /**\n   * Check if cell is equal to provided one.\n   *\n   * @param {BaseCell} cell Cell object.\n   * @returns {Boolean}\n   */\n  isEqual(cell) {\n    return cell.row === this.row && cell.column === this.column;\n  }\n\n  /**\n   * Stringify object.\n   *\n   * @returns {String}\n   */\n  toString() {\n    return toLabel(\n      {index: this.row, isAbsolute: this.rowAbsolute},\n      {index: this.column, isAbsolute: this.columnAbsolute}\n    );\n  }\n}\n\nexport default BaseCell;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/cell/_base.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {objectEach} from 'handsontable/helpers/object';\n\n/**\n * This class handles the date-related calculations for the GanttChart plugin.\n *\n * @plugin GanttChart\n */\nclass DateCalculator {\n  constructor(year) {\n    /**\n     * Year to base calculations on.\n     *\n     * @type {Number}\n     */\n    this.year = year;\n    /**\n     * First day of the week.\n     *\n     * @type {String}\n     */\n    this.firstWeekDay = 'monday';\n    /**\n     * Number of week sections (full weeks + incomplete week blocks in months).\n     *\n     * @type {Number}\n     */\n    this.weekSectionCount = 0;\n    /**\n     * List of months and their week/day related information.\n     *\n     * @type {Array}\n     */\n    this.monthList = this.calculateMonthData();\n    /**\n     * Object containing references to the year days and their corresponding columns.\n     *\n     * @type {Object}\n     */\n    this.daysInColumns = {};\n\n    this.calculateWeekStructure();\n  }\n\n  /**\n   * Set the year as a base for calculations.\n   *\n   * @param {Number} year\n   */\n  setYear(year) {\n    this.year = year;\n\n    this.monthList = this.calculateMonthData();\n    this.calculateWeekStructure();\n  }\n\n  /**\n   * Set the first week day.\n   *\n   * @param {String} day Day of the week. Available options: 'monday' or 'sunday'.\n   */\n  setFirstWeekDay(day) {\n    const lowercaseDay = day.toLowerCase();\n\n    if (lowercaseDay !== 'monday' && lowercaseDay !== 'sunday') {\n      console.warn('First day of the week must be set to either Monday or Sunday');\n    }\n\n    this.firstWeekDay = lowercaseDay;\n\n    this.calculateWeekStructure();\n  }\n\n  /**\n   * Count week sections (full weeks + incomplete weeks in the months).\n   *\n   * @returns {Number} Week section count.\n   */\n  countWeekSections() {\n    return this.weekSectionCount;\n  }\n\n  /**\n   * Get the first week day.\n   *\n   * @returns {String}\n   */\n  getFirstWeekDay() {\n    return this.firstWeekDay;\n  }\n\n  /**\n   * Get the currently applied year.\n   *\n   * @returns {Number}\n   */\n  getYear() {\n    return this.year;\n  }\n\n  /**\n   * Get month list along with the month information.\n   *\n   * @returns {Array}\n   */\n  getMonthList() {\n    return this.monthList;\n  }\n\n  /**\n   * Parse the provided date and check if it's valid.\n   *\n   * @param {String|Date} date Date string or object.\n   * @returns {Date|null} Parsed Date object or null, if not a valid date string.\n   */\n  parseDate(date) {\n    if (!(date instanceof Date)) {\n      date = new Date(date);\n\n      if (date.toString() === 'Invalid Date') {\n        return null;\n      }\n    }\n\n    return date;\n  }\n\n  /**\n   * Convert a date to a column number.\n   *\n   * @param {String|Date} date\n   * @returns {Number|Boolean}\n   */\n  dateToColumn(date) {\n    date = this.parseDate(date);\n\n    if (!date || date.getFullYear() !== this.year) {\n      return false;\n    }\n\n    let month = date.getMonth();\n    let day = date.getDate() - 1;\n    let monthCache = this.daysInColumns[month];\n    let resultColumn = null;\n\n    objectEach(monthCache, (column, index) => {\n      if (column.indexOf(day + 1) > -1) {\n        resultColumn = parseInt(index, 10);\n\n        return false;\n      }\n    });\n\n    return resultColumn;\n  }\n\n  /**\n   * Convert a column index to a certain date.\n   *\n   * @param {Number} column\n   * @param {Boolean} forceReturnArray Force the return value to be an array;\n   * @returns {Date|Array}\n   */\n  columnToDate(column) {\n    let month = null;\n\n    objectEach(this.daysInColumns, (monthCache, index) => {\n      if (monthCache[column]) {\n        month = index;\n\n        return false;\n      }\n    });\n\n    if (this.daysInColumns[month][column].length === 1) {\n      return new Date(this.year, month, this.daysInColumns[month][column][0]);\n\n    }\n\n    return this.daysInColumns[month][column];\n  }\n\n  /**\n   * Check if the provided date is a starting or an ending day of a week.\n   *\n   * @param {Date|String} date\n   * @returns {Array|Boolean} Returns null, if an invalid date was provided or an array of results ( [1,0] => is on the beginning of the week, [0,1] => is on the end of the week).\n   */\n  isOnTheEdgeOfWeek(date) {\n    date = this.parseDate(date);\n\n    if (!date) {\n      return null;\n    }\n\n    let month = date.getMonth();\n    let day = date.getDate() - 1;\n    let monthCache = this.daysInColumns[month];\n    let isOnTheEdgeOfWeek = false;\n\n    objectEach(monthCache, (column) => {\n      let indexOfDay = column.indexOf(day + 1);\n\n      if ((indexOfDay === 0)) {\n        isOnTheEdgeOfWeek = [1, 0];\n        return false;\n\n      } else if (indexOfDay === column.length - 1) {\n        isOnTheEdgeOfWeek = [0, 1];\n        return false;\n      }\n    });\n\n    return isOnTheEdgeOfWeek;\n  }\n\n  /**\n   * Add days to the column/day cache.\n   *\n   * @private\n   * @param {Number} monthNumber Index of the month.\n   * @param {Number} columnNumber Index of the column.\n   * @param {Number} start First day in the column.\n   * @param {Number} end Last day in the column.\n   */\n  addDaysToCache(monthNumber, columnNumber, start, end) {\n    if (!this.daysInColumns[monthNumber]) {\n      this.daysInColumns[monthNumber] = {};\n    }\n    if (!this.daysInColumns[monthNumber][columnNumber]) {\n      this.daysInColumns[monthNumber][columnNumber] = [];\n    }\n    for (let j = start; j <= end; j++) {\n      this.daysInColumns[monthNumber][columnNumber].push(j);\n    }\n  }\n\n  /**\n   * Check if the provided dates can be used in a range bar.\n   *\n   * @param {Date|String} startDate Range start date.\n   * @param {Date|String} endDate Range end date.\n   * @returns {Boolean}\n   */\n  isValidRangeBarData(startDate, endDate) {\n    let startDateParsed = this.parseDate(startDate);\n    let endDateParsed = this.parseDate(endDate);\n\n    return startDateParsed && endDateParsed && startDateParsed.getTime() <= endDateParsed.getTime();\n  }\n\n  /**\n   * Calculate the month/day related information.\n   *\n   * @returns {Array}\n   */\n  calculateMonthData() {\n    return [\n      {name: 'January', days: 31},\n      {name: 'February', days: new Date(this.year, 2, 0).getDate()},\n      {name: 'March', days: 31},\n      {name: 'April', days: 30},\n      {name: 'May', days: 31},\n      {name: 'June', days: 30},\n      {name: 'July', days: 31},\n      {name: 'August', days: 31},\n      {name: 'September', days: 30},\n      {name: 'October', days: 31},\n      {name: 'November', days: 30},\n      {name: 'December', days: 31}\n    ];\n  }\n\n  /**\n   * Count the number of months.\n   *\n   * @returns {Number}\n   */\n  countMonths() {\n    return this.monthList.length;\n  }\n\n  /**\n   * Count days in a month.\n   *\n   * @param {Number} month Month index, where January = 1, February = 2, etc.\n   * @returns {Number}\n   */\n  countMonthDays(month) {\n    return this.monthList[month - 1].days;\n  }\n\n  /**\n   * Count full weeks in a month.\n   *\n   * @param {Number} month Month index, where January = 1, February = 2, etc.\n   * @returns {Number}\n   */\n  countMonthFullWeeks(month) {\n    return this.monthList[month - 1].fullWeeks;\n  }\n\n  /**\n   * Calculate week structure within defined months.\n   */\n  calculateWeekStructure() {\n    let weekOffset = 0;\n    let weekSectionCount = 0;\n    let firstWeekDay = this.getFirstWeekDay();\n    let monthList = this.getMonthList();\n    let currentYear = this.getYear();\n\n    if (firstWeekDay === 'monday') {\n      weekOffset = 1;\n    }\n\n    arrayEach(monthList, (currentMonth, i) => {\n      let firstMonthDay = new Date(currentYear, i, 1).getDay();\n\n      currentMonth.daysBeforeFullWeeks = (7 - firstMonthDay + weekOffset) % 7;\n      currentMonth.fullWeeks = Math.floor((currentMonth.days - currentMonth.daysBeforeFullWeeks) / 7);\n      currentMonth.daysAfterFullWeeks = currentMonth.days - currentMonth.daysBeforeFullWeeks - (7 * currentMonth.fullWeeks);\n\n      weekSectionCount += currentMonth.fullWeeks + (currentMonth.daysBeforeFullWeeks ? 1 : 0) + (currentMonth.daysAfterFullWeeks ? 1 : 0);\n    });\n\n    this.weekSectionCount = weekSectionCount;\n  }\n\n}\n\nexport default DateCalculator;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/ganttChart/dateCalculator.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {addClass} from 'handsontable/helpers/dom/element';\nimport BaseUI from './_base';\n\n/**\n * Class responsible for the UI in the Nested Rows' row headers.\n *\n * @class HeadersUI\n * @util\n * @extends BaseUI\n */\nclass HeadersUI extends BaseUI {\n  /**\n   * CSS classes used in the row headers.\n   *\n   * @type {Object}\n   */\n  static get CSS_CLASSES() {\n    return {\n      indicatorContainer: 'ht_nestingLevels',\n      parent: 'ht_nestingParent',\n      indicator: 'ht_nestingLevel',\n      emptyIndicator: 'ht_nestingLevel_empty',\n      //button: 'ht_nestingButton',\n      button: 'expand-toggle',\n      expandButton: 'ht_nestingExpand',\n      collapseButton: 'ht_nestingCollapse'\n    };\n  }\n\n  constructor(nestedRowsPlugin, hotInstance) {\n    super(nestedRowsPlugin, hotInstance);\n    /**\n     * Reference to the DataManager instance connected with the Nested Rows plugin.\n     *\n     * @type {DataManager}\n     */\n    this.dataManager = this.plugin.dataManager;\n    // /**\n    //  * Level cache array.\n    //  *\n    //  * @type {Array}\n    //  */\n    // this.levelCache = this.dataManager.cache.levels;\n    /**\n     * Reference to the CollapsingUI instance connected with the Nested Rows plugin.\n     *\n     * @type {CollapsingUI}\n     */\n    this.collapsingUI = this.plugin.collapsingUI;\n    /**\n     * Cache for the row headers width.\n     *\n     * @type {null|Number}\n     */\n    this.rowHeaderWidthCache = null;\n    /**\n     * Reference to the TrimRows instance connected with the Nested Rows plugin.\n     *\n     * @type {TrimRows}\n     */\n    this.trimRowsPlugin = nestedRowsPlugin.trimRowsPlugin;\n  }\n\n  /**\n   * Append nesting indicators and buttons to the row headers.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {HTMLElement} TH TH 3element.\n   */\n  appendLevelIndicators(row, TH) {\n    row = this.trimRowsPlugin.rowsMapper.getValueByIndex(row);\n\n    const rowLevel = this.dataManager.getRowLevel(row);\n    const rowObject = this.dataManager.getDataObject(row);\n    const innerDiv = TH.getElementsByTagName('DIV')[0];\n    const innerSpan = innerDiv.querySelector('span.rowHeader');\n    const previousIndicators = innerDiv.querySelectorAll('[class^=\"ht_nesting\"]');\n\n    arrayEach(previousIndicators, (elem, i) => {\n      if (elem) {\n        innerDiv.removeChild(elem);\n      }\n    });\n\n    addClass(TH, HeadersUI.CSS_CLASSES.indicatorContainer);\n\n    if (rowLevel) {\n      const initialContent = innerSpan.cloneNode(true);\n      innerDiv.innerHTML = '';\n\n      rangeEach(0, rowLevel - 1, (i) => {\n        var parent = this.dataManager.getRowParent(row);\n        var parentIndex = this.dataManager.getRowIndex(parent);\n        if(this.trimRowsPlugin.isTrimmed(parentIndex)) return;\n        const levelIndicator = document.createElement('SPAN');\n        addClass(levelIndicator, HeadersUI.CSS_CLASSES.emptyIndicator);\n        innerDiv.appendChild(levelIndicator);\n      });\n\n      innerDiv.appendChild(initialContent);\n    }\n\n    if (this.dataManager.hasChildren(rowObject)) {\n      const buttonsContainer = document.createElement('DIV');\n      addClass(TH, HeadersUI.CSS_CLASSES.parent);\n\n      if (this.collapsingUI.areChildrenCollapsed(row)) {\n        addClass(buttonsContainer, HeadersUI.CSS_CLASSES.button + ' ' + HeadersUI.CSS_CLASSES.expandButton);\n\n      } else {\n        addClass(buttonsContainer, HeadersUI.CSS_CLASSES.button + ' ' + HeadersUI.CSS_CLASSES.collapseButton);\n      }\n\n      innerDiv.appendChild(buttonsContainer);\n    }\n  }\n\n  /**\n   * Update the row header width according to number of levels in the dataset.\n   *\n   * @private\n   * @param {Number} deepestLevel Cached deepest level of nesting.\n   */\n  updateRowHeaderWidth(deepestLevel) {\n    if (!deepestLevel) {\n      deepestLevel = this.dataManager.cache.levelCount;\n    }\n\n    this.rowHeaderWidthCache = Math.max(50, 11 + (10 * deepestLevel) + 25);\n\n    this.hot.render();\n  }\n}\n\nexport default HeadersUI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/nestedRows/ui/headers.js","import {\n  addClass,\n  getScrollbarWidth,\n  getScrollTop,\n  getWindowScrollLeft,\n  hasClass,\n  outerHeight,\n  innerHeight,\n  removeClass,\n  setOverlayPosition,\n  resetCssTransform\n} from 'handsontable/helpers/dom/element';\nimport Overlay from 'handsontable/3rdparty/walkontable/src/overlay/_base';\n\n/**\n * @class BottomOverlay\n */\nclass BottomOverlay extends Overlay {\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    super(wotInstance);\n    this.clone = this.makeClone(Overlay.CLONE_BOTTOM);\n  }\n\n  /**\n   *\n   */\n  repositionOverlay() {\n    let scrollbarWidth = getScrollbarWidth();\n    let cloneRoot = this.clone.wtTable.holder.parentNode;\n\n    if (this.wot.wtTable.holder.clientHeight === this.wot.wtTable.holder.offsetHeight) {\n      scrollbarWidth = 0;\n    }\n\n    cloneRoot.style.top = '';\n    cloneRoot.style.bottom = scrollbarWidth + 'px';\n  }\n\n  /**\n   * Checks if overlay should be fully rendered\n   *\n   * @returns {Boolean}\n   */\n  shouldBeRendered() {\n    /* eslint-disable no-unneeded-ternary */\n    return this.wot.getSetting('fixedRowsBottom') ? true : false;\n  }\n\n  /**\n   * Updates the top overlay position\n   */\n  resetFixedPosition() {\n    if (!this.needFullRender || !this.wot.wtTable.holder.parentNode) {\n      // removed from DOM\n      return;\n    }\n\n    let overlayRoot = this.clone.wtTable.holder.parentNode;\n    let headerPosition = 0;\n    overlayRoot.style.top = '';\n\n    if (this.wot.wtOverlays.leftOverlay.trimmingContainer === window) {\n      let box = this.wot.wtTable.hider.getBoundingClientRect();\n      let bottom = Math.ceil(box.bottom);\n      let finalLeft;\n      let finalBottom;\n      let bodyHeight = document.body.offsetHeight;\n\n      finalLeft = this.wot.wtTable.hider.style.left;\n      finalLeft = finalLeft === '' ? 0 : finalLeft;\n\n      if (bottom > bodyHeight) {\n        finalBottom = (bottom - bodyHeight);\n      } else {\n        finalBottom = 0;\n      }\n      headerPosition = finalBottom;\n      finalBottom += 'px';\n\n      overlayRoot.style.top = '';\n      overlayRoot.style.left = finalLeft;\n      overlayRoot.style.bottom = finalBottom;\n\n    } else {\n      headerPosition = this.getScrollPosition();\n      resetCssTransform(overlayRoot);\n      this.repositionOverlay();\n    }\n    this.adjustHeaderBordersPosition(headerPosition);\n  }\n\n  /**\n   * Sets the main overlay's vertical scroll position\n   *\n   * @param {Number} pos\n   */\n  setScrollPosition(pos) {\n    if (this.mainTableScrollableElement === window) {\n      window.scrollTo(getWindowScrollLeft(), pos);\n\n    } else {\n      this.mainTableScrollableElement.scrollTop = pos;\n    }\n  }\n\n  /**\n   * Triggers onScroll hook callback\n   */\n  onScroll() {\n    this.wot.getSetting('onScrollVertically');\n  }\n\n  /**\n   * Calculates total sum cells height\n   *\n   * @param {Number} from Row index which calculates started from\n   * @param {Number} to Row index where calculation is finished\n   * @returns {Number} Height sum\n   */\n  sumCellSizes(from, to) {\n    let sum = 0;\n    let defaultRowHeight = this.wot.wtSettings.settings.defaultRowHeight;\n\n    while (from < to) {\n      let height = this.wot.wtTable.getRowHeight(from);\n\n      sum += height === void 0 ? defaultRowHeight : height;\n      from++;\n    }\n\n    return sum;\n  }\n\n  /**\n   * Adjust overlay root element, childs and master table element sizes (width, height).\n   *\n   * @param {Boolean} [force=false]\n   */\n  adjustElementsSize(force = false) {\n    this.updateTrimmingContainer();\n\n    if (this.needFullRender || force) {\n      this.adjustRootElementSize();\n      this.adjustRootChildrenSize();\n\n      if (!force) {\n        this.areElementSizesAdjusted = true;\n      }\n    }\n  }\n\n  /**\n   * Adjust overlay root element size (width and height).\n   */\n  adjustRootElementSize() {\n    let masterHolder = this.wot.wtTable.holder;\n    let scrollbarWidth = masterHolder.clientWidth === masterHolder.offsetWidth ? 0 : getScrollbarWidth();\n    let overlayRoot = this.clone.wtTable.holder.parentNode;\n    let overlayRootStyle = overlayRoot.style;\n    let tableHeight;\n\n    if (this.trimmingContainer === window) {\n      overlayRootStyle.width = '';\n\n    } else {\n      overlayRootStyle.width = this.wot.wtViewport.getWorkspaceWidth() - scrollbarWidth + 'px';\n    }\n\n    this.clone.wtTable.holder.style.width = overlayRootStyle.width;\n\n    tableHeight = outerHeight(this.clone.wtTable.TABLE);\n    overlayRootStyle.height = (tableHeight === 0 ? tableHeight : tableHeight) + 'px';\n  }\n\n  /**\n   * Adjust overlay root childs size\n   */\n  adjustRootChildrenSize() {\n    let scrollbarWidth = getScrollbarWidth();\n\n    this.clone.wtTable.hider.style.width = this.hider.style.width;\n    this.clone.wtTable.holder.style.width = this.clone.wtTable.holder.parentNode.style.width;\n\n    if (scrollbarWidth === 0) {\n      scrollbarWidth = 30;\n    }\n    this.clone.wtTable.holder.style.height = parseInt(this.clone.wtTable.holder.parentNode.style.height, 10) + scrollbarWidth + 'px';\n  }\n\n  /**\n   * Adjust the overlay dimensions and position\n   */\n  applyToDOM() {\n    let total = this.wot.getSetting('totalRows');\n\n    if (!this.areElementSizesAdjusted) {\n      this.adjustElementsSize();\n    }\n    if (typeof this.wot.wtViewport.rowsRenderCalculator.startPosition === 'number') {\n      this.spreader.style.top = this.wot.wtViewport.rowsRenderCalculator.startPosition + 'px';\n\n    } else if (total === 0) {\n      // can happen if there are 0 rows\n      this.spreader.style.top = '0';\n\n    } else {\n      throw new Error('Incorrect value of the rowsRenderCalculator');\n    }\n    this.spreader.style.bottom = '';\n\n    if (this.needFullRender) {\n      this.syncOverlayOffset();\n    }\n  }\n\n  /**\n   * Synchronize calculated left position to an element\n   */\n  syncOverlayOffset() {\n    if (typeof this.wot.wtViewport.columnsRenderCalculator.startPosition === 'number') {\n      this.clone.wtTable.spreader.style.left = this.wot.wtViewport.columnsRenderCalculator.startPosition + 'px';\n\n    } else {\n      this.clone.wtTable.spreader.style.left = '';\n    }\n  }\n\n  /**\n   * Scrolls vertically to a row\n   *\n   * @param sourceRow {Number} Row index which you want to scroll to\n   * @param [bottomEdge=false] {Boolean} if `true`, scrolls according to the bottom edge (top edge is by default)\n   */\n  scrollTo(sourceRow, bottomEdge) {\n    let newY = this.getTableParentOffset();\n    let sourceInstance = this.wot.cloneSource ? this.wot.cloneSource : this.wot;\n    let mainHolder = sourceInstance.wtTable.holder;\n    let scrollbarCompensation = 0;\n\n    if (bottomEdge && mainHolder.offsetHeight !== mainHolder.clientHeight) {\n      scrollbarCompensation = getScrollbarWidth();\n    }\n\n    if (bottomEdge) {\n      newY += this.sumCellSizes(0, sourceRow + 1);\n      newY -= this.wot.wtViewport.getViewportHeight();\n      // Fix 1 pixel offset when cell is selected\n      newY += 1;\n\n    } else {\n      newY += this.sumCellSizes(this.wot.getSetting('fixedRowsBottom'), sourceRow);\n    }\n    newY += scrollbarCompensation;\n\n    this.setScrollPosition(newY);\n  }\n\n  /**\n   * Gets table parent top position\n   *\n   * @returns {Number}\n   */\n  getTableParentOffset() {\n    if (this.mainTableScrollableElement === window) {\n      return this.wot.wtTable.holderOffset.top;\n    }\n\n    return 0;\n  }\n\n  /**\n   * Gets the main overlay's vertical scroll position\n   *\n   * @returns {Number} Main table's vertical scroll position\n   */\n  getScrollPosition() {\n    return getScrollTop(this.mainTableScrollableElement);\n  }\n\n  /**\n   * Adds css classes to hide the header border's header (cell-selection border hiding issue)\n   *\n   * @param {Number} position Header Y position if trimming container is window or scroll top if not\n   */\n  adjustHeaderBordersPosition(position) {\n    if (this.wot.getSetting('fixedRowsBottom') === 0 && this.wot.getSetting('columnHeaders').length > 0) {\n      let masterParent = this.wot.wtTable.holder.parentNode;\n      let previousState = hasClass(masterParent, 'innerBorderTop');\n\n      if (position) {\n        addClass(masterParent, 'innerBorderTop');\n      } else {\n        removeClass(masterParent, 'innerBorderTop');\n      }\n      if (!previousState && position || previousState && !position) {\n        this.wot.wtOverlays.adjustElementsSize();\n      }\n    }\n    // nasty workaround for double border in the header, TODO: find a pure-css solution\n    if (this.wot.getSetting('rowHeaders').length === 0) {\n      let secondHeaderCell = this.clone.wtTable.THEAD.querySelector('th:nth-of-type(2)');\n\n      if (secondHeaderCell) {\n        secondHeaderCell.style['border-left-width'] = 0;\n      }\n    }\n  }\n}\n\nOverlay.registerOverlay(Overlay.CLONE_BOTTOM, BottomOverlay);\n\nexport default BottomOverlay;\n\n\n\n// WEBPACK FOOTER //\n// ./src/3rdparty/walkontable/src/overlay/bottom.js","import {\n  getScrollbarWidth,\n  outerHeight,\n  outerWidth,\n  setOverlayPosition,\n  resetCssTransform\n} from 'handsontable/helpers/dom/element';\nimport Overlay from 'handsontable/3rdparty/walkontable/src/overlay/_base';\n\n/**\n * @class TopLeftCornerOverlay\n */\nclass BottomLeftCornerOverlay extends Overlay {\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    super(wotInstance);\n    this.clone = this.makeClone(Overlay.CLONE_BOTTOM_LEFT_CORNER);\n  }\n\n  /**\n   * Checks if overlay should be fully rendered\n   *\n   * @returns {Boolean}\n   */\n  shouldBeRendered() {\n    /* eslint-disable no-unneeded-ternary */\n    return this.wot.getSetting('fixedRowsBottom') &&\n      (this.wot.getSetting('fixedColumnsLeft') || this.wot.getSetting('rowHeaders').length) ? true : false;\n  }\n\n  /**\n   * Reposition the overlay.\n   */\n  repositionOverlay() {\n    let scrollbarWidth = getScrollbarWidth();\n    let cloneRoot = this.clone.wtTable.holder.parentNode;\n\n    if (this.wot.wtTable.holder.clientHeight === this.wot.wtTable.holder.offsetHeight) {\n      scrollbarWidth = 0;\n    }\n\n    cloneRoot.style.top = '';\n    cloneRoot.style.bottom = scrollbarWidth + 'px';\n  }\n\n  /**\n   * Updates the corner overlay position\n   */\n  resetFixedPosition() {\n    this.updateTrimmingContainer();\n\n    if (!this.wot.wtTable.holder.parentNode) {\n      // removed from DOM\n      return;\n    }\n    let overlayRoot = this.clone.wtTable.holder.parentNode;\n    let tableHeight = outerHeight(this.clone.wtTable.TABLE);\n    let tableWidth = outerWidth(this.clone.wtTable.TABLE);\n\n    overlayRoot.style.top = '';\n\n    if (this.trimmingContainer === window) {\n      let box = this.wot.wtTable.hider.getBoundingClientRect();\n      let bottom = Math.ceil(box.bottom);\n      let left = Math.ceil(box.left);\n      let finalLeft;\n      let finalBottom;\n      let bodyHeight = document.body.offsetHeight;\n\n      if (left < 0) {\n        finalLeft = -left;\n      } else {\n        finalLeft = 0;\n      }\n\n      if (bottom > bodyHeight) {\n        finalBottom = (bottom - bodyHeight);\n      } else {\n        finalBottom = 0;\n      }\n      finalBottom += 'px';\n      finalLeft += 'px';\n\n      overlayRoot.style.top = '';\n      overlayRoot.style.left = finalLeft;\n      overlayRoot.style.bottom = finalBottom;\n\n    } else {\n      resetCssTransform(overlayRoot);\n      this.repositionOverlay();\n    }\n    overlayRoot.style.height = (tableHeight === 0 ? tableHeight : tableHeight) + 'px';\n    overlayRoot.style.width = (tableWidth === 0 ? tableWidth : tableWidth) + 'px';\n  }\n}\n\nOverlay.registerOverlay(Overlay.CLONE_BOTTOM_LEFT_CORNER, BottomLeftCornerOverlay);\n\nexport default BottomLeftCornerOverlay;\n\n\n\n// WEBPACK FOOTER //\n// ./src/3rdparty/walkontable/src/overlay/bottomLeftCorner.js","import BindRowsWithHeaders from './bindRowsWithHeaders/bindRowsWithHeaders';\n// import CollapsibleColumns from './collapsibleColumns/collapsibleColumns';\nimport ColumnSummary from './columnSummary/columnSummary';\nimport DropdownMenu from './dropdownMenu/dropdownMenu';\n// import ExportFile from './exportFile/exportFile';\nimport Filters from './filters/filters';\nimport Formulas from './formulas/formulas';\nimport GanttChart from './ganttChart/ganttChart';\n// import HeaderTooltips from './headerTooltips/headerTooltips';\n// import NestedHeaders from './nestedHeaders/nestedHeaders';\nimport NestedRows from './nestedRows/nestedRows';\n// HiddenColumns must be initialized after NestedHeaders. Bug releated with wrong listeners order attached to 'modifyColWidth' hook.\nimport HiddenColumns from './hiddenColumns/hiddenColumns';\nimport HiddenRows from './hiddenRows/hiddenRows';\nimport TrimRows from './trimRows/trimRows';\n\nexport {\n  BindRowsWithHeaders,\n  // CollapsibleColumns,\n  ColumnSummary,\n  DropdownMenu,\n  // ExportFile,\n  Filters,\n  Formulas,\n  GanttChart,\n  // HeaderTooltips,\n  HiddenColumns,\n  HiddenRows,\n  // NestedHeaders,\n  NestedRows,\n  TrimRows,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/index.js","// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)\n'use strict';\nvar toObject = require('./_to-object')\n  , toIndex  = require('./_to-index')\n  , toLength = require('./_to-length');\n\nmodule.exports = [].copyWithin || function copyWithin(target/*= 0*/, start/*= 0, end = @length*/){\n  var O     = toObject(this)\n    , len   = toLength(O.length)\n    , to    = toIndex(target, len)\n    , from  = toIndex(start, len)\n    , end   = arguments.length > 2 ? arguments[2] : undefined\n    , count = Math.min((end === undefined ? len : toIndex(end, len)) - from, len - to)\n    , inc   = 1;\n  if(from < to && to < from + count){\n    inc  = -1;\n    from += count - 1;\n    to   += count - 1;\n  }\n  while(count-- > 0){\n    if(from in O)O[to] = O[from];\n    else delete O[to];\n    to   += inc;\n    from += inc;\n  } return O;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_array-copy-within.js","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object')\n  , toIndex  = require('./_to-index')\n  , toLength = require('./_to-length');\nmodule.exports = function fill(value /*, start = 0, end = @length */){\n  var O      = toObject(this)\n    , length = toLength(O.length)\n    , aLen   = arguments.length\n    , index  = toIndex(aLen > 1 ? arguments[1] : undefined, length)\n    , end    = aLen > 2 ? arguments[2] : undefined\n    , endPos = end === undefined ? length : toIndex(end, length);\n  while(endPos > index)O[index++] = value;\n  return O;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_array-fill.js","var isObject = require('./_is-object')\n  , isArray  = require('./_is-array')\n  , SPECIES  = require('./_wks')('species');\n\nmodule.exports = function(original){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_array-species-constructor.js","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function(original, length){\n  return new (speciesConstructor(original))(length);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_array-species-create.js","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_enum-keys.js","'use strict';\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = require('./_an-object');\nmodule.exports = function(){\n  var that   = anObject(this)\n    , result = '';\n  if(that.global)     result += 'g';\n  if(that.ignoreCase) result += 'i';\n  if(that.multiline)  result += 'm';\n  if(that.unicode)    result += 'u';\n  if(that.sticky)     result += 'y';\n  return result;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_flags.js","var isObject       = require('./_is-object')\n  , setPrototypeOf = require('./_set-proto').set;\nmodule.exports = function(that, target, C){\n  var P, S = target.constructor;\n  if(S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf){\n    setPrototypeOf(that, P);\n  } return that;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_inherit-if-required.js","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_invoke.js","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_iter-create.js","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_keyof.js","var global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process';\n\nmodule.exports = function(){\n  var head, last, notify;\n\n  var flush = function(){\n    var parent, fn;\n    if(isNode && (parent = process.domain))parent.exit();\n    while(head){\n      fn   = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch(e){\n        if(head)notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if(parent)parent.enter();\n  };\n\n  // Node.js\n  if(isNode){\n    notify = function(){\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver\n  } else if(Observer){\n    var toggle = true\n      , node   = document.createTextNode('');\n    new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n    notify = function(){\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if(Promise && Promise.resolve){\n    var promise = Promise.resolve();\n    notify = function(){\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function(){\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function(fn){\n    var task = {fn: fn, next: undefined};\n    if(last)last.next = task;\n    if(!head){\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_microtask.js","var dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-dps.js","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-gopn-ext.js","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_object-gpo.js","// all object keys, includes non-enumerable and symbols\nvar gOPN     = require('./_object-gopn')\n  , gOPS     = require('./_object-gops')\n  , anObject = require('./_an-object')\n  , Reflect  = require('./_global').Reflect;\nmodule.exports = Reflect && Reflect.ownKeys || function ownKeys(it){\n  var keys       = gOPN.f(anObject(it))\n    , getSymbols = gOPS.f;\n  return getSymbols ? keys.concat(getSymbols(it)) : keys;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_own-keys.js","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_same-value.js","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_species-constructor.js","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_string-at.js","var global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};\n\n\n// WEBPACK FOOTER //\n// ./~/core-js/modules/_wks-define.js","/**\n * autoResize - resizes a DOM element to the width and height of another DOM element\n *\n * Copyright 2014, Marcin Warpechowski\n * Licensed under the MIT license\n */\n\n\nfunction autoResize() {\n  var defaults = {\n      minHeight: 200,\n      maxHeight: 300,\n      minWidth: 100,\n      maxWidth: 300\n    },\n    el,\n    body = document.body,\n    text = document.createTextNode(''),\n    span = document.createElement('SPAN'),\n    observe = function (element, event, handler) {\n      if (window.attachEvent) {\n        element.attachEvent('on' + event, handler);\n      } else {\n        element.addEventListener(event, handler, false);\n      }\n    },\n    unObserve = function (element, event, handler) {\n      if (window.removeEventListener) {\n        element.removeEventListener(event, handler, false);\n      } else {\n        element.detachEvent('on' + event, handler);\n      }\n    },\n    resize = function (newChar) {\n      var width, scrollHeight;\n\n      if (!newChar) {\n        newChar = \"\";\n      } else if (!/^[a-zA-Z \\.,\\\\\\/\\|0-9]$/.test(newChar)) {\n        newChar = \".\";\n      }\n\n      if (text.textContent !== void 0) {\n        text.textContent = el.value + newChar;\n      }\n      else {\n        text.data = el.value + newChar; //IE8\n      }\n      span.style.fontSize = getComputedStyle(el).fontSize;\n      span.style.fontFamily = getComputedStyle(el).fontFamily;\n      span.style.whiteSpace = \"pre\";\n\n      body.appendChild(span);\n      width = span.clientWidth + 2;\n      body.removeChild(span);\n\n      el.style.height = defaults.minHeight + 'px';\n\n      if (defaults.minWidth > width) {\n        el.style.width = defaults.minWidth + 'px';\n\n      } else if (width > defaults.maxWidth) {\n        el.style.width = defaults.maxWidth + 'px';\n\n      } else {\n        el.style.width = width + 'px';\n      }\n      scrollHeight = el.scrollHeight ? el.scrollHeight - 1 : 0;\n\n      if (defaults.minHeight > scrollHeight) {\n        el.style.height = defaults.minHeight + 'px';\n\n      } else if (defaults.maxHeight < scrollHeight) {\n        el.style.height = defaults.maxHeight + 'px';\n        el.style.overflowY = 'visible';\n\n      } else {\n        el.style.height = scrollHeight + 'px';\n      }\n    },\n    delayedResize = function () {\n      window.setTimeout(resize, 0);\n    },\n    extendDefaults = function (config) {\n\n      if (config && config.minHeight) {\n        if (config.minHeight == 'inherit') {\n          defaults.minHeight = el.clientHeight;\n        } else {\n          var minHeight = parseInt(config.minHeight);\n          if (!isNaN(minHeight)) {\n            defaults.minHeight = minHeight;\n          }\n        }\n      }\n\n      if (config && config.maxHeight) {\n        if (config.maxHeight == 'inherit') {\n          defaults.maxHeight = el.clientHeight;\n        } else {\n          var maxHeight = parseInt(config.maxHeight);\n          if (!isNaN(maxHeight)) {\n            defaults.maxHeight = maxHeight;\n          }\n        }\n      }\n\n      if (config && config.minWidth) {\n        if (config.minWidth == 'inherit') {\n          defaults.minWidth = el.clientWidth;\n        } else {\n          var minWidth = parseInt(config.minWidth);\n          if (!isNaN(minWidth)) {\n            defaults.minWidth = minWidth;\n          }\n        }\n      }\n\n      if (config && config.maxWidth) {\n        if (config.maxWidth == 'inherit') {\n          defaults.maxWidth = el.clientWidth;\n        } else {\n          var maxWidth = parseInt(config.maxWidth);\n          if (!isNaN(maxWidth)) {\n            defaults.maxWidth = maxWidth;\n          }\n        }\n      }\n\n      if(!span.firstChild) {\n        span.className = \"autoResize\";\n        span.style.display = 'inline-block';\n        span.appendChild(text);\n      }\n    },\n    init = function (el_, config, doObserve) {\n      el = el_;\n      extendDefaults(config);\n\n      if (el.nodeName == 'TEXTAREA') {\n\n        el.style.resize = 'none';\n        el.style.overflowY = '';\n        el.style.height = defaults.minHeight + 'px';\n        el.style.minWidth = defaults.minWidth + 'px';\n        el.style.maxWidth = defaults.maxWidth + 'px';\n        el.style.overflowY = 'hidden';\n      }\n\n      if(doObserve) {\n        observe(el, 'change', resize);\n        observe(el, 'cut', delayedResize);\n        observe(el, 'paste', delayedResize);\n        observe(el, 'drop', delayedResize);\n        observe(el, 'keydown', delayedResize);\n        observe(el, 'focus', resize);\n      }\n\n      resize();\n    };\n\n  function getComputedStyle(element) {\n    return element.currentStyle || document.defaultView.getComputedStyle(element);\n  }\n\n  return {\n    init: function (el_, config, doObserve) {\n      init(el_, config, doObserve);\n    },\n    unObserve: function () {\n      unObserve(el, 'change', resize);\n      unObserve(el, 'cut', delayedResize);\n      unObserve(el, 'paste', delayedResize);\n      unObserve(el, 'drop', delayedResize);\n      unObserve(el, 'keydown', delayedResize);\n      unObserve(el, 'focus', resize);\n    },\n    resize: resize\n  };\n}\n\nif (typeof exports !== 'undefined') {\n  module.exports = autoResize;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/lib/autoResize/autoResize.js","/**\n * Creates a textarea that stays hidden on the page and gets focused when user presses CTRL while not having a form\n * input focused.\n * In future we may implement a better driver when better APIs are available.\n *\n * @constructor\n * @private\n */\n\nvar instance;\n\nfunction copyPaste() {\n  if (!instance) {\n    instance = new CopyPasteClass();\n\n  } else if (instance.hasBeenDestroyed()){\n    instance.init();\n  }\n  instance.refCounter++;\n\n  return instance;\n}\n\nif (typeof exports !== 'undefined') {\n  module.exports = copyPaste;\n}\n\nfunction CopyPasteClass() {\n  this.refCounter = 0;\n  this.init();\n}\n\nCopyPasteClass.prototype.init = function () {\n  var\n    style,\n    parent;\n\n  this.copyCallbacks = [];\n  this.cutCallbacks = [];\n  this.pasteCallbacks = [];\n\n  // this.listenerElement = document.documentElement;\n  parent = document.body;\n\n  if (document.getElementById('CopyPasteDiv')) {\n    this.elDiv = document.getElementById('CopyPasteDiv');\n    this.elTextarea = this.elDiv.firstChild;\n\n  } else {\n    this.elDiv = document.createElement('div');\n    this.elDiv.id = 'CopyPasteDiv';\n    style = this.elDiv.style;\n    style.position = 'fixed';\n    style.top = '-10000px';\n    style.left = '-10000px';\n    parent.appendChild(this.elDiv);\n\n    this.elTextarea = document.createElement('textarea');\n    this.elTextarea.className = 'copyPaste';\n    this.elTextarea.onpaste = function(event) {\n      var clipboardContents,\n        temp;\n\n      if ('WebkitAppearance' in document.documentElement.style) { // chrome and safari\n        clipboardContents = event.clipboardData.getData(\"Text\");\n\n        // Safari adds an additional newline to copied text\n        if (navigator.userAgent.indexOf('Safari') !== -1 && navigator.userAgent.indexOf('Chrome') === -1) {\n          temp = clipboardContents.split('\\n');\n\n          if (temp[temp.length - 1] === '') {\n            temp.pop();\n          }\n          clipboardContents = temp.join('\\n');\n        }\n        this.value = clipboardContents;\n\n        event.preventDefault();\n      }\n    };\n    style = this.elTextarea.style;\n    style.width = '10000px';\n    style.height = '10000px';\n    style.overflow = 'hidden';\n    this.elDiv.appendChild(this.elTextarea);\n\n    if (typeof style.opacity !== 'undefined') {\n      style.opacity = 0;\n    }\n  }\n  this.onKeyDownRef = this.onKeyDown.bind(this);\n  document.documentElement.addEventListener('keydown', this.onKeyDownRef, false);\n};\n\n/**\n * Call method on every key down event\n *\n * @param {Event} event\n */\nCopyPasteClass.prototype.onKeyDown = function(event) {\n  var _this = this,\n    isCtrlDown = false;\n\n  function isActiveElementEditable() {\n    var element = document.activeElement;\n\n    if (element.shadowRoot && element.shadowRoot.activeElement) {\n      element = element.shadowRoot.activeElement;\n    }\n\n    return ['INPUT', 'SELECT', 'TEXTAREA'].indexOf(element.nodeName) > -1 || element.contentEditable === 'true';\n  }\n\n  // mac\n  if (event.metaKey) {\n    isCtrlDown = true;\n  }\n  // pc\n  else if (event.ctrlKey && navigator.userAgent.indexOf('Mac') === -1) {\n    isCtrlDown = true;\n  }\n  if (isCtrlDown) {\n    // this is needed by fragmentSelection in Handsontable. Ignore copypaste.js behavior if fragment of cell text is selected\n    if (document.activeElement !== this.elTextarea && (this.getSelectionText() !== '' || isActiveElementEditable())) {\n      return;\n    }\n    this.selectNodeText(this.elTextarea);\n    setTimeout(function() {\n      if (document.activeElement !== _this.elTextarea) {\n        _this.selectNodeText(_this.elTextarea);\n      }\n    }, 0);\n  }\n\n  if (event.isImmediatePropagationEnabled !== false && isCtrlDown &&\n      (event.keyCode === 67 ||\n      event.keyCode === 86 ||\n      event.keyCode === 88)) {\n    // works in all browsers, incl. Opera < 12.12\n    if (event.keyCode === 88) {\n      setTimeout(function () {\n        _this.triggerCut(event);\n      }, 0);\n\n    } else if (event.keyCode === 86) {\n      setTimeout(function () {\n        _this.triggerPaste(event);\n      }, 0);\n    }\n  }\n};\n\n//http://jsperf.com/textara-selection\n//http://stackoverflow.com/questions/1502385/how-can-i-make-this-code-work-in-ie\n/**\n * Select all text contains in passed node element\n *\n * @param {Element} element\n */\nCopyPasteClass.prototype.selectNodeText = function(element) {\n  if (element) {\n    element.select();\n  }\n};\n\n//http://stackoverflow.com/questions/5379120/get-the-highlighted-selected-text\n/**\n * Get selection text\n *\n * @returns {String}\n */\nCopyPasteClass.prototype.getSelectionText = function() {\n  var text = '';\n\n  if (window.getSelection) {\n    text = window.getSelection().toString();\n\n  } else if (document.selection && document.selection.type !== 'Control') {\n    text = document.selection.createRange().text;\n  }\n\n  return text;\n};\n\n/**\n * Make string copyable\n *\n * @param {String} string\n */\nCopyPasteClass.prototype.copyable = function(string) {\n  if (typeof string !== 'string' && string.toString === void 0) {\n    throw new Error('copyable requires string parameter');\n  }\n  this.elTextarea.value = string;\n  this.selectNodeText(this.elTextarea);\n};\n\n/*CopyPasteClass.prototype.onCopy = function (fn) {\n  this.copyCallbacks.push(fn);\n};*/\n\n/**\n * Add function callback to onCut event\n *\n * @param {Function} callback\n */\nCopyPasteClass.prototype.onCut = function(callback) {\n  this.cutCallbacks.push(callback);\n};\n\n/**\n * Add function callback to onPaste event\n *\n * @param {Function} callback\n */\nCopyPasteClass.prototype.onPaste = function(callback) {\n  this.pasteCallbacks.push(callback);\n};\n\n/**\n * Remove callback from all events\n *\n * @param {Function} callback\n * @returns {Boolean}\n */\nCopyPasteClass.prototype.removeCallback = function(callback) {\n  var i, len;\n\n  for (i = 0, len = this.copyCallbacks.length; i < len; i++) {\n    if (this.copyCallbacks[i] === callback) {\n      this.copyCallbacks.splice(i, 1);\n\n      return true;\n    }\n  }\n  for (i = 0, len = this.cutCallbacks.length; i < len; i++) {\n    if (this.cutCallbacks[i] === callback) {\n      this.cutCallbacks.splice(i, 1);\n\n      return true;\n    }\n  }\n  for (i = 0, len = this.pasteCallbacks.length; i < len; i++) {\n    if (this.pasteCallbacks[i] === callback) {\n      this.pasteCallbacks.splice(i, 1);\n\n      return true;\n    }\n  }\n\n  return false;\n};\n\n/**\n * Trigger cut event\n *\n * @param {DOMEvent} event\n */\nCopyPasteClass.prototype.triggerCut = function(event) {\n  var _this = this;\n\n  if (_this.cutCallbacks) {\n    setTimeout(function () {\n      for (var i = 0, len = _this.cutCallbacks.length; i < len; i++) {\n        _this.cutCallbacks[i](event);\n      }\n    }, 50);\n  }\n};\n\n/**\n * Trigger paste event\n *\n * @param {DOMEvent} event\n * @param {String} string\n */\nCopyPasteClass.prototype.triggerPaste = function(event, string) {\n  var _this = this;\n\n  if (_this.pasteCallbacks) {\n    setTimeout(function () {\n      var val = string || _this.elTextarea.value;\n\n      for (var i = 0, len = _this.pasteCallbacks.length; i < len; i++) {\n        _this.pasteCallbacks[i](val, event);\n      }\n    }, 50);\n  }\n};\n\n/**\n * Destroy instance\n */\nCopyPasteClass.prototype.destroy = function() {\n  if (!this.hasBeenDestroyed() && --this.refCounter === 0) {\n    if (this.elDiv && this.elDiv.parentNode) {\n      this.elDiv.parentNode.removeChild(this.elDiv);\n      this.elDiv = null;\n      this.elTextarea = null;\n    }\n    document.documentElement.removeEventListener('keydown', this.onKeyDownRef);\n    this.onKeyDownRef = null;\n  }\n};\n\n/**\n * Check if instance has been destroyed\n *\n * @returns {Boolean}\n */\nCopyPasteClass.prototype.hasBeenDestroyed = function() {\n  return !this.refCounter;\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/lib/copyPaste/copyPaste.js","import {addClass} from './../../../../helpers/dom/element';\nimport Overlay from './_base';\n\n/**\n * A overlay that renders ALL available rows & columns positioned on top of the original Walkontable instance and all other overlays.\n * Used for debugging purposes to see if the other overlays (that render only part of the rows & columns) are positioned correctly\n *\n * @class DebugOverlay\n */\nclass DebugOverlay extends Overlay {\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    super(wotInstance);\n\n    this.clone = this.makeClone(Overlay.CLONE_DEBUG);\n    this.clone.wtTable.holder.style.opacity = 0.4;\n    this.clone.wtTable.holder.style.textShadow = '0 0 2px #ff0000';\n\n    addClass(this.clone.wtTable.holder.parentNode, 'wtDebugVisible');\n  }\n}\n\nOverlay.registerOverlay(Overlay.CLONE_DEBUG, DebugOverlay);\n\nexport default DebugOverlay;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/overlay/debug.js","import {\n  addClass,\n  getScrollbarWidth,\n  getScrollbarWidth2,\n  getScrollLeft,\n  getWindowScrollTop,\n  hasClass,\n  outerWidth,\n  innerHeight,\n  removeClass,\n  setOverlayPosition,\n  resetCssTransform\n} from './../../../../helpers/dom/element';\nimport Overlay from './_base';\n\n/**\n * @class LeftOverlay\n */\nclass LeftOverlay extends Overlay {\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    super(wotInstance);\n    this.clone = this.makeClone(Overlay.CLONE_LEFT);\n  }\n\n  /**\n   * Checks if overlay should be fully rendered\n   *\n   * @returns {Boolean}\n   */\n  shouldBeRendered() {\n    return !!(this.wot.getSetting('fixedColumnsLeft') || this.wot.getSetting('rowHeaders').length);\n  }\n\n  /**\n   * Updates the left overlay position\n   */\n  resetFixedPosition() {\n    if (!this.needFullRender || !this.wot.wtTable.holder.parentNode) {\n      // removed from DOM\n      return;\n    }\n    let overlayRoot = this.clone.wtTable.holder.parentNode;\n    let headerPosition = 0;\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n\n    if (this.trimmingContainer === window && (!preventOverflow || preventOverflow !== 'horizontal')) {\n      let box = this.wot.wtTable.hider.getBoundingClientRect();\n      let left = Math.ceil(box.left);\n      let right = Math.ceil(box.right);\n      let finalLeft;\n      let finalTop;\n\n      finalTop = this.wot.wtTable.hider.style.top;\n      finalTop = finalTop === '' ? 0 : finalTop;\n\n      if (left < 0 && (right - overlayRoot.offsetWidth) > 0) {\n        finalLeft = -left;\n      } else {\n        finalLeft = 0;\n      }\n      headerPosition = finalLeft;\n      finalLeft += 'px';\n\n      setOverlayPosition(overlayRoot, finalLeft, finalTop);\n\n    } else {\n      headerPosition = this.getScrollPosition();\n      resetCssTransform(overlayRoot);\n    }\n    this.adjustHeaderBordersPosition(headerPosition);\n\n    this.adjustElementsSize();\n  }\n\n  /**\n   * Sets the main overlay's horizontal scroll position\n   *\n   * @param {Number} pos\n   */\n  setScrollPosition(pos) {\n    if (this.mainTableScrollableElement === window) {\n      window.scrollTo(pos, getWindowScrollTop());\n\n    } else {\n      this.mainTableScrollableElement.scrollLeft = pos;\n    }\n  }\n\n  /**\n   * Triggers onScroll hook callback\n   */\n  onScroll() {\n    this.wot.getSetting('onScrollVertically');\n  }\n\n  /**\n   * Calculates total sum cells width\n   *\n   * @param {Number} from Column index which calculates started from\n   * @param {Number} to Column index where calculation is finished\n   * @returns {Number} Width sum\n   */\n  sumCellSizes(from, to) {\n    let sum = 0;\n    let defaultColumnWidth = this.wot.wtSettings.defaultColumnWidth;\n\n    while (from < to) {\n      sum += this.wot.wtTable.getStretchedColumnWidth(from) || defaultColumnWidth;\n      from++;\n    }\n\n    return sum;\n  }\n\n  /**\n   * Adjust overlay root element, childs and master table element sizes (width, height).\n   *\n   * @param {Boolean} [force=false]\n   */\n  adjustElementsSize(force = false) {\n    this.updateTrimmingContainer();\n\n    if (this.needFullRender || force) {\n      this.adjustRootElementSize();\n      this.adjustRootChildrenSize();\n\n      if (!force) {\n        this.areElementSizesAdjusted = true;\n      }\n    }\n  }\n\n  /**\n   * Adjust overlay root element size (width and height).\n   */\n  adjustRootElementSize() {\n    let masterHolder = this.wot.wtTable.holder;\n    let scrollbarHeight = masterHolder.clientHeight === masterHolder.offsetHeight ? 0 : getScrollbarWidth();\n    let overlayRoot = this.clone.wtTable.holder.parentNode;\n    let overlayRootStyle = overlayRoot.style;\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n    let tableWidth;\n\n    if (masterHolder.clientHeight != masterHolder.offsetHeight && scrollbarHeight == 0) {\n      scrollbarHeight = getScrollbarWidth2();\n    }\n    if (this.trimmingContainer !== window || preventOverflow === 'vertical') {\n      let height = this.wot.wtViewport.getWorkspaceHeight() - scrollbarHeight;\n\n      height = Math.min(height, innerHeight(this.wot.wtTable.wtRootElement));\n\n      overlayRootStyle.height = `${height}px`;\n\n    } else {\n      overlayRootStyle.height = '';\n    }\n\n    this.clone.wtTable.holder.style.height = overlayRootStyle.height;\n\n    tableWidth = outerWidth(this.clone.wtTable.TABLE);\n    overlayRootStyle.width = `${tableWidth === 0 ? tableWidth : tableWidth + 4}px`;\n  }\n\n  /**\n   * Adjust overlay root childs size\n   */\n  adjustRootChildrenSize() {\n    let scrollbarWidth = getScrollbarWidth();\n\n    this.clone.wtTable.hider.style.height = this.hider.style.height;\n    this.clone.wtTable.holder.style.height = this.clone.wtTable.holder.parentNode.style.height;\n\n    if (scrollbarWidth === 0) {\n      scrollbarWidth = 30;\n    }\n    this.clone.wtTable.holder.style.width = `${parseInt(this.clone.wtTable.holder.parentNode.style.width, 10) + scrollbarWidth}px`;\n  }\n\n  /**\n   * Adjust the overlay dimensions and position\n   */\n  applyToDOM() {\n    let total = this.wot.getSetting('totalColumns');\n\n    if (!this.areElementSizesAdjusted) {\n      this.adjustElementsSize();\n    }\n    if (typeof this.wot.wtViewport.columnsRenderCalculator.startPosition === 'number') {\n      this.spreader.style.left = `${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`;\n\n    } else if (total === 0) {\n      this.spreader.style.left = '0';\n\n    } else {\n      throw new Error('Incorrect value of the columnsRenderCalculator');\n    }\n    this.spreader.style.right = '';\n\n    if (this.needFullRender) {\n      this.syncOverlayOffset();\n    }\n  }\n\n  /**\n   * Synchronize calculated top position to an element\n   */\n  syncOverlayOffset() {\n    if (typeof this.wot.wtViewport.rowsRenderCalculator.startPosition === 'number') {\n      this.clone.wtTable.spreader.style.top = `${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;\n\n    } else {\n      this.clone.wtTable.spreader.style.top = '';\n    }\n  }\n\n  /**\n   * Scrolls horizontally to a column at the left edge of the viewport\n   *\n   * @param sourceCol {Number} Column index which you want to scroll to\n   * @param [beyondRendered=false] {Boolean} if `true`, scrolls according to the bottom edge (top edge is by default)\n   */\n  scrollTo(sourceCol, beyondRendered) {\n    let newX = this.getTableParentOffset();\n    let sourceInstance = this.wot.cloneSource ? this.wot.cloneSource : this.wot;\n    let mainHolder = sourceInstance.wtTable.holder;\n    let scrollbarCompensation = 0;\n\n    if (beyondRendered && mainHolder.offsetWidth !== mainHolder.clientWidth) {\n      scrollbarCompensation = getScrollbarWidth();\n    }\n    if (beyondRendered) {\n      newX += this.sumCellSizes(0, sourceCol + 1);\n      newX -= this.wot.wtViewport.getViewportWidth();\n\n    } else {\n      newX += this.sumCellSizes(this.wot.getSetting('fixedColumnsLeft'), sourceCol);\n    }\n    newX += scrollbarCompensation;\n\n    this.setScrollPosition(newX);\n  }\n\n  /**\n   * Gets table parent left position\n   *\n   * @returns {Number}\n   */\n  getTableParentOffset() {\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n    let offset = 0;\n\n    if (!preventOverflow && this.trimmingContainer === window) {\n      offset = this.wot.wtTable.holderOffset.left;\n    }\n\n    return offset;\n  }\n\n  /**\n   * Gets the main overlay's horizontal scroll position\n   *\n   * @returns {Number} Main table's vertical scroll position\n   */\n  getScrollPosition() {\n    return getScrollLeft(this.mainTableScrollableElement);\n  }\n\n  /**\n   * Adds css classes to hide the header border's header (cell-selection border hiding issue)\n   *\n   * @param {Number} position Header X position if trimming container is window or scroll top if not\n   */\n  adjustHeaderBordersPosition(position) {\n    const masterParent = this.wot.wtTable.holder.parentNode;\n    const rowHeaders = this.wot.getSetting('rowHeaders');\n    const fixedColumnsLeft = this.wot.getSetting('fixedColumnsLeft');\n    const totalRows = this.wot.getSetting('totalRows');\n\n    if (totalRows) {\n      removeClass(masterParent, 'emptyRows');\n    } else {\n      addClass(masterParent, 'emptyRows');\n    }\n\n    if (fixedColumnsLeft && !rowHeaders.length) {\n      addClass(masterParent, 'innerBorderLeft');\n\n    } else if (!fixedColumnsLeft && rowHeaders.length) {\n      let previousState = hasClass(masterParent, 'innerBorderLeft');\n\n      if (position) {\n        addClass(masterParent, 'innerBorderLeft');\n      } else {\n        removeClass(masterParent, 'innerBorderLeft');\n      }\n      if (!previousState && position || previousState && !position) {\n        this.wot.wtOverlays.adjustElementsSize();\n      }\n    }\n  }\n}\n\nOverlay.registerOverlay(Overlay.CLONE_LEFT, LeftOverlay);\n\nexport default LeftOverlay;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/overlay/left.js","import {\n  addClass,\n  getScrollbarWidth,\n  getScrollbarWidth2,\n  getScrollTop,\n  getWindowScrollLeft,\n  hasClass,\n  outerHeight,\n  innerWidth,\n  removeClass,\n  setOverlayPosition,\n  resetCssTransform\n} from './../../../../helpers/dom/element';\nimport Overlay from './_base';\n\n/**\n * @class TopOverlay\n */\nclass TopOverlay extends Overlay {\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    super(wotInstance);\n    this.clone = this.makeClone(Overlay.CLONE_TOP);\n  }\n\n  /**\n   * Checks if overlay should be fully rendered\n   *\n   * @returns {Boolean}\n   */\n  shouldBeRendered() {\n    return !!(this.wot.getSetting('fixedRowsTop') || this.wot.getSetting('columnHeaders').length);\n  }\n\n  /**\n   * Updates the top overlay position\n   */\n  resetFixedPosition() {\n    if (!this.needFullRender || !this.wot.wtTable.holder.parentNode) {\n      // removed from DOM\n      return;\n    }\n    let overlayRoot = this.clone.wtTable.holder.parentNode;\n    let headerPosition = 0;\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n\n    if (this.trimmingContainer === window && (!preventOverflow || preventOverflow !== 'vertical')) {\n      let box = this.wot.wtTable.hider.getBoundingClientRect();\n      let top = Math.ceil(box.top);\n      let bottom = Math.ceil(box.bottom);\n      let finalLeft;\n      let finalTop;\n\n      finalLeft = this.wot.wtTable.hider.style.left;\n      finalLeft = finalLeft === '' ? 0 : finalLeft;\n\n      if (top < 0 && (bottom - overlayRoot.offsetHeight) > 0) {\n        finalTop = -top;\n      } else {\n        finalTop = 0;\n      }\n      headerPosition = finalTop;\n      finalTop += 'px';\n\n      setOverlayPosition(overlayRoot, finalLeft, finalTop);\n\n    } else {\n      headerPosition = this.getScrollPosition();\n      resetCssTransform(overlayRoot);\n    }\n\n    this.adjustHeaderBordersPosition(headerPosition);\n\n    this.adjustElementsSize();\n  }\n\n  /**\n   * Sets the main overlay's vertical scroll position\n   *\n   * @param {Number} pos\n   */\n  setScrollPosition(pos) {\n    if (this.mainTableScrollableElement === window) {\n      window.scrollTo(getWindowScrollLeft(), pos);\n\n    } else {\n      this.mainTableScrollableElement.scrollTop = pos;\n    }\n  }\n\n  /**\n   * Triggers onScroll hook callback\n   */\n  onScroll() {\n    this.wot.getSetting('onScrollHorizontally');\n  }\n\n  /**\n   * Calculates total sum cells height\n   *\n   * @param {Number} from Row index which calculates started from\n   * @param {Number} to Row index where calculation is finished\n   * @returns {Number} Height sum\n   */\n  sumCellSizes(from, to) {\n    let sum = 0;\n    let defaultRowHeight = this.wot.wtSettings.settings.defaultRowHeight;\n\n    while (from < to) {\n      let height = this.wot.wtTable.getRowHeight(from);\n\n      sum += height === void 0 ? defaultRowHeight : height;\n      from++;\n    }\n\n    return sum;\n  }\n\n  /**\n   * Adjust overlay root element, childs and master table element sizes (width, height).\n   *\n   * @param {Boolean} [force=false]\n   */\n  adjustElementsSize(force = false) {\n    this.updateTrimmingContainer();\n\n    if (this.needFullRender || force) {\n      this.adjustRootElementSize();\n      this.adjustRootChildrenSize();\n\n      if (!force) {\n        this.areElementSizesAdjusted = true;\n      }\n    }\n  }\n\n  /**\n   * Adjust overlay root element size (width and height).\n   */\n  adjustRootElementSize() {\n    let masterHolder = this.wot.wtTable.holder;\n    let scrollbarWidth = masterHolder.clientWidth === masterHolder.offsetWidth ? 0 : getScrollbarWidth();\n    let overlayRoot = this.clone.wtTable.holder.parentNode;\n    let overlayRootStyle = overlayRoot.style;\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n    let tableHeight;\n\n    if (masterHolder.clientWidth != masterHolder.offsetWidth && scrollbarWidth == 0) {\n      scrollbarWidth = getScrollbarWidth2();\n    }\n    if (this.trimmingContainer !== window || preventOverflow === 'horizontal') {\n      let width = this.wot.wtViewport.getWorkspaceWidth() - scrollbarWidth;\n\n      width = Math.min(width, innerWidth(this.wot.wtTable.wtRootElement));\n\n      overlayRootStyle.width = `${width}px`;\n\n    } else {\n      overlayRootStyle.width = '';\n    }\n\n    this.clone.wtTable.holder.style.width = overlayRootStyle.width;\n\n    tableHeight = outerHeight(this.clone.wtTable.TABLE);\n    overlayRootStyle.height = `${tableHeight === 0 ? tableHeight : tableHeight + 4}px`;\n  }\n\n  /**\n   * Adjust overlay root childs size\n   */\n  adjustRootChildrenSize() {\n    let scrollbarWidth = getScrollbarWidth();\n    if (this.wot.wtTable.holder.clientWidth != this.wot.wtTable.holder.offsetWidth && scrollbarWidth == 0) {\n      scrollbarWidth = getScrollbarWidth2();\n    }\n\n    this.clone.wtTable.hider.style.width = this.hider.style.width;\n    this.clone.wtTable.holder.style.width = this.clone.wtTable.holder.parentNode.style.width;\n\n    if (scrollbarWidth === 0) {\n      scrollbarWidth = 30;\n    }\n    this.clone.wtTable.holder.style.height = `${parseInt(this.clone.wtTable.holder.parentNode.style.height, 10) + scrollbarWidth}px`;\n  }\n\n  /**\n   * Adjust the overlay dimensions and position\n   */\n  applyToDOM() {\n    let total = this.wot.getSetting('totalRows');\n\n    if (!this.areElementSizesAdjusted) {\n      this.adjustElementsSize();\n    }\n    if (typeof this.wot.wtViewport.rowsRenderCalculator.startPosition === 'number') {\n      this.spreader.style.top = `${this.wot.wtViewport.rowsRenderCalculator.startPosition}px`;\n\n    } else if (total === 0) {\n      // can happen if there are 0 rows\n      this.spreader.style.top = '0';\n\n    } else {\n      throw new Error('Incorrect value of the rowsRenderCalculator');\n    }\n    this.spreader.style.bottom = '';\n\n    if (this.needFullRender) {\n      this.syncOverlayOffset();\n    }\n  }\n\n  /**\n   * Synchronize calculated left position to an element\n   */\n  syncOverlayOffset() {\n    if (typeof this.wot.wtViewport.columnsRenderCalculator.startPosition === 'number') {\n      this.clone.wtTable.spreader.style.left = `${this.wot.wtViewport.columnsRenderCalculator.startPosition}px`;\n\n    } else {\n      this.clone.wtTable.spreader.style.left = '';\n    }\n  }\n\n  /**\n   * Scrolls vertically to a row\n   *\n   * @param sourceRow {Number} Row index which you want to scroll to\n   * @param [bottomEdge=false] {Boolean} if `true`, scrolls according to the bottom edge (top edge is by default)\n   */\n  scrollTo(sourceRow, bottomEdge) {\n    let newY = this.getTableParentOffset();\n    let sourceInstance = this.wot.cloneSource ? this.wot.cloneSource : this.wot;\n    let mainHolder = sourceInstance.wtTable.holder;\n    let scrollbarCompensation = 0;\n\n    if (bottomEdge && mainHolder.offsetHeight !== mainHolder.clientHeight) {\n      scrollbarCompensation = getScrollbarWidth();\n    }\n\n    if (bottomEdge) {\n      let fixedRowsBottom = this.wot.getSetting('fixedRowsBottom');\n      let fixedRowsTop = this.wot.getSetting('fixedRowsTop');\n      let totalRows = this.wot.getSetting('totalRows');\n\n      newY += this.sumCellSizes(0, sourceRow + 1);\n      newY -= this.wot.wtViewport.getViewportHeight() - this.sumCellSizes(totalRows - fixedRowsBottom, totalRows);\n      // Fix 1 pixel offset when cell is selected\n      newY += 1;\n\n    } else {\n      newY += this.sumCellSizes(this.wot.getSetting('fixedRowsTop'), sourceRow);\n    }\n    newY += scrollbarCompensation;\n\n    this.setScrollPosition(newY);\n  }\n\n  /**\n   * Gets table parent top position\n   *\n   * @returns {Number}\n   */\n  getTableParentOffset() {\n    if (this.mainTableScrollableElement === window) {\n      return this.wot.wtTable.holderOffset.top;\n\n    }\n    return 0;\n\n  }\n\n  /**\n   * Gets the main overlay's vertical scroll position\n   *\n   * @returns {Number} Main table's vertical scroll position\n   */\n  getScrollPosition() {\n    return getScrollTop(this.mainTableScrollableElement);\n  }\n\n  /**\n   * Redraw borders of selection\n   *\n   * @param {WalkontableSelection} selection Selection for redraw\n   */\n  redrawSelectionBorders(selection) {\n    if (selection && selection.cellRange) {\n      const border = selection.getBorder(this.wot);\n\n      if (border) {\n        const corners = selection.getCorners();\n        border.disappear();\n        border.appear(corners);\n      }\n    }\n  }\n\n  /**\n   * Redrawing borders of all selections\n   */\n  redrawAllSelectionsBorders() {\n    const selections = this.wot.selections;\n\n    this.redrawSelectionBorders(selections.current);\n    this.redrawSelectionBorders(selections.area);\n    this.redrawSelectionBorders(selections.fill);\n    this.wot.wtTable.wot.wtOverlays.leftOverlay.refresh();\n  }\n\n  /**\n   * Adds css classes to hide the header border's header (cell-selection border hiding issue)\n   *\n   * @param {Number} position Header Y position if trimming container is window or scroll top if not\n   */\n  adjustHeaderBordersPosition(position) {\n    const masterParent = this.wot.wtTable.holder.parentNode;\n    const totalColumns = this.wot.getSetting('totalColumns');\n\n    if (totalColumns) {\n      removeClass(masterParent, 'emptyColumns');\n    } else {\n      addClass(masterParent, 'emptyColumns');\n    }\n\n    if (this.wot.getSetting('fixedRowsTop') === 0 && this.wot.getSetting('columnHeaders').length > 0) {\n      let previousState = hasClass(masterParent, 'innerBorderTop');\n\n      if (position || this.wot.getSetting('totalRows') === 0) {\n        addClass(masterParent, 'innerBorderTop');\n      } else {\n        removeClass(masterParent, 'innerBorderTop');\n      }\n\n      if (!previousState && position || previousState && !position) {\n        this.wot.wtOverlays.adjustElementsSize();\n\n        // cell borders should be positioned once again,\n        // because we added / removed 1px border from table header\n        this.redrawAllSelectionsBorders();\n      }\n    }\n\n    // nasty workaround for double border in the header, TODO: find a pure-css solution\n    if (this.wot.getSetting('rowHeaders').length === 0) {\n      let secondHeaderCell = this.clone.wtTable.THEAD.querySelectorAll('th:nth-of-type(2)');\n\n      if (secondHeaderCell) {\n        for (let i = 0; i < secondHeaderCell.length; i++) {\n          secondHeaderCell[i].style['border-left-width'] = 0;\n        }\n      }\n    }\n  }\n}\n\nOverlay.registerOverlay(Overlay.CLONE_TOP, TopOverlay);\n\nexport default TopOverlay;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/overlay/top.js","\nimport {\n  outerHeight,\n  outerWidth,\n  setOverlayPosition,\n  resetCssTransform\n} from './../../../../helpers/dom/element';\nimport Overlay from './_base';\n\n/**\n * @class TopLeftCornerOverlay\n */\nclass TopLeftCornerOverlay extends Overlay {\n  /**\n   * @param {Walkontable} wotInstance\n   */\n  constructor(wotInstance) {\n    super(wotInstance);\n    this.clone = this.makeClone(Overlay.CLONE_TOP_LEFT_CORNER);\n  }\n\n  /**\n   * Checks if overlay should be fully rendered\n   *\n   * @returns {Boolean}\n   */\n  shouldBeRendered() {\n    return !!((this.wot.getSetting('fixedRowsTop') || this.wot.getSetting('columnHeaders').length) &&\n        (this.wot.getSetting('fixedColumnsLeft') || this.wot.getSetting('rowHeaders').length));\n  }\n\n  /**\n   * Updates the corner overlay position\n   */\n  resetFixedPosition() {\n    this.updateTrimmingContainer();\n\n    if (!this.wot.wtTable.holder.parentNode) {\n      // removed from DOM\n      return;\n    }\n    let overlayRoot = this.clone.wtTable.holder.parentNode;\n    let tableHeight = outerHeight(this.clone.wtTable.TABLE);\n    let tableWidth = outerWidth(this.clone.wtTable.TABLE);\n    let preventOverflow = this.wot.getSetting('preventOverflow');\n\n    if (this.trimmingContainer === window) {\n      let box = this.wot.wtTable.hider.getBoundingClientRect();\n      let top = Math.ceil(box.top);\n      let left = Math.ceil(box.left);\n      let bottom = Math.ceil(box.bottom);\n      let right = Math.ceil(box.right);\n      let finalLeft = '0';\n      let finalTop = '0';\n\n      if (!preventOverflow || preventOverflow === 'vertical') {\n        if (left < 0 && (right - overlayRoot.offsetWidth) > 0) {\n          finalLeft = `${-left}px`;\n        }\n      }\n\n      if (!preventOverflow || preventOverflow === 'horizontal') {\n        if (top < 0 && (bottom - overlayRoot.offsetHeight) > 0) {\n          finalTop = `${-top}px`;\n        }\n      }\n      setOverlayPosition(overlayRoot, finalLeft, finalTop);\n    } else {\n      resetCssTransform(overlayRoot);\n    }\n    overlayRoot.style.height = `${tableHeight === 0 ? tableHeight : tableHeight + 4}px`;\n    overlayRoot.style.width = `${tableWidth === 0 ? tableWidth : tableWidth + 4}px`;\n  }\n}\n\nOverlay.registerOverlay(Overlay.CLONE_TOP_LEFT_CORNER, TopLeftCornerOverlay);\n\nexport default TopLeftCornerOverlay;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/overlay/topLeftCorner.js","import {addClass} from './../../../helpers/dom/element';\nimport Border from './border';\nimport CellCoords from './cell/coords';\nimport CellRange from './cell/range';\n\n/**\n * @class Selection\n */\nclass Selection {\n  /**\n   * @param {Object} settings\n   * @param {CellRange} cellRange\n   */\n  constructor(settings, cellRange) {\n    this.settings = settings;\n    this.cellRange = cellRange || null;\n    this.instanceBorders = {};\n  }\n\n  /**\n   * Each Walkontable clone requires it's own border for every selection. This method creates and returns selection\n   * borders per instance\n   *\n   * @param {Walkontable} wotInstance\n   * @returns {Border}\n   */\n  getBorder(wotInstance) {\n    if (this.instanceBorders[wotInstance.guid]) {\n      return this.instanceBorders[wotInstance.guid];\n    }\n\n    // where is this returned?\n    this.instanceBorders[wotInstance.guid] = new Border(wotInstance, this.settings);\n  }\n\n  /**\n   * Checks if selection is empty\n   *\n   * @returns {Boolean}\n   */\n  isEmpty() {\n    return this.cellRange === null;\n  }\n\n  /**\n   * Adds a cell coords to the selection\n   *\n   * @param {CellCoords} coords\n   */\n  add(coords) {\n    if (this.isEmpty()) {\n      this.cellRange = new CellRange(coords, coords, coords);\n\n    } else {\n      this.cellRange.expand(coords);\n    }\n  }\n\n  /**\n   * If selection range from or to property equals oldCoords, replace it with newCoords. Return boolean\n   * information about success\n   *\n   * @param {CellCoords} oldCoords\n   * @param {CellCoords} newCoords\n   * @returns {Boolean}\n   */\n  replace(oldCoords, newCoords) {\n    if (!this.isEmpty()) {\n      if (this.cellRange.from.isEqual(oldCoords)) {\n        this.cellRange.from = newCoords;\n\n        return true;\n      }\n      if (this.cellRange.to.isEqual(oldCoords)) {\n        this.cellRange.to = newCoords;\n\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Clears selection\n   */\n  clear() {\n    this.cellRange = null;\n  }\n\n  /**\n   * Returns the top left (TL) and bottom right (BR) selection coordinates\n   *\n   * @returns {Array} Returns array of coordinates for example `[1, 1, 5, 5]`\n   */\n  getCorners() {\n    let topLeft = this.cellRange.getTopLeftCorner();\n    let bottomRight = this.cellRange.getBottomRightCorner();\n\n    return [\n      topLeft.row,\n      topLeft.col,\n      bottomRight.row,\n      bottomRight.col,\n    ];\n  }\n\n  /**\n   * Adds class name to cell element at given coords\n   *\n   * @param {Walkontable} wotInstance Walkontable instance\n   * @param {Number} sourceRow Cell row coord\n   * @param {Number} sourceColumn Cell column coord\n   * @param {String} className Class name\n   */\n  addClassAtCoords(wotInstance, sourceRow, sourceColumn, className) {\n    let TD = wotInstance.wtTable.getCell(new CellCoords(sourceRow, sourceColumn));\n\n    if (typeof TD === 'object') {\n      addClass(TD, className);\n    }\n  }\n\n  /**\n   * @param wotInstance\n   */\n  draw(wotInstance) {\n    if (this.isEmpty()) {\n      if (this.settings.border) {\n        let border = this.getBorder(wotInstance);\n\n        if (border) {\n          border.disappear();\n        }\n      }\n\n      return;\n    }\n    let renderedRows = wotInstance.wtTable.getRenderedRowsCount();\n    let renderedColumns = wotInstance.wtTable.getRenderedColumnsCount();\n    let corners = this.getCorners();\n    let sourceRow,\n      sourceCol,\n      TH;\n\n    for (let column = 0; column < renderedColumns; column++) {\n      sourceCol = wotInstance.wtTable.columnFilter.renderedToSource(column);\n\n      if (sourceCol >= corners[1] && sourceCol <= corners[3]) {\n        TH = wotInstance.wtTable.getColumnHeader(sourceCol);\n\n        if (TH) {\n          let newClasses = [];\n\n          if (this.settings.highlightHeaderClassName) {\n            newClasses.push(this.settings.highlightHeaderClassName);\n          }\n\n          if (this.settings.highlightColumnClassName) {\n            newClasses.push(this.settings.highlightColumnClassName);\n          }\n\n          addClass(TH, newClasses);\n        }\n      }\n    }\n\n    for (let row = 0; row < renderedRows; row++) {\n      sourceRow = wotInstance.wtTable.rowFilter.renderedToSource(row);\n\n      if (sourceRow >= corners[0] && sourceRow <= corners[2]) {\n        TH = wotInstance.wtTable.getRowHeader(sourceRow);\n\n        if (TH) {\n          let newClasses = [];\n\n          if (this.settings.highlightHeaderClassName) {\n            newClasses.push(this.settings.highlightHeaderClassName);\n          }\n\n          if (this.settings.highlightRowClassName) {\n            newClasses.push(this.settings.highlightRowClassName);\n          }\n\n          addClass(TH, newClasses);\n        }\n      }\n\n      for (let column = 0; column < renderedColumns; column++) {\n        sourceCol = wotInstance.wtTable.columnFilter.renderedToSource(column);\n\n        if (sourceRow >= corners[0] && sourceRow <= corners[2] && sourceCol >= corners[1] && sourceCol <= corners[3]) {\n          // selected cell\n          if (this.settings.className) {\n            this.addClassAtCoords(wotInstance, sourceRow, sourceCol, this.settings.className);\n          }\n        } else if (sourceRow >= corners[0] && sourceRow <= corners[2]) {\n          // selection is in this row\n          if (this.settings.highlightRowClassName) {\n            this.addClassAtCoords(wotInstance, sourceRow, sourceCol, this.settings.highlightRowClassName);\n          }\n        } else if (sourceCol >= corners[1] && sourceCol <= corners[3]) {\n          // selection is in this column\n          if (this.settings.highlightColumnClassName) {\n            this.addClassAtCoords(wotInstance, sourceRow, sourceCol, this.settings.highlightColumnClassName);\n          }\n        }\n      }\n    }\n    wotInstance.getSetting('onBeforeDrawBorders', corners, this.settings.className);\n\n    if (this.settings.border) {\n      let border = this.getBorder(wotInstance);\n\n      if (border) {\n        // warning! border.appear modifies corners!\n        border.appear(corners);\n      }\n    }\n  }\n}\n\nexport default Selection;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/3rdparty/walkontable/src/selection.js","import {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\nimport {getValidator} from './../validators';\n\nconst CELL_TYPE = 'autocomplete';\n\nexport default {\n  editor: getEditor(CELL_TYPE),\n  renderer: getRenderer(CELL_TYPE),\n  validator: getValidator(CELL_TYPE),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/autocompleteType.js","import {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\n\nconst CELL_TYPE = 'checkbox';\n\nexport default {\n  editor: getEditor(CELL_TYPE),\n  renderer: getRenderer(CELL_TYPE),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/checkboxType.js","import {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\nimport {getValidator} from './../validators';\n\nconst CELL_TYPE = 'date';\n\nexport default {\n  editor: getEditor(CELL_TYPE),\n  // displays small gray arrow on right side of the cell\n  renderer: getRenderer('autocomplete'),\n  validator: getValidator(CELL_TYPE),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/dateType.js","import {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\nimport {getValidator} from './../validators';\n\nconst CELL_TYPE = 'dropdown';\n\nexport default {\n  editor: getEditor(CELL_TYPE),\n  // displays small gray arrow on right side of the cell\n  renderer: getRenderer('autocomplete'),\n  validator: getValidator('autocomplete'),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/dropdownType.js","import {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\n\nconst CELL_TYPE = 'handsontable';\n\nexport default {\n  editor: getEditor(CELL_TYPE),\n  // displays small gray arrow on right side of the cell\n  renderer: getRenderer('autocomplete'),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/handsontableType.js","import {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\nimport {getValidator} from './../validators';\n\nconst CELL_TYPE = 'numeric';\n\nexport default {\n  editor: getEditor(CELL_TYPE),\n  renderer: getRenderer(CELL_TYPE),\n  validator: getValidator(CELL_TYPE),\n  dataType: 'number',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/numericType.js","import {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\nimport {getValidator} from './../validators';\n\nconst CELL_TYPE = 'password';\n\nexport default {\n  editor: getEditor(CELL_TYPE),\n  renderer: getRenderer(CELL_TYPE),\n  copyable: false,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/passwordType.js","import {isMobileBrowser} from './../helpers/browser';\nimport {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\n\nconst CELL_TYPE = 'text';\n\nexport default {\n  editor: isMobileBrowser() ? getEditor('mobile') : getEditor(CELL_TYPE),\n  renderer: getRenderer(CELL_TYPE),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/textType.js","import {getEditor} from './../editors';\nimport {getRenderer} from './../renderers';\nimport {getValidator} from './../validators';\n\nconst CELL_TYPE = 'time';\n\nexport default {\n  editor: getEditor('text'),\n  // displays small gray arrow on right side of the cell\n  renderer: getRenderer('text'),\n  validator: getValidator(CELL_TYPE),\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/cellTypes/timeType.js","import SheetClip from './../lib/SheetClip/SheetClip.js';\nimport {cellMethodLookupFactory} from './helpers/data';\nimport {columnFactory} from './helpers/setting';\nimport {createObjectPropListener, duckSchema, deepExtend, deepClone, isObject, deepObjectSize, hasOwnProperty} from './helpers/object';\nimport {extendArray, to2dArray} from './helpers/array';\nimport Interval from './utils/interval';\nimport {rangeEach} from './helpers/number';\nimport MultiMap from './multiMap';\nimport Hooks from './pluginHooks';\n\n/**\n * Utility class that gets and saves data from/to the data source using mapping of columns numbers to object property names\n * @todo refactor arguments of methods getRange, getText to be numbers (not objects)\n * @todo remove priv, GridSettings from object constructor\n *\n * @param {Object} instance Instance of Handsontable\n * @param {*} priv\n * @param {*} GridSettings Grid settings\n * @util\n * @class DataMap\n */\nfunction DataMap(instance, priv, GridSettings) {\n  this.instance = instance;\n  this.priv = priv;\n  this.GridSettings = GridSettings;\n  this.dataSource = this.instance.getSettings().data;\n  this.cachedLength = null;\n  this.skipCache = false;\n  this.latestSourceRowsCount = 0;\n\n  if (this.dataSource && this.dataSource[0]) {\n    this.duckSchema = this.recursiveDuckSchema(this.dataSource[0]);\n  } else {\n    this.duckSchema = {};\n  }\n  this.createMap();\n  this.interval = Interval.create(() => this.clearLengthCache(), '15fps');\n\n  this.instance.addHook('skipLengthCache', (delay) => this.onSkipLengthCache(delay));\n  this.onSkipLengthCache(500);\n}\n\nDataMap.prototype.DESTINATION_RENDERER = 1;\nDataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR = 2;\n\n/**\n * @param {Object|Array} object\n * @returns {Object|Array}\n */\nDataMap.prototype.recursiveDuckSchema = function(object) {\n  return duckSchema(object);\n};\n\n/**\n * @param {Object} schema\n * @param {Number} lastCol\n * @param {Number} parent\n * @returns {Number}\n */\nDataMap.prototype.recursiveDuckColumns = function(schema, lastCol, parent) {\n  var prop,\n    i;\n  if (typeof lastCol === 'undefined') {\n    lastCol = 0;\n    parent = '';\n  }\n  if (typeof schema === 'object' && !Array.isArray(schema)) {\n    for (i in schema) {\n      if (hasOwnProperty(schema, i)) {\n        if (schema[i] === null) {\n          prop = parent + i;\n          this.colToPropCache.push(prop);\n          this.propToColCache.set(prop, lastCol);\n\n          lastCol++;\n        } else {\n          lastCol = this.recursiveDuckColumns(schema[i], lastCol, `${i}.`);\n        }\n      }\n    }\n  }\n\n  return lastCol;\n};\n\nDataMap.prototype.createMap = function() {\n  let i;\n  let schema = this.getSchema();\n\n  if (typeof schema === 'undefined') {\n    throw new Error('trying to create `columns` definition but you didn\\'t provide `schema` nor `data`');\n  }\n\n  this.colToPropCache = [];\n  this.propToColCache = new MultiMap();\n\n  let columns = this.instance.getSettings().columns;\n\n  if (columns) {\n    const maxCols = this.instance.getSettings().maxCols;\n    let columnsLen = Math.min(maxCols, columns.length);\n    let filteredIndex = 0;\n    let columnsAsFunc = false;\n    let schemaLen = deepObjectSize(schema);\n\n    if (typeof columns === 'function') {\n      columnsLen = schemaLen > 0 ? schemaLen : this.instance.countSourceCols();\n      columnsAsFunc = true;\n    }\n\n    for (i = 0; i < columnsLen; i++) {\n      let column = columnsAsFunc ? columns(i) : columns[i];\n\n      if (isObject(column)) {\n        if (typeof column.data !== 'undefined') {\n          let index = columnsAsFunc ? filteredIndex : i;\n          this.colToPropCache[index] = column.data;\n          this.propToColCache.set(column.data, index);\n        }\n\n        filteredIndex++;\n      }\n    }\n\n  } else {\n    this.recursiveDuckColumns(schema);\n  }\n};\n\n/**\n * Returns property name that corresponds with the given column index.\n *\n * @param {Number} col\n * @returns {Number}\n */\nDataMap.prototype.colToProp = function(col) {\n  col = this.instance.runHooks('modifyCol', col);\n\n  if (!isNaN(col) && this.colToPropCache && typeof this.colToPropCache[col] !== 'undefined') {\n    return this.colToPropCache[col];\n  }\n\n  return col;\n};\n\n/**\n * @param {Object} prop\n * @fires Hooks#modifyCol\n * @returns {*}\n */\nDataMap.prototype.propToCol = function(prop) {\n  var col;\n\n  if (typeof this.propToColCache.get(prop) === 'undefined') {\n    col = prop;\n  } else {\n    col = this.propToColCache.get(prop);\n  }\n  col = this.instance.runHooks('unmodifyCol', col);\n\n  return col;\n};\n\n/**\n * @returns {Object}\n */\nDataMap.prototype.getSchema = function() {\n  var schema = this.instance.getSettings().dataSchema;\n\n  if (schema) {\n    if (typeof schema === 'function') {\n      return schema();\n    }\n    return schema;\n  }\n\n  return this.duckSchema;\n};\n\n/**\n * Creates row at the bottom of the data array.\n *\n * @param {Number} [index] Index of the row before which the new row will be inserted.\n * @param {Number} [amount] An amount of rows to add.\n * @param {String} [source] Source of method call.\n * @fires Hooks#afterCreateRow\n * @returns {Number} Returns number of created rows.\n */\nDataMap.prototype.createRow = function(index, amount, source) {\n  var row,\n    colCount = this.instance.countCols(),\n    numberOfCreatedRows = 0,\n    currentIndex;\n\n  if (!amount) {\n    amount = 1;\n  }\n\n  if (typeof index !== 'number' || index >= this.instance.countSourceRows()) {\n    index = this.instance.countSourceRows();\n  }\n  this.instance.runHooks('beforeCreateRow', index, amount, source);\n\n  currentIndex = index;\n  var maxRows = this.instance.getSettings().maxRows;\n\n  while (numberOfCreatedRows < amount && this.instance.countSourceRows() < maxRows) {\n    if (this.instance.dataType === 'array') {\n      if (this.instance.getSettings().dataSchema) {\n        // Clone template array\n        row = deepClone(this.getSchema());\n\n      } else {\n        row = [];\n        /* eslint-disable no-loop-func */\n        rangeEach(colCount - 1, () => row.push(null));\n      }\n\n    } else if (this.instance.dataType === 'function') {\n      row = this.instance.getSettings().dataSchema(index);\n\n    } else {\n      row = {};\n      deepExtend(row, this.getSchema());\n    }\n\n    if (index === this.instance.countSourceRows()) {\n      this.dataSource.push(row);\n\n    } else {\n      this.spliceData(index, 0, row);\n    }\n\n    numberOfCreatedRows++;\n    currentIndex++;\n  }\n\n  this.instance.runHooks('afterCreateRow', index, numberOfCreatedRows, source);\n  this.instance.forceFullRender = true; // used when data was changed\n\n  return numberOfCreatedRows;\n};\n\n/**\n * Creates col at the right of the data array.\n *\n * @param {Number} [index] Index of the column before which the new column will be inserted\n * @param {Number} [amount] An amount of columns to add.\n * @param {String} [source] Source of method call.\n * @fires Hooks#afterCreateCol\n * @returns {Number} Returns number of created columns\n */\nDataMap.prototype.createCol = function(index, amount, source) {\n  if (!this.instance.isColumnModificationAllowed()) {\n    throw new Error('Cannot create new column. When data source in an object, ' +\n      'you can only have as much columns as defined in first data row, data schema or in the \\'columns\\' setting.' +\n      'If you want to be able to add new columns, you have to use array datasource.');\n  }\n  var rlen = this.instance.countSourceRows(),\n    data = this.dataSource,\n    constructor,\n    numberOfCreatedCols = 0,\n    currentIndex;\n\n  if (!amount) {\n    amount = 1;\n  }\n\n  if (typeof index !== 'number' || index >= this.instance.countCols()) {\n    index = this.instance.countCols();\n  }\n  this.instance.runHooks('beforeCreateCol', index, amount, source);\n\n  currentIndex = index;\n\n  var maxCols = this.instance.getSettings().maxCols;\n  while (numberOfCreatedCols < amount && this.instance.countCols() < maxCols) {\n    constructor = columnFactory(this.GridSettings, this.priv.columnsSettingConflicts);\n\n    if (typeof index !== 'number' || index >= this.instance.countCols()) {\n      if (rlen > 0) {\n        for (var r = 0; r < rlen; r++) {\n          if (typeof data[r] === 'undefined') {\n            data[r] = [];\n          }\n          data[r].push(null);\n        }\n      } else {\n        data.push([null]);\n      }\n      // Add new column constructor\n      this.priv.columnSettings.push(constructor);\n\n    } else {\n      for (let r = 0; r < rlen; r++) {\n        data[r].splice(currentIndex, 0, null);\n      }\n      // Add new column constructor at given index\n      this.priv.columnSettings.splice(currentIndex, 0, constructor);\n    }\n\n    numberOfCreatedCols++;\n    currentIndex++;\n  }\n\n  this.instance.runHooks('afterCreateCol', index, numberOfCreatedCols, source);\n  this.instance.forceFullRender = true; // used when data was changed\n\n  return numberOfCreatedCols;\n};\n\n/**\n * Removes row from the data array.\n *\n * @param {Number} [index] Index of the row to be removed. If not provided, the last row will be removed\n * @param {Number} [amount] Amount of the rows to be removed. If not provided, one row will be removed\n * @param {String} [source] Source of method call.\n * @fires Hooks#beforeRemoveRow\n * @fires Hooks#afterRemoveRow\n */\nDataMap.prototype.removeRow = function(index, amount, source) {\n  if (!amount) {\n    amount = 1;\n  }\n  if (typeof index !== 'number') {\n    index = -amount;\n  }\n\n  amount = this.instance.runHooks('modifyRemovedAmount', amount, index);\n\n  index = (this.instance.countSourceRows() + index) % this.instance.countSourceRows();\n\n  let logicRows = this.physicalRowsToLogical(index, amount);\n  let actionWasNotCancelled = this.instance.runHooks('beforeRemoveRow', index, amount, logicRows, source);\n\n  if (actionWasNotCancelled === false) {\n    return;\n  }\n\n  let data = this.dataSource;\n  let newData;\n\n  newData = this.filterData(index, amount);\n\n  if (newData) {\n    data.length = 0;\n    Array.prototype.push.apply(data, newData);\n  }\n\n  this.instance.runHooks('afterRemoveRow', index, amount, logicRows, source);\n\n  this.instance.forceFullRender = true; // used when data was changed\n};\n\n/**\n * Removes column from the data array.\n *\n * @param {Number} [index] Index of the column to be removed. If not provided, the last column will be removed\n * @param {Number} [amount] Amount of the columns to be removed. If not provided, one column will be removed\n * @param {String} [source] Source of method call.\n * @fires Hooks#beforeRemoveCol\n * @fires Hooks#afterRemoveCol\n */\nDataMap.prototype.removeCol = function(index, amount, source) {\n  if (this.instance.dataType === 'object' || this.instance.getSettings().columns) {\n    throw new Error('cannot remove column with object data source or columns option specified');\n  }\n  if (!amount) {\n    amount = 1;\n  }\n  if (typeof index !== 'number') {\n    index = -amount;\n  }\n\n  index = (this.instance.countCols() + index) % this.instance.countCols();\n\n  let logicColumns = this.physicalColumnsToLogical(index, amount);\n  let descendingLogicColumns = logicColumns.slice(0).sort((a, b) => b - a);\n  let actionWasNotCancelled = this.instance.runHooks('beforeRemoveCol', index, amount, logicColumns, source);\n\n  if (actionWasNotCancelled === false) {\n    return;\n  }\n\n  let isTableUniform = true;\n  let removedColumnsCount = descendingLogicColumns.length;\n  let data = this.dataSource;\n\n  for (let c = 0; c < removedColumnsCount; c++) {\n    if (isTableUniform && logicColumns[0] !== logicColumns[c] - c) {\n      isTableUniform = false;\n    }\n  }\n\n  if (isTableUniform) {\n    for (let r = 0, rlen = this.instance.countSourceRows(); r < rlen; r++) {\n      data[r].splice(logicColumns[0], amount);\n    }\n\n  } else {\n    for (let r = 0, rlen = this.instance.countSourceRows(); r < rlen; r++) {\n      for (let c = 0; c < removedColumnsCount; c++) {\n        data[r].splice(descendingLogicColumns[c], 1);\n      }\n    }\n\n    for (let c = 0; c < removedColumnsCount; c++) {\n      this.priv.columnSettings.splice(logicColumns[c], 1);\n    }\n  }\n\n  this.instance.runHooks('afterRemoveCol', index, amount, logicColumns, source);\n\n  this.instance.forceFullRender = true; // used when data was changed\n};\n\n/**\n * Add/Removes data from the column.\n *\n * @param {Number} col Index of column in which do you want to do splice\n * @param {Number} index Index at which to start changing the array. If negative, will begin that many elements from the end\n * @param {Number} amount An integer indicating the number of old array elements to remove. If amount is 0, no elements are removed\n * @returns {Array} Returns removed portion of columns\n */\nDataMap.prototype.spliceCol = function(col, index, amount/* , elements...*/) {\n  var elements = arguments.length >= 4 ? [].slice.call(arguments, 3) : [];\n\n  var colData = this.instance.getDataAtCol(col);\n  var removed = colData.slice(index, index + amount);\n  var after = colData.slice(index + amount);\n\n  extendArray(elements, after);\n  var i = 0;\n  while (i < amount) {\n    elements.push(null); // add null in place of removed elements\n    i++;\n  }\n  to2dArray(elements);\n  this.instance.populateFromArray(index, col, elements, null, null, 'spliceCol');\n\n  return removed;\n};\n\n/**\n * Add/Removes data from the row.\n *\n * @param {Number} row Index of row in which do you want to do splice\n * @param {Number} index Index at which to start changing the array. If negative, will begin that many elements from the end\n * @param {Number} amount An integer indicating the number of old array elements to remove. If amount is 0, no elements are removed\n * @returns {Array} Returns removed portion of rows\n */\nDataMap.prototype.spliceRow = function(row, index, amount/* , elements...*/) {\n  var elements = arguments.length >= 4 ? [].slice.call(arguments, 3) : [];\n\n  var rowData = this.instance.getSourceDataAtRow(row);\n  var removed = rowData.slice(index, index + amount);\n  var after = rowData.slice(index + amount);\n\n  extendArray(elements, after);\n  var i = 0;\n  while (i < amount) {\n    elements.push(null); // add null in place of removed elements\n    i++;\n  }\n  this.instance.populateFromArray(row, index, [elements], null, null, 'spliceRow');\n\n  return removed;\n};\n\n/**\n * Add/remove row(s) to/from the data source.\n *\n * @param {Number} index Index of the element to remove.\n * @param {Number} amount Number of rows to add/remove.\n * @param {Object} element Row to add.\n */\nDataMap.prototype.spliceData = function(index, amount, element) {\n  let continueSplicing = this.instance.runHooks('beforeDataSplice', index, amount, element);\n\n  if (continueSplicing !== false) {\n    this.dataSource.splice(index, amount, element);\n  }\n};\n\n/**\n * Filter unwanted data elements from the data source.\n *\n * @param {Number} index Index of the element to remove.\n * @param {Number} amount Number of rows to add/remove.\n * @returns {Array}\n */\nDataMap.prototype.filterData = function(index, amount) {\n  let logicRows = this.physicalRowsToLogical(index, amount);\n  let continueSplicing = this.instance.runHooks('beforeDataFilter', index, amount, logicRows);\n\n  if (continueSplicing !== false) {\n    let newData = this.dataSource.filter((row, index) => logicRows.indexOf(index) == -1);\n\n    return newData;\n  }\n};\n\n/**\n * Returns single value from the data array.\n *\n * @param {Number} row\n * @param {Number} prop\n */\nDataMap.prototype.get = function(row, prop) {\n  row = this.instance.runHooks('modifyRow', row);\n\n  let dataRow = this.dataSource[row];\n  // TODO: To remove, use 'modifyData' hook instead (see below)\n  let modifiedRowData = this.instance.runHooks('modifyRowData', row);\n\n  dataRow = isNaN(modifiedRowData) ? modifiedRowData : dataRow;\n  //\n\n  let value = null;\n\n  // try to get value under property `prop` (includes dot)\n  if (dataRow && dataRow.hasOwnProperty && hasOwnProperty(dataRow, prop)) {\n    value = dataRow[prop];\n\n  } else if (typeof prop === 'string' && prop.indexOf('.') > -1) {\n    let sliced = prop.split('.');\n    let out = dataRow;\n\n    if (!out) {\n      return null;\n    }\n    for (let i = 0, ilen = sliced.length; i < ilen; i++) {\n      out = out[sliced[i]];\n\n      if (typeof out === 'undefined') {\n        return null;\n      }\n    }\n    value = out;\n\n  } else if (typeof prop === 'function') {\n    /**\n     *  allows for interacting with complex structures, for example\n     *  d3/jQuery getter/setter properties:\n     *\n     *    {columns: [{\n     *      data: function(row, value){\n     *        if(arguments.length === 1){\n     *          return row.property();\n     *        }\n     *        row.property(value);\n     *      }\n     *    }]}\n     */\n    value = prop(this.dataSource.slice(row, row + 1)[0]);\n  }\n\n  if (this.instance.hasHook('modifyData')) {\n    const valueHolder = createObjectPropListener(value);\n\n    this.instance.runHooks('modifyData', row, this.propToCol(prop), valueHolder, 'get');\n\n    if (valueHolder.isTouched()) {\n      value = valueHolder.value;\n    }\n  }\n\n  return value;\n};\n\nvar copyableLookup = cellMethodLookupFactory('copyable', false);\n\n/**\n * Returns single value from the data array (intended for clipboard copy to an external application).\n *\n * @param {Number} row\n * @param {Number} prop\n * @returns {String}\n */\nDataMap.prototype.getCopyable = function(row, prop) {\n  if (copyableLookup.call(this.instance, row, this.propToCol(prop))) {\n    return this.get(row, prop);\n  }\n  return '';\n};\n\n/**\n * Saves single value to the data array.\n *\n * @param {Number} row\n * @param {Number} prop\n * @param {String} value\n * @param {String} [source] Source of hook runner.\n */\nDataMap.prototype.set = function(row, prop, value, source) {\n  if(!prop && prop != 0) return;\n  row = this.instance.runHooks('modifyRow', row, source || 'datamapGet');\n\n  let dataRow = this.dataSource[row];\n  // TODO: To remove, use 'modifyData' hook instead (see below)\n  let modifiedRowData = this.instance.runHooks('modifyRowData', row);\n\n  dataRow = isNaN(modifiedRowData) ? modifiedRowData : dataRow;\n  //\n\n  if (this.instance.hasHook('modifyData')) {\n    const valueHolder = createObjectPropListener(value);\n\n    this.instance.runHooks('modifyData', row, this.propToCol(prop), valueHolder, 'set');\n\n    if (valueHolder.isTouched()) {\n      value = valueHolder.value;\n    }\n  }\n\n  // try to set value under property `prop` (includes dot)\n  if (dataRow && dataRow.hasOwnProperty && hasOwnProperty(dataRow, prop)) {\n    dataRow[prop] = value;\n\n  } else if (typeof prop === 'string' && prop.indexOf('.') > -1) {\n    let sliced = prop.split('.');\n    let out = dataRow;\n    let i = 0;\n    let ilen;\n\n    for (i = 0, ilen = sliced.length - 1; i < ilen; i++) {\n      if (typeof out[sliced[i]] === 'undefined') {\n        out[sliced[i]] = {};\n      }\n      out = out[sliced[i]];\n    }\n    out[sliced[i]] = value;\n\n  } else if (typeof prop === 'function') {\n    /* see the `function` handler in `get` */\n    prop(this.dataSource.slice(row, row + 1)[0], value);\n\n  } else {\n    dataRow[prop] = value;\n  }\n};\n\n/**\n * This ridiculous piece of code maps rows Id that are present in table data to those displayed for user.\n * The trick is, the physical row id (stored in settings.data) is not necessary the same\n * as the logical (displayed) row id (e.g. when sorting is applied).\n *\n * @param {Number} index\n * @param {Number} amount\n * @fires Hooks#modifyRow\n * @returns {Number}\n */\nDataMap.prototype.physicalRowsToLogical = function(index, amount) {\n  var totalRows = this.instance.countSourceRows();\n  var physicRow = (totalRows + index) % totalRows;\n  var logicRows = [];\n  var rowsToRemove = amount;\n  var row;\n\n  while (physicRow < totalRows && rowsToRemove) {\n    row = this.instance.runHooks('modifyRow', physicRow);\n    logicRows.push(row);\n\n    rowsToRemove--;\n    physicRow++;\n  }\n\n  return logicRows;\n};\n\n/**\n *\n * @param index\n * @param amount\n * @returns {Array}\n */\nDataMap.prototype.physicalColumnsToLogical = function(index, amount) {\n  let totalCols = this.instance.countCols();\n  let physicalCol = (totalCols + index) % totalCols;\n  let logicalCols = [];\n  let colsToRemove = amount;\n\n  while (physicalCol < totalCols && colsToRemove) {\n    let col = this.instance.runHooks('modifyCol', physicalCol);\n\n    logicalCols.push(col);\n\n    colsToRemove--;\n    physicalCol++;\n  }\n\n  return logicalCols;\n};\n\n/**\n * Clears the data array.\n */\nDataMap.prototype.clear = function() {\n  for (var r = 0; r < this.instance.countSourceRows(); r++) {\n    for (var c = 0; c < this.instance.countCols(); c++) {\n      this.set(r, this.colToProp(c), '');\n    }\n  }\n};\n\n/**\n * Clear cached data length.\n */\nDataMap.prototype.clearLengthCache = function() {\n  this.cachedLength = null;\n};\n\n/**\n * Get data length.\n *\n * @returns {Number}\n */\nDataMap.prototype.getLength = function() {\n  let maxRows,\n    maxRowsFromSettings = this.instance.getSettings().maxRows;\n\n  if (maxRowsFromSettings < 0 || maxRowsFromSettings === 0) {\n    maxRows = 0;\n  } else {\n    maxRows = maxRowsFromSettings || Infinity;\n  }\n\n  let length = this.instance.countSourceRows();\n\n  if (this.instance.hasHook('modifyRow')) {\n    let reValidate = this.skipCache;\n\n    this.interval.start();\n    if (length !== this.latestSourceRowsCount) {\n      reValidate = true;\n    }\n\n    this.latestSourceRowsCount = length;\n    if (this.cachedLength === null || reValidate) {\n      rangeEach(length - 1, (row) => {\n        row = this.instance.runHooks('modifyRow', row);\n\n        if (row === null) {\n          --length;\n        }\n      });\n      this.cachedLength = length;\n\n    } else {\n      length = this.cachedLength;\n    }\n  } else {\n    this.interval.stop();\n  }\n\n  return Math.min(length, maxRows);\n};\n\n/**\n * Returns the data array.\n *\n * @returns {Array}\n */\nDataMap.prototype.getAll = function() {\n  const start = {\n    row: 0,\n    col: 0,\n  };\n\n  let end = {\n    row: Math.max(this.instance.countSourceRows() - 1, 0),\n    col: Math.max(this.instance.countCols() - 1, 0),\n  };\n\n  if (start.row - end.row === 0 && !this.instance.countSourceRows()) {\n    return [];\n  }\n\n  return this.getRange(start, end, DataMap.prototype.DESTINATION_RENDERER);\n};\n\n/**\n * Returns data range as array.\n *\n * @param {Object} [start] Start selection position\n * @param {Object} [end] End selection position\n * @param {Number} destination Destination of datamap.get\n * @returns {Array}\n */\nDataMap.prototype.getRange = function(start, end, destination) {\n  var r,\n    rlen,\n    c,\n    clen,\n    output = [],\n    row;\n\n  const maxRows = this.instance.getSettings().maxRows;\n  const maxCols = this.instance.getSettings().maxCols;\n\n  if (maxRows === 0 || maxCols === 0) {\n    return [];\n  }\n\n  var getFn = destination === this.DESTINATION_CLIPBOARD_GENERATOR ? this.getCopyable : this.get;\n\n  rlen = Math.min(Math.max(maxRows - 1, 0), Math.max(start.row, end.row));\n  clen = Math.min(Math.max(maxCols - 1, 0), Math.max(start.col, end.col));\n\n  for (r = Math.min(start.row, end.row); r <= rlen; r++) {\n    row = [];\n    let physicalRow = this.instance.runHooks('modifyRow', r);\n\n    for (c = Math.min(start.col, end.col); c <= clen; c++) {\n\n      if (physicalRow === null) {\n        break;\n      }\n      row.push(getFn.call(this, r, this.colToProp(c)));\n    }\n    if (physicalRow !== null) {\n      output.push(row);\n    }\n  }\n\n  return output;\n};\n\n/**\n * Return data as text (tab separated columns).\n *\n * @param {Object} [start] Start selection position\n * @param {Object} [end] End selection position\n * @returns {String}\n */\nDataMap.prototype.getText = function(start, end) {\n  return SheetClip.stringify(this.getRange(start, end, this.DESTINATION_RENDERER));\n};\n\n/**\n * Return data as copyable text (tab separated columns intended for clipboard copy to an external application).\n *\n * @param {Object} [start] Start selection position\n * @param {Object} [end] End selection position\n * @returns {String}\n */\nDataMap.prototype.getCopyableText = function(start, end) {\n  return SheetClip.stringify(this.getRange(start, end, this.DESTINATION_CLIPBOARD_GENERATOR));\n};\n\n/**\n * `skipLengthCache` callback.\n * @private\n * @param {Number} delay Time of the delay in milliseconds.\n */\nDataMap.prototype.onSkipLengthCache = function(delay) {\n  this.skipCache = true;\n  setTimeout(() => {\n    this.skipCache = false;\n  }, delay);\n};\n\n/**\n * Destroy instance.\n */\nDataMap.prototype.destroy = function() {\n  this.interval.stop();\n\n  this.interval = null;\n  this.instance = null;\n  this.priv = null;\n  this.GridSettings = null;\n  this.dataSource = null;\n  this.cachedLength = null;\n  this.duckSchema = null;\n};\n\nexport default DataMap;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/dataMap.js","import {getProperty} from './helpers/object';\nimport {arrayEach} from './helpers/array';\nimport {rangeEach} from './helpers/number';\n\n/**\n * @class DataSource\n * @private\n */\nclass DataSource {\n  constructor(hotInstance, dataSource = []) {\n    /**\n     * Instance of Handsontable.\n     *\n     * @type {Handsontable}\n     */\n    this.hot = hotInstance;\n    /**\n     * Data source\n     *\n     * @type {Array}\n     */\n    this.data = dataSource;\n    /**\n     * Type of data source.\n     *\n     * @type {String}\n     * @default 'array'\n     */\n    this.dataType = 'array';\n\n    this.colToProp = () => {};\n    this.propToCol = () => {};\n  }\n\n  /**\n   * Get all data.\n   *\n   * @param {Boolean} [toArray=false] If `true` return source data as an array of arrays even when source data was provided\n   *                                  in another format.\n   * @returns {Array}\n   */\n  getData(toArray = false) {\n    let result = this.data;\n\n    if (toArray) {\n      result = this.getByRange(\n        {row: 0, col: 0},\n        {row: Math.max(this.countRows() - 1, 0), col: Math.max(this.countColumns() - 1, 0)},\n        true\n      );\n    }\n\n    return result;\n  }\n\n  /**\n   * Set new data source.\n   *\n   * @param data {Array}\n   */\n  setData(data) {\n    this.data = data;\n  }\n\n  /**\n   * Returns array of column values from the data source. `column` is the index of the row in the data source.\n   *\n   * @param {Number} column\n   * @returns {Array}\n   */\n  getAtColumn(column) {\n    let result = [];\n\n    arrayEach(this.data, (row) => {\n      let property = this.colToProp(column);\n\n      if (typeof property === 'string') {\n        row = getProperty(row, property);\n      } else {\n        row = row[property];\n      }\n      result.push(row);\n    });\n\n    return result;\n  }\n\n  /**\n   * Returns a single row of the data (array or object, depending on what you have). `row` is the index of the row in the data source.\n   *\n   * @param {Number} row\n   * @returns {Array|Object}\n   */\n  getAtRow(row) {\n    return this.data[row];\n  }\n\n  /**\n   * Returns a single value from the data.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @returns {*}\n   */\n  getAtCell(row, column) {\n    let result = null;\n\n    let modifyRowData = this.hot.runHooks('modifyRowData', row);\n\n    let dataRow = isNaN(modifyRowData) ? modifyRowData : this.data[row];\n\n    if (dataRow) {\n      let prop = this.colToProp(column);\n\n      if (typeof prop === 'string') {\n        result = getProperty(dataRow, prop);\n\n      } else if (typeof prop === 'function') {\n        result = prop(this.data.slice(row, row + 1)[0]);\n\n      } else {\n        result = dataRow[prop];\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns source data by passed range.\n   *\n   * @param {Object} start Object with `row` and `col` keys.\n   * @param {Object} end Object with `row` and `col` keys.\n   * @param {Boolean} [toArray=false] If `true` return source data as an array of arrays even when source data was provided\n   *                                  in another format.\n   * @returns {Array}\n   */\n  getByRange(start, end, toArray = false) {\n    let startRow = Math.min(start.row, end.row);\n    let startCol = Math.min(start.col, end.col);\n    let endRow = Math.max(start.row, end.row);\n    let endCol = Math.max(start.col, end.col);\n    let result = [];\n\n    rangeEach(startRow, endRow, (currentRow) => {\n      let row = this.getAtRow(currentRow);\n      let newRow;\n\n      if (this.dataType === 'array') {\n        newRow = row.slice(startCol, endCol + 1);\n\n      } else if (this.dataType === 'object') {\n        newRow = toArray ? [] : {};\n\n        rangeEach(startCol, endCol, (column) => {\n          let prop = this.colToProp(column);\n\n          if (toArray) {\n            newRow.push(row[prop]);\n          } else {\n            newRow[prop] = row[prop];\n          }\n        });\n      }\n\n      result.push(newRow);\n    });\n\n    return result;\n  }\n\n  /**\n   * Count number of rows.\n   *\n   * @returns {Number}\n   */\n  countRows() {\n    return Array.isArray(this.data) ? this.data.length : 0;\n  }\n\n  /**\n   * Count number of columns.\n   *\n   * @returns {Number}\n   */\n  countColumns() {\n    let result = 0;\n\n    if (Array.isArray(this.data)) {\n      if (this.dataType === 'array') {\n        result = this.data[0].length;\n\n      } else if (this.dataType === 'object') {\n        result = Object.keys(this.data[0]).length;\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    this.data = null;\n    this.hot = null;\n  }\n}\n\nexport default DataSource;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/dataSource.js","import {CellCoords} from './3rdparty/walkontable/src';\nimport {KEY_CODES, isMetaKey, isCtrlKey} from './helpers/unicode';\nimport {stopPropagation, stopImmediatePropagation, isImmediatePropagationStopped} from './helpers/dom/event';\nimport {getEditorInstance} from './editors';\nimport EventManager from './eventManager';\nimport {EditorState} from './editors/_baseEditor';\n\nfunction EditorManager(instance, priv, selection) {\n  var _this = this,\n    destroyed = false,\n    eventManager,\n    activeEditor;\n\n  eventManager = new EventManager(instance);\n\n  function moveSelectionAfterEnter(shiftKey) {\n    selection.setSelectedHeaders(false, false, false);\n    var enterMoves = typeof priv.settings.enterMoves === 'function' ? priv.settings.enterMoves(event) : priv.settings.enterMoves;\n\n    if (shiftKey) {\n      // move selection up\n      selection.transformStart(-enterMoves.row, -enterMoves.col);\n\n    } else {\n      // move selection down (add a new row if needed)\n      selection.transformStart(enterMoves.row, enterMoves.col, true);\n    }\n  }\n\n  function moveSelectionUp(shiftKey) {\n    if (shiftKey) {\n      if (selection.selectedHeader.cols) {\n        selection.setSelectedHeaders(selection.selectedHeader.rows, false, false);\n      }\n      selection.transformEnd(-1, 0);\n\n    } else {\n      selection.setSelectedHeaders(false, false, false);\n      selection.transformStart(-1, 0);\n    }\n  }\n\n  function moveSelectionDown(shiftKey) {\n    if (shiftKey) {\n      // expanding selection down with shift\n      selection.transformEnd(1, 0);\n    } else {\n      selection.setSelectedHeaders(false, false, false);\n      selection.transformStart(1, 0);\n    }\n  }\n\n  function moveSelectionRight(shiftKey) {\n    if (shiftKey) {\n      selection.transformEnd(0, 1);\n    } else {\n      selection.setSelectedHeaders(false, false, false);\n      selection.transformStart(0, 1);\n    }\n  }\n\n  function moveSelectionLeft(shiftKey) {\n    if (shiftKey) {\n      if (selection.selectedHeader.rows) {\n        selection.setSelectedHeaders(false, selection.selectedHeader.cols, false);\n      }\n      selection.transformEnd(0, -1);\n\n    } else {\n      selection.setSelectedHeaders(false, false, false);\n      selection.transformStart(0, -1);\n    }\n  }\n\n  function onKeyDown(event) {\n    var ctrlDown,\n      rangeModifier;\n\n    if (!instance.isListening()) {\n      return;\n    }\n    instance.runHooks('beforeKeyDown', event);\n\n    if (destroyed) {\n      return;\n    }\n    if (isImmediatePropagationStopped(event)) {\n      return;\n    }\n    priv.lastKeyCode = event.keyCode;\n\n    if (!selection.isSelected()) {\n      return;\n    }\n    // catch CTRL but not right ALT (which in some systems triggers ALT+CTRL)\n    ctrlDown = (event.ctrlKey || event.metaKey) && !event.altKey;\n\n    if (activeEditor && !activeEditor.isWaiting()) {\n      if (!isMetaKey(event.keyCode) && !isCtrlKey(event.keyCode) && !ctrlDown && !_this.isEditorOpened()) {\n        _this.openEditor('', event);\n\n        return;\n      }\n    }\n    rangeModifier = event.shiftKey ? selection.setRangeEnd : selection.setRangeStart;\n\n    switch (event.keyCode) {\n      case KEY_CODES.A:\n        if (!_this.isEditorOpened() && ctrlDown) {\n          selection.selectAll();\n\n          event.preventDefault();\n          stopPropagation(event);\n        }\n        break;\n\n      case KEY_CODES.ARROW_UP:\n        if (_this.isEditorOpened() && !activeEditor.isWaiting()) {\n          _this.closeEditorAndSaveChanges(ctrlDown);\n        }\n        moveSelectionUp(event.shiftKey);\n\n        event.preventDefault();\n        stopPropagation(event);\n        break;\n\n      case KEY_CODES.ARROW_DOWN:\n        if (_this.isEditorOpened() && !activeEditor.isWaiting()) {\n          _this.closeEditorAndSaveChanges(ctrlDown);\n        }\n\n        moveSelectionDown(event.shiftKey);\n\n        event.preventDefault();\n        stopPropagation(event);\n        break;\n\n      case KEY_CODES.ARROW_RIGHT:\n        if (_this.isEditorOpened() && !activeEditor.isWaiting()) {\n          _this.closeEditorAndSaveChanges(ctrlDown);\n        }\n\n        moveSelectionRight(event.shiftKey);\n\n        event.preventDefault();\n        stopPropagation(event);\n        break;\n\n      case KEY_CODES.ARROW_LEFT:\n        if (_this.isEditorOpened() && !activeEditor.isWaiting()) {\n          _this.closeEditorAndSaveChanges(ctrlDown);\n        }\n\n        moveSelectionLeft(event.shiftKey);\n\n        event.preventDefault();\n        stopPropagation(event);\n        break;\n\n      case KEY_CODES.TAB:\n        selection.setSelectedHeaders(false, false, false);\n        var tabMoves = typeof priv.settings.tabMoves === 'function' ? priv.settings.tabMoves(event) : priv.settings.tabMoves;\n\n        if (event.shiftKey) {\n          // move selection left\n          selection.transformStart(-tabMoves.row, -tabMoves.col);\n        } else {\n          // move selection right (add a new column if needed)\n          selection.transformStart(tabMoves.row, tabMoves.col, true);\n        }\n        event.preventDefault();\n        stopPropagation(event);\n        break;\n\n      case KEY_CODES.BACKSPACE:\n      case KEY_CODES.DELETE:\n        if (_this.isEditorOpened() && !activeEditor.isWaiting()) {\n          var $input = activeEditor.$editorWrap.find(':input');\n          if ($input && ($input.attr(\"readonly\") == \"readonly\" || $input.attr(\"disabled\") == \"disabled\")) {\n            return;\n          }\n          selection.empty(event);\n        }\n        _this.prepareEditor();\n        event.preventDefault();\n        break;\n\n      case KEY_CODES.F2:\n        /* F2 */\n        _this.openEditor(null, event);\n\n        if (activeEditor) {\n          activeEditor.enableFullEditMode();\n        }\n        event.preventDefault(); // prevent Opera from opening 'Go to Page dialog'\n        break;\n\n      case KEY_CODES.ENTER:\n        /* return/enter */\n        // focus, , \n        if (document.activeElement && document.activeElement.parentElement.className == \"modal-footer\") break;\n        if (_this.isEditorOpened()) {\n\n          if (activeEditor && activeEditor.state !== EditorState.WAITING) {\n            _this.closeEditorAndSaveChanges(ctrlDown);\n          }\n          moveSelectionAfterEnter(event.shiftKey);\n\n        } else if (instance.getSettings().enterBeginsEditing) {\n          _this.openEditor(null, event);\n\n          if (activeEditor) {\n            activeEditor.enableFullEditMode();\n          }\n        } else {\n          moveSelectionAfterEnter(event.shiftKey);\n        }\n        event.preventDefault(); // don't add newline to field\n        stopImmediatePropagation(event); // required by HandsontableEditor\n        break;\n\n      case KEY_CODES.ESCAPE:\n        if (_this.isEditorOpened()) {\n          _this.closeEditorAndRestoreOriginalValue(ctrlDown);\n        }\n        event.preventDefault();\n        break;\n\n      case KEY_CODES.HOME:\n        selection.setSelectedHeaders(false, false, false);\n        if (event.ctrlKey || event.metaKey) {\n          rangeModifier(new CellCoords(0, priv.selRange.from.col));\n        } else {\n          rangeModifier(new CellCoords(priv.selRange.from.row, 0));\n        }\n        event.preventDefault(); // don't scroll the window\n        stopPropagation(event);\n        break;\n\n      case KEY_CODES.END:\n        selection.setSelectedHeaders(false, false, false);\n        if (event.ctrlKey || event.metaKey) {\n          rangeModifier(new CellCoords(instance.countRows() - 1, priv.selRange.from.col));\n        } else {\n          rangeModifier(new CellCoords(priv.selRange.from.row, instance.countCols() - 1));\n        }\n        event.preventDefault(); // don't scroll the window\n        stopPropagation(event);\n        break;\n\n      case KEY_CODES.PAGE_UP:\n        selection.setSelectedHeaders(false, false, false);\n        selection.transformStart(-instance.countVisibleRows(), 0);\n        event.preventDefault(); // don't page up the window\n        stopPropagation(event);\n        break;\n\n      case KEY_CODES.PAGE_DOWN:\n        selection.setSelectedHeaders(false, false, false);\n        selection.transformStart(instance.countVisibleRows(), 0);\n        event.preventDefault(); // don't page down the window\n        stopPropagation(event);\n        break;\n      default:\n        break;\n    }\n  }\n\n  function init() {\n    instance.addHook('afterDocumentKeyDown', onKeyDown);\n\n    eventManager.addEventListener(document.documentElement, 'keydown', (event) => {\n      if (!destroyed) {\n        instance.runHooks('afterDocumentKeyDown', event);\n      }\n    });\n\n    function onDblClick(event, coords, elem) {\n      // may be TD or TH\n      if (elem.nodeName == 'TD') {\n        _this.openEditor();\n\n        if (activeEditor) {\n          activeEditor.enableFullEditMode();\n        }\n      }\n    }\n    instance.view.wt.update('onCellDblClick', onDblClick);\n\n    instance.addHook('afterDestroy', () => {\n      destroyed = true;\n    });\n  }\n\n  /**\n   * Destroy current editor, if exists.\n   *\n   * @function destroyEditor\n   * @memberof! Handsontable.EditorManager#\n   * @param {Boolean} revertOriginal\n   */\n  this.destroyEditor = function(revertOriginal) {\n    this.closeEditor(revertOriginal);\n  };\n\n  /**\n   * Get active editor.\n   *\n   * @function getActiveEditor\n   * @memberof! Handsontable.EditorManager#\n   * @returns {*}\n   */\n  this.getActiveEditor = function() {\n    return activeEditor;\n  };\n\n  /**\n   * Prepare text input to be displayed at given grid cell.\n   *\n   * @function prepareEditor\n   * @memberof! Handsontable.EditorManager#\n   */\n  this.prepareEditor = function() {\n    var row,\n      col,\n      prop,\n      td,\n      originalValue,\n      cellProperties,\n      editorClass;\n\n    if (activeEditor && activeEditor.isWaiting()) {\n      this.closeEditor(false, false, (dataSaved) => {\n        if (dataSaved) {\n          _this.prepareEditor();\n        }\n      });\n\n      return;\n    }\n    row = priv.selRange.highlight.row;\n    col = priv.selRange.highlight.col;\n    prop = instance.colToProp(col);\n    td = instance.getCell(row, col);\n\n    originalValue = instance.getSourceDataAtCell(instance.runHooks('modifyRow', row), col);\n    cellProperties = instance.getCellMeta(row, col);\n    editorClass = instance.getCellEditor(cellProperties);\n\n    if (editorClass) {\n      activeEditor = getEditorInstance(editorClass, instance);\n      activeEditor.prepare(row, col, prop, td, originalValue, cellProperties);\n\n    } else {\n      activeEditor = void 0;\n    }\n  };\n\n  /**\n   * Check is editor is opened/showed.\n   *\n   * @function isEditorOpened\n   * @memberof! Handsontable.EditorManager#\n   * @returns {Boolean}\n   */\n  this.isEditorOpened = function() {\n    return activeEditor && activeEditor.isOpened();\n  };\n\n  /**\n   * Open editor with initial value.\n   *\n   * @function openEditor\n   * @memberof! Handsontable.EditorManager#\n   * @param {String} initialValue\n   * @param {DOMEvent} event\n   */\n  this.openEditor = function(initialValue, event) {\n    if (activeEditor && !activeEditor.cellProperties.readOnly) {\n      activeEditor.beginEditing(initialValue, event);\n    } else if (activeEditor && activeEditor.cellProperties.readOnly) {\n\n      // move the selection after opening the editor with ENTER key\n      if (event && event.keyCode === KEY_CODES.ENTER) {\n        moveSelectionAfterEnter();\n      }\n    }\n  };\n\n  /**\n   * Close editor, finish editing cell.\n   *\n   * @function closeEditor\n   * @memberof! Handsontable.EditorManager#\n   * @param {Boolean} restoreOriginalValue\n   * @param {Boolean} [ctrlDown]\n   * @param {Function} [callback]\n   */\n  this.closeEditor = function(restoreOriginalValue, ctrlDown, callback) {\n    if (activeEditor) {\n      activeEditor.finishEditing(restoreOriginalValue, ctrlDown, callback);\n\n    } else if (callback) {\n      callback(false);\n    }\n  };\n\n  /**\n   * Close editor and save changes.\n   *\n   * @function closeEditorAndSaveChanges\n   * @memberof! Handsontable.EditorManager#\n   * @param {Boolean} ctrlDown\n   */\n  this.closeEditorAndSaveChanges = function(ctrlDown) {\n    return this.closeEditor(false, ctrlDown);\n  };\n\n  /**\n   * Close editor and restore original value.\n   *\n   * @function closeEditorAndRestoreOriginalValue\n   * @memberof! Handsontable.EditorManager#\n   * @param {Boolean} ctrlDown\n   */\n  this.closeEditorAndRestoreOriginalValue = function(ctrlDown) {\n    return this.closeEditor(true, ctrlDown);\n  };\n\n  init();\n}\n\nexport default EditorManager;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editorManager.js","import BaseEditor from './_baseEditor';\nimport {hasClass} from './../helpers/dom/element';\n\n/**\n * @private\n * @editor CheckboxEditor\n * @class CheckboxEditor\n */\nclass CheckboxEditor extends BaseEditor {\n  beginEditing(initialValue, event) {\n    // editorManager return double click event as undefined\n    if (event === void 0) {\n      let checkbox = this.TD.querySelector('input[type=\"checkbox\"]');\n\n      if (!hasClass(checkbox, 'htBadValue')) {\n        checkbox.click();\n      }\n    }\n  }\n\n  finishEditing() {}\n  init() {}\n  open() {}\n  close() {}\n  getValue() {}\n  setValue() {}\n  focus() {}\n}\n\nexport default CheckboxEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/checkboxEditor.js","import moment from 'moment';\nimport Pikaday from 'pikaday';\nimport 'pikaday/css/pikaday.css';\nimport {addClass, outerHeight} from './../helpers/dom/element';\nimport {deepExtend} from './../helpers/object';\nimport EventManager from './../eventManager';\nimport {isMetaKey} from './../helpers/unicode';\nimport {stopPropagation} from './../helpers/dom/event';\nimport TextEditor from './textEditor';\n\n/**\n * @private\n * @editor DateEditor\n * @class DateEditor\n * @dependencies TextEditor moment pikaday\n */\nclass DateEditor extends TextEditor {\n  /**\n   * @param {Core} hotInstance Handsontable instance\n   * @private\n   */\n  constructor(hotInstance) {\n    super(hotInstance);\n\n    // TODO: Move this option to general settings\n    this.defaultDateFormat = 'DD/MM/YYYY';\n    this.isCellEdited = false;\n    this.parentDestroyed = false;\n  }\n\n  init() {\n    if (typeof moment !== 'function') {\n      throw new Error('You need to include moment.js to your project.');\n    }\n\n    if (typeof Pikaday !== 'function') {\n      throw new Error('You need to include Pikaday to your project.');\n    }\n    super.init();\n    this.instance.addHook('afterDestroy', () => {\n      this.parentDestroyed = true;\n      this.destroyElements();\n    });\n  }\n\n  /**\n   * Create data picker instance\n   */\n  createElements() {\n    super.createElements();\n\n    this.datePicker = document.createElement('DIV');\n    this.datePickerStyle = this.datePicker.style;\n    this.datePickerStyle.position = 'absolute';\n    this.datePickerStyle.top = 0;\n    this.datePickerStyle.left = 0;\n    this.datePickerStyle.zIndex = 9999;\n\n    addClass(this.datePicker, 'htDatepickerHolder');\n    document.body.appendChild(this.datePicker);\n\n    this.$datePicker = new Pikaday(this.getDatePickerConfig());\n    const eventManager = new EventManager(this);\n\n    /**\n     * Prevent recognizing clicking on datepicker as clicking outside of table\n     */\n    eventManager.addEventListener(this.datePicker, 'mousedown', (event) => stopPropagation(event));\n    this.hideDatepicker();\n  }\n\n  /**\n   * Destroy data picker instance\n   */\n  destroyElements() {\n    this.$datePicker.destroy();\n  }\n\n  /**\n   * Prepare editor to appear\n   *\n   * @param {Number} row Row index\n   * @param {Number} col Column index\n   * @param {String} prop Property name (passed when datasource is an array of objects)\n   * @param {HTMLTableCellElement} td Table cell element\n   * @param {*} originalValue Original value\n   * @param {Object} cellProperties Object with cell properties ({@see Core#getCellMeta})\n   */\n  prepare(row, col, prop, td, originalValue, cellProperties) {\n    this._opened = false;\n    super.prepare(row, col, prop, td, originalValue, cellProperties);\n  }\n\n  /**\n   * Open editor\n   *\n   * @param {Event} [event=null]\n   */\n  open(event = null) {\n    super.open();\n    this.showDatepicker(event);\n  }\n\n  /**\n   * Close editor\n   */\n  close() {\n    this._opened = false;\n    this.instance._registerTimeout(setTimeout(() => {\n      this.instance.selection.refreshBorders();\n    }, 0));\n\n    super.close();\n  }\n\n  /**\n   * @param {Boolean} [isCancelled=false]\n   * @param {Boolean} [ctrlDown=false]\n   */\n  finishEditing(isCancelled = false, ctrlDown = false) {\n    if (isCancelled) { // pressed ESC, restore original value\n      // var value = this.instance.getDataAtCell(this.row, this.col);\n      let value = this.originalValue;\n\n      if (value !== void 0) {\n        this.setValue(value);\n      }\n    }\n    this.hideDatepicker();\n    super.finishEditing(isCancelled, ctrlDown);\n  }\n\n  /**\n   * Show data picker\n   *\n   * @param {Event} event\n   */\n  showDatepicker(event) {\n    this.$datePicker.config(this.getDatePickerConfig());\n\n    let offset = this.TD.getBoundingClientRect();\n    let dateFormat = this.cellProperties.dateFormat || this.defaultDateFormat;\n    let datePickerConfig = this.$datePicker.config();\n    let dateStr;\n    let isMouseDown = this.instance.view.isMouseDown();\n    let isMeta = event ? isMetaKey(event.keyCode) : false;\n\n    this.datePickerStyle.top = `${window.pageYOffset + offset.top + outerHeight(this.TD)}px`;\n    this.datePickerStyle.left = `${window.pageXOffset + offset.left}px`;\n\n    this.$datePicker._onInputFocus = function() {};\n    datePickerConfig.format = dateFormat;\n\n    if (this.originalValue) {\n      dateStr = this.originalValue;\n\n      if (moment(dateStr, dateFormat, true).isValid()) {\n        this.$datePicker.setMoment(moment(dateStr, dateFormat), true);\n      }\n\n      // workaround for date/time cells - pikaday resets the cell value to 12:00 AM by default, this will overwrite the value.\n      if (this.getValue() !== this.originalValue) {\n        this.setValue(this.originalValue);\n      }\n\n      if (!isMeta && !isMouseDown) {\n        this.setValue('');\n      }\n\n    } else if (this.cellProperties.defaultDate) {\n      dateStr = this.cellProperties.defaultDate;\n\n      datePickerConfig.defaultDate = dateStr;\n\n      if (moment(dateStr, dateFormat, true).isValid()) {\n        this.$datePicker.setMoment(moment(dateStr, dateFormat), true);\n      }\n\n      if (!isMeta && !isMouseDown) {\n        this.setValue('');\n      }\n    } else {\n      // if a default date is not defined, set a soft-default-date: display the current day and month in the\n      // datepicker, but don't fill the editor input\n      this.$datePicker.gotoToday();\n    }\n\n    this.datePickerStyle.display = 'block';\n    this.$datePicker.show();\n  }\n\n  /**\n   * Hide data picker\n   */\n  hideDatepicker() {\n    this.datePickerStyle.display = 'none';\n    this.$datePicker.hide();\n  }\n\n  /**\n   * Get date picker options.\n   *\n   * @returns {Object}\n   */\n  getDatePickerConfig() {\n    let htInput = this.TEXTAREA;\n    let options = {};\n\n    if (this.cellProperties && this.cellProperties.datePickerConfig) {\n      deepExtend(options, this.cellProperties.datePickerConfig);\n    }\n    const origOnSelect = options.onSelect;\n    const origOnClose = options.onClose;\n\n    options.field = htInput;\n    options.trigger = htInput;\n    options.container = this.datePicker;\n    options.bound = false;\n    options.format = options.format || this.defaultDateFormat;\n    options.reposition = options.reposition || false;\n    options.onSelect = (dateStr) => {\n      if (!isNaN(dateStr.getTime())) {\n        dateStr = moment(dateStr).format(this.cellProperties.dateFormat || this.defaultDateFormat);\n      }\n      this.setValue(dateStr);\n      this.hideDatepicker();\n\n      if (origOnSelect) {\n        origOnSelect();\n      }\n    };\n    options.onClose = () => {\n      if (!this.parentDestroyed) {\n        this.finishEditing(false);\n      }\n      if (origOnClose) {\n        origOnClose();\n      }\n    };\n\n    return options;\n  }\n}\n\nexport default DateEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/dateEditor.js","import AutocompleteEditor from './autocompleteEditor';\nimport Hooks from './../pluginHooks';\n\n/**\n * @private\n * @editor DropdownEditor\n * @class DropdownEditor\n * @dependencies AutocompleteEditor\n */\nclass DropdownEditor extends AutocompleteEditor {\n  prepare(row, col, prop, td, originalValue, cellProperties) {\n    super.prepare(row, col, prop, td, originalValue, cellProperties);\n    this.cellProperties.filter = false;\n    this.cellProperties.strict = true;\n  }\n}\n\nHooks.getSingleton().add('beforeValidate', function(value, row, col, source) {\n  let cellMeta = this.getCellMeta(row, this.propToCol(col));\n\n  if (cellMeta.editor === DropdownEditor) {\n    if (cellMeta.strict === void 0) {\n      cellMeta.filter = false;\n      cellMeta.strict = true;\n    }\n  }\n});\n\nexport default DropdownEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/dropdownEditor.js","import {KEY_CODES} from './../helpers/unicode';\nimport {stopImmediatePropagation, isImmediatePropagationStopped} from './../helpers/dom/event';\nimport {\n  addClass,\n  getScrollLeft,\n  getScrollTop,\n  hasClass,\n  isChildOf,\n  offset,\n  outerHeight,\n  outerWidth,\n  removeClass,\n  setCaretPosition,\n} from './../helpers/dom/element';\nimport BaseEditor from './_baseEditor';\nimport EventManager from './../eventManager';\n\nconst MobileTextEditor = BaseEditor.prototype.extend();\nconst domDimensionsCache = {};\n\n/**\n * @private\n * @editor MobileTextEditor\n * @class MobileTextEditor\n */\nvar createControls = function() {\n  this.controls = {};\n\n  this.controls.leftButton = document.createElement('DIV');\n  this.controls.leftButton.className = 'leftButton';\n  this.controls.rightButton = document.createElement('DIV');\n  this.controls.rightButton.className = 'rightButton';\n  this.controls.upButton = document.createElement('DIV');\n  this.controls.upButton.className = 'upButton';\n  this.controls.downButton = document.createElement('DIV');\n  this.controls.downButton.className = 'downButton';\n\n  for (var button in this.controls) {\n    if (Object.prototype.hasOwnProperty.call(this.controls, button)) {\n      this.positionControls.appendChild(this.controls[button]);\n    }\n  }\n};\n\nMobileTextEditor.prototype.valueChanged = function() {\n  return this.initValue != this.getValue();\n};\n\nMobileTextEditor.prototype.init = function() {\n  var that = this;\n  this.eventManager = new EventManager(this.instance);\n\n  this.createElements();\n  this.bindEvents();\n\n  this.instance.addHook('afterDestroy', () => {\n    that.destroy();\n  });\n\n};\n\nMobileTextEditor.prototype.getValue = function() {\n  return this.TEXTAREA.value;\n};\n\nMobileTextEditor.prototype.setValue = function(newValue) {\n  this.initValue = newValue;\n\n  this.TEXTAREA.value = newValue;\n};\n\nMobileTextEditor.prototype.createElements = function() {\n  this.editorContainer = document.createElement('DIV');\n  this.editorContainer.className = 'htMobileEditorContainer';\n\n  this.cellPointer = document.createElement('DIV');\n  this.cellPointer.className = 'cellPointer';\n\n  this.moveHandle = document.createElement('DIV');\n  this.moveHandle.className = 'moveHandle';\n\n  this.inputPane = document.createElement('DIV');\n  this.inputPane.className = 'inputs';\n\n  this.positionControls = document.createElement('DIV');\n  this.positionControls.className = 'positionControls';\n\n  this.TEXTAREA = document.createElement('TEXTAREA');\n  addClass(this.TEXTAREA, 'handsontableInput');\n\n  this.inputPane.appendChild(this.TEXTAREA);\n\n  this.editorContainer.appendChild(this.cellPointer);\n  this.editorContainer.appendChild(this.moveHandle);\n  this.editorContainer.appendChild(this.inputPane);\n  this.editorContainer.appendChild(this.positionControls);\n\n  createControls.call(this);\n\n  document.body.appendChild(this.editorContainer);\n};\n\nMobileTextEditor.prototype.onBeforeKeyDown = function(event) {\n  var instance = this;\n  var that = instance.getActiveEditor();\n\n  if (event.target !== that.TEXTAREA || isImmediatePropagationStopped(event)) {\n    return;\n  }\n\n  switch (event.keyCode) {\n    case KEY_CODES.ENTER:\n      that.close();\n      event.preventDefault(); // don't add newline to field\n      break;\n    case KEY_CODES.BACKSPACE:\n      stopImmediatePropagation(event); // backspace, delete, home, end should only work locally when cell is edited (not in table context)\n      break;\n    default:\n      break;\n  }\n};\n\nMobileTextEditor.prototype.open = function() {\n  this.instance.addHook('beforeKeyDown', this.onBeforeKeyDown);\n\n  addClass(this.editorContainer, 'active');\n  removeClass(this.cellPointer, 'hidden');\n\n  this.updateEditorPosition();\n};\n\nMobileTextEditor.prototype.focus = function() {\n  this.TEXTAREA.focus();\n  setCaretPosition(this.TEXTAREA, this.TEXTAREA.value.length);\n};\n\nMobileTextEditor.prototype.close = function() {\n  this.TEXTAREA.blur();\n  this.instance.removeHook('beforeKeyDown', this.onBeforeKeyDown);\n\n  removeClass(this.editorContainer, 'active');\n};\n\nMobileTextEditor.prototype.scrollToView = function() {\n  var coords = this.instance.getSelectedRange().highlight;\n  this.instance.view.scrollViewport(coords);\n};\n\nMobileTextEditor.prototype.hideCellPointer = function() {\n  if (!hasClass(this.cellPointer, 'hidden')) {\n    addClass(this.cellPointer, 'hidden');\n  }\n};\n\nMobileTextEditor.prototype.updateEditorPosition = function(x, y) {\n  if (x && y) {\n    x = parseInt(x, 10);\n    y = parseInt(y, 10);\n\n    this.editorContainer.style.top = `${y}px`;\n    this.editorContainer.style.left = `${x}px`;\n\n  } else {\n    var selection = this.instance.getSelected(),\n      selectedCell = this.instance.getCell(selection[0], selection[1]);\n\n    // cache sizes\n    if (!domDimensionsCache.cellPointer) {\n      domDimensionsCache.cellPointer = {\n        height: outerHeight(this.cellPointer),\n        width: outerWidth(this.cellPointer)\n      };\n    }\n    if (!domDimensionsCache.editorContainer) {\n      domDimensionsCache.editorContainer = {\n        width: outerWidth(this.editorContainer)\n      };\n    }\n\n    if (selectedCell !== undefined) {\n      var scrollLeft = this.instance.view.wt.wtOverlays.leftOverlay\n          .trimmingContainer == window ? 0 : getScrollLeft(this.instance.view.wt.wtOverlays.leftOverlay.holder);\n      var scrollTop = this.instance.view.wt.wtOverlays.topOverlay\n          .trimmingContainer == window ? 0 : getScrollTop(this.instance.view.wt.wtOverlays.topOverlay.holder);\n\n      var selectedCellOffset = offset(selectedCell),\n        selectedCellWidth = outerWidth(selectedCell),\n        currentScrollPosition = {\n          x: scrollLeft,\n          y: scrollTop\n        };\n\n      this.editorContainer.style.top = `${parseInt(selectedCellOffset.top + outerHeight(selectedCell) -\n          currentScrollPosition.y + domDimensionsCache.cellPointer.height, 10)}px`;\n      this.editorContainer.style.left = `${parseInt((window.innerWidth / 2) - (domDimensionsCache.editorContainer.width / 2), 10)}px`;\n\n      if (selectedCellOffset.left + (selectedCellWidth / 2) > parseInt(this.editorContainer.style.left, 10) +\n          domDimensionsCache.editorContainer.width) {\n        this.editorContainer.style.left = `${window.innerWidth - domDimensionsCache.editorContainer.width}px`;\n\n      } else if (selectedCellOffset.left + (selectedCellWidth / 2) < parseInt(this.editorContainer.style.left, 10) + 20) {\n        this.editorContainer.style.left = `${0}px`;\n      }\n\n      this.cellPointer.style.left = `${parseInt(selectedCellOffset.left - (domDimensionsCache.cellPointer.width / 2) -\n        offset(this.editorContainer).left + (selectedCellWidth / 2) - currentScrollPosition.x, 10)}px`;\n    }\n  }\n};\n\nMobileTextEditor.prototype.updateEditorData = function() {\n  var selected = this.instance.getSelected(),\n    selectedValue = this.instance.getDataAtCell(selected[0], selected[1]);\n\n  this.row = selected[0];\n  this.col = selected[1];\n  this.setValue(selectedValue);\n  this.updateEditorPosition();\n};\n\nMobileTextEditor.prototype.prepareAndSave = function() {\n  var val;\n\n  if (!this.valueChanged()) {\n    return;\n  }\n\n  if (this.instance.getSettings().trimWhitespace) {\n    val = [\n      [String.prototype.trim.call(this.getValue())]\n    ];\n  } else {\n    val = [\n      [this.getValue()]\n    ];\n  }\n\n  this.saveValue(val);\n};\n\nMobileTextEditor.prototype.bindEvents = function() {\n  var that = this;\n\n  this.eventManager.addEventListener(this.controls.leftButton, 'touchend', (event) => {\n    that.prepareAndSave();\n    that.instance.selection.transformStart(0, -1, null, true);\n    that.updateEditorData();\n    event.preventDefault();\n  });\n  this.eventManager.addEventListener(this.controls.rightButton, 'touchend', (event) => {\n    that.prepareAndSave();\n    that.instance.selection.transformStart(0, 1, null, true);\n    that.updateEditorData();\n    event.preventDefault();\n  });\n  this.eventManager.addEventListener(this.controls.upButton, 'touchend', (event) => {\n    that.prepareAndSave();\n    that.instance.selection.transformStart(-1, 0, null, true);\n    that.updateEditorData();\n    event.preventDefault();\n  });\n  this.eventManager.addEventListener(this.controls.downButton, 'touchend', (event) => {\n    that.prepareAndSave();\n    that.instance.selection.transformStart(1, 0, null, true);\n    that.updateEditorData();\n    event.preventDefault();\n  });\n\n  this.eventManager.addEventListener(this.moveHandle, 'touchstart', function(event) {\n    if (event.touches.length == 1) {\n      var touch = event.touches[0];\n      var onTouchPosition = {\n        x: that.editorContainer.offsetLeft,\n        y: that.editorContainer.offsetTop\n      };\n      var onTouchOffset = {\n        x: touch.pageX - onTouchPosition.x,\n        y: touch.pageY - onTouchPosition.y\n      };\n\n      that.eventManager.addEventListener(this, 'touchmove', (event) => {\n        var touch = event.touches[0];\n        that.updateEditorPosition(touch.pageX - onTouchOffset.x, touch.pageY - onTouchOffset.y);\n        that.hideCellPointer();\n        event.preventDefault();\n      });\n\n    }\n  });\n\n  this.eventManager.addEventListener(document.body, 'touchend', (event) => {\n    if (!isChildOf(event.target, that.editorContainer) && !isChildOf(event.target, that.instance.rootElement)) {\n      that.close();\n    }\n  });\n\n  this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.leftOverlay.holder, 'scroll', (event) => {\n    if (that.instance.view.wt.wtOverlays.leftOverlay.trimmingContainer != window) {\n      that.hideCellPointer();\n    }\n  });\n\n  this.eventManager.addEventListener(this.instance.view.wt.wtOverlays.topOverlay.holder, 'scroll', (event) => {\n    if (that.instance.view.wt.wtOverlays.topOverlay.trimmingContainer != window) {\n      that.hideCellPointer();\n    }\n  });\n\n};\n\nMobileTextEditor.prototype.destroy = function() {\n  this.eventManager.clear();\n\n  this.editorContainer.parentNode.removeChild(this.editorContainer);\n};\n\nexport default MobileTextEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/mobileTextEditor.js","import numbro from 'numbro';\nimport TextEditor from './textEditor';\n\n/**\n * @private\n * @editor NumericEditor\n * @class NumericEditor\n * @dependencies TextEditor numbro\n */\nclass NumericEditor extends TextEditor {\n  /**\n   * @param {*} initialValue\n   */\n  beginEditing(initialValue) {\n    if (typeof initialValue === 'undefined' && this.originalValue) {\n      if (typeof this.cellProperties.language !== 'undefined') {\n        numbro.culture(this.cellProperties.language);\n      }\n      let decimalDelimiter = numbro.cultureData().delimiters.decimal;\n      initialValue = (`${this.originalValue}`).replace('.', decimalDelimiter);\n    }\n    super.beginEditing(initialValue);\n  }\n}\n\nexport default NumericEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/numericEditor.js","import {empty} from './../helpers/dom/element';\nimport TextEditor from './textEditor';\n\n/**\n * @private\n * @editor PasswordEditor\n * @class PasswordEditor\n * @dependencies TextEditor\n */\nclass PasswordEditor extends TextEditor {\n  createElements() {\n    super.createElements();\n\n    this.TEXTAREA = document.createElement('input');\n    this.TEXTAREA.setAttribute('type', 'password');\n    this.TEXTAREA.className = 'handsontableInput';\n    this.textareaStyle = this.TEXTAREA.style;\n    this.textareaStyle.width = 0;\n    this.textareaStyle.height = 0;\n\n    empty(this.TEXTAREA_PARENT);\n    this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);\n  }\n}\n\nexport default PasswordEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/passwordEditor.js","import {\n  addClass,\n  empty,\n  fastInnerHTML,\n  getComputedStyle,\n  getCssTransform,\n  getScrollableElement,\n  offset,\n  outerHeight,\n  outerWidth,\n  resetCssTransform,\n} from './../helpers/dom/element';\nimport {stopImmediatePropagation} from './../helpers/dom/event';\nimport {KEY_CODES} from './../helpers/unicode';\nimport BaseEditor, {EditorState} from './_baseEditor';\n\nconst SelectEditor = BaseEditor.prototype.extend();\n\n/**\n * @private\n * @editor SelectEditor\n * @class SelectEditor\n */\nSelectEditor.prototype.init = function() {\n  this.select = document.createElement('SELECT');\n  addClass(this.select, 'htSelectEditor');\n  this.select.style.display = 'none';\n  this.instance.rootElement.appendChild(this.select);\n  this.registerHooks();\n};\n\nSelectEditor.prototype.registerHooks = function() {\n  this.instance.addHook('afterScrollHorizontally', () => this.refreshDimensions());\n  this.instance.addHook('afterScrollVertically', () => this.refreshDimensions());\n  this.instance.addHook('afterColumnResize', () => this.refreshDimensions());\n  this.instance.addHook('afterRowResize', () => this.refreshDimensions());\n};\n\nSelectEditor.prototype.prepare = function() {\n  BaseEditor.prototype.prepare.apply(this, arguments);\n\n  var selectOptions = this.cellProperties.selectOptions;\n  var options;\n\n  if (typeof selectOptions == 'function') {\n    options = this.prepareOptions(selectOptions(this.row, this.col, this.prop));\n  } else {\n    options = this.prepareOptions(selectOptions);\n  }\n\n  empty(this.select);\n\n  for (var option in options) {\n    if (Object.prototype.hasOwnProperty.call(options, option)) {\n      var optionElement = document.createElement('OPTION');\n      optionElement.value = option;\n      fastInnerHTML(optionElement, options[option]);\n      this.select.appendChild(optionElement);\n    }\n  }\n};\n\nSelectEditor.prototype.prepareOptions = function(optionsToPrepare) {\n  var preparedOptions = {};\n\n  if (Array.isArray(optionsToPrepare)) {\n    for (var i = 0, len = optionsToPrepare.length; i < len; i++) {\n      preparedOptions[optionsToPrepare[i]] = optionsToPrepare[i];\n    }\n  } else if (typeof optionsToPrepare == 'object') {\n    preparedOptions = optionsToPrepare;\n  }\n\n  return preparedOptions;\n\n};\n\nSelectEditor.prototype.getValue = function() {\n  return this.select.value;\n};\n\nSelectEditor.prototype.setValue = function(value) {\n  this.select.value = value;\n};\n\nvar onBeforeKeyDown = function(event) {\n  var instance = this;\n  var editor = instance.getActiveEditor();\n\n  switch (event.keyCode) {\n    case KEY_CODES.ARROW_UP:\n      var previousOptionIndex = editor.select.selectedIndex - 1;\n      if (previousOptionIndex >= 0) {\n        editor.select[previousOptionIndex].selected = true;\n      }\n\n      stopImmediatePropagation(event);\n      event.preventDefault();\n      break;\n\n    case KEY_CODES.ARROW_DOWN:\n      var nextOptionIndex = editor.select.selectedIndex + 1;\n      if (nextOptionIndex <= editor.select.length - 1) {\n        editor.select[nextOptionIndex].selected = true;\n      }\n\n      stopImmediatePropagation(event);\n      event.preventDefault();\n      break;\n    default:\n      break;\n  }\n};\n\nSelectEditor.prototype.open = function() {\n  this._opened = true;\n  this.refreshDimensions();\n  this.select.style.display = '';\n  this.instance.addHook('beforeKeyDown', onBeforeKeyDown);\n};\n\nSelectEditor.prototype.close = function() {\n  this._opened = false;\n  this.select.style.display = 'none';\n  this.instance.removeHook('beforeKeyDown', onBeforeKeyDown);\n};\n\nSelectEditor.prototype.focus = function() {\n  this.select.focus();\n};\n\nSelectEditor.prototype.refreshValue = function() {\n  let sourceData = this.instance.getSourceDataAtCell(this.row, this.prop);\n  this.originalValue = sourceData;\n\n  this.setValue(sourceData);\n  this.refreshDimensions();\n};\n\nSelectEditor.prototype.refreshDimensions = function() {\n  if (this.state !== EditorState.EDITING) {\n    return;\n  }\n  this.TD = this.getEditedCell();\n\n  // TD is outside of the viewport.\n  if (!this.TD) {\n    this.close();\n\n    return;\n  }\n  var\n    width = outerWidth(this.TD) + 1,\n    height = outerHeight(this.TD) + 1,\n    currentOffset = offset(this.TD),\n    containerOffset = offset(this.instance.rootElement),\n    scrollableContainer = getScrollableElement(this.TD),\n    editTop = currentOffset.top - containerOffset.top - 1 - (scrollableContainer.scrollTop || 0),\n    editLeft = currentOffset.left - containerOffset.left - 1 - (scrollableContainer.scrollLeft || 0),\n    editorSection = this.checkEditorSection(),\n    cssTransformOffset;\n\n  const settings = this.instance.getSettings();\n  let rowHeadersCount = settings.rowHeaders ? 1 : 0;\n  let colHeadersCount = settings.colHeaders ? 1 : 0;\n\n  switch (editorSection) {\n    case 'top':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.holder.parentNode);\n      break;\n    case 'left':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.holder.parentNode);\n      break;\n    case 'top-left-corner':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.holder.parentNode);\n      break;\n    case 'bottom-left-corner':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.bottomLeftCornerOverlay.clone.wtTable.holder.parentNode);\n      break;\n    case 'bottom':\n      cssTransformOffset = getCssTransform(this.instance.view.wt.wtOverlays.bottomOverlay.clone.wtTable.holder.parentNode);\n      break;\n    default:\n      break;\n  }\n  if (this.instance.getSelected()[0] === 0) {\n    editTop += 1;\n  }\n\n  if (this.instance.getSelected()[1] === 0) {\n    editLeft += 1;\n  }\n\n  var selectStyle = this.select.style;\n\n  if (cssTransformOffset && cssTransformOffset != -1) {\n    selectStyle[cssTransformOffset[0]] = cssTransformOffset[1];\n  } else {\n    resetCssTransform(this.select);\n  }\n  const cellComputedStyle = getComputedStyle(this.TD);\n\n  if (parseInt(cellComputedStyle.borderTopWidth, 10) > 0) {\n    height -= 1;\n  }\n  if (parseInt(cellComputedStyle.borderLeftWidth, 10) > 0) {\n    width -= 1;\n  }\n\n  selectStyle.height = `${height}px`;\n  selectStyle.minWidth = `${width}px`;\n  selectStyle.top = `${editTop}px`;\n  selectStyle.left = `${editLeft}px`;\n  selectStyle.margin = '0px';\n};\n\nSelectEditor.prototype.getEditedCell = function() {\n  var editorSection = this.checkEditorSection(),\n    editedCell;\n\n  switch (editorSection) {\n    case 'top':\n      editedCell = this.instance.view.wt.wtOverlays.topOverlay.clone.wtTable.getCell({\n        row: this.row,\n        col: this.col\n      });\n      this.select.style.zIndex = 101;\n      break;\n    case 'corner':\n      editedCell = this.instance.view.wt.wtOverlays.topLeftCornerOverlay.clone.wtTable.getCell({\n        row: this.row,\n        col: this.col\n      });\n      this.select.style.zIndex = 103;\n      break;\n    case 'left':\n      editedCell = this.instance.view.wt.wtOverlays.leftOverlay.clone.wtTable.getCell({\n        row: this.row,\n        col: this.col\n      });\n      this.select.style.zIndex = 102;\n      break;\n    default:\n      editedCell = this.instance.getCell(this.row, this.col);\n      this.select.style.zIndex = '';\n      break;\n  }\n\n  return editedCell != -1 && editedCell != -2 ? editedCell : void 0;\n};\n\nexport default SelectEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/editors/selectEditor.js","export default function jQueryWrapper(Handsontable) {\n  const jQuery = typeof window === 'undefined' ? false : window.jQuery;\n\n  if (!jQuery) {\n    return;\n  }\n\n  jQuery.fn.handsontable = function(action) {\n    const $this = this.first(); // Use only first element from list\n    let instance = $this.data('handsontable');\n\n    // Init case\n    if (typeof action !== 'string') {\n      const userSettings = action || {};\n\n      if (instance) {\n        instance.updateSettings(userSettings);\n\n      } else {\n        instance = new Handsontable.Core($this[0], userSettings);\n        $this.data('handsontable', instance);\n        instance.init();\n      }\n\n      return $this;\n    }\n\n    // Action case\n    const args = [];\n    let output;\n\n    if (arguments.length > 1) {\n      for (let i = 1, ilen = arguments.length; i < ilen; i++) {\n        args.push(arguments[i]);\n      }\n    }\n\n    if (instance) {\n      if (typeof instance[action] !== 'undefined') {\n        output = instance[action].apply(instance, args);\n\n        if (action === 'destroy') {\n          $this.removeData();\n        }\n\n      } else {\n        throw new Error('Handsontable do not provide action: ' + action);\n      }\n    }\n\n    return output;\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/helpers/wrappers/jquery.js","import {arrayEach} from './../helpers/array';\nimport {defineGetter} from './../helpers/object';\n\nconst MIXIN_NAME = 'stateSaver';\nconst STATE_PREFIX = 'state_';\nconst PROP_PREFIX = '_states';\n\nconst getState = function(object, stateId) {\n  return object[PROP_PREFIX][STATE_PREFIX + stateId];\n};\n\nconst setState = function(object, stateId, value) {\n  object[PROP_PREFIX][STATE_PREFIX + stateId] = value;\n};\n\n/**\n * Mixin object to extend functionality for save/restore object state.\n *\n * @type {Object}\n */\nconst stateSaver = {\n  /**\n   * Internal states storage.\n   */\n  [PROP_PREFIX]: {},\n\n  /**\n   * Get cached state.\n   *\n   * @param {String|Number} stateId State identification.\n   * @returns {*}\n   */\n  getCachedState(stateId) {\n    return getState(this, stateId);\n  },\n\n  /**\n   * Set state directly.\n   *\n   * @param {String|Number} stateId State identification.\n   * @param {*} value\n   */\n  setCachedState(stateId, value) {\n    setState(this, stateId, value);\n  },\n\n  /**\n   * Save state object at given id.\n   *\n   * @param {String|Number} stateId State identification.\n   */\n  saveState(stateId) {\n    setState(this, stateId, this.getState());\n  },\n\n  /**\n   * Restore state object from given id.\n   *\n   * @param {String|Number} stateId State identification.\n   */\n  restoreState(stateId) {\n    this.setState(getState(this, stateId));\n  },\n\n  /**\n   * Returns `true` if state exists at given state id.\n   *\n   * @param {String|Number} stateId State identification.\n   * @returns Boolean\n   */\n  hasSavedState(stateId) {\n    return getState(this, stateId) !== void 0;\n  },\n\n  /**\n   * Clear saved state.\n   *\n   * @param {String|Number} stateId State identification.\n   */\n  clearState(stateId) {\n    setState(this, stateId);\n  },\n\n  /**\n   * Clear all previously saved states of this object.\n   */\n  clearStates() {\n    this[PROP_PREFIX] = {};\n  }\n};\n\ndefineGetter(stateSaver, 'MIXIN_NAME', MIXIN_NAME, {\n  writable: false,\n  enumerable: false,\n});\n\nexport default stateSaver;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/mixins/stateSaver.js","function MultiMap() {\n  var map = {\n    arrayMap: [],\n    weakMap: new WeakMap(),\n  };\n\n  return {\n    get(key) {\n      if (canBeAnArrayMapKey(key)) {\n        return map.arrayMap[key];\n      } else if (canBeAWeakMapKey(key)) {\n        return map.weakMap.get(key);\n      }\n    },\n\n    set(key, value) {\n      if (canBeAnArrayMapKey(key)) {\n        map.arrayMap[key] = value;\n      } else if (canBeAWeakMapKey(key)) {\n        map.weakMap.set(key, value);\n      } else {\n        throw new Error('Invalid key type');\n      }\n    },\n\n    delete(key) {\n      if (canBeAnArrayMapKey(key)) {\n        delete map.arrayMap[key];\n      } else if (canBeAWeakMapKey(key)) {\n        map.weakMap.delete(key);\n      }\n    },\n  };\n\n  function canBeAnArrayMapKey(obj) {\n    return obj !== null && !isNaNSymbol(obj) && (typeof obj == 'string' || typeof obj == 'number');\n  }\n\n  function canBeAWeakMapKey(obj) {\n    return obj !== null && (typeof obj == 'object' || typeof obj == 'function');\n  }\n\n  function isNaNSymbol(obj) {\n    /* eslint-disable no-self-compare */\n    return obj !== obj; // NaN === NaN is always false\n  }\n}\n\nexport default MultiMap;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/multiMap.js","import BasePlugin from './../_base';\nimport {arrayEach, arrayFilter, arrayReduce, arrayMap} from './../../helpers/array';\nimport {cancelAnimationFrame, requestAnimationFrame} from './../../helpers/feature';\nimport {isVisible} from './../../helpers/dom/element';\nimport GhostTable from './../../utils/ghostTable';\nimport {isObject, objectEach, hasOwnProperty} from './../../helpers/object';\nimport {valueAccordingPercent, rangeEach} from './../../helpers/number';\nimport {registerPlugin} from './../../plugins';\nimport SamplesGenerator from './../../utils/samplesGenerator';\nimport {isPercentValue} from './../../helpers/string';\nimport {ViewportColumnsCalculator} from './../../3rdparty/walkontable/src';\n\nconst privatePool = new WeakMap();\n\n/**\n * @plugin AutoColumnSize\n *\n * @description\n * This plugin allows to set column widths based on their widest cells.\n *\n * By default, the plugin is declared as `undefined`, which makes it enabled (same as if it was declared as `true`).\n * Enabling this plugin may decrease the overall table performance, as it needs to calculate the widths of all cells to\n * resize the columns accordingly.\n * If you experience problems with the performance, try turning this feature off and declaring the column widths manually.\n *\n * Column width calculations are divided into sync and async part. Each of this parts has their own advantages and\n * disadvantages. Synchronous calculations are faster but they block the browser UI, while the slower asynchronous operations don't\n * block the browser UI.\n *\n * To configure the sync/async distribution, you can pass an absolute value (number of columns) or a percentage value to a config object:\n * ```js\n * ...\n * // as a number (300 columns in sync, rest async)\n * autoColumnSize: {syncLimit: 300},\n * ...\n *\n * ...\n * // as a string (percent)\n * autoColumnSize: {syncLimit: '40%'},\n * ...\n * ```\n *\n * To configure this plugin see {@link Options#autoColumnSize}.\n *\n * @example\n * ```js\n * ...\n * var hot = new Handsontable(document.getElementById('example'), {\n *   date: getData(),\n *   autoColumnSize: true\n * });\n * // Access to plugin instance:\n * var plugin = hot.getPlugin('autoColumnSize');\n *\n * plugin.getColumnWidth(4);\n *\n * if (plugin.isEnabled()) {\n *   // code...\n * }\n * ...\n * ```\n */\nclass AutoColumnSize extends BasePlugin {\n  static get CALCULATION_STEP() {\n    return 50;\n  }\n\n  static get SYNC_CALCULATION_LIMIT() {\n    return 50;\n  }\n\n  constructor(hotInstance) {\n    super(hotInstance);\n    privatePool.set(this, {\n      /**\n       * Cached column header names. It is used to diff current column headers with previous state and detect which\n       * columns width should be updated.\n       *\n       * @private\n       * @type {Array}\n       */\n      cachedColumnHeaders: [],\n    });\n    /**\n     * Cached columns widths.\n     *\n     * @type {Array}\n     */\n    this.widths = [];\n    /**\n     * Instance of {@link GhostTable} for rows and columns size calculations.\n     *\n     * @type {GhostTable}\n     */\n    this.ghostTable = new GhostTable(this.hot);\n    /**\n     * Instance of {@link SamplesGenerator} for generating samples necessary for columns width calculations.\n     *\n     * @type {SamplesGenerator}\n     */\n    this.samplesGenerator = new SamplesGenerator((row, col) => this.hot.getDataAtCell(row, col));\n    /**\n     * `true` only if the first calculation was performed\n     *\n     * @type {Boolean}\n     */\n    this.firstCalculation = true;\n    /**\n     * `true` if the size calculation is in progress.\n     *\n     * @type {Boolean}\n     */\n    this.inProgress = false;\n\n    // moved to constructor to allow auto-sizing the columns when the plugin is disabled\n    this.addHook('beforeColumnResize', (col, size, isDblClick) => this.onBeforeColumnResize(col, size, isDblClick));\n  }\n\n  /**\n   * Check if the plugin is enabled in the handsontable settings.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return this.hot.getSettings().autoColumnSize !== false && !this.hot.getSettings().colWidths;\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n\n    let setting = this.hot.getSettings().autoColumnSize;\n\n    if (setting && setting.useHeaders != null) {\n      this.ghostTable.setSetting('useHeaders', setting.useHeaders);\n    }\n\n    this.addHook('afterLoadData', () => this.onAfterLoadData());\n    this.addHook('beforeChange', (changes) => this.onBeforeChange(changes));\n\n    this.addHook('beforeRender', (force) => this.onBeforeRender(force));\n    this.addHook('modifyColWidth', (width, col) => this.getColumnWidth(col, width));\n    this.addHook('afterInit', () => this.onAfterInit());\n    super.enablePlugin();\n  }\n\n  /**\n   * Update plugin state.\n   */\n  updatePlugin() {\n    const changedColumns = this.findColumnsWhereHeaderWasChanged();\n\n    if (changedColumns.length) {\n      this.clearCache(changedColumns);\n    }\n    super.updatePlugin();\n  }\n\n  /**\n   * Disable plugin for this Handsontable instance.\n   */\n  disablePlugin() {\n    super.disablePlugin();\n  }\n\n  /**\n   * Calculate a columns width.\n   *\n   * @param {Number|Object} colRange Column range object.\n   * @param {Number|Object} rowRange Row range object.\n   * @param {Boolean} [force=false] If `true` force calculate width even when value was cached earlier.\n   */\n  calculateColumnsWidth(colRange = {from: 0, to: this.hot.countCols() - 1}, rowRange = {from: 0, to: this.hot.countRows() - 1}, force = false) {\n    if (typeof colRange === 'number') {\n      colRange = {from: colRange, to: colRange};\n    }\n    if (typeof rowRange === 'number') {\n      rowRange = {from: rowRange, to: rowRange};\n    }\n\n    rangeEach(colRange.from, colRange.to, (col) => {\n      if (force || (this.widths[col] === void 0 && !this.hot._getColWidthFromSettings(col))) {\n        const samples = this.samplesGenerator.generateColumnSamples(col, rowRange);\n\n        samples.forEach((sample, col) => this.ghostTable.addColumn(col, sample));\n      }\n    });\n\n    if (this.ghostTable.columns.length) {\n      this.ghostTable.getWidths((col, width) => {\n        this.widths[col] = width;\n      });\n      this.ghostTable.clean();\n    }\n  }\n\n  /**\n   * Calculate all columns width.\n   *\n   * @param {Object|Number} rowRange Row range object.\n   */\n  calculateAllColumnsWidth(rowRange = {from: 0, to: this.hot.countRows() - 1}) {\n    let current = 0;\n    let length = this.hot.countCols() - 1;\n    let timer = null;\n\n    this.inProgress = true;\n\n    let loop = () => {\n      // When hot was destroyed after calculating finished cancel frame\n      if (!this.hot) {\n        cancelAnimationFrame(timer);\n        this.inProgress = false;\n\n        return;\n      }\n\n      this.calculateColumnsWidth({\n        from: current,\n        to: Math.min(current + AutoColumnSize.CALCULATION_STEP, length)\n      }, rowRange);\n\n      current = current + AutoColumnSize.CALCULATION_STEP + 1;\n\n      if (current < length) {\n        timer = requestAnimationFrame(loop);\n      } else {\n        cancelAnimationFrame(timer);\n        this.inProgress = false;\n\n        // @TODO Should call once per render cycle, currently fired separately in different plugins\n        this.hot.view.wt.wtOverlays.adjustElementsSize(true);\n        // tmp\n        if (this.hot.view.wt.wtOverlays.leftOverlay.needFullRender) {\n          this.hot.view.wt.wtOverlays.leftOverlay.clone.draw();\n        }\n      }\n    };\n    // sync\n    if (this.firstCalculation && this.getSyncCalculationLimit()) {\n      this.calculateColumnsWidth({from: 0, to: this.getSyncCalculationLimit()}, rowRange);\n      this.firstCalculation = false;\n      current = this.getSyncCalculationLimit() + 1;\n    }\n    // async\n    if (current < length) {\n      loop();\n    } else {\n      this.inProgress = false;\n    }\n  }\n\n  /**\n   * Set the sampling options.\n   *\n   * @private\n   */\n  setSamplingOptions() {\n    let setting = this.hot.getSettings().autoColumnSize;\n    let samplingRatio = setting && hasOwnProperty(setting, 'samplingRatio') ? this.hot.getSettings().autoColumnSize.samplingRatio : void 0;\n    let allowSampleDuplicates = setting && hasOwnProperty(setting, 'allowSampleDuplicates') ? this.hot.getSettings().autoColumnSize.allowSampleDuplicates : void 0;\n\n    if (samplingRatio && !isNaN(samplingRatio)) {\n      this.samplesGenerator.setSampleCount(parseInt(samplingRatio, 10));\n    }\n\n    if (allowSampleDuplicates) {\n      this.samplesGenerator.setAllowDuplicates(allowSampleDuplicates);\n    }\n  }\n\n  /**\n   * Recalculate all columns width (overwrite cache values).\n   */\n  recalculateAllColumnsWidth() {\n    if (this.hot.view && isVisible(this.hot.view.wt.wtTable.TABLE)) {\n      this.clearCache();\n      this.calculateAllColumnsWidth();\n    }\n  }\n\n  /**\n   * Get value which tells how many columns should be calculated synchronously. Rest of the columns will be calculated asynchronously.\n   *\n   * @returns {Number}\n   */\n  getSyncCalculationLimit() {\n    /* eslint-disable no-bitwise */\n    let limit = AutoColumnSize.SYNC_CALCULATION_LIMIT;\n    let colsLimit = this.hot.countCols() - 1;\n\n    if (isObject(this.hot.getSettings().autoColumnSize)) {\n      limit = this.hot.getSettings().autoColumnSize.syncLimit;\n\n      if (isPercentValue(limit)) {\n        limit = valueAccordingPercent(colsLimit, limit);\n      } else {\n        // Force to Number\n        limit >>= 0;\n      }\n    }\n\n    return Math.min(limit, colsLimit);\n  }\n\n  /**\n   * Get the calculated column width.\n   *\n   * @param {Number} col Column index.\n   * @param {Number} [defaultWidth] Default column width. It will be picked up if no calculated width found.\n   * @param {Boolean} [keepMinimum=true] If `true` then returned value won't be smaller then 50 (default column width).\n   * @returns {Number}\n   */\n  getColumnWidth(col, defaultWidth = void 0, keepMinimum = true) {\n    let width = defaultWidth;\n\n    if (width === void 0) {\n      width = this.widths[col];\n\n      if (keepMinimum && typeof width === 'number') {\n        width = Math.max(width, ViewportColumnsCalculator.DEFAULT_WIDTH);\n      }\n    }\n\n    return width;\n  }\n\n  /**\n   * Get the first visible column.\n   *\n   * @returns {Number} Returns column index or -1 if table is not rendered.\n   */\n  getFirstVisibleColumn() {\n    const wot = this.hot.view.wt;\n\n    if (wot.wtViewport.columnsVisibleCalculator) {\n      return wot.wtTable.getFirstVisibleColumn();\n    }\n    if (wot.wtViewport.columnsRenderCalculator) {\n      return wot.wtTable.getFirstRenderedColumn();\n    }\n\n    return -1;\n  }\n\n  /**\n   * Get the last visible column.\n   *\n   * @returns {Number} Returns column index or -1 if table is not rendered.\n   */\n  getLastVisibleColumn() {\n    const wot = this.hot.view.wt;\n\n    if (wot.wtViewport.columnsVisibleCalculator) {\n      return wot.wtTable.getLastVisibleColumn();\n    }\n    if (wot.wtViewport.columnsRenderCalculator) {\n      return wot.wtTable.getLastRenderedColumn();\n    }\n\n    return -1;\n  }\n\n  /**\n   * Collects all columns which titles has been changed in comparison to the previous state.\n   *\n   * @returns {Array} It returns an array of physical column indexes.\n   */\n  findColumnsWhereHeaderWasChanged() {\n    const columnHeaders = this.hot.getColHeader();\n    const {cachedColumnHeaders} = privatePool.get(this);\n\n    const changedColumns = arrayReduce(columnHeaders, (acc, columnTitle, physicalColumn) => {\n      const cachedColumnsLength = cachedColumnHeaders.length;\n\n      if (cachedColumnsLength - 1 < physicalColumn || cachedColumnHeaders[physicalColumn] !== columnTitle) {\n        acc.push(physicalColumn);\n      }\n      if (cachedColumnsLength - 1 < physicalColumn) {\n        cachedColumnHeaders.push(columnTitle);\n      } else {\n        cachedColumnHeaders[physicalColumn] = columnTitle;\n      }\n\n      return acc;\n    }, []);\n\n    return changedColumns;\n  }\n\n  /**\n   * Clear cache of calculated column widths. If you want to clear only selected columns pass an array with their indexes.\n   * Otherwise whole cache will be cleared.\n   *\n   * @param {Array} [columns=[]] List of column indexes (physical indexes) to clear.\n   */\n  clearCache(columns = []) {\n    if (columns.length) {\n      arrayEach(columns, (physicalIndex) => {\n        this.widths[physicalIndex] = void 0;\n      });\n    } else {\n      this.widths.length = 0;\n    }\n  }\n\n  /**\n   * Check if all widths were calculated. If not then return `true` (need recalculate).\n   *\n   * @returns {Boolean}\n   */\n  isNeedRecalculate() {\n    return !!arrayFilter(this.widths, (item) => (item === void 0)).length;\n  }\n\n  /**\n   * On before render listener.\n   *\n   * @private\n   */\n  onBeforeRender() {\n    const force = this.hot.renderCall;\n    const rowsCount = this.hot.countRows();\n\n    // Keep last column widths unchanged for situation when all rows was deleted or trimmed (pro #6)\n    if (!rowsCount) {\n      return;\n    }\n\n    this.calculateColumnsWidth({from: this.getFirstVisibleColumn(), to: this.getLastVisibleColumn()}, void 0, force);\n\n    if (this.isNeedRecalculate() && !this.inProgress) {\n      this.calculateAllColumnsWidth();\n    }\n  }\n\n  /**\n   * On after load data listener.\n   *\n   * @private\n   */\n  onAfterLoadData() {\n    if (this.hot.view) {\n      this.recalculateAllColumnsWidth();\n    } else {\n      // first load - initialization\n      setTimeout(() => {\n        if (this.hot) {\n          this.recalculateAllColumnsWidth();\n        }\n      }, 0);\n    }\n  }\n\n  /**\n   * On before change listener.\n   *\n   * @private\n   * @param {Array} changes\n   */\n  onBeforeChange(changes) {\n    const changedColumns = arrayMap(changes, ([row, column]) => this.hot.propToCol(column));\n\n    this.clearCache(changedColumns);\n  }\n\n  /**\n   * On before column resize listener.\n   *\n   * @private\n   * @param {Number} col\n   * @param {Number} size\n   * @param {Boolean} isDblClick\n   * @returns {Number}\n   */\n  onBeforeColumnResize(col, size, isDblClick) {\n    if (isDblClick) {\n      this.calculateColumnsWidth(col, void 0, true);\n      size = this.getColumnWidth(col, void 0, false);\n    }\n\n    return size;\n  }\n\n  /**\n   * On after Handsontable init fill plugin with all necessary values.\n   *\n   * @private\n   */\n  onAfterInit() {\n    privatePool.get(this).cachedColumnHeaders = this.hot.getColHeader();\n  }\n\n  /**\n   * Destroy plugin instance.\n   */\n  destroy() {\n    this.ghostTable.clean();\n    super.destroy();\n  }\n}\n\nregisterPlugin('autoColumnSize', AutoColumnSize);\n\nexport default AutoColumnSize;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/autoColumnSize/autoColumnSize.js","import moment from 'moment';\nimport {\n  addClass,\n  hasClass,\n  removeClass,\n} from './../../helpers/dom/element';\nimport {arrayMap, arrayReduce} from './../../helpers/array';\nimport {isEmpty} from './../../helpers/mixed';\nimport {hasOwnProperty} from './../../helpers/object';\nimport BasePlugin from './../_base';\nimport {registerPlugin} from './../../plugins';\nimport mergeSort from './../../utils/sortingAlgorithms/mergeSort';\nimport Hooks from './../../pluginHooks';\n\nHooks.getSingleton().register('beforeColumnSort');\nHooks.getSingleton().register('afterColumnSort');\n\n// TODO: Implement mixin arrayMapper to ColumnSorting plugin.\n\n/**\n * @plugin ColumnSorting\n *\n * @description\n * This plugin sorts the view by a column (but does not sort the data source!).\n * To enable the plugin, set the `columnSorting` property to either:\n * * a boolean value (`true`/`false`),\n * * an object defining the initial sorting order (see the example below).\n *\n * @example\n * ```js\n * ...\n * // as boolean\n * columnSorting: true\n * ...\n * // as a object with initial order (sort ascending column at index 2)\n * columnSorting: {\n *  column: 2,\n *  sortOrder: true, // true = ascending, false = descending, undefined = original order\n *  sortEmptyCells: true // true = the table sorts empty cells, false = the table moves all empty cells to the end of the table\n * }\n * ...\n * ```\n * @dependencies ObserveChanges\n */\nclass ColumnSorting extends BasePlugin {\n\n  constructor(hotInstance) {\n    super(hotInstance);\n    this.sortIndicators = [];\n    this.lastSortedColumn = null;\n    this.sortEmptyCells = false;\n  }\n\n  /**\n   * Check if the plugin is enabled in the handsontable settings.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return !!(this.hot.getSettings().columnSorting);\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n\n    this.setPluginOptions();\n\n    const _this = this;\n    this.hot.sortIndex = [];\n\n    this.hot.sort = function() {\n      let args = Array.prototype.slice.call(arguments);\n\n      return _this.sortByColumn(...args);\n    };\n\n    if (typeof this.hot.getSettings().observeChanges === 'undefined') {\n      this.enableObserveChangesPlugin();\n    }\n\n    this.addHook('afterTrimRow', (row) => this.sort());\n    this.addHook('afterUntrimRow', (row) => this.sort());\n    this.addHook('modifyRow', (row) => this.translateRow(row));\n    this.addHook('unmodifyRow', (row) => this.untranslateRow(row));\n    this.addHook('afterUpdateSettings', () => this.onAfterUpdateSettings());\n    this.addHook('afterGetColHeader', (col, TH) => this.getColHeader(col, TH));\n    this.addHook('afterOnCellMouseDown', (event, target) => this.onAfterOnCellMouseDown(event, target));\n    this.addHook('afterCreateRow', function() {\n      _this.afterCreateRow(...arguments);\n    });\n    this.addHook('afterRemoveRow', function() {\n      _this.afterRemoveRow(...arguments);\n    });\n    this.addHook('afterInit', () => this.sortBySettings());\n    this.addHook('afterLoadData', () => {\n      this.hot.sortIndex = [];\n\n      if (this.hot.view) {\n        this.sortBySettings();\n      }\n    });\n    if (this.hot.view) {\n      this.sortBySettings();\n    }\n    super.enablePlugin();\n  }\n\n  /**\n   * Disable plugin for this Handsontable instance.\n   */\n  disablePlugin() {\n    this.hot.sort = void 0;\n    super.disablePlugin();\n  }\n\n  /**\n   * afterUpdateSettings callback.\n   *\n   * @private\n   */\n  onAfterUpdateSettings() {\n    this.sortBySettings();\n  }\n\n  sortBySettings() {\n    let sortingSettings = this.hot.getSettings().columnSorting;\n    let loadedSortingState = this.loadSortingState();\n    let sortingColumn;\n    let sortingOrder;\n\n    if (typeof loadedSortingState === 'undefined') {\n      sortingColumn = sortingSettings.column;\n      sortingOrder = sortingSettings.sortOrder;\n    } else {\n      sortingColumn = loadedSortingState.sortColumn;\n      sortingOrder = loadedSortingState.sortOrder;\n    }\n    if (typeof sortingColumn === 'number') {\n      this.lastSortedColumn = sortingColumn;\n      this.sortByColumn(sortingColumn, sortingOrder);\n    }\n  }\n\n  /**\n   * Set sorted column and order info\n   *\n   * @param {number} col Sorted column index.\n   * @param {boolean|undefined} order Sorting order (`true` for ascending, `false` for descending).\n   */\n  setSortingColumn(col, order) {\n    if (typeof col == 'undefined') {\n      this.hot.sortColumn = void 0;\n      this.hot.sortOrder = void 0;\n\n      return;\n    } else if (this.hot.sortColumn === col && typeof order == 'undefined') {\n      if (this.hot.sortOrder === false) {\n        this.hot.sortOrder = void 0;\n      } else {\n        this.hot.sortOrder = !this.hot.sortOrder;\n      }\n\n    } else {\n      this.hot.sortOrder = typeof order === 'undefined' ? true : order;\n    }\n\n    this.hot.sortColumn = col;\n  }\n\n  sortByColumn(col, order) {\n    this.setSortingColumn(col, order);\n\n    if (typeof this.hot.sortColumn == 'undefined') {\n      return;\n    }\n\n    let allowSorting = this.hot.runHooks('beforeColumnSort', this.hot.sortColumn, this.hot.sortOrder);\n\n    if (allowSorting !== false) {\n      this.sort();\n    }\n    this.updateOrderClass();\n    this.updateSortIndicator();\n\n    this.hot.runHooks('afterColumnSort', this.hot.sortColumn, this.hot.sortOrder);\n\n    this.hot.render();\n    this.saveSortingState();\n  }\n\n  /**\n   * Save the sorting state\n   */\n  saveSortingState() {\n    let sortingState = {};\n\n    if (typeof this.hot.sortColumn != 'undefined') {\n      sortingState.sortColumn = this.hot.sortColumn;\n    }\n\n    if (typeof this.hot.sortOrder != 'undefined') {\n      sortingState.sortOrder = this.hot.sortOrder;\n    }\n\n    if (hasOwnProperty(sortingState, 'sortColumn') || hasOwnProperty(sortingState, 'sortOrder')) {\n      this.hot.runHooks('persistentStateSave', 'columnSorting', sortingState);\n    }\n\n  }\n\n  /**\n   * Load the sorting state.\n   *\n   * @returns {*} Previously saved sorting state.\n   */\n  loadSortingState() {\n    let storedState = {};\n    this.hot.runHooks('persistentStateLoad', 'columnSorting', storedState);\n\n    return storedState.value;\n  }\n\n  /**\n   * Update sorting class name state.\n   */\n  updateOrderClass() {\n    let orderClass;\n\n    if (this.hot.sortOrder === true) {\n      orderClass = 'ascending';\n\n    } else if (this.hot.sortOrder === false) {\n      orderClass = 'descending';\n    }\n    this.sortOrderClass = orderClass;\n  }\n\n  enableObserveChangesPlugin() {\n    let _this = this;\n\n    this.hot._registerTimeout(\n      setTimeout(() => {\n        _this.hot.updateSettings({\n          observeChanges: true\n        });\n      }, 0));\n  }\n\n  /**\n   * Default sorting algorithm.\n   *\n   * @param {Boolean} sortOrder Sorting order - `true` for ascending, `false` for descending.\n   * @param {Object} columnMeta Column meta object.\n   * @returns {Function} The comparing function.\n   */\n  defaultSort(sortOrder, columnMeta) {\n    return function(a, b) {\n      if (typeof a[1] == 'string') {\n        a[1] = a[1].toLowerCase();\n      }\n      if (typeof b[1] == 'string') {\n        b[1] = b[1].toLowerCase();\n      }\n\n      if (a[1] === b[1]) {\n        return 0;\n      }\n\n      if (isEmpty(a[1])) {\n        if (isEmpty(b[1])) {\n          return 0;\n        }\n\n        if (columnMeta.columnSorting.sortEmptyCells) {\n          return sortOrder ? -1 : 1;\n        }\n\n        return 1;\n      }\n      if (isEmpty(b[1])) {\n        if (isEmpty(a[1])) {\n          return 0;\n        }\n\n        if (columnMeta.columnSorting.sortEmptyCells) {\n          return sortOrder ? 1 : -1;\n        }\n\n        return -1;\n      }\n\n      if (isNaN(a[1]) && !isNaN(b[1])) {\n        return sortOrder ? 1 : -1;\n\n      } else if (!isNaN(a[1]) && isNaN(b[1])) {\n        return sortOrder ? -1 : 1;\n\n      } else if (!(isNaN(a[1]) || isNaN(b[1]))) {\n        a[1] = parseFloat(a[1]);\n        b[1] = parseFloat(b[1]);\n      }\n      if (a[1] < b[1]) {\n        return sortOrder ? -1 : 1;\n      }\n      if (a[1] > b[1]) {\n        return sortOrder ? 1 : -1;\n      }\n\n      return 0;\n    };\n  }\n\n  /**\n   * Date sorting algorithm\n   * @param {Boolean} sortOrder Sorting order (`true` for ascending, `false` for descending).\n   * @param {Object} columnMeta Column meta object.\n   * @returns {Function} The compare function.\n   */\n  dateSort(sortOrder, columnMeta) {\n    return function(a, b) {\n      if (a[1] === b[1]) {\n        return 0;\n      }\n\n      if (isEmpty(a[1])) {\n        if (isEmpty(b[1])) {\n          return 0;\n        }\n\n        if (columnMeta.columnSorting.sortEmptyCells) {\n          return sortOrder ? -1 : 1;\n        }\n\n        return 1;\n      }\n\n      if (isEmpty(b[1])) {\n        if (isEmpty(a[1])) {\n          return 0;\n        }\n\n        if (columnMeta.columnSorting.sortEmptyCells) {\n          return sortOrder ? 1 : -1;\n        }\n\n        return -1;\n      }\n\n      var aDate = moment(a[1], columnMeta.dateFormat);\n      var bDate = moment(b[1], columnMeta.dateFormat);\n\n      if (!aDate.isValid()) {\n        return 1;\n      }\n      if (!bDate.isValid()) {\n        return -1;\n      }\n\n      if (bDate.isAfter(aDate)) {\n        return sortOrder ? -1 : 1;\n      }\n      if (bDate.isBefore(aDate)) {\n        return sortOrder ? 1 : -1;\n      }\n\n      return 0;\n    };\n  }\n\n  /**\n   * Numeric sorting algorithm.\n   *\n   * @param {Boolean} sortOrder Sorting order (`true` for ascending, `false` for descending).\n   * @param {Object} columnMeta Column meta object.\n   * @returns {Function} The compare function.\n   */\n  numericSort(sortOrder, columnMeta) {\n    return function(a, b) {\n      const parsedA = parseFloat(a[1]);\n      const parsedB = parseFloat(b[1]);\n\n      // Watch out when changing this part of code!\n      // Check below returns 0 (as expected) when comparing empty string, null, undefined\n      if (parsedA === parsedB || (isNaN(parsedA) && isNaN(parsedB))) {\n        return 0;\n      }\n\n      if (columnMeta.columnSorting.sortEmptyCells) {\n        if (isEmpty(a[1])) {\n          return sortOrder ? -1 : 1;\n        }\n\n        if (isEmpty(b[1])) {\n          return sortOrder ? 1 : -1;\n        }\n      }\n\n      if (isNaN(parsedA)) {\n        return 1;\n      }\n\n      if (isNaN(parsedB)) {\n        return -1;\n      }\n\n      if (parsedA < parsedB) {\n        return sortOrder ? -1 : 1;\n\n      } else if (parsedA > parsedB) {\n        return sortOrder ? 1 : -1;\n      }\n\n      return 0;\n    };\n  }\n\n  /**\n   * Perform the sorting.\n   */\n  sort() {\n    if (typeof this.hot.sortOrder == 'undefined') {\n      this.hot.sortIndex.length = 0;\n\n      return;\n    }\n\n    const colMeta = this.hot.getCellMeta(0, this.hot.sortColumn);\n    const emptyRows = this.hot.countEmptyRows();\n    let sortFunction;\n    let nrOfRows;\n\n    this.hot.sortingEnabled = false; // this is required by translateRow plugin hook\n    this.hot.sortIndex.length = 0;\n\n    if (typeof colMeta.columnSorting.sortEmptyCells === 'undefined') {\n      colMeta.columnSorting = {sortEmptyCells: this.sortEmptyCells};\n    }\n\n    if (this.hot.getSettings().maxRows === Number.POSITIVE_INFINITY) {\n      nrOfRows = this.hot.countRows() - this.hot.getSettings().minSpareRows;\n    } else {\n      nrOfRows = this.hot.countRows() - emptyRows;\n    }\n\n    for (let i = 0, ilen = nrOfRows; i < ilen; i++) {\n      this.hot.sortIndex.push([i, this.hot.getDataAtCell(i, this.hot.sortColumn)]);\n    }\n\n    if (colMeta.sortFunction) {\n      sortFunction = colMeta.sortFunction;\n\n    } else {\n      switch (colMeta.type) {\n        case 'date':\n          sortFunction = this.dateSort;\n          break;\n        case 'numeric':\n          sortFunction = this.numericSort;\n          break;\n        default:\n          sortFunction = this.defaultSort;\n      }\n    }\n\n    mergeSort(this.hot.sortIndex, sortFunction(this.hot.sortOrder, colMeta));\n\n    // Append spareRows\n    for (let i = this.hot.sortIndex.length; i < this.hot.countRows(); i++) {\n      this.hot.sortIndex.push([i, this.hot.getDataAtCell(i, this.hot.sortColumn)]);\n    }\n\n    this.hot.sortingEnabled = true; // this is required by translateRow plugin hook\n  }\n\n  /**\n   * Update indicator states.\n   */\n  updateSortIndicator() {\n    if (typeof this.hot.sortOrder == 'undefined') {\n      return;\n    }\n    const colMeta = this.hot.getCellMeta(0, this.hot.sortColumn);\n\n    this.sortIndicators[this.hot.sortColumn] = colMeta.sortIndicator;\n  }\n\n  /**\n   * `modifyRow` hook callback. Translates physical row index to the sorted row index.\n   *\n   * @param {Number} row Row index.\n   * @returns {Number} Sorted row index.\n   */\n  translateRow(row) {\n    if (this.hot.sortingEnabled && (typeof this.hot.sortOrder !== 'undefined') && this.hot.sortIndex && this.hot.sortIndex.length && this.hot.sortIndex[row]) {\n      return this.hot.sortIndex[row][0];\n    }\n\n    return row;\n  }\n\n  /**\n   * Translates sorted row index to physical row index.\n   *\n   * @param {Number} row Sorted row index.\n   * @returns {number} Physical row index.\n   */\n  untranslateRow(row) {\n    if (this.hot.sortingEnabled && this.hot.sortIndex && this.hot.sortIndex.length) {\n      for (var i = 0; i < this.hot.sortIndex.length; i++) {\n        if (this.hot.sortIndex[i][0] == row) {\n          return i;\n        }\n      }\n    }\n  }\n\n  /**\n   * `afterGetColHeader` callback. Adds column sorting css classes to clickable headers.\n   *\n   * @private\n   * @param {Number} col Column index.\n   * @param {Element} TH TH HTML element.\n   */\n  getColHeader(col, TH) {\n    if (col < 0 || !TH.parentNode) {\n      return false;\n    }\n\n    let headerLink = TH.querySelector('.colHeader');\n    let colspan = TH.getAttribute('colspan');\n    let TRs = TH.parentNode.parentNode.childNodes;\n    let headerLevel = Array.prototype.indexOf.call(TRs, TH.parentNode);\n    headerLevel -= TRs.length;\n\n    if (!headerLink) {\n      return;\n    }\n\n    if (this.hot.getSettings().columnSorting && col >= 0 && headerLevel === -1) {\n      addClass(headerLink, 'columnSorting');\n    }\n    removeClass(headerLink, 'descending');\n    removeClass(headerLink, 'ascending');\n\n    if (this.sortIndicators[col]) {\n      if (col === this.hot.sortColumn) {\n        if (this.sortOrderClass === 'ascending') {\n          addClass(headerLink, 'ascending');\n\n        } else if (this.sortOrderClass === 'descending') {\n          addClass(headerLink, 'descending');\n        }\n      }\n    }\n  }\n\n  /**\n   * Check if any column is in a sorted state.\n   *\n   * @returns {Boolean}\n   */\n  isSorted() {\n    return typeof this.hot.sortColumn != 'undefined';\n  }\n\n  /**\n   * `afterCreateRow` callback. Updates the sorting state after a row have been created.\n   *\n   * @private\n   * @param {Number} index\n   * @param {Number} amount\n   */\n  afterCreateRow(index, amount) {\n    if (!this.isSorted()) {\n      return;\n    }\n\n    for (let i = 0; i < this.hot.sortIndex.length; i++) {\n      if (this.hot.sortIndex[i][0] >= index) {\n        this.hot.sortIndex[i][0] += amount;\n      }\n    }\n\n    for (let i = 0; i < amount; i++) {\n      this.hot.sortIndex.splice(index + i, 0, [index + i, this.hot.getSourceData()[index + i][this.hot.sortColumn + this.hot.colOffset()]]);\n    }\n\n    this.saveSortingState();\n  }\n\n  /**\n   * `afterRemoveRow` hook callback.\n   *\n   * @private\n   * @param {Number} index\n   * @param {Number} amount\n   */\n  afterRemoveRow(index, amount) {\n    if (!this.isSorted()) {\n      return;\n    }\n    let removedRows = this.hot.sortIndex.splice(index, amount);\n\n    removedRows = arrayMap(removedRows, (row) => row[0]);\n\n    function countRowShift(logicalRow) {\n      // Todo: compare perf between reduce vs sort->each->brake\n      return arrayReduce(removedRows, (count, removedLogicalRow) => {\n        if (logicalRow > removedLogicalRow) {\n          count++;\n        }\n\n        return count;\n      }, 0);\n    }\n\n    this.hot.sortIndex = arrayMap(this.hot.sortIndex, (logicalRow, physicalRow) => {\n      let rowShift = countRowShift(logicalRow[0]);\n\n      if (rowShift) {\n        logicalRow[0] -= rowShift;\n      }\n\n      return logicalRow;\n    });\n\n    this.saveSortingState();\n  }\n\n  /**\n   * Set options by passed settings\n   *\n   * @private\n   */\n  setPluginOptions() {\n    const columnSorting = this.hot.getSettings().columnSorting;\n\n    if (typeof columnSorting === 'object') {\n      this.sortEmptyCells = columnSorting.sortEmptyCells || false;\n\n    } else {\n      this.sortEmptyCells = false;\n    }\n  }\n\n  /**\n   * `onAfterOnCellMouseDown` hook callback.\n   *\n   * @private\n   * @param {Event} event Event which are provided by hook.\n   * @param {CellCoords} coords Coords of the selected cell.\n   */\n  onAfterOnCellMouseDown(event, coords) {\n    if (coords.row > -1) {\n      return;\n    }\n\n    if (hasClass(event.realTarget, 'columnSorting')) {\n      // reset order state on every new column header click\n      if (coords.col !== this.lastSortedColumn) {\n        this.hot.sortOrder = true;\n      }\n\n      this.lastSortedColumn = coords.col;\n\n      this.sortByColumn(coords.col);\n    }\n  }\n}\n\nregisterPlugin('columnSorting', ColumnSorting);\n\nexport default ColumnSorting;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/columnSorting/columnSorting.js","import {addClass} from './../../helpers/dom/element';\n\n/**\n * Comment editor for the Comments plugin.\n *\n * @class CommentEditor\n * @plugin Comments\n */\nclass CommentEditor {\n  static get CLASS_EDITOR_CONTAINER() {\n    return 'htCommentsContainer';\n  }\n\n  static get CLASS_EDITOR() {\n    return 'htComments';\n  }\n\n  static get CLASS_INPUT() {\n    return 'htCommentTextArea';\n  }\n\n  static get CLASS_CELL() {\n    return 'htCommentCell';\n  }\n\n  constructor() {\n    this.editor = this.createEditor();\n    this.editorStyle = this.editor.style;\n\n    this.hidden = true;\n\n    this.hide();\n  }\n\n  /**\n   * Set position of the comments editor according to the  provided x and y coordinates.\n   *\n   * @param {Number} x X position (in pixels).\n   * @param {Number} y Y position (in pixels).\n   */\n  setPosition(x, y) {\n    this.editorStyle.left = `${x}px`;\n    this.editorStyle.top = `${y}px`;\n  }\n\n  /**\n   * Set the editor size according to the provided arguments.\n   *\n   * @param {Number} width Width in pixels.\n   * @param {Number} height Height in pixels.\n   */\n  setSize(width, height) {\n    if (width && height) {\n      const input = this.getInputElement();\n\n      input.style.width = `${width}px`;\n      input.style.height = `${height}px`;\n    }\n  }\n\n  /**\n   * Reset the editor size to its initial state.\n   */\n  resetSize() {\n    const input = this.getInputElement();\n\n    input.style.width = '';\n    input.style.height = '';\n  }\n\n  /**\n   * Set the read-only state for the comments editor.\n   *\n   * @param {Boolean} state The new read only state.\n   */\n  setReadOnlyState(state) {\n    const input = this.getInputElement();\n\n    input.readOnly = state;\n  }\n\n  /**\n   * Show the comments editor.\n   */\n  show() {\n    this.editorStyle.display = 'block';\n    this.hidden = false;\n  }\n\n  /**\n   * Hide the comments editor.\n   */\n  hide() {\n    this.editorStyle.display = 'none';\n    this.hidden = true;\n  }\n\n  /**\n   * Checks if the editor is visible.\n   *\n   * @returns {Boolean}\n   */\n  isVisible() {\n    return this.editorStyle.display === 'block';\n  }\n\n  /**\n   * Set the comment value.\n   *\n   * @param {String} [value] The value to use.\n   */\n  setValue(value = '') {\n    value = value || '';\n    this.getInputElement().value = value;\n  }\n\n  /**\n   * Get the comment value.\n   *\n   * @returns {String}\n   */\n  getValue() {\n    return this.getInputElement().value;\n  }\n\n  /**\n   * Checks if the comment input element is focused.\n   *\n   * @returns {Boolean}\n   */\n  isFocused() {\n    return document.activeElement === this.getInputElement();\n  }\n\n  /**\n   * Focus the comments input element.\n   */\n  focus() {\n    this.getInputElement().focus();\n  }\n\n  /**\n   * Create the `textarea` to be used as a comments editor.\n   *\n   * @returns {HTMLElement}\n   */\n  createEditor() {\n    let container = document.querySelector(`.${CommentEditor.CLASS_EDITOR_CONTAINER}`);\n    let editor;\n    let textArea;\n\n    if (!container) {\n      container = document.createElement('div');\n      addClass(container, CommentEditor.CLASS_EDITOR_CONTAINER);\n      document.body.appendChild(container);\n    }\n    editor = document.createElement('div');\n    addClass(editor, CommentEditor.CLASS_EDITOR);\n\n    textArea = document.createElement('textarea');\n    addClass(textArea, CommentEditor.CLASS_INPUT);\n\n    editor.appendChild(textArea);\n    container.appendChild(editor);\n\n    return editor;\n  }\n\n  /**\n   * Get the input element.\n   *\n   * @returns {HTMLElement}\n   */\n  getInputElement() {\n    return this.editor.querySelector(`.${CommentEditor.CLASS_INPUT}`);\n  }\n\n  /**\n   * Destroy the comments editor.\n   */\n  destroy() {\n    this.editor.parentNode.removeChild(this.editor);\n    this.editor = null;\n    this.editorStyle = null;\n  }\n}\n\nexport default CommentEditor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/comments/commentEditor.js","import {\n  addClass,\n  closest,\n  isChildOf,\n  hasClass,\n  offset,\n  outerWidth,\n  outerHeight,\n  getScrollableElement\n} from './../../helpers/dom/element';\nimport {\n  deepClone, deepExtend\n} from './../../helpers/object';\nimport {\n  debounce\n} from './../../helpers/function';\nimport EventManager from './../../eventManager';\nimport {CellCoords} from './../../3rdparty/walkontable/src';\nimport {registerPlugin, getPlugin} from './../../plugins';\nimport BasePlugin from './../_base';\nimport CommentEditor from './commentEditor';\nimport {checkSelectionConsistency, markLabelAsSelected} from './../contextMenu/utils';\n\nimport './comments.css';\n\nconst privatePool = new WeakMap();\nconst META_COMMENT = 'comment';\nconst META_COMMENT_VALUE = 'value';\nconst META_STYLE = 'style';\nconst META_READONLY = 'readOnly';\n\n/**\n * @plugin Comments\n *\n * @description\n * This plugin allows setting and managing cell comments by either an option in the context menu or with the use of the API.\n *\n * To enable the plugin, you'll need to set the comments property of the config object to `true`:\n * ```js\n * ...\n * comments: true\n * ...\n * ```\n *\n * To add comments at the table initialization, define the `comment` property in the `cell` config array as in an example below.\n *\n * @example\n *\n * ```js\n * ...\n * var hot = new Handsontable(document.getElementById('example'), {\n *   date: getData(),\n *   comments: true,\n *   cell: [\n *     {row: 1, col: 1, comment: {value: 'Foo'}},\n *     {row: 2, col: 2, comment: {value: 'Bar'}}\n *   ]\n * });\n *\n * // Access to the Comments plugin instance:\n * var commentsPlugin = hot.getPlugin('comments');\n *\n * // Manage comments programmatically:\n * commentsPlugin.editor.setCommentAtCell(1, 6, 'Comment contents');\n * commentsPlugin.showAtCell(1, 6);\n * commentsPlugin.removeCommentAtCell(1, 6);\n *\n * // You can also set range once and use proper methods:\n * commentsPlugin.setRange({row: 1, col: 6});\n * commentsPlugin.setComment('Comment contents');\n * commentsPlugin.show();\n * commentsPlugin.removeComment();\n * ...\n * ```\n */\nclass Comments extends BasePlugin {\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * Instance of {@link CommentEditor}.\n     *\n     * @type {CommentEditor}\n     */\n    this.editor = null;\n    /**\n     * Instance of {@link EventManager}.\n     *\n     * @private\n     * @type {EventManager}\n     */\n    this.eventManager = null;\n    /**\n     * Current cell range.\n     *\n     * @type {Object}\n     */\n    this.range = {};\n    /**\n     * @private\n     * @type {Boolean}\n     */\n    this.mouseDown = false;\n    /**\n     * @private\n     * @type {Boolean}\n     */\n    this.contextMenuEvent = false;\n    /**\n     * @private\n     * @type {*}\n     */\n    this.timer = null;\n    /**\n     * Delay used when showing/hiding the comments (in milliseconds).\n     *\n     * @type {Number}\n     */\n    this.displayDelay = 250;\n\n    privatePool.set(this, {\n      tempEditorDimensions: {},\n      cellBelowCursor: null\n    });\n  }\n\n  /**\n   * Check if the plugin is enabled in the Handsontable settings.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings().comments;\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n\n    if (!this.editor) {\n      this.editor = new CommentEditor();\n    }\n\n    if (!this.eventManager) {\n      this.eventManager = new EventManager(this);\n    }\n\n    this.addHook('afterContextMenuDefaultOptions', (options) => this.addToContextMenu(options));\n    this.addHook('afterRenderer', (TD, row, col, prop, value, cellProperties) => this.onAfterRenderer(TD, cellProperties));\n    this.addHook('afterScrollHorizontally', () => this.hide());\n    this.addHook('afterScrollVertically', () => this.hide());\n\n    this.addHook('afterBeginEditing', (args) => this.onAfterBeginEditing(args));\n\n    this.registerListeners();\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Disable plugin for this Handsontable instance.\n   */\n  disablePlugin() {\n    super.disablePlugin();\n  }\n\n  /**\n   * Register all necessary DOM listeners.\n   *\n   * @private\n   */\n  registerListeners() {\n    this.eventManager.addEventListener(document, 'mouseover', (event) => this.onMouseOver(event));\n    this.eventManager.addEventListener(document, 'mousedown', (event) => this.onMouseDown(event));\n    this.eventManager.addEventListener(document, 'mouseup', (event) => this.onMouseUp(event));\n    this.eventManager.addEventListener(this.editor.getInputElement(), 'blur', (event) => this.onEditorBlur(event));\n    this.eventManager.addEventListener(this.editor.getInputElement(), 'mousedown', (event) => this.onEditorMouseDown(event));\n    this.eventManager.addEventListener(this.editor.getInputElement(), 'mouseup', (event) => this.onEditorMouseUp(event));\n  }\n\n  /**\n   * Set current cell range to be able to use general methods like {@link Comments#setComment},\n   * {@link Comments#removeComment}, {@link Comments#show}.\n   *\n   * @param {Object} range Object with `from` and `to` properties, each with `row` and `col` properties.\n   */\n  setRange(range) {\n    this.range = range;\n  }\n\n  /**\n   * Clear the currently selected cell.\n   */\n  clearRange() {\n    this.range = {};\n  }\n\n  /**\n   * Check if the event target is a cell containing a comment.\n   *\n   * @param {Event} event DOM event\n   * @returns {Boolean}\n   */\n  targetIsCellWithComment(event) {\n    const closestCell = closest(event.target, 'TD', 'TBODY');\n\n    return !!(closestCell && hasClass(closestCell, 'htCommentCell') && closest(closestCell, [this.hot.rootElement]));\n  }\n\n  /**\n   * Check if the event target is a comment textarea.\n   *\n   * @param {Event} event DOM event.\n   * @returns {Boolean}\n   */\n  targetIsCommentTextArea(event) {\n    return this.editor.getInputElement() === event.target;\n  }\n\n  /**\n   * Set a comment for a cell according to the previously set range (see {@link Comments#setRange}).\n   *\n   * @param {String} value Comment contents.\n   */\n  setComment(value) {\n    if (!this.range.from) {\n      throw new Error('Before using this method, first set cell range (hot.getPlugin(\"comment\").setRange())');\n    }\n    const editorValue = this.editor.getValue();\n    let comment = '';\n\n    if (value != null) {\n      comment = value;\n    } else if (editorValue != null) {\n      comment = editorValue;\n    }\n\n    let row = this.range.from.row;\n    let col = this.range.from.col;\n\n    this.updateCommentMeta(row, col, {[META_COMMENT_VALUE]: comment});\n    this.hot.render();\n  }\n\n  /**\n   * Set a comment for a cell.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {String} value Comment contents.\n   */\n  setCommentAtCell(row, col, value) {\n    this.setRange({\n      from: new CellCoords(row, col)\n    });\n    this.setComment(value);\n  }\n\n  /**\n   * Remove a comment from a cell according to previously set range (see {@link Comments#setRange}).\n   *\n   * @param {Boolean} [forceRender = true] If set to `true`, the table will be re-rendered at the end of the operation.\n   */\n  removeComment(forceRender = true) {\n    if (!this.range.from) {\n      throw new Error('Before using this method, first set cell range (hot.getPlugin(\"comment\").setRange())');\n    }\n\n    this.hot.setCellMeta(this.range.from.row, this.range.from.col, META_COMMENT, void 0);\n\n    if (forceRender) {\n      this.hot.render();\n    }\n\n    this.hide();\n  }\n\n  /**\n   * Remove comment from a cell.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {Boolean} [forceRender = true] If `true`, the table will be re-rendered at the end of the operation.\n   */\n  removeCommentAtCell(row, col, forceRender = true) {\n    this.setRange({\n      from: new CellCoords(row, col)\n    });\n    this.removeComment(forceRender);\n  }\n\n  /**\n   * Get comment from a cell at the predefined range.\n   */\n  getComment() {\n    const row = this.range.from.row;\n    const column = this.range.from.col;\n\n    return this.getCommentMeta(row, column, META_COMMENT_VALUE);\n  }\n\n  /**\n   * Get comment from a cell at the provided coordinates.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   */\n  getCommentAtCell(row, column) {\n    return this.getCommentMeta(row, column, META_COMMENT_VALUE);\n  }\n\n  /**\n   * Show the comment editor accordingly to the previously set range (see {@link Comments#setRange}).\n   *\n   * @returns {Boolean} Returns `true` if comment editor was shown.\n   */\n  show() {\n    if (!this.range.from) {\n      throw new Error('Before using this method, first set cell range (hot.getPlugin(\"comment\").setRange())');\n    }\n    let meta = this.hot.getCellMeta(this.range.from.row, this.range.from.col);\n\n    this.refreshEditor(true);\n    this.editor.setValue(meta[META_COMMENT] ? meta[META_COMMENT][META_COMMENT_VALUE] : null || '');\n\n    if (this.editor.hidden) {\n      this.editor.show();\n    }\n\n    return true;\n  }\n\n  /**\n   * Show comment editor according to cell coordinates.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @returns {Boolean} Returns `true` if comment editor was shown.\n   */\n  showAtCell(row, col) {\n    this.setRange({\n      from: new CellCoords(row, col)\n    });\n\n    return this.show();\n  }\n\n  /**\n   * Hide the comment editor.\n   */\n  hide() {\n    if (!this.editor.hidden) {\n      this.editor.hide();\n    }\n  }\n\n  /**\n   * Refresh comment editor position and styling.\n   *\n   * @param {Boolean} [force=false] If `true` then recalculation will be forced.\n   */\n  refreshEditor(force = false) {\n    if (!force && (!this.range.from || !this.editor.isVisible())) {\n      return;\n    }\n    const scrollableElement = getScrollableElement(this.hot.view.wt.wtTable.TABLE);\n    const TD = this.hot.view.wt.wtTable.getCell(this.range.from);\n    const row = this.range.from.row;\n    const column = this.range.from.col;\n    let cellOffset = offset(TD);\n    let lastColWidth = this.hot.view.wt.wtTable.getStretchedColumnWidth(column);\n    let cellTopOffset = cellOffset.top < 0 ? 0 : cellOffset.top;\n    let cellLeftOffset = cellOffset.left;\n\n    if (this.hot.view.wt.wtViewport.hasVerticalScroll() && scrollableElement !== window) {\n      cellTopOffset -= this.hot.view.wt.wtOverlays.topOverlay.getScrollPosition();\n    }\n\n    if (this.hot.view.wt.wtViewport.hasHorizontalScroll() && scrollableElement !== window) {\n      cellLeftOffset -= this.hot.view.wt.wtOverlays.leftOverlay.getScrollPosition();\n    }\n\n    let x = cellLeftOffset + lastColWidth;\n    let y = cellTopOffset;\n\n    const commentStyle = this.getCommentMeta(row, column, META_STYLE);\n    const readOnly = this.getCommentMeta(row, column, META_READONLY);\n\n    if (commentStyle) {\n      this.editor.setSize(commentStyle.width, commentStyle.height);\n    } else {\n      this.editor.resetSize();\n    }\n\n    this.editor.setReadOnlyState(readOnly);\n\n    this.editor.setPosition(x, y);\n  }\n\n  /**\n   * Check if there is a comment for selected range.\n   *\n   * @private\n   * @returns {Boolean}\n   */\n  checkSelectionCommentsConsistency() {\n    const selected = this.hot.getSelectedRange();\n\n    if (!selected) {\n      return false;\n    }\n    let hasComment = false;\n    let cell = selected.from; // IN EXCEL THERE IS COMMENT ONLY FOR TOP LEFT CELL IN SELECTION\n\n    if (this.getCommentMeta(cell.row, cell.col, META_COMMENT_VALUE)) {\n      hasComment = true;\n    }\n\n    return hasComment;\n  }\n\n  /**\n   * Set or update the comment-related cell meta.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @param {Object} metaObject Object defining all the comment-related meta information.\n   */\n  updateCommentMeta(row, column, metaObject) {\n    const oldComment = this.hot.getCellMeta(row, column)[META_COMMENT];\n    let newComment;\n\n    if (oldComment) {\n      newComment = deepClone(oldComment);\n      deepExtend(newComment, metaObject);\n    } else {\n      newComment = metaObject;\n    }\n\n    this.hot.setCellMeta(row, column, META_COMMENT, newComment);\n  }\n\n  /**\n   * Get the comment related meta information.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @param {String} property Cell meta property.\n   * @returns {Mixed}\n   */\n  getCommentMeta(row, column, property) {\n    const cellMeta = this.hot.getCellMeta(row, column);\n\n    if (!cellMeta[META_COMMENT]) {\n      return void 0;\n    }\n\n    return cellMeta[META_COMMENT][property];\n  }\n\n  /**\n   * `mousedown` event callback.\n   *\n   * @private\n   * @param {MouseEvent} event The `mousedown` event.\n   */\n  onMouseDown(event) {\n    this.mouseDown = true;\n\n    if (!this.hot.view || !this.hot.view.wt) {\n      return;\n    }\n\n    if (!this.contextMenuEvent && !this.targetIsCommentTextArea(event)) {\n      const eventCell = closest(event.target, 'TD', 'TBODY');\n      let coordinates = null;\n\n      if (eventCell) {\n        coordinates = this.hot.view.wt.wtTable.getCoords(eventCell);\n      }\n\n      if (!eventCell || ((this.range.from && coordinates) && (this.range.from.row !== coordinates.row || this.range.from.col !== coordinates.col))) {\n        this.hide();\n      }\n    }\n    this.contextMenuEvent = false;\n  }\n\n  /**\n   * `mouseover` event callback.\n   *\n   * @private\n   * @param {MouseEvent} event The `mouseover` event.\n   */\n  onMouseOver(event) {\n    if (this.mouseDown || this.editor.isFocused()) {\n      return;\n    }\n    const priv = privatePool.get(this);\n    priv.cellBelowCursor = document.elementFromPoint(event.clientX, event.clientY);\n\n    debounce(() => {\n      if (hasClass(event.target, 'wtBorder') || priv.cellBelowCursor !== event.target || !this.editor) {\n        return;\n      }\n\n      if (this.targetIsCellWithComment(event)) {\n        let coordinates = this.hot.view.wt.wtTable.getCoords(event.target);\n        let range = {\n          from: new CellCoords(coordinates.row, coordinates.col)\n        };\n\n        this.setRange(range);\n        this.show();\n\n      } else if (isChildOf(event.target, document) && !this.targetIsCommentTextArea(event) && !this.editor.isFocused()) {\n        this.hide();\n      }\n    }, this.displayDelay)();\n  }\n\n  /**\n   * `mouseup` event callback.\n   *\n   * @private\n   * @param {MouseEvent} event The `mouseup` event.\n   */\n  onMouseUp(event) {\n    this.mouseDown = false;\n  }\n\n  /** *\n   * The `afterRenderer` hook callback..\n   *\n   * @private\n   * @param {HTMLTableCellElement} TD The rendered `TD` element.\n   * @param {Object} cellProperties The rendered cell's property object.\n   */\n  onAfterRenderer(TD, cellProperties) {\n    if (cellProperties[META_COMMENT] && cellProperties[META_COMMENT][META_COMMENT_VALUE]) {\n      addClass(TD, cellProperties.commentedCellClassName);\n    }\n  }\n\n  /**\n   * `blur` event callback for the comment editor.\n   *\n   * @private\n   * @param {Event} event The `blur` event.\n   */\n  onEditorBlur(event) {\n    this.setComment();\n  }\n\n  /**\n   * `mousedown` hook. Along with `onEditorMouseUp` used to simulate the textarea resizing event.\n   *\n   * @private\n   * @param {MouseEvent} event The `mousedown` event.\n   */\n  onEditorMouseDown(event) {\n    const priv = privatePool.get(this);\n\n    priv.tempEditorDimensions = {\n      width: outerWidth(event.target),\n      height: outerHeight(event.target)\n    };\n  }\n\n  /**\n   * `mouseup` hook. Along with `onEditorMouseDown` used to simulate the textarea resizing event.\n   *\n   * @private\n   * @param {MouseEvent} event The `mouseup` event.\n   */\n  onEditorMouseUp(event) {\n    const priv = privatePool.get(this);\n    const currentWidth = outerWidth(event.target);\n    const currentHeight = outerHeight(event.target);\n\n    if (currentWidth !== priv.tempEditorDimensions.width + 1 || currentHeight !== priv.tempEditorDimensions.height + 2) {\n      this.updateCommentMeta(this.range.from.row, this.range.from.col, {\n        [META_STYLE]: {\n          width: currentWidth,\n          height: currentHeight\n        }\n      });\n    }\n  }\n\n  /**\n   * Context Menu's \"Add comment\" callback. Results in showing the comment editor.\n   *\n   * @private\n   */\n  onContextMenuAddComment() {\n    let coords = this.hot.getSelectedRange();\n\n    this.contextMenuEvent = true;\n    this.setRange({\n      from: coords.from\n    });\n    this.show();\n    setTimeout(() => {\n      if (this.hot) {\n        this.hot.deselectCell();\n        this.editor.focus();\n      }\n    }, 10);\n  }\n\n  /**\n   * Context Menu's \"remove comment\" callback.\n   *\n   * @private\n   * @param {Object} selection The current selection.\n   */\n  onContextMenuRemoveComment(selection) {\n    this.contextMenuEvent = true;\n\n    for (let i = selection.start.row; i <= selection.end.row; i++) {\n      for (let j = selection.start.col; j <= selection.end.col; j++) {\n        this.removeCommentAtCell(i, j, false);\n      }\n    }\n\n    this.hot.render();\n  }\n\n  /**\n   * Context Menu's \"make comment read-only\" callback.\n   *\n   * @private\n   * @param {Object} selection The current selection.\n   */\n  onContextMenuMakeReadOnly(selection) {\n    this.contextMenuEvent = true;\n\n    for (let i = selection.start.row; i <= selection.end.row; i++) {\n      for (let j = selection.start.col; j <= selection.end.col; j++) {\n        let currentState = !!this.getCommentMeta(i, j, META_READONLY);\n\n        this.updateCommentMeta(i, j, {[META_READONLY]: !currentState});\n      }\n    }\n  }\n\n  /**\n   * Add Comments plugin options to the Context Menu.\n   *\n   * @private\n   * @param {Object} defaultOptions\n   */\n  addToContextMenu(defaultOptions) {\n    defaultOptions.items.push(\n      getPlugin(this.hot, 'contextMenu').constructor.SEPARATOR,\n      {\n        key: 'commentsAddEdit',\n        name: () => (this.checkSelectionCommentsConsistency() ? 'Edit comment' : 'Add comment'),\n        callback: () => this.onContextMenuAddComment(),\n        disabled() {\n          return !(this.getSelected() && !this.selection.selectedHeader.corner);\n        }\n      },\n      {\n        key: 'commentsRemove',\n        name() {\n          return 'Delete comment';\n        },\n        callback: (key, selection) => this.onContextMenuRemoveComment(selection),\n        disabled: () => this.hot.selection.selectedHeader.corner\n      },\n      {\n        key: 'commentsReadOnly',\n        name() {\n          let label = 'Read only comment';\n          let hasProperty = checkSelectionConsistency(this.getSelectedRange(), (row, col) => {\n            let readOnlyProperty = this.getCellMeta(row, col)[META_COMMENT];\n            if (readOnlyProperty) {\n              readOnlyProperty = readOnlyProperty[META_READONLY];\n            }\n\n            if (readOnlyProperty) {\n              return true;\n            }\n          });\n\n          if (hasProperty) {\n            label = markLabelAsSelected(label);\n          }\n\n          return label;\n        },\n        callback: (key, selection) => this.onContextMenuMakeReadOnly(selection),\n        disabled: () => this.hot.selection.selectedHeader.corner || !this.checkSelectionCommentsConsistency()\n      }\n    );\n  }\n\n  /**\n   * `afterBeginEditing` hook callback.\n   *\n   * @private\n   * @param {Number} row Row index of the currently edited cell.\n   * @param {Number} column Column index of the currently edited cell.\n   */\n  onAfterBeginEditing(row, column) {\n    this.hide();\n  }\n\n  /**\n   * Destroy plugin instance.\n   */\n  destroy() {\n    if (this.editor) {\n      this.editor.destroy();\n    }\n    super.destroy();\n  }\n}\n\nregisterPlugin('comments', Comments);\n\nexport default Comments;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/comments/comments.js","import {arrayEach} from './../../helpers/array';\nimport {hasOwnProperty} from './../../helpers/object';\n\n/**\n * Command executor for ContextMenu.\n *\n * @class CommandExecutor\n * @plugin ContextMenu\n */\nclass CommandExecutor {\n  constructor(hotInstance) {\n    this.hot = hotInstance;\n    this.commands = {};\n    this.commonCallback = null;\n  }\n\n  /**\n   * Register command.\n   *\n   * @param {String} name Command name.\n   * @param {Object} commandDescriptor Command descriptor object with properties like `key` (command id),\n   *                                   `callback` (task to execute), `name` (command name), `disabled` (command availability).\n   */\n  registerCommand(name, commandDescriptor) {\n    this.commands[name] = commandDescriptor;\n  }\n\n  /**\n   * Set common callback which will be trigger on every executed command.\n   *\n   * @param {Function} callback Function which will be fired on every command execute.\n   */\n  setCommonCallback(callback) {\n    this.commonCallback = callback;\n  }\n\n  /**\n   * Execute command by its name.\n   *\n   * @param {String} commandName Command id.\n   * @param {*} params Arguments passed to command task.\n   */\n  execute(commandName, ...params) {\n    let commandSplit = commandName.split(':');\n    commandName = commandSplit[0];\n\n    let subCommandName = commandSplit.length === 2 ? commandSplit[1] : null;\n    let command = this.commands[commandName];\n\n    if (!command) {\n      throw new Error(`Menu command '${commandName}' not exists.`);\n    }\n    if (subCommandName && command.submenu) {\n      command = findSubCommand(subCommandName, command.submenu.items);\n    }\n    if (command.disabled === true) {\n      return;\n    }\n    if (typeof command.disabled == 'function' && command.disabled.call(this.hot) === true) {\n      return;\n    }\n    if (hasOwnProperty(command, 'submenu')) {\n      return;\n    }\n    let callbacks = [];\n\n    if (typeof command.callback === 'function') {\n      callbacks.push(command.callback);\n    }\n    if (typeof this.commonCallback === 'function') {\n      callbacks.push(this.commonCallback);\n    }\n    params.unshift(commandSplit.join(':'));\n    arrayEach(callbacks, (callback) => callback.apply(this.hot, params));\n  }\n}\n\nfunction findSubCommand(subCommandName, subCommands) {\n  let command;\n\n  arrayEach(subCommands, (cmd) => {\n    let cmds = cmd.key ? cmd.key.split(':') : null;\n\n    if (Array.isArray(cmds) && cmds[1] === subCommandName) {\n      command = cmd;\n\n      return false;\n    }\n  });\n\n  return command;\n}\n\nexport default CommandExecutor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/commandExecutor.js","import {getWindowScrollLeft, getWindowScrollTop} from './../../helpers/dom/element';\nimport {pageX, pageY} from './../../helpers/dom/event';\n\n/**\n * Helper class for checking if element will fit at the desired side of cursor.\n *\n * @class Cursor\n * @plugin ContextMenu\n */\nclass Cursor {\n  constructor(object) {\n    let windowScrollTop = getWindowScrollTop();\n    let windowScrollLeft = getWindowScrollLeft();\n    let top,\n      topRelative;\n    let left,\n      leftRelative;\n    let cellHeight,\n      cellWidth;\n\n    this.type = this.getSourceType(object);\n\n    if (this.type === 'literal') {\n      top = parseInt(object.top, 10);\n      left = parseInt(object.left, 10);\n      cellHeight = object.height || 0;\n      cellWidth = object.width || 0;\n      topRelative = top;\n      leftRelative = left;\n      top += windowScrollTop;\n      left += windowScrollLeft;\n\n    } else if (this.type === 'event') {\n      top = parseInt(pageY(object), 10);\n      left = parseInt(pageX(object), 10);\n      cellHeight = object.target.clientHeight;\n      cellWidth = object.target.clientWidth;\n      topRelative = top - windowScrollTop;\n      leftRelative = left - windowScrollLeft;\n    }\n\n    this.top = top;\n    this.topRelative = topRelative;\n    this.left = left;\n    this.leftRelative = leftRelative;\n    this.scrollTop = windowScrollTop;\n    this.scrollLeft = windowScrollLeft;\n    this.cellHeight = cellHeight;\n    this.cellWidth = cellWidth;\n  }\n\n  /**\n   * Get source type name.\n   *\n   * @param {*} object Event or Object with coordinates.\n   * @returns {String} Returns one of this values: `'literal'`, `'event'`.\n   */\n  getSourceType(object) {\n    let type = 'literal';\n\n    if (object instanceof Event) {\n      type = 'event';\n    }\n\n    return type;\n  }\n\n  /**\n   * Checks if element can be placed above the cursor.\n   *\n   * @param {HTMLElement} element Element to check if it's size will fit above the cursor.\n   * @returns {Boolean}\n   */\n  fitsAbove(element) {\n    return this.topRelative >= element.offsetHeight;\n  }\n\n  /**\n   * Checks if element can be placed below the cursor.\n   *\n   * @param {HTMLElement} element Element to check if it's size will fit below the cursor.\n   * @param {Number} [viewportHeight] The viewport height.\n   * @returns {Boolean}\n   */\n  fitsBelow(element, viewportHeight = window.innerHeight) {\n    return this.topRelative + element.offsetHeight <= viewportHeight;\n  }\n\n  /**\n   * Checks if element can be placed on the right of the cursor.\n   *\n   * @param {HTMLElement} element Element to check if it's size will fit on the right of the cursor.\n   * @param {Number} [viewportWidth] The viewport width.\n   * @returns {Boolean}\n   */\n  fitsOnRight(element, viewportWidth = window.innerWidth) {\n    return this.leftRelative + this.cellWidth + element.offsetWidth <= viewportWidth;\n  }\n\n  /**\n   * Checks if element can be placed on the left on the cursor.\n   *\n   * @param {HTMLElement} element Element to check if it's size will fit on the left of the cursor.\n   * @returns {Boolean}\n   */\n  fitsOnLeft(element) {\n    return this.leftRelative >= element.offsetWidth;\n  }\n}\n\nexport default Cursor;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/cursor.js","import {objectEach, isObject, extend} from './../../helpers/object';\nimport {arrayEach} from './../../helpers/array';\nimport {\n  SEPARATOR,\n  ITEMS,\n  predefinedItems\n} from './predefinedItems';\n\n/**\n * Predefined items class factory for menu items.\n *\n * @class ItemsFactory\n * @plugin ContextMenu\n */\nclass ItemsFactory {\n  constructor(hotInstance, orderPattern = null) {\n    this.hot = hotInstance;\n    this.predefinedItems = predefinedItems();\n    this.defaultOrderPattern = orderPattern;\n  }\n\n  /**\n   * Set predefined items.\n   *\n   * @param {Array} predefinedItems Array of predefined items.\n   */\n  setPredefinedItems(predefinedItems) {\n    let items = {};\n\n    this.defaultOrderPattern.length = 0;\n\n    objectEach(predefinedItems, (value, key) => {\n      let menuItemKey = '';\n\n      if (value.name === SEPARATOR) {\n        items[SEPARATOR] = value;\n        menuItemKey = SEPARATOR;\n\n        // Menu item added as a property to array\n      } else if (isNaN(parseInt(key, 10))) {\n        value.key = value.key === void 0 ? key : value.key;\n        items[key] = value;\n        menuItemKey = value.key;\n\n      } else {\n        items[value.key] = value;\n        menuItemKey = value.key;\n      }\n      this.defaultOrderPattern.push(menuItemKey);\n    });\n    this.predefinedItems = items;\n  }\n\n  /**\n   * Get all menu items based on pattern.\n   *\n   * @param {Array|Object|Boolean} pattern Pattern which you can define by displaying menu items order. If `true` default\n   *                                       pattern will be used.\n   * @returns {Array}\n   */\n  getItems(pattern = null) {\n    return getItems(pattern, this.defaultOrderPattern, this.predefinedItems);\n  }\n}\n\nfunction getItems(pattern = null, defaultPattern = [], items = {}) {\n  let result = [];\n\n  if (pattern && pattern.items) {\n    pattern = pattern.items;\n\n  } else if (!Array.isArray(pattern)) {\n    pattern = defaultPattern;\n  }\n  if (isObject(pattern)) {\n    objectEach(pattern, (value, key) => {\n      let item = items[typeof value === 'string' ? value : key];\n\n      if (!item) {\n        item = value;\n      }\n      if (isObject(value)) {\n        extend(item, value);\n\n      } else if (typeof item === 'string') {\n        item = {name: item};\n      }\n      if (item.key === void 0) {\n        item.key = key;\n      }\n      result.push(item);\n    });\n  } else {\n    arrayEach(pattern, (name, key) => {\n      let item = items[name];\n\n      // Item deleted from settings `allowInsertRow: false` etc.\n      if (!item && ITEMS.indexOf(name) >= 0) {\n        return;\n      }\n      if (!item) {\n        item = {name, key: `${key}`};\n      }\n      if (isObject(name)) {\n        extend(item, name);\n      }\n      if (item.key === void 0) {\n        item.key = key;\n      }\n      result.push(item);\n    });\n  }\n\n  return result;\n}\n\nexport default ItemsFactory;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/itemsFactory.js","import {align, getAlignmentClasses, checkSelectionConsistency, markLabelAsSelected} from './../utils';\nimport {KEY as SEPARATOR} from './separator';\n\nexport const KEY = 'alignment';\n\nexport default function alignmentItem() {\n  return {\n    key: KEY,\n    name: 'Alignment',\n    disabled() {\n      return !(this.getSelectedRange() && !this.selection.selectedHeader.corner);\n    },\n    submenu: {\n      items: [\n        {\n          key: `${KEY}:left`,\n          name() {\n            let label = 'Left';\n            let hasClass = checkSelectionConsistency(this.getSelectedRange(), (row, col) => {\n              let className = this.getCellMeta(row, col).className;\n\n              if (className && className.indexOf('htLeft') !== -1) {\n                return true;\n              }\n            });\n\n            if (hasClass) {\n              label = markLabelAsSelected(label);\n            }\n\n            return label;\n          },\n          callback() {\n            let range = this.getSelectedRange();\n            let stateBefore = getAlignmentClasses(range, (row, col) => this.getCellMeta(row, col).className);\n            let type = 'horizontal';\n            let alignment = 'htLeft';\n\n            this.runHooks('beforeCellAlignment', stateBefore, range, type, alignment);\n            align(range, type, alignment, (row, col) => this.getCellMeta(row, col),\n                  (row, col, key, value) => this.setCellMeta(row, col, key, value));\n            this.render();\n          },\n          disabled: false\n        },\n        {\n          key: `${KEY}:center`,\n          name() {\n            let label = 'Center';\n            let hasClass = checkSelectionConsistency(this.getSelectedRange(), (row, col) => {\n              let className = this.getCellMeta(row, col).className;\n\n              if (className && className.indexOf('htCenter') !== -1) {\n                return true;\n              }\n            });\n\n            if (hasClass) {\n              label = markLabelAsSelected(label);\n            }\n\n            return label;\n          },\n          callback() {\n            let range = this.getSelectedRange();\n            let stateBefore = getAlignmentClasses(range, (row, col) => this.getCellMeta(row, col).className);\n            let type = 'horizontal';\n            let alignment = 'htCenter';\n\n            this.runHooks('beforeCellAlignment', stateBefore, range, type, alignment);\n            align(range, type, alignment, (row, col) => this.getCellMeta(row, col),\n                  (row, col, key, value) => this.setCellMeta(row, col, key, value));\n            this.render();\n          },\n          disabled: false\n        },\n        {\n          key: `${KEY}:right`,\n          name() {\n            let label = 'Right';\n            let hasClass = checkSelectionConsistency(this.getSelectedRange(), (row, col) => {\n              let className = this.getCellMeta(row, col).className;\n\n              if (className && className.indexOf('htRight') !== -1) {\n                return true;\n              }\n            });\n\n            if (hasClass) {\n              label = markLabelAsSelected(label);\n            }\n\n            return label;\n          },\n          callback() {\n            let range = this.getSelectedRange();\n            let stateBefore = getAlignmentClasses(range, (row, col) => this.getCellMeta(row, col).className);\n            let type = 'horizontal';\n            let alignment = 'htRight';\n\n            this.runHooks('beforeCellAlignment', stateBefore, range, type, alignment);\n            align(range, type, alignment, (row, col) => this.getCellMeta(row, col),\n                  (row, col, key, value) => this.setCellMeta(row, col, key, value));\n            this.render();\n          },\n          disabled: false\n        },\n        {\n          key: `${KEY}:justify`,\n          name() {\n            let label = 'Justify';\n            let hasClass = checkSelectionConsistency(this.getSelectedRange(), (row, col) => {\n              let className = this.getCellMeta(row, col).className;\n\n              if (className && className.indexOf('htJustify') !== -1) {\n                return true;\n              }\n            });\n\n            if (hasClass) {\n              label = markLabelAsSelected(label);\n            }\n\n            return label;\n          },\n          callback() {\n            let range = this.getSelectedRange();\n            let stateBefore = getAlignmentClasses(range, (row, col) => this.getCellMeta(row, col).className);\n            let type = 'horizontal';\n            let alignment = 'htJustify';\n\n            this.runHooks('beforeCellAlignment', stateBefore, range, type, alignment);\n            align(range, type, alignment, (row, col) => this.getCellMeta(row, col),\n                  (row, col, key, value) => this.setCellMeta(row, col, key, value));\n            this.render();\n          },\n          disabled: false\n        },\n        {\n          name: SEPARATOR\n        },\n        {\n          key: `${KEY}:top`,\n          name() {\n            let label = 'Top';\n            let hasClass = checkSelectionConsistency(this.getSelectedRange(), (row, col) => {\n              let className = this.getCellMeta(row, col).className;\n\n              if (className && className.indexOf('htTop') !== -1) {\n                return true;\n              }\n            });\n\n            if (hasClass) {\n              label = markLabelAsSelected(label);\n            }\n            return label;\n          },\n          callback() {\n            let range = this.getSelectedRange();\n            let stateBefore = getAlignmentClasses(range, (row, col) => this.getCellMeta(row, col).className);\n            let type = 'vertical';\n            let alignment = 'htTop';\n\n            this.runHooks('beforeCellAlignment', stateBefore, range, type, alignment);\n            align(range, type, alignment, (row, col) => this.getCellMeta(row, col),\n                  (row, col, key, value) => this.setCellMeta(row, col, key, value));\n            this.render();\n          },\n          disabled: false\n        },\n        {\n          key: `${KEY}:middle`,\n          name() {\n            let label = 'Middle';\n            let hasClass = checkSelectionConsistency(this.getSelectedRange(), (row, col) => {\n              let className = this.getCellMeta(row, col).className;\n\n              if (className && className.indexOf('htMiddle') !== -1) {\n                return true;\n              }\n            });\n\n            if (hasClass) {\n              label = markLabelAsSelected(label);\n            }\n\n            return label;\n          },\n          callback() {\n            let range = this.getSelectedRange();\n            let stateBefore = getAlignmentClasses(range, (row, col) => this.getCellMeta(row, col).className);\n            let type = 'vertical';\n            let alignment = 'htMiddle';\n\n            this.runHooks('beforeCellAlignment', stateBefore, range, type, alignment);\n            align(range, type, alignment, (row, col) => this.getCellMeta(row, col),\n                  (row, col, key, value) => this.setCellMeta(row, col, key, value));\n            this.render();\n          },\n          disabled: false\n        },\n        {\n          key: `${KEY}:bottom`,\n          name() {\n            let label = 'Bottom';\n            let hasClass = checkSelectionConsistency(this.getSelectedRange(), (row, col) => {\n              let className = this.getCellMeta(row, col).className;\n\n              if (className && className.indexOf('htBottom') !== -1) {\n                return true;\n              }\n            });\n\n            if (hasClass) {\n              label = markLabelAsSelected(label);\n            }\n\n            return label;\n          },\n          callback() {\n            let range = this.getSelectedRange();\n            let stateBefore = getAlignmentClasses(range, (row, col) => this.getCellMeta(row, col).className);\n            let type = 'vertical';\n            let alignment = 'htBottom';\n\n            this.runHooks('beforeCellAlignment', stateBefore, range, type, alignment);\n            align(range, type, alignment, (row, col) => this.getCellMeta(row, col),\n                  (row, col, key, value) => this.setCellMeta(row, col, key, value));\n            this.render();\n          },\n          disabled: false\n        }\n      ]\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/alignment.js","import {getValidSelection} from './../utils';\n\nexport const KEY = 'clear_column';\n\nexport default function clearColumnItem() {\n  return {\n    key: KEY,\n    name: 'Clear column',\n\n    callback(key, selection) {\n      let column = selection.start.col;\n\n      if (this.countRows()) {\n        this.populateFromArray(0, column, [[null]], Math.max(selection.start.row, selection.end.row), column, 'ContextMenu.clearColumn');\n      }\n    },\n    disabled() {\n      let selected = getValidSelection(this);\n\n      if (!selected) {\n        return true;\n      }\n      let entireRowSelection = [selected[0], 0, selected[0], this.countCols() - 1];\n      let rowSelected = entireRowSelection.join(',') == selected.join(',');\n\n      return selected[1] < 0 || this.countCols() >= this.getSettings().maxCols || rowSelected;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/clearColumn.js","import {getValidSelection} from './../utils';\n\nexport const KEY = 'col_left';\n\nexport default function columnLeftItem() {\n  return {\n    key: KEY,\n    name: 'Insert column on the left',\n    callback(key, selection) {\n      this.alter('insert_col', selection.start.col, 1, 'ContextMenu.columnLeft');\n    },\n    disabled() {\n      let selected = getValidSelection(this);\n\n      if (!selected) {\n        return true;\n      }\n      if (!this.isColumnModificationAllowed()) {\n        return true;\n      }\n      let entireRowSelection = [selected[0], 0, selected[0], this.countCols() - 1];\n      let rowSelected = entireRowSelection.join(',') == selected.join(',');\n      let onlyOneColumn = this.countCols() === 1;\n\n      return selected[1] < 0 || this.countCols() >= this.getSettings().maxCols || (!onlyOneColumn && rowSelected);\n    },\n    hidden() {\n      return !this.getSettings().allowInsertColumn;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/columnLeft.js","import {getValidSelection} from './../utils';\n\nexport const KEY = 'col_right';\n\nexport default function columnRightItem() {\n  return {\n    key: KEY,\n    name: 'Insert column on the right',\n\n    callback(key, selection) {\n      this.alter('insert_col', selection.end.col + 1, 1, 'ContextMenu.columnRight');\n    },\n    disabled() {\n      let selected = getValidSelection(this);\n\n      if (!selected) {\n        return true;\n      }\n      if (!this.isColumnModificationAllowed()) {\n        return true;\n      }\n      let entireRowSelection = [selected[0], 0, selected[0], this.countCols() - 1];\n      let rowSelected = entireRowSelection.join(',') == selected.join(',');\n      let onlyOneColumn = this.countCols() === 1;\n\n      return selected[1] < 0 || this.countCols() >= this.getSettings().maxCols || (!onlyOneColumn && rowSelected);\n    },\n    hidden() {\n      return !this.getSettings().allowInsertColumn;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/columnRight.js","import {checkSelectionConsistency, markLabelAsSelected} from './../utils';\n\nexport const KEY = 'make_read_only';\n\nexport default function readOnlyItem() {\n  return {\n    key: KEY,\n    name() {\n      let label = 'Read only';\n      let atLeastOneReadOnly = checkSelectionConsistency(this.getSelectedRange(), (row, col) => this.getCellMeta(row, col).readOnly);\n\n      if (atLeastOneReadOnly) {\n        label = markLabelAsSelected(label);\n      }\n\n      return label;\n    },\n    callback() {\n      let range = this.getSelectedRange();\n      let atLeastOneReadOnly = checkSelectionConsistency(range, (row, col) => this.getCellMeta(row, col).readOnly);\n\n      range.forAll((row, col) => {\n        this.setCellMeta(row, col, 'readOnly', !atLeastOneReadOnly);\n      });\n      this.render();\n    },\n    disabled() {\n      return !(this.getSelectedRange() && !this.selection.selectedHeader.corner);\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/readOnly.js","export const KEY = 'redo';\n\nexport default function redoItem() {\n  return {\n    key: KEY,\n    name: 'Redo',\n\n    callback() {\n      this.redo();\n    },\n    disabled() {\n      return this.undoRedo && !this.undoRedo.isRedoAvailable();\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/redo.js","import {getValidSelection} from './../utils';\n\nexport const KEY = 'remove_col';\n\nexport default function removeColumnItem() {\n  return {\n    key: KEY,\n    name: 'Remove column',\n\n    callback(key, selection) {\n      let amount = selection.end.col - selection.start.col + 1;\n\n      this.alter('remove_col', selection.start.col, amount, 'ContextMenu.removeColumn');\n\n    },\n    disabled() {\n      const selected = getValidSelection(this);\n      const totalColumns = this.countCols();\n\n      return !selected || this.selection.selectedHeader.rows || this.selection.selectedHeader.corner ||\n             !this.isColumnModificationAllowed() || !totalColumns;\n    },\n    hidden() {\n      return !this.getSettings().allowRemoveColumn;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/removeColumn.js","import {getValidSelection} from './../utils';\n\nexport const KEY = 'remove_row';\n\nexport default function removeRowItem() {\n  return {\n    key: KEY,\n    name: 'Remove row',\n\n    callback(key, selection) {\n      let amount = selection.end.row - selection.start.row + 1;\n\n      this.alter('remove_row', selection.start.row, amount, 'ContextMenu.removeRow');\n    },\n    disabled() {\n      const selected = getValidSelection(this);\n      const totalRows = this.countRows();\n\n      return !selected || this.selection.selectedHeader.cols || this.selection.selectedHeader.corner || !totalRows;\n    },\n    hidden() {\n      return !this.getSettings().allowRemoveRow;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/removeRow.js","import {getValidSelection} from './../utils';\n\nexport const KEY = 'row_above';\n\nexport default function rowAboveItem() {\n  return {\n    key: KEY,\n    name: 'Insert row above',\n\n    callback(key, selection) {\n      this.alter('insert_row', selection.start.row, 1, 'ContextMenu.rowAbove');\n    },\n    disabled() {\n      let selected = getValidSelection(this);\n\n      return !selected || this.selection.selectedHeader.cols || this.countRows() >= this.getSettings().maxRows;\n    },\n    hidden() {\n      return !this.getSettings().allowInsertRow;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/rowAbove.js","import {getValidSelection} from './../utils';\n\nexport const KEY = 'row_below';\n\nexport default function rowBelowItem() {\n  return {\n    key: KEY,\n    name: 'Insert row below',\n\n    callback(key, selection) {\n      this.alter('insert_row', selection.end.row + 1, 1, 'ContextMenu.rowBelow');\n    },\n    disabled() {\n      let selected = getValidSelection(this);\n\n      return !selected || this.selection.selectedHeader.cols || this.countRows() >= this.getSettings().maxRows;\n    },\n    hidden() {\n      return !this.getSettings().allowInsertRow;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/rowBelow.js","export const KEY = 'undo';\n\nexport default function undoItem() {\n  return {\n    key: KEY,\n    name: 'Undo',\n\n    callback() {\n      this.undo();\n    },\n    disabled() {\n      return this.undoRedo && !this.undoRedo.isUndoAvailable();\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/contextMenu/predefinedItems/undo.js","import copyPaste from './../../../lib/copyPaste/copyPaste';\nimport SheetClip from './../../../lib/SheetClip/SheetClip';\nimport Hooks from './../../pluginHooks';\nimport {KEY_CODES, isCtrlKey} from './../../helpers/unicode';\nimport {arrayEach} from './../../helpers/array';\nimport {rangeEach} from './../../helpers/number';\nimport {stopImmediatePropagation, isImmediatePropagationStopped} from './../../helpers/dom/event';\nimport {getSelectionText} from './../../helpers/dom/element';\nimport {CellCoords, CellRange} from './../../3rdparty/walkontable/src';\n\nHooks.getSingleton().register('afterCopyLimit');\nHooks.getSingleton().register('modifyCopyableRange');\nHooks.getSingleton().register('beforeCut');\nHooks.getSingleton().register('afterCut');\nHooks.getSingleton().register('beforePaste');\nHooks.getSingleton().register('afterPaste');\nHooks.getSingleton().register('beforeCopy');\nHooks.getSingleton().register('afterCopy');\n\n/**\n * @description\n * This plugin enables the copy/paste functionality in Handsontable.\n *\n * @example\n * ```js\n * ...\n * copyPaste: true,\n * ...\n * ```\n * @class CopyPaste\n * @plugin CopyPaste\n */\nfunction CopyPastePlugin(instance) {\n  var _this = this;\n\n  this.copyPasteInstance = copyPaste();\n  this.copyPasteInstance.onCut(onCut);\n  this.copyPasteInstance.triggerCopy = callCopyAction;\n  this.copyPasteInstance.onPaste(onPaste);\n  this.onPaste = onPaste; // for paste testing purposes\n  this.copyableRanges = [];\n\n  instance.addHook('beforeKeyDown', onBeforeKeyDown);\n\n  function onCut() {\n    instance.isListening();\n  }\n\n  function callCutAction() {\n    let rangedData = _this.getRangedData(_this.copyableRanges);\n\n    if (instance.getSettings().fragmentSelection && (SheetClip.stringify(rangedData) != getSelectionText())) {\n      return;\n    }\n\n    let allowCuttingOut = !!instance.runHooks('beforeCut', rangedData, _this.copyableRanges);\n\n    if (allowCuttingOut) {\n      instance.copyPaste.copyPasteInstance.copyable(SheetClip.stringify(rangedData));\n      instance.selection.empty();\n      instance.runHooks('afterCut', rangedData, _this.copyableRanges);\n\n    } else {\n      instance.copyPaste.copyPasteInstance.copyable('');\n    }\n  }\n\n  function callCopyAction() {\n    if (!instance.isListening()) {\n      return;\n    }\n\n    let rangedData = _this.getRangedData(_this.copyableRanges);\n\n    if (instance.getSettings().fragmentSelection && (SheetClip.stringify(rangedData) != getSelectionText())) {\n      return;\n    }\n\n    let allowCopying = !!instance.runHooks('beforeCopy', rangedData, _this.copyableRanges);\n\n    if (allowCopying) {\n      var copyableData = SheetClip.stringify(rangedData);\n      if(instance.hasHook('copyTransform')) copyableData = instance.runHooks('copyTransform', _this.copyableRanges, copyableData);\n      instance.copyPaste.copyPasteInstance.copyable(copyableData);\n      instance.runHooks('afterCopy', rangedData, _this.copyableRanges);\n\n    } else {\n      instance.copyPaste.copyPasteInstance.copyable('');\n    }\n  }\n\n  function onPaste(str) {\n    var\n      input,\n      inputArray,\n      selected,\n      coordsFrom,\n      coordsTo,\n      cellRange,\n      topLeftCorner,\n      bottomRightCorner,\n      areaStart,\n      areaEnd;\n\n    if (!instance.isListening() || !instance.selection.isSelected()) {\n      return;\n    }\n    input = str;\n    inputArray = SheetClip.parse(input);\n    selected = instance.getSelected();\n    coordsFrom = new CellCoords(selected[0], selected[1]);\n    coordsTo = new CellCoords(selected[2], selected[3]);\n    cellRange = new CellRange(coordsFrom, coordsFrom, coordsTo);\n    topLeftCorner = cellRange.getTopLeftCorner();\n    bottomRightCorner = cellRange.getBottomRightCorner();\n    areaStart = topLeftCorner;\n    areaEnd = new CellCoords(\n      Math.max(bottomRightCorner.row, inputArray.length - 1 + topLeftCorner.row),\n      Math.max(bottomRightCorner.col, inputArray[0].length - 1 + topLeftCorner.col));\n\n    let isSelRowAreaCoverInputValue = coordsTo.row - coordsFrom.row >= inputArray.length - 1;\n    let isSelColAreaCoverInputValue = coordsTo.col - coordsFrom.col >= inputArray[0].length - 1;\n\n    instance.addHookOnce('afterChange', (changes, source) => {\n      let changesLength = changes ? changes.length : 0;\n\n      if (changesLength) {\n        let offset = {row: 0, col: 0};\n        let highestColumnIndex = -1;\n\n        arrayEach(changes, (change, index) => {\n          let nextChange = changesLength > index + 1 ? changes[index + 1] : null;\n\n          if (nextChange) {\n            if (!isSelRowAreaCoverInputValue) {\n              offset.row += Math.max(nextChange[0] - change[0] - 1, 0);\n            }\n            if (!isSelColAreaCoverInputValue && change[1] > highestColumnIndex) {\n              highestColumnIndex = change[1];\n              offset.col += Math.max(nextChange[1] - change[1] - 1, 0);\n            }\n          }\n        });\n        instance.selectCell(areaStart.row, areaStart.col, areaEnd.row + offset.row, areaEnd.col + offset.col);\n      }\n    });\n\n    let allowPasting = !!instance.runHooks('beforePaste', inputArray, _this.copyableRanges);\n\n    if (allowPasting) {\n      instance.populateFromArray(areaStart.row, areaStart.col, inputArray, areaEnd.row, areaEnd.col, 'CopyPaste.paste', instance.getSettings().pasteMode);\n      instance.runHooks('afterPaste', inputArray, _this.copyableRanges);\n    }\n  }\n\n  function onBeforeKeyDown(event) {\n    if (!instance.getSelected()) {\n      return;\n    }\n    if (instance.getActiveEditor() && instance.getActiveEditor().isOpened()) {\n      return;\n    }\n    if (isImmediatePropagationStopped(event)) {\n      return;\n    }\n    if (isCtrlKey(event.keyCode)) {\n      // When fragmentSelection is enabled and some text is selected then don't blur selection calling 'setCopyableText'\n      if (instance.getSettings().fragmentSelection && getSelectionText()) {\n        return;\n      }\n      // when CTRL is pressed, prepare selectable text in textarea\n      _this.setCopyableText();\n      stopImmediatePropagation(event);\n\n      return;\n    }\n    // catch CTRL but not right ALT (which in some systems triggers ALT+CTRL)\n    let ctrlDown = (event.ctrlKey || event.metaKey) && !event.altKey;\n\n    if (ctrlDown) {\n      if (event.keyCode == KEY_CODES.A) {\n        instance._registerTimeout(setTimeout(_this.setCopyableText.bind(_this), 0));\n      }\n      if (event.keyCode == KEY_CODES.X) {\n        callCutAction();\n      }\n      if (event.keyCode == KEY_CODES.C) {\n        callCopyAction();\n      }\n    }\n  }\n\n  /**\n   * Destroy plugin instance.\n   *\n   * @function destroy\n   * @memberof CopyPaste#\n   */\n  this.destroy = function() {\n    if (this.copyPasteInstance) {\n      this.copyPasteInstance.removeCallback(onCut);\n      this.copyPasteInstance.removeCallback(onPaste);\n      this.copyPasteInstance.destroy();\n      this.copyPasteInstance = null;\n    }\n    instance.removeHook('beforeKeyDown', onBeforeKeyDown);\n  };\n\n  instance.addHook('afterDestroy', this.destroy.bind(this));\n\n  /**\n   * @function triggerPaste\n   * @memberof CopyPaste#\n   */\n  this.triggerPaste = this.copyPasteInstance.triggerPaste.bind(this.copyPasteInstance);\n\n  /**\n   * @function triggerCut\n   * @memberof CopyPaste#\n   */\n  this.triggerCut = this.copyPasteInstance.triggerCut.bind(this.copyPasteInstance);\n\n  /**\n   * Prepares copyable text in the invisible textarea.\n   *\n   * @function setCopyable\n   * @memberof CopyPaste#\n   */\n  this.setCopyableText = function() {\n    var settings = instance.getSettings();\n    var copyRowsLimit = settings.copyRowsLimit;\n    var copyColsLimit = settings.copyColsLimit;\n\n    var selRange = instance.getSelectedRange();\n    var topLeft = selRange.getTopLeftCorner();\n    var bottomRight = selRange.getBottomRightCorner();\n    var startRow = topLeft.row;\n    var startCol = topLeft.col;\n    var endRow = bottomRight.row;\n    var endCol = bottomRight.col;\n    var finalEndRow = Math.min(endRow, startRow + copyRowsLimit - 1);\n    var finalEndCol = Math.min(endCol, startCol + copyColsLimit - 1);\n\n    this.copyableRanges.length = 0;\n\n    this.copyableRanges.push({\n      startRow,\n      startCol,\n      endRow: finalEndRow,\n      endCol: finalEndCol\n    });\n\n    this.copyableRanges = instance.runHooks('modifyCopyableRange', this.copyableRanges);\n\n    let copyableData = this.getRangedCopyableData(this.copyableRanges);\n\n    instance.copyPaste.copyPasteInstance.copyable(copyableData);\n\n    if (endRow !== finalEndRow || endCol !== finalEndCol) {\n      instance.runHooks('afterCopyLimit', endRow - startRow + 1, endCol - startCol + 1, copyRowsLimit, copyColsLimit);\n    }\n  };\n\n  /**\n   * Create copyable text releated to range objects.\n   *\n   * @since 0.19.0\n   * @param {Array} ranges Array of Objects with properties `startRow`, `endRow`, `startCol` and `endCol`.\n   * @returns {String} Returns string which will be copied into clipboard.\n   */\n  this.getRangedCopyableData = function(ranges) {\n    let dataSet = [];\n    let copyableRows = [];\n    let copyableColumns = [];\n\n    // Count all copyable rows and columns\n    arrayEach(ranges, (range) => {\n      rangeEach(range.startRow, range.endRow, (row) => {\n        if (copyableRows.indexOf(row) === -1) {\n          copyableRows.push(row);\n        }\n      });\n      rangeEach(range.startCol, range.endCol, (column) => {\n        if (copyableColumns.indexOf(column) === -1) {\n          copyableColumns.push(column);\n        }\n      });\n    });\n    // Concat all rows and columns data defined in ranges into one copyable string\n    arrayEach(copyableRows, (row) => {\n      let rowSet = [];\n\n      arrayEach(copyableColumns, (column) => {\n        rowSet.push(instance.getCopyableData(row, column));\n      });\n\n      dataSet.push(rowSet);\n    });\n\n    return SheetClip.stringify(dataSet);\n  };\n\n  /**\n   * Create copyable text releated to range objects.\n   *\n   * @since 0.31.1\n   * @param {Array} ranges Array of Objects with properties `startRow`, `startCol`, `endRow` and `endCol`.\n   * @returns {Array} Returns array of arrays which will be copied into clipboard.\n   */\n  this.getRangedData = function(ranges) {\n    let dataSet = [];\n    let copyableRows = [];\n    let copyableColumns = [];\n\n    // Count all copyable rows and columns\n    arrayEach(ranges, (range) => {\n      rangeEach(range.startRow, range.endRow, (row) => {\n        if (copyableRows.indexOf(row) === -1) {\n          copyableRows.push(row);\n        }\n      });\n      rangeEach(range.startCol, range.endCol, (column) => {\n        if (copyableColumns.indexOf(column) === -1) {\n          copyableColumns.push(column);\n        }\n      });\n    });\n    // Concat all rows and columns data defined in ranges into one copyable string\n    arrayEach(copyableRows, (row) => {\n      let rowSet = [];\n\n      arrayEach(copyableColumns, (column) => {\n        rowSet.push(instance.getCopyableData(row, column));\n      });\n\n      dataSet.push(rowSet);\n    });\n\n    return dataSet;\n  };\n}\n\n/**\n * Init plugin.\n *\n * @function init\n * @memberof CopyPaste#\n */\nfunction init() {\n  var instance = this,\n    pluginEnabled = instance.getSettings().copyPaste !== false;\n\n  if (pluginEnabled && !instance.copyPaste) {\n    /**\n     * Instance of CopyPaste Plugin {@link Handsontable.CopyPaste}\n     *\n     * @alias copyPaste\n     * @memberof! Handsontable.Core#\n     * @type {CopyPaste}\n     */\n    instance.copyPaste = new CopyPastePlugin(instance);\n\n  } else if (!pluginEnabled && instance.copyPaste) {\n    instance.copyPaste.destroy();\n    instance.copyPaste = null;\n  }\n}\n\nHooks.getSingleton().add('afterInit', init);\nHooks.getSingleton().add('afterUpdateSettings', init);\n\nexport default CopyPastePlugin;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/copyPaste/copyPaste.js","import Hooks from './../../pluginHooks';\nimport {registerPlugin} from './../../plugins';\nimport {hasOwnProperty} from './../../helpers/object';\nimport {CellRange, Selection} from './../../3rdparty/walkontable/src';\n\nfunction CustomBorders() {}\n/** *\n * Current instance (table where borders should be placed)\n */\nvar instance;\n\n/**\n * This plugin enables an option to apply custom borders through the context menu (configurable with context menu key `borders`).\n *\n * To initialize Handsontable with predefined custom borders, provide cell coordinates and border styles in a form of an array.\n *\n * See [Custom Borders](http://docs.handsontable.com/demo-custom-borders.html) demo for more examples.\n *\n * @example\n * ```js\n * ...\n * customBorders: [\n *   {range: {\n   *     from: {row: 1, col: 1},\n   *     to: {row: 3, col: 4}},\n   *     left: {},\n   *     right: {},\n   *     top: {},\n   *     bottom: {}\n   *   }\n * ],\n * ...\n *\n * // or\n * ...\n * customBorders: [\n *   {row: 2, col: 2, left: {width: 2, color: 'red'},\n *     right: {width: 1, color: 'green'}, top: '', bottom: ''}\n * ],\n * ...\n * ```\n * @private\n * @class CustomBorders\n * @plugin CustomBorders\n */\n\n/** *\n * Check if plugin should be enabled.\n */\nvar checkEnable = function(customBorders) {\n  if (typeof customBorders === 'boolean') {\n    if (customBorders === true) {\n      return true;\n    }\n  }\n  if (typeof customBorders === 'object') {\n    if (customBorders.length > 0) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n/** *\n * Initialize plugin.\n */\nvar init = function() {\n  if (checkEnable(this.getSettings().customBorders)) {\n    if (!this.customBorders) {\n      instance = this;\n      this.customBorders = new CustomBorders();\n    }\n  }\n};\n\n/** *\n * Get index of border from the settings.\n *\n * @param {String} className\n * @returns {Number}\n */\nvar getSettingIndex = function(className) {\n  for (var i = 0; i < instance.view.wt.selections.length; i++) {\n    if (instance.view.wt.selections[i].settings.className == className) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n/** *\n * Insert WalkontableSelection instance into Walkontable settings.\n *\n * @param border\n */\nvar insertBorderIntoSettings = function(border) {\n  var coordinates = {\n    row: border.row,\n    col: border.col\n  };\n  var selection = new Selection(border, new CellRange(coordinates, coordinates, coordinates));\n  var index = getSettingIndex(border.className);\n\n  if (index >= 0) {\n    instance.view.wt.selections[index] = selection;\n  } else {\n    instance.view.wt.selections.push(selection);\n  }\n};\n\n/** *\n * Prepare borders from setting (single cell).\n *\n * @param {Number} row Row index.\n * @param {Number} col Column index.\n * @param borderObj\n */\nvar prepareBorderFromCustomAdded = function(row, col, borderObj) {\n  var border = createEmptyBorders(row, col);\n  border = extendDefaultBorder(border, borderObj);\n  this.setCellMeta(row, col, 'borders', border);\n\n  insertBorderIntoSettings(border);\n};\n\n/** *\n * Prepare borders from setting (object).\n *\n * @param {Object} rowObj\n */\nvar prepareBorderFromCustomAddedRange = function(rowObj) {\n  var range = rowObj.range;\n\n  for (var row = range.from.row; row <= range.to.row; row++) {\n    for (var col = range.from.col; col <= range.to.col; col++) {\n      var border = createEmptyBorders(row, col);\n      var add = 0;\n\n      if (row == range.from.row) {\n        add++;\n\n        if (hasOwnProperty(rowObj, 'top')) {\n          border.top = rowObj.top;\n        }\n      }\n\n      if (row == range.to.row) {\n        add++;\n\n        if (hasOwnProperty(rowObj, 'bottom')) {\n          border.bottom = rowObj.bottom;\n        }\n      }\n\n      if (col == range.from.col) {\n        add++;\n\n        if (hasOwnProperty(rowObj, 'left')) {\n          border.left = rowObj.left;\n        }\n      }\n\n      if (col == range.to.col) {\n        add++;\n\n        if (hasOwnProperty(rowObj, 'right')) {\n          border.right = rowObj.right;\n        }\n      }\n\n      if (add > 0) {\n        this.setCellMeta(row, col, 'borders', border);\n        insertBorderIntoSettings(border);\n      }\n    }\n  }\n};\n\n/** *\n * Create separated class name for borders for each cell.\n *\n * @param {Number} row Row index.\n * @param {Number} col Column index.\n * @returns {String}\n */\nvar createClassName = function(row, col) {\n  return `border_row${row}col${col}`;\n};\n\n/** *\n * Create default single border for each position (top/right/bottom/left).\n *\n * @returns {Object} `{{width: number, color: string}}`\n */\nvar createDefaultCustomBorder = function() {\n  return {\n    width: 1,\n    color: '#000'\n  };\n};\n\n/** *\n * Create default object for empty border.\n *\n * @returns {Object} `{{hide: boolean}}`\n */\nvar createSingleEmptyBorder = function() {\n  return {\n    hide: true\n  };\n};\n\n/** *\n * Create default Handsontable border object.\n *\n * @returns {Object} `{{width: number, color: string, cornerVisible: boolean}}`\n */\nvar createDefaultHtBorder = function() {\n  return {\n    width: 1,\n    color: '#000',\n    cornerVisible: false,\n  };\n};\n\n/** *\n * Prepare empty border for each cell with all custom borders hidden.\n *\n * @param {Number} row Row index.\n * @param {Number} col Column index.\n * @returns {Object} `{{className: *, border: *, row: *, col: *, top: {hide: boolean}, right: {hide: boolean}, bottom: {hide: boolean}, left: {hide: boolean}}}`\n */\nvar createEmptyBorders = function(row, col) {\n  return {\n    className: createClassName(row, col),\n    border: createDefaultHtBorder(),\n    row,\n    col,\n    top: createSingleEmptyBorder(),\n    right: createSingleEmptyBorder(),\n    bottom: createSingleEmptyBorder(),\n    left: createSingleEmptyBorder(),\n  };\n};\n\nvar extendDefaultBorder = function(defaultBorder, customBorder) {\n  if (hasOwnProperty(customBorder, 'border')) {\n    defaultBorder.border = customBorder.border;\n  }\n\n  if (hasOwnProperty(customBorder, 'top')) {\n    defaultBorder.top = customBorder.top;\n  }\n\n  if (hasOwnProperty(customBorder, 'right')) {\n    defaultBorder.right = customBorder.right;\n  }\n\n  if (hasOwnProperty(customBorder, 'bottom')) {\n    defaultBorder.bottom = customBorder.bottom;\n  }\n\n  if (hasOwnProperty(customBorder, 'left')) {\n    defaultBorder.left = customBorder.left;\n  }\n\n  return defaultBorder;\n};\n\n/**\n * Remove borders divs from DOM.\n *\n * @param borderClassName\n */\nvar removeBordersFromDom = function(borderClassName) {\n  var borders = document.querySelectorAll(`.${borderClassName}`);\n\n  for (var i = 0; i < borders.length; i++) {\n    if (borders[i]) {\n      if (borders[i].nodeName != 'TD') {\n        var parent = borders[i].parentNode;\n\n        if (parent.parentNode) {\n          parent.parentNode.removeChild(parent);\n        }\n      }\n    }\n  }\n};\n\n/** *\n * Remove border (triggered from context menu).\n *\n * @param {Number} row Row index.\n * @param {Number} col Column index.\n */\nvar removeAllBorders = function(row, col) {\n  var borderClassName = createClassName(row, col);\n  removeBordersFromDom(borderClassName);\n  this.removeCellMeta(row, col, 'borders');\n};\n\n/** *\n * Set borders for each cell re. to border position\n *\n * @param row\n * @param col\n * @param place\n * @param remove\n */\nvar setBorder = function(row, col, place, remove) {\n\n  var bordersMeta = this.getCellMeta(row, col).borders;\n\n  if (!bordersMeta || bordersMeta.border == undefined) {\n    bordersMeta = createEmptyBorders(row, col);\n  }\n\n  if (remove) {\n    bordersMeta[place] = createSingleEmptyBorder();\n  } else {\n    bordersMeta[place] = createDefaultCustomBorder();\n  }\n\n  this.setCellMeta(row, col, 'borders', bordersMeta);\n\n  var borderClassName = createClassName(row, col);\n  removeBordersFromDom(borderClassName);\n  insertBorderIntoSettings(bordersMeta);\n\n  this.render();\n};\n\n/** *\n * Prepare borders based on cell and border position\n *\n * @param range\n * @param place\n * @param remove\n */\nvar prepareBorder = function(range, place, remove) {\n\n  if (range.from.row == range.to.row && range.from.col == range.to.col) {\n    if (place == 'noBorders') {\n      removeAllBorders.call(this, range.from.row, range.from.col);\n    } else {\n      setBorder.call(this, range.from.row, range.from.col, place, remove);\n    }\n  } else {\n    switch (place) {\n      case 'noBorders':\n        for (var column = range.from.col; column <= range.to.col; column++) {\n          for (var row = range.from.row; row <= range.to.row; row++) {\n            removeAllBorders.call(this, row, column);\n          }\n        }\n        break;\n      case 'top':\n        for (var topCol = range.from.col; topCol <= range.to.col; topCol++) {\n          setBorder.call(this, range.from.row, topCol, place, remove);\n        }\n        break;\n      case 'right':\n        for (var rowRight = range.from.row; rowRight <= range.to.row; rowRight++) {\n          setBorder.call(this, rowRight, range.to.col, place);\n        }\n        break;\n      case 'bottom':\n        for (var bottomCol = range.from.col; bottomCol <= range.to.col; bottomCol++) {\n          setBorder.call(this, range.to.row, bottomCol, place);\n        }\n        break;\n      case 'left':\n        for (var rowLeft = range.from.row; rowLeft <= range.to.row; rowLeft++) {\n          setBorder.call(this, rowLeft, range.from.col, place);\n        }\n        break;\n      default:\n        break;\n    }\n  }\n};\n\n/** *\n * Check if selection has border by className\n *\n * @param hot\n * @param direction\n */\nvar checkSelectionBorders = function(hot, direction) {\n  var atLeastOneHasBorder = false;\n\n  hot.getSelectedRange().forAll((r, c) => {\n    var metaBorders = hot.getCellMeta(r, c).borders;\n\n    if (metaBorders) {\n      if (direction) {\n        if (!hasOwnProperty(metaBorders[direction], 'hide')) {\n          atLeastOneHasBorder = true;\n          return false; // breaks forAll\n        }\n      } else {\n        atLeastOneHasBorder = true;\n        return false; // breaks forAll\n      }\n    }\n  });\n  return atLeastOneHasBorder;\n};\n\n/** *\n * Mark label in contextMenu as selected\n *\n * @param label\n * @returns {string}\n */\nvar markSelected = function(label) {\n  return `<span class=\"selected\">${String.fromCharCode(10003)}</span>${label}`; // workaround for https://github.com/handsontable/handsontable/issues/1946\n};\n\n/** *\n * Add border options to context menu\n *\n * @param defaultOptions\n */\nvar addBordersOptionsToContextMenu = function(defaultOptions) {\n  if (!this.getSettings().customBorders) {\n    return;\n  }\n\n  defaultOptions.items.push({\n    name: '---------',\n  });\n  defaultOptions.items.push({\n    key: 'borders',\n    name: 'Borders',\n    disabled() {\n      return this.selection.selectedHeader.corner;\n    },\n    submenu: {\n      items: [\n        {\n          key: 'borders:top',\n          name() {\n            var label = 'Top';\n            var hasBorder = checkSelectionBorders(this, 'top');\n            if (hasBorder) {\n              label = markSelected(label);\n            }\n\n            return label;\n          },\n          callback() {\n            var hasBorder = checkSelectionBorders(this, 'top');\n            prepareBorder.call(this, this.getSelectedRange(), 'top', hasBorder);\n          },\n        },\n        {\n          key: 'borders:right',\n          name() {\n            var label = 'Right';\n            var hasBorder = checkSelectionBorders(this, 'right');\n            if (hasBorder) {\n              label = markSelected(label);\n            }\n            return label;\n          },\n          callback() {\n            var hasBorder = checkSelectionBorders(this, 'right');\n            prepareBorder.call(this, this.getSelectedRange(), 'right', hasBorder);\n          },\n        },\n        {\n          key: 'borders:bottom',\n          name() {\n            var label = 'Bottom';\n            var hasBorder = checkSelectionBorders(this, 'bottom');\n            if (hasBorder) {\n              label = markSelected(label);\n            }\n            return label;\n          },\n          callback() {\n            var hasBorder = checkSelectionBorders(this, 'bottom');\n            prepareBorder.call(this, this.getSelectedRange(), 'bottom', hasBorder);\n          },\n        },\n        {\n          key: 'borders:left',\n          name() {\n            var label = 'Left';\n            var hasBorder = checkSelectionBorders(this, 'left');\n            if (hasBorder) {\n              label = markSelected(label);\n            }\n\n            return label;\n          },\n          callback() {\n            var hasBorder = checkSelectionBorders(this, 'left');\n            prepareBorder.call(this, this.getSelectedRange(), 'left', hasBorder);\n          },\n        },\n        {\n          key: 'borders:no_borders',\n          name: 'Remove border(s)',\n          callback() {\n            prepareBorder.call(this, this.getSelectedRange(), 'noBorders');\n          },\n          disabled() {\n            return !checkSelectionBorders(this);\n          }\n        }\n      ]\n    }\n  });\n};\n\nHooks.getSingleton().add('beforeInit', init);\nHooks.getSingleton().add('afterContextMenuDefaultOptions', addBordersOptionsToContextMenu);\nHooks.getSingleton().add('afterInit', function() {\n  var customBorders = this.getSettings().customBorders;\n\n  if (customBorders) {\n    for (var i = 0; i < customBorders.length; i++) {\n      if (customBorders[i].range) {\n        prepareBorderFromCustomAddedRange.call(this, customBorders[i]);\n\n      } else {\n        prepareBorderFromCustomAdded.call(this, customBorders[i].row, customBorders[i].col, customBorders[i]);\n      }\n    }\n\n    this.render();\n    this.view.wt.draw(true);\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/customBorders/customBorders.js","import AutoColumnSize from './autoColumnSize/autoColumnSize';\n// import AutoFill from './autofill/autofill';\n// import AutoRowSize from './autoRowSize/autoRowSize';\nimport ColumnSorting from './columnSorting/columnSorting';\nimport Comments from './comments/comments';\n// import ContextMenu from './contextMenu/contextMenu';\n// import ContextMenuCopyPaste from './contextMenuCopyPaste/contextMenuCopyPaste';\nimport CopyPaste from './copyPaste/copyPaste';\nimport CustomBorders from './customBorders/customBorders';\n// import DragToScroll from './dragToScroll/dragToScroll';\n// import ManualColumnFreeze from './manualColumnFreeze/manualColumnFreeze';\n// import ManualColumnMove from './manualColumnMove/manualColumnMove';\nimport ManualColumnResize from './manualColumnResize/manualColumnResize';\n// import ManualRowMove from './manualRowMove/manualRowMove';\n// import ManualRowResize from './manualRowResize/manualRowResize';\n// import MergeCells from './mergeCells/mergeCells';\nimport MultipleSelectionHandles from './multipleSelectionHandles/multipleSelectionHandles';\n// import ObserveChanges from './observeChanges/observeChanges';\n// import PersistentState from './persistentState/persistentState';\n// import Search from './search/search';\n// import TouchScroll from './touchScroll/touchScroll';\n// import UndoRedo from './undoRedo/undoRedo';\nimport Base from './_base';\n\nexport {\n  AutoColumnSize,\n  // AutoFill,\n  // AutoRowSize,\n  ColumnSorting,\n  Comments,\n  // ContextMenu,\n  // ContextMenuCopyPaste,\n  CopyPaste,\n  CustomBorders,\n  // DragToScroll,\n  // ManualColumnFreeze,\n  // ManualColumnMove,\n  ManualColumnResize,\n  // ManualRowMove,\n  // ManualRowResize,\n  // MergeCells,\n  MultipleSelectionHandles,\n  // ObserveChanges,\n  // PersistentState,\n  // Search,\n  // TouchScroll,\n  // UndoRedo,\n  Base,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/index.js","import BasePlugin from './../_base.js';\nimport {addClass, hasClass, removeClass, outerHeight} from './../../helpers/dom/element';\nimport EventManager from './../../eventManager';\nimport {pageX, pageY} from './../../helpers/dom/event';\nimport {arrayEach} from './../../helpers/array';\nimport {rangeEach} from './../../helpers/number';\nimport {registerPlugin} from './../../plugins';\n\n// Developer note! Whenever you make a change in this file, make an analogous change in manualRowResize.js\n\n/**\n * @description\n * ManualColumnResize Plugin.\n *\n * Has 2 UI components:\n * - handle - the draggable element that sets the desired width of the column.\n * - guide - the helper guide that shows the desired width as a vertical guide.\n *\n * @plugin ManualColumnResize\n */\nclass ManualColumnResize extends BasePlugin {\n\n  constructor(hotInstance) {\n    super(hotInstance);\n\n    this.currentTH = null;\n    this.currentCol = null;\n    this.selectedCols = [];\n    this.currentWidth = null;\n    this.newSize = null;\n    this.startY = null;\n    this.startWidth = null;\n    this.startOffset = null;\n    this.handle = document.createElement('DIV');\n    this.guide = document.createElement('DIV');\n    this.eventManager = new EventManager(this);\n    this.pressed = null;\n    this.dblclick = 0;\n    this.autoresizeTimeout = null;\n    this.manualColumnWidths = [];\n\n    addClass(this.handle, 'manualColumnResizer');\n    addClass(this.guide, 'manualColumnResizerGuide');\n  }\n\n  /**\n   * Check if the plugin is enabled in the handsontable settings.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return this.hot.getSettings().manualColumnResize;\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n\n    this.manualColumnWidths = [];\n    let initialColumnWidth = this.hot.getSettings().manualColumnResize;\n    let loadedManualColumnWidths = this.loadManualColumnWidths();\n\n    this.addHook('modifyColWidth', (width, col) => this.onModifyColWidth(width, col));\n    this.addHook('beforeStretchingColumnWidth', (stretchedWidth, column) => this.onBeforeStretchingColumnWidth(stretchedWidth, column));\n    this.addHook('beforeColumnResize', (currentColumn, newSize, isDoubleClick) => this.onBeforeColumnResize(currentColumn, newSize, isDoubleClick));\n\n    if (typeof loadedManualColumnWidths != 'undefined') {\n      this.manualColumnWidths = loadedManualColumnWidths;\n    } else if (Array.isArray(initialColumnWidth)) {\n      this.manualColumnWidths = initialColumnWidth;\n    } else {\n      this.manualColumnWidths = [];\n    }\n\n    // Handsontable.hooks.register('beforeColumnResize');\n    // Handsontable.hooks.register('afterColumnResize');\n\n    this.bindEvents();\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Updates the plugin to use the latest options you have specified.\n   */\n  updatePlugin() {\n    let initialColumnWidth = this.hot.getSettings().manualColumnResize;\n\n    if (Array.isArray(initialColumnWidth)) {\n      this.manualColumnWidths = initialColumnWidth;\n\n    } else if (!initialColumnWidth) {\n      this.manualColumnWidths = [];\n    }\n  }\n\n  /**\n   * Disable plugin for this Handsontable instance.\n   */\n  disablePlugin() {\n    super.disablePlugin();\n  }\n\n  /**\n   * Save the current sizes using the persistentState plugin.\n   */\n  saveManualColumnWidths() {\n    this.hot.runHooks('persistentStateSave', 'manualColumnWidths', this.manualColumnWidths);\n  }\n\n  /**\n   * Load the previously saved sizes using the persistentState plugin.\n   *\n   * @returns {Array}\n   */\n  loadManualColumnWidths() {\n    let storedState = {};\n\n    this.hot.runHooks('persistentStateLoad', 'manualColumnWidths', storedState);\n\n    return storedState.value;\n  }\n\n  /**\n   * Set the resize handle position.\n   *\n   * @param {HTMLCellElement} TH TH HTML element.\n   */\n  setupHandlePosition(TH) {\n    if (!TH.parentNode) {\n      return false;\n    }\n\n    this.currentTH = TH;\n\n    let col = this.hot.view.wt.wtTable.getCoords(TH).col; // getCoords returns CellCoords\n    let headerHeight = outerHeight(this.currentTH);\n\n    if (col >= 0) { // if not col header\n      let box = this.currentTH.getBoundingClientRect();\n\n      this.currentCol = col;\n      this.selectedCols = [];\n\n      if (this.hot.selection.isSelected() && this.hot.selection.selectedHeader.cols) {\n        let {from, to} = this.hot.getSelectedRange();\n        let start = from.col;\n        let end = to.col;\n\n        if (start >= end) {\n          start = to.col;\n          end = from.col;\n        }\n\n        if (this.currentCol >= start && this.currentCol <= end) {\n          rangeEach(start, end, (i) => this.selectedCols.push(i));\n\n        } else {\n          this.selectedCols.push(this.currentCol);\n        }\n      } else {\n        this.selectedCols.push(this.currentCol);\n      }\n\n      this.startOffset = box.left - 6;\n      this.startWidth = parseInt(box.width, 10);\n      this.handle.style.top = `${box.top}px`;\n      this.handle.style.left = `${this.startOffset + this.startWidth}px`;\n      this.handle.style.height = `${headerHeight}px`;\n      this.hot.rootElement.appendChild(this.handle);\n    }\n  }\n\n  /**\n   * Refresh the resize handle position.\n   */\n  refreshHandlePosition() {\n    this.handle.style.left = `${this.startOffset + this.currentWidth}px`;\n  }\n\n  /**\n   * Set the resize guide position.\n   */\n  setupGuidePosition() {\n    let handleHeight = parseInt(outerHeight(this.handle), 10);\n    let handleBottomPosition = parseInt(this.handle.style.top, 10) + handleHeight;\n    let maximumVisibleElementHeight = parseInt(this.hot.view.maximumVisibleElementHeight(0), 10);\n\n    addClass(this.handle, 'active');\n    addClass(this.guide, 'active');\n\n    this.guide.style.top = `${handleBottomPosition}px`;\n    this.guide.style.left = this.handle.style.left;\n    this.guide.style.height = `${maximumVisibleElementHeight - handleHeight}px`;\n    this.hot.rootElement.appendChild(this.guide);\n  }\n\n  /**\n   * Refresh the resize guide position.\n   */\n  refreshGuidePosition() {\n    this.guide.style.left = this.handle.style.left;\n  }\n\n  /**\n   * Hide both the resize handle and resize guide.\n   */\n  hideHandleAndGuide() {\n    removeClass(this.handle, 'active');\n    removeClass(this.guide, 'active');\n  }\n\n  /**\n   * Check if provided element is considered a column header.\n   *\n   * @param {HTMLElement} element HTML element.\n   * @returns {Boolean}\n   */\n  checkIfColumnHeader(element) {\n    if (element != this.hot.rootElement) {\n      let parent = element.parentNode;\n\n      if (parent.tagName === 'THEAD') {\n        return true;\n      }\n\n      return this.checkIfColumnHeader(parent);\n    }\n\n    return false;\n  }\n\n  /**\n   * Get the TH element from the provided element.\n   *\n   * @param {HTMLElement} element HTML element.\n   * @returns {HTMLElement}\n   */\n  getTHFromTargetElement(element) {\n    if (element.tagName != 'TABLE') {\n      if (element.tagName == 'TH') {\n        return element;\n      }\n      return this.getTHFromTargetElement(element.parentNode);\n\n    }\n\n    return null;\n  }\n\n  /**\n   * 'mouseover' event callback - set the handle position.\n   *\n   * @private\n   * @param {MouseEvent} event\n   */\n  onMouseOver(event) {\n    if (this.checkIfColumnHeader(event.target)) {\n      let th = this.getTHFromTargetElement(event.target);\n\n      if (!th) {\n        return;\n      }\n\n      let colspan = th.getAttribute('colspan');\n\n      if (th && (colspan === null || colspan === 1)) {\n        if (!this.pressed) {\n          this.setupHandlePosition(th);\n        }\n      }\n    }\n  }\n\n  /**\n   * Auto-size row after doubleclick - callback.\n   *\n   * @private\n   */\n  afterMouseDownTimeout() {\n    const render = () => {\n      this.hot.forceFullRender = true;\n      this.hot.view.render(); // updates all\n      this.hot.view.wt.wtOverlays.adjustElementsSize(true);\n    };\n    const resize = (selectedCol, forceRender) => {\n      let hookNewSize = this.hot.runHooks('beforeColumnResize', selectedCol, this.newSize, true);\n\n      if (hookNewSize !== void 0) {\n        this.newSize = hookNewSize;\n      }\n\n      if (this.hot.getSettings().stretchH === 'all') {\n        this.clearManualSize(selectedCol);\n      } else {\n        this.setManualSize(selectedCol, this.newSize); // double click sets by auto row size plugin\n      }\n\n      if (forceRender) {\n        render();\n      }\n\n      this.saveManualColumnWidths();\n\n      this.hot.runHooks('afterColumnResize', selectedCol, this.newSize, true);\n    };\n\n    if (this.dblclick >= 2) {\n      let selectedColsLength = this.selectedCols.length;\n\n      if (selectedColsLength > 1) {\n        arrayEach(this.selectedCols, (selectedCol) => {\n          resize(selectedCol);\n        });\n        render();\n      } else {\n        arrayEach(this.selectedCols, (selectedCol) => {\n          resize(selectedCol, true);\n        });\n      }\n    }\n    this.dblclick = 0;\n    this.autoresizeTimeout = null;\n  }\n\n  /**\n   * 'mousedown' event callback.\n   *\n   * @private\n   * @param {MouseEvent} e\n   */\n  onMouseDown(event) {\n    if (hasClass(event.target, 'manualColumnResizer')) {\n      this.setupGuidePosition();\n      this.pressed = this.hot;\n\n      if (this.autoresizeTimeout === null) {\n        this.autoresizeTimeout = setTimeout(() => this.afterMouseDownTimeout(), 500);\n\n        this.hot._registerTimeout(this.autoresizeTimeout);\n      }\n      this.dblclick++;\n\n      this.startX = pageX(event);\n      this.newSize = this.startWidth;\n    }\n  }\n\n  /**\n   * 'mousemove' event callback - refresh the handle and guide positions, cache the new column width.\n   *\n   * @private\n   * @param {MouseEvent} e\n   */\n  onMouseMove(event) {\n    if (this.pressed) {\n      this.currentWidth = this.startWidth + (pageX(event) - this.startX);\n\n      arrayEach(this.selectedCols, (selectedCol) => {\n        this.newSize = this.setManualSize(selectedCol, this.currentWidth);\n      });\n\n      this.refreshHandlePosition();\n      this.refreshGuidePosition();\n    }\n  }\n\n  /**\n   * 'mouseup' event callback - apply the column resizing.\n   *\n   * @private\n   * @param {MouseEvent} e\n   */\n  onMouseUp(event) {\n    const render = () => {\n      this.hot.forceFullRender = true;\n      this.hot.view.render(); // updates all\n      this.hot.view.wt.wtOverlays.adjustElementsSize(true);\n    };\n    const resize = (selectedCol, forceRender) => {\n      this.hot.runHooks('beforeColumnResize', selectedCol, this.newSize);\n\n      if (forceRender) {\n        render();\n      }\n\n      this.saveManualColumnWidths();\n\n      this.hot.runHooks('afterColumnResize', selectedCol, this.newSize);\n    };\n\n    if (this.pressed) {\n      this.hideHandleAndGuide();\n      this.pressed = false;\n\n      if (this.newSize != this.startWidth) {\n        let selectedColsLength = this.selectedCols.length;\n\n        if (selectedColsLength > 1) {\n          arrayEach(this.selectedCols, (selectedCol) => {\n            resize(selectedCol);\n          });\n          render();\n        } else {\n          arrayEach(this.selectedCols, (selectedCol) => {\n            resize(selectedCol, true);\n          });\n        }\n      }\n\n      this.setupHandlePosition(this.currentTH);\n    }\n  }\n\n  /**\n   * Bind the mouse events.\n   *\n   * @private\n   */\n  bindEvents() {\n    this.eventManager.addEventListener(this.hot.rootElement, 'mouseover', (e) => this.onMouseOver(e));\n    this.eventManager.addEventListener(this.hot.rootElement, 'mousedown', (e) => this.onMouseDown(e));\n    this.eventManager.addEventListener(window, 'mousemove', (e) => this.onMouseMove(e));\n    this.eventManager.addEventListener(window, 'mouseup', (e) => this.onMouseUp(e));\n  }\n\n  /**\n   * Cache the current column width.\n   *\n   * @param {Number} column Column index.\n   * @param {Number} width Column width.\n   * @returns {Number}\n   */\n  setManualSize(column, width) {\n    width = Math.max(width, 20);\n\n    /**\n     *  We need to run col through modifyCol hook, in case the order of displayed columns is different than the order\n     *  in data source. For instance, this order can be modified by manualColumnMove plugin.\n     */\n    column = this.hot.runHooks('modifyCol', column);\n\n    this.manualColumnWidths[column] = width;\n\n    return width;\n  }\n\n  /**\n   * Clear cache for the current column index.\n   *\n   * @param {Number} column Column index.\n   */\n  clearManualSize(column) {\n    column = this.hot.runHooks('modifyCol', column);\n\n    this.manualColumnWidths[column] = void 0;\n  }\n\n  /**\n   * Modify the provided column width, based on the plugin settings\n   *\n   * @private\n   * @param {Number} width Column width.\n   * @param {Number} column Column index.\n   * @returns {Number}\n   */\n  onModifyColWidth(width, column) {\n    if (this.enabled) {\n      column = this.hot.runHooks('modifyCol', column);\n\n      if (this.hot.getSettings().manualColumnResize && this.manualColumnWidths[column]) {\n        return this.manualColumnWidths[column];\n      }\n    }\n\n    return width;\n  }\n\n  /**\n   * Modify the provided column stretched width. This hook decides if specified column should be stretched or not.\n   *\n   * @private\n   * @param {Number} stretchedWidth Stretched width.\n   * @param {Number} column Column index.\n   * @returns {Number}\n   */\n  onBeforeStretchingColumnWidth(stretchedWidth, column) {\n    let width = this.manualColumnWidths[column];\n\n    if (width === void 0) {\n      width = stretchedWidth;\n    }\n\n    return width;\n  }\n\n  /**\n   * `beforeColumnResize` hook callback.\n   *\n   * @private\n   * @param {Number} currentColumn Index of the resized column.\n   * @param {Number} newSize Calculated new column width.\n   * @param {Boolean} isDoubleClick Flag that determines whether there was a double-click.\n   */\n  onBeforeColumnResize() {\n    // clear the header height cache information\n    this.hot.view.wt.wtViewport.hasOversizedColumnHeadersMarked = {};\n  }\n}\n\nregisterPlugin('manualColumnResize', ManualColumnResize);\n\nexport default ManualColumnResize;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/manualColumnResize/manualColumnResize.js","import Hooks from './../../pluginHooks';\nimport {getWindowScrollTop, hasClass, getWindowScrollLeft} from './../../helpers/dom/element';\nimport {isMobileBrowser} from './../../helpers/browser';\nimport BasePlugin from './../_base';\nimport EventManager from './../../eventManager';\nimport {registerPlugin} from './../../plugins';\nimport {CellCoords} from './../../3rdparty/walkontable/src';\n\n/**\n * @private\n * @plugin MultipleSelectionHandles\n */\nclass MultipleSelectionHandles extends BasePlugin {\n  /**\n   * @param {Object} hotInstance\n   */\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * @type {Array}\n     */\n    this.dragged = [];\n    /**\n     * Instance of EventManager.\n     *\n     * @type {EventManager}\n     */\n    this.eventManager = null;\n    /**\n     * @type {null}\n     */\n    this.lastSetCell = null;\n  }\n\n  /**\n   * Check if the plugin is enabled in the handsontable settings.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return isMobileBrowser();\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n    if (!this.eventManager) {\n      this.eventManager = new EventManager(this);\n    }\n    this.registerListeners();\n    super.enablePlugin();\n  }\n\n  /**\n   * Bind the touch events\n   * @private\n   */\n  registerListeners() {\n    var _this = this;\n\n    function removeFromDragged(query) {\n\n      if (_this.dragged.length === 1) {\n        // clear array\n        _this.dragged.splice(0, _this.dragged.length);\n\n        return true;\n      }\n\n      var entryPosition = _this.dragged.indexOf(query);\n\n      if (entryPosition == -1) {\n        return false;\n      } else if (entryPosition === 0) {\n        _this.dragged = _this.dragged.slice(0, 1);\n      } else if (entryPosition == 1) {\n        _this.dragged = _this.dragged.slice(-1);\n      }\n    }\n\n    this.eventManager.addEventListener(this.hot.rootElement, 'touchstart', (event) => {\n      let selectedRange;\n\n      if (hasClass(event.target, 'topLeftSelectionHandle-HitArea')) {\n        selectedRange = _this.hot.getSelectedRange();\n\n        _this.dragged.push('topLeft');\n\n        _this.touchStartRange = {\n          width: selectedRange.getWidth(),\n          height: selectedRange.getHeight(),\n          direction: selectedRange.getDirection()\n        };\n\n        event.preventDefault();\n        return false;\n\n      } else if (hasClass(event.target, 'bottomRightSelectionHandle-HitArea')) {\n        selectedRange = _this.hot.getSelectedRange();\n\n        _this.dragged.push('bottomRight');\n\n        _this.touchStartRange = {\n          width: selectedRange.getWidth(),\n          height: selectedRange.getHeight(),\n          direction: selectedRange.getDirection()\n        };\n\n        event.preventDefault();\n        return false;\n      }\n    });\n\n    this.eventManager.addEventListener(this.hot.rootElement, 'touchend', (event) => {\n      if (hasClass(event.target, 'topLeftSelectionHandle-HitArea')) {\n        removeFromDragged.call(_this, 'topLeft');\n\n        _this.touchStartRange = void 0;\n\n        event.preventDefault();\n        return false;\n\n      } else if (hasClass(event.target, 'bottomRightSelectionHandle-HitArea')) {\n        removeFromDragged.call(_this, 'bottomRight');\n\n        _this.touchStartRange = void 0;\n\n        event.preventDefault();\n        return false;\n      }\n    });\n\n    this.eventManager.addEventListener(this.hot.rootElement, 'touchmove', (event) => {\n      let scrollTop = getWindowScrollTop(),\n        scrollLeft = getWindowScrollLeft(),\n        endTarget,\n        targetCoords,\n        selectedRange,\n        rangeWidth,\n        rangeHeight,\n        rangeDirection,\n        newRangeCoords;\n\n      if (_this.dragged.length === 0) {\n        return;\n      }\n\n      endTarget = document.elementFromPoint(\n        event.touches[0].screenX - scrollLeft,\n        event.touches[0].screenY - scrollTop);\n\n      if (!endTarget || endTarget === _this.lastSetCell) {\n        return;\n      }\n\n      if (endTarget.nodeName == 'TD' || endTarget.nodeName == 'TH') {\n        targetCoords = _this.hot.getCoords(endTarget);\n\n        if (targetCoords.col == -1) {\n          targetCoords.col = 0;\n        }\n\n        selectedRange = _this.hot.getSelectedRange();\n        rangeWidth = selectedRange.getWidth();\n        rangeHeight = selectedRange.getHeight();\n        rangeDirection = selectedRange.getDirection();\n\n        if (rangeWidth == 1 && rangeHeight == 1) {\n          _this.hot.selection.setRangeEnd(targetCoords);\n        }\n\n        newRangeCoords = _this.getCurrentRangeCoords(selectedRange, targetCoords, _this.touchStartRange.direction, rangeDirection, _this.dragged[0]);\n\n        if (newRangeCoords.start !== null) {\n          _this.hot.selection.setRangeStart(newRangeCoords.start);\n        }\n\n        _this.hot.selection.setRangeEnd(newRangeCoords.end);\n\n        _this.lastSetCell = endTarget;\n\n      }\n\n      event.preventDefault();\n    });\n  }\n\n  getCurrentRangeCoords(selectedRange, currentTouch, touchStartDirection, currentDirection, draggedHandle) {\n    var topLeftCorner = selectedRange.getTopLeftCorner(),\n      bottomRightCorner = selectedRange.getBottomRightCorner(),\n      bottomLeftCorner = selectedRange.getBottomLeftCorner(),\n      topRightCorner = selectedRange.getTopRightCorner();\n\n    var newCoords = {\n      start: null,\n      end: null\n    };\n\n    switch (touchStartDirection) {\n      case 'NE-SW':\n        switch (currentDirection) {\n          case 'NE-SW':\n          case 'NW-SE':\n            if (draggedHandle == 'topLeft') {\n              newCoords = {\n                start: new CellCoords(currentTouch.row, selectedRange.highlight.col),\n                end: new CellCoords(bottomLeftCorner.row, currentTouch.col)\n              };\n            } else {\n              newCoords = {\n                start: new CellCoords(selectedRange.highlight.row, currentTouch.col),\n                end: new CellCoords(currentTouch.row, topLeftCorner.col)\n              };\n            }\n            break;\n          case 'SE-NW':\n            if (draggedHandle == 'bottomRight') {\n              newCoords = {\n                start: new CellCoords(bottomRightCorner.row, currentTouch.col),\n                end: new CellCoords(currentTouch.row, topLeftCorner.col)\n              };\n            }\n            break;\n          default:\n            break;\n        }\n        break;\n      case 'NW-SE':\n        switch (currentDirection) {\n          case 'NE-SW':\n            if (draggedHandle == 'topLeft') {\n              newCoords = {\n                start: currentTouch,\n                end: bottomLeftCorner\n              };\n            } else {\n              newCoords.end = currentTouch;\n            }\n            break;\n          case 'NW-SE':\n            if (draggedHandle == 'topLeft') {\n              newCoords = {\n                start: currentTouch,\n                end: bottomRightCorner\n              };\n            } else {\n              newCoords.end = currentTouch;\n            }\n            break;\n          case 'SE-NW':\n            if (draggedHandle == 'topLeft') {\n              newCoords = {\n                start: currentTouch,\n                end: topLeftCorner\n              };\n            } else {\n              newCoords.end = currentTouch;\n            }\n            break;\n          case 'SW-NE':\n            if (draggedHandle == 'topLeft') {\n              newCoords = {\n                start: currentTouch,\n                end: topRightCorner\n              };\n            } else {\n              newCoords.end = currentTouch;\n            }\n            break;\n          default:\n            break;\n        }\n        break;\n      case 'SW-NE':\n        switch (currentDirection) {\n          case 'NW-SE':\n            if (draggedHandle == 'bottomRight') {\n              newCoords = {\n                start: new CellCoords(currentTouch.row, topLeftCorner.col),\n                end: new CellCoords(bottomLeftCorner.row, currentTouch.col)\n              };\n            } else {\n              newCoords = {\n                start: new CellCoords(topLeftCorner.row, currentTouch.col),\n                end: new CellCoords(currentTouch.row, bottomRightCorner.col)\n              };\n            }\n            break;\n          // case 'NE-SW':\n          //\n          //  break;\n          case 'SW-NE':\n            if (draggedHandle == 'topLeft') {\n              newCoords = {\n                start: new CellCoords(selectedRange.highlight.row, currentTouch.col),\n                end: new CellCoords(currentTouch.row, bottomRightCorner.col)\n              };\n            } else {\n              newCoords = {\n                start: new CellCoords(currentTouch.row, topLeftCorner.col),\n                end: new CellCoords(topLeftCorner.row, currentTouch.col)\n              };\n            }\n            break;\n          case 'SE-NW':\n            if (draggedHandle == 'bottomRight') {\n              newCoords = {\n                start: new CellCoords(currentTouch.row, topRightCorner.col),\n                end: new CellCoords(topLeftCorner.row, currentTouch.col)\n              };\n            } else if (draggedHandle == 'topLeft') {\n              newCoords = {\n                start: bottomLeftCorner,\n                end: currentTouch\n              };\n            }\n            break;\n          default:\n            break;\n        }\n        break;\n      case 'SE-NW':\n        switch (currentDirection) {\n          case 'NW-SE':\n          case 'NE-SW':\n          case 'SW-NE':\n            if (draggedHandle == 'topLeft') {\n              newCoords.end = currentTouch;\n            }\n            break;\n          case 'SE-NW':\n            if (draggedHandle == 'topLeft') {\n              newCoords.end = currentTouch;\n            } else {\n              newCoords = {\n                start: currentTouch,\n                end: topLeftCorner\n              };\n            }\n            break;\n          default:\n            break;\n        }\n        break;\n      default:\n        break;\n    }\n\n    return newCoords;\n  }\n\n  /**\n   * Check if user is currently dragging the handle.\n   *\n   * @returns {boolean} Dragging state\n   */\n  isDragged() {\n    return this.dragged.length > 0;\n  }\n}\n\nregisterPlugin('multipleSelectionHandles', MultipleSelectionHandles);\n\nexport default MultipleSelectionHandles;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/plugins/multipleSelectionHandles/multipleSelectionHandles.js","/**\n * Adds appropriate CSS class to table cell, based on cellProperties\n */\nimport {addClass, removeClass} from './../helpers/dom/element';\n\nfunction cellDecorator(instance, TD, row, col, prop, value, cellProperties) {\n  if (cellProperties.className) {\n    if (TD.className) {\n      TD.className = `${TD.className} ${cellProperties.className}`;\n    } else {\n      TD.className = cellProperties.className;\n    }\n  }\n\n  if (cellProperties.readOnly) {\n    addClass(TD, cellProperties.readOnlyCellClassName);\n  }\n\n  if (cellProperties.valid === false && cellProperties.invalidCellClassName) {\n    addClass(TD, cellProperties.invalidCellClassName);\n  } else {\n    removeClass(TD, cellProperties.invalidCellClassName);\n  }\n\n  if (cellProperties.wordWrap === false && cellProperties.noWordWrapClassName) {\n    addClass(TD, cellProperties.noWordWrapClassName);\n  }\n\n  if (!value && cellProperties.placeholder) {\n    addClass(TD, cellProperties.placeholderCellClassName);\n  }\n}\n\nexport default cellDecorator;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/renderers/_cellDecorator.js","import {addClass, hasClass, empty} from './../helpers/dom/element';\nimport EventManager from './../eventManager';\nimport {CellCoords} from './../3rdparty/walkontable/src';\nimport {getRenderer} from './index';\n\nvar clonableWRAPPER = document.createElement('DIV');\nclonableWRAPPER.className = 'htAutocompleteWrapper';\n\nvar clonableARROW = document.createElement('DIV');\nclonableARROW.className = 'htAutocompleteArrow';\n// workaround for https://github.com/handsontable/handsontable/issues/1946\n// this is faster than innerHTML. See: https://github.com/handsontable/handsontable/wiki/JavaScript-&-DOM-performance-tips\nclonableARROW.appendChild(document.createTextNode(String.fromCharCode(9660)));\n\nvar wrapTdContentWithWrapper = function(TD, WRAPPER) {\n  WRAPPER.innerHTML = TD.innerHTML;\n  empty(TD);\n  TD.appendChild(WRAPPER);\n};\n\n/**\n * Autocomplete renderer\n *\n * @private\n * @renderer AutocompleteRenderer\n * @param {Object} instance Handsontable instance\n * @param {Element} TD Table cell where to render\n * @param {Number} row\n * @param {Number} col\n * @param {String|Number} prop Row object property name\n * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)\n * @param {Object} cellProperties Cell properites (shared by cell renderer and editor)\n */\nfunction autocompleteRenderer(instance, TD, row, col, prop, value, cellProperties) {\n  var WRAPPER = clonableWRAPPER.cloneNode(true); // this is faster than createElement\n  var ARROW = clonableARROW.cloneNode(true); // this is faster than createElement\n\n  if (cellProperties.allowHtml) {\n    getRenderer('html').apply(this, arguments);\n  } else {\n    getRenderer('text').apply(this, arguments);\n  }\n\n  TD.appendChild(ARROW);\n  addClass(TD, 'htAutocomplete');\n\n  if (!TD.firstChild) { // http://jsperf.com/empty-node-if-needed\n    // otherwise empty fields appear borderless in demo/renderers.html (IE)\n    TD.appendChild(document.createTextNode(String.fromCharCode(160))); // workaround for https://github.com/handsontable/handsontable/issues/1946\n    // this is faster than innerHTML. See: https://github.com/handsontable/handsontable/wiki/JavaScript-&-DOM-performance-tips\n  }\n\n  if (!instance.acArrowListener) {\n    var eventManager = new EventManager(instance);\n\n    // not very elegant but easy and fast\n    instance.acArrowListener = function(event) {\n      if (hasClass(event.target, 'htAutocompleteArrow')) {\n        instance.view.wt.getSetting('onCellDblClick', null, new CellCoords(row, col), TD);\n      }\n    };\n\n    eventManager.addEventListener(instance.rootElement, 'mousedown', instance.acArrowListener);\n\n    // We need to unbind the listener after the table has been destroyed\n    instance.addHookOnce('afterDestroy', () => {\n      eventManager.destroy();\n    });\n  }\n}\n\nexport default autocompleteRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/renderers/autocompleteRenderer.js","import {empty, addClass, hasClass} from './../helpers/dom/element';\nimport {equalsIgnoreCase} from './../helpers/string';\nimport EventManager from './../eventManager';\nimport {isKey} from './../helpers/unicode';\nimport {partial} from './../helpers/function';\nimport {stopImmediatePropagation, isImmediatePropagationStopped} from './../helpers/dom/event';\nimport {getRenderer} from './index';\n\nconst isListeningKeyDownEvent = new WeakMap();\nconst isCheckboxListenerAdded = new WeakMap();\nconst BAD_VALUE_CLASS = 'htBadValue';\n\n/**\n * Checkbox renderer\n *\n * @private\n * @param {Object} instance Handsontable instance\n * @param {Element} TD Table cell where to render\n * @param {Number} row\n * @param {Number} col\n * @param {String|Number} prop Row object property name\n * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)\n * @param {Object} cellProperties Cell properties (shared by cell renderer and editor)\n */\nfunction checkboxRenderer(instance, TD, row, col, prop, value, cellProperties) {\n  getRenderer('base').apply(this, arguments);\n\n  const eventManager = registerEvents(instance);\n  let input = createInput();\n  const labelOptions = cellProperties.label;\n  let badValue = false;\n\n  if (typeof cellProperties.checkedTemplate === 'undefined') {\n    cellProperties.checkedTemplate = true;\n  }\n  if (typeof cellProperties.uncheckedTemplate === 'undefined') {\n    cellProperties.uncheckedTemplate = false;\n  }\n\n  empty(TD); // TODO identify under what circumstances this line can be removed\n\n  if (value === cellProperties.checkedTemplate || equalsIgnoreCase(value, cellProperties.checkedTemplate)) {\n    input.checked = true;\n\n  } else if (value === cellProperties.uncheckedTemplate || equalsIgnoreCase(value, cellProperties.uncheckedTemplate)) {\n    input.checked = false;\n\n  } else if (value === null) { // default value\n    addClass(input, 'noValue');\n\n  } else {\n    input.style.display = 'none';\n    addClass(input, BAD_VALUE_CLASS);\n    badValue = true;\n  }\n\n  input.setAttribute('data-row', row);\n  input.setAttribute('data-col', col);\n\n  if (!badValue && labelOptions) {\n    let labelText = '';\n\n    if (labelOptions.value) {\n      labelText = typeof labelOptions.value === 'function' ? labelOptions.value.call(this, row, col, prop, value) : labelOptions.value;\n\n    } else if (labelOptions.property) {\n      labelText = instance.getDataAtRowProp(row, labelOptions.property);\n    }\n    const label = createLabel(labelText);\n\n    if (labelOptions.position === 'before') {\n      label.appendChild(input);\n    } else {\n      label.insertBefore(input, label.firstChild);\n    }\n    input = label;\n  }\n\n  TD.appendChild(input);\n\n  if (badValue) {\n    TD.appendChild(document.createTextNode('#bad-value#'));\n  }\n\n  if (!isListeningKeyDownEvent.has(instance)) {\n    isListeningKeyDownEvent.set(instance, true);\n    instance.addHook('beforeKeyDown', onBeforeKeyDown);\n  }\n\n  /**\n   * On before key down DOM listener.\n   *\n   * @private\n   * @param {Event} event\n   */\n  function onBeforeKeyDown(event) {\n    const toggleKeys = 'SPACE|ENTER';\n    const switchOffKeys = 'DELETE|BACKSPACE';\n    const isKeyCode = partial(isKey, event.keyCode);\n\n    if (isKeyCode(`${toggleKeys}|${switchOffKeys}`) && !isImmediatePropagationStopped(event)) {\n      eachSelectedCheckboxCell(() => {\n        stopImmediatePropagation(event);\n        event.preventDefault();\n      });\n    }\n    if (isKeyCode(toggleKeys)) {\n      changeSelectedCheckboxesState();\n    }\n    if (isKeyCode(switchOffKeys)) {\n      changeSelectedCheckboxesState(true);\n    }\n  }\n\n  /**\n   * Change checkbox checked property\n   *\n   * @private\n   * @param {Boolean} [uncheckCheckbox=false]\n   */\n  function changeSelectedCheckboxesState(uncheckCheckbox = false) {\n    const selRange = instance.getSelectedRange();\n\n    if (!selRange) {\n      return;\n    }\n\n    const topLeft = selRange.getTopLeftCorner();\n    const bottomRight = selRange.getBottomRightCorner();\n    const changes = [];\n\n    for (let row = topLeft.row; row <= bottomRight.row; row += 1) {\n      for (let col = topLeft.col; col <= bottomRight.col; col += 1) {\n        const cellProperties = instance.getCellMeta(row, col);\n\n        if (cellProperties.type !== 'checkbox') {\n          return;\n        }\n\n        /* eslint-disable no-continue */\n        if (cellProperties.readOnly === true) {\n          continue;\n        }\n\n        if (typeof cellProperties.checkedTemplate === 'undefined') {\n          cellProperties.checkedTemplate = true;\n        }\n        if (typeof cellProperties.uncheckedTemplate === 'undefined') {\n          cellProperties.uncheckedTemplate = false;\n        }\n\n        const dataAtCell = instance.getDataAtCell(row, col);\n\n        if (uncheckCheckbox === false) {\n          if (dataAtCell === cellProperties.checkedTemplate) {\n            changes.push([row, col, cellProperties.uncheckedTemplate]);\n\n          } else if ([cellProperties.uncheckedTemplate, null, void 0].indexOf(dataAtCell) !== -1) {\n            changes.push([row, col, cellProperties.checkedTemplate]);\n          }\n\n        } else {\n          changes.push([row, col, cellProperties.uncheckedTemplate]);\n        }\n      }\n    }\n\n    if (changes.length > 0) {\n      instance.setDataAtCell(changes);\n    }\n  }\n\n  /**\n   * Call callback for each found selected cell with checkbox type.\n   *\n   * @private\n   * @param {Function} callback\n   */\n  function eachSelectedCheckboxCell(callback) {\n    const selRange = instance.getSelectedRange();\n\n    if (!selRange) {\n      return;\n    }\n    const topLeft = selRange.getTopLeftCorner();\n    const bottomRight = selRange.getBottomRightCorner();\n\n    for (let row = topLeft.row; row <= bottomRight.row; row++) {\n      for (let col = topLeft.col; col <= bottomRight.col; col++) {\n        let cellProperties = instance.getCellMeta(row, col);\n\n        if (cellProperties.type !== 'checkbox') {\n          return;\n        }\n\n        let cell = instance.getCell(row, col);\n\n        if (cell == null) {\n\n          callback(row, col, cellProperties);\n\n        } else {\n          let checkboxes = cell.querySelectorAll('input[type=checkbox]');\n\n          if (checkboxes.length > 0 && !cellProperties.readOnly) {\n            callback(checkboxes);\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * Register checkbox listeners.\n *\n * @param {Handsontable} instance Handsontable instance.\n * @returns {EventManager}\n */\nfunction registerEvents(instance) {\n  let eventManager = isCheckboxListenerAdded.get(instance);\n\n  if (!eventManager) {\n    eventManager = new EventManager(instance);\n    eventManager.addEventListener(instance.rootElement, 'click', (event) => onClick(event, instance));\n    eventManager.addEventListener(instance.rootElement, 'mouseup', (event) => onMouseUp(event, instance));\n    eventManager.addEventListener(instance.rootElement, 'change', (event) => onChange(event, instance));\n\n    isCheckboxListenerAdded.set(instance, eventManager);\n  }\n\n  return eventManager;\n}\n\n/**\n * Create input element.\n *\n * @returns {Node}\n */\nfunction createInput() {\n  let input = document.createElement('input');\n\n  input.className = 'htCheckboxRendererInput';\n  input.type = 'checkbox';\n  input.setAttribute('autocomplete', 'off');\n  input.setAttribute('tabindex', '-1');\n\n  return input.cloneNode(false);\n}\n\n/**\n * Create label element.\n *\n * @returns {Node}\n */\nfunction createLabel(text) {\n  let label = document.createElement('label');\n\n  label.className = 'htCheckboxRendererLabel';\n  label.appendChild(document.createTextNode(text));\n\n  return label.cloneNode(true);\n}\n\n/**\n * `mouseup` callback.\n *\n * @private\n * @param {Event} event `mouseup` event.\n * @param {Object} instance Handsontable instance.\n */\nfunction onMouseUp(event, instance) {\n  if (!isCheckboxInput(event.target)) {\n    return;\n  }\n  setTimeout(instance.listen, 10);\n}\n\n/**\n * `click` callback.\n *\n * @private\n * @param {Event} event `click` event.\n * @param {Object} instance Handsontable instance.\n */\nfunction onClick(event, instance) {\n  if (!isCheckboxInput(event.target)) {\n    return false;\n  }\n\n  const row = parseInt(event.target.getAttribute('data-row'), 10);\n  const col = parseInt(event.target.getAttribute('data-col'), 10);\n  const cellProperties = instance.getCellMeta(row, col);\n\n  if (cellProperties.readOnly) {\n    event.preventDefault();\n  }\n}\n\n/**\n * `change` callback.\n *\n * @param {Event} event `change` event.\n * @param {Object} instance Handsontable instance.\n * @param {Object} cellProperties Reference to cell properties.\n * @returns {Boolean}\n */\nfunction onChange(event, instance) {\n  if (!isCheckboxInput(event.target)) {\n    return false;\n  }\n\n  const row = parseInt(event.target.getAttribute('data-row'), 10);\n  const col = parseInt(event.target.getAttribute('data-col'), 10);\n  const cellProperties = instance.getCellMeta(row, col);\n\n  if (!cellProperties.readOnly) {\n    let newCheckboxValue = null;\n\n    if (event.target.checked) {\n      newCheckboxValue = cellProperties.uncheckedTemplate === void 0 ? true : cellProperties.checkedTemplate;\n\n    } else {\n      newCheckboxValue = cellProperties.uncheckedTemplate === void 0 ? false : cellProperties.uncheckedTemplate;\n    }\n\n    instance.setDataAtCell(row, col, newCheckboxValue);\n  }\n}\n\n/**\n * Check if the provided element is the checkbox input.\n *\n * @private\n * @param {HTMLElement} element The element in question.\n * @returns {Boolean}\n */\nfunction isCheckboxInput(element) {\n  return element.tagName === 'INPUT' && element.getAttribute('type') === 'checkbox';\n}\n\nexport default checkboxRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/renderers/checkboxRenderer.js","import {fastInnerHTML} from './../helpers/dom/element';\nimport {getRenderer} from './index';\n\n/**\n * @private\n * @renderer HtmlRenderer\n * @param instance\n * @param TD\n * @param row\n * @param col\n * @param prop\n * @param value\n * @param cellProperties\n */\nfunction htmlRenderer(instance, TD, row, col, prop, value, cellProperties) {\n  getRenderer('base').apply(this, arguments);\n\n  if (value === null || value === void 0) {\n    value = '';\n  }\n\n  fastInnerHTML(TD, value);\n}\n\nexport default htmlRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/renderers/htmlRenderer.js","import numbro from 'numbro';\nimport {getRenderer} from './index';\nimport {isNumeric} from './../helpers/number';\n\n/**\n * Numeric cell renderer\n *\n * @private\n * @renderer NumericRenderer\n * @dependencies numbro\n * @param {Object} instance Handsontable instance\n * @param {Element} TD Table cell where to render\n * @param {Number} row\n * @param {Number} col\n * @param {String|Number} prop Row object property name\n * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)\n * @param {Object} cellProperties Cell properties (shared by cell renderer and editor)\n */\nfunction numericRenderer(instance, TD, row, col, prop, value, cellProperties) {\n  if (isNumeric(value)) {\n    if (typeof cellProperties.language !== 'undefined') {\n      numbro.culture(cellProperties.language);\n    }\n\n    value = numbro(value).format(cellProperties.format || '0');\n\n    const className = cellProperties.className || '';\n\n    let classArr = className.length ? className.split(' ') : [];\n\n    if (classArr.indexOf('htLeft') < 0 && classArr.indexOf('htCenter') < 0 &&\n        classArr.indexOf('htRight') < 0 && classArr.indexOf('htJustify') < 0) {\n      classArr.push('htRight');\n    }\n\n    if (classArr.indexOf('htNumeric') < 0) {\n      classArr.push('htNumeric');\n    }\n\n    cellProperties.className = classArr.join(' ');\n  }\n\n  getRenderer('text')(instance, TD, row, col, prop, value, cellProperties);\n}\n\nexport default numericRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/renderers/numericRenderer.js","import {fastInnerHTML} from './../helpers/dom/element';\nimport {getRenderer} from './index';\nimport {rangeEach} from './../helpers/number';\n\n/**\n * @private\n * @renderer PasswordRenderer\n * @param instance\n * @param TD\n * @param row\n * @param col\n * @param prop\n * @param value\n * @param cellProperties\n */\nfunction passwordRenderer(instance, TD, row, col, prop, value, cellProperties) {\n  getRenderer('text').apply(this, arguments);\n\n  value = TD.innerHTML;\n\n  const hashLength = cellProperties.hashLength || value.length;\n  const hashSymbol = cellProperties.hashSymbol || '*';\n\n  let hash = '';\n\n  rangeEach(hashLength - 1, () => {\n    hash += hashSymbol;\n  });\n  fastInnerHTML(TD, hash);\n}\n\nexport default passwordRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/renderers/passwordRenderer.js","import {empty, fastInnerText} from './../helpers/dom/element';\nimport {stringify} from './../helpers/mixed';\nimport {getRenderer} from './index';\n\n/**\n * Default text renderer\n *\n * @private\n * @renderer TextRenderer\n * @param {Object} instance Handsontable instance\n * @param {Element} TD Table cell where to render\n * @param {Number} row\n * @param {Number} col\n * @param {String|Number} prop Row object property name\n * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)\n * @param {Object} cellProperties Cell properties (shared by cell renderer and editor)\n */\nfunction textRenderer(instance, TD, row, col, prop, value, cellProperties) {\n  getRenderer('base').apply(this, arguments);\n\n  if (!value && cellProperties.placeholder) {\n    value = cellProperties.placeholder;\n  }\n\n  var escaped = stringify(value);\n\n  if (!instance.getSettings().trimWhitespace) {\n    escaped = escaped.replace(/ /g, String.fromCharCode(160));\n  }\n\n  if (cellProperties.rendererTemplate) {\n    empty(TD);\n    var TEMPLATE = document.createElement('TEMPLATE');\n    TEMPLATE.setAttribute('bind', '{{}}');\n    TEMPLATE.innerHTML = cellProperties.rendererTemplate;\n    HTMLTemplateElement.decorate(TEMPLATE);\n    TEMPLATE.model = instance.getSourceDataAtRow(row);\n    TD.appendChild(TEMPLATE);\n\n  } else {\n    // this is faster than innerHTML. See: https://github.com/handsontable/handsontable/wiki/JavaScript-&-DOM-performance-tips\n    fastInnerText(TD, escaped);\n  }\n}\n\nexport default textRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/renderers/textRenderer.js","import {\n  addClass,\n  empty,\n  fastInnerHTML,\n  fastInnerText,\n  getComputedStyle,\n  getScrollbarWidth,\n  hasClass,\n  isChildOf,\n  isInput,\n  isOutsideInput\n} from './helpers/dom/element';\nimport {isChrome, isSafari} from './helpers/browser';\nimport EventManager from './eventManager';\nimport {stopPropagation, isImmediatePropagationStopped, isRightClick, isLeftClick} from './helpers/dom/event';\nimport Walkontable, {CellCoords, Selection} from './3rdparty/walkontable/src';\n\n/**\n * Handsontable TableView constructor\n * @param {Object} instance\n */\nfunction TableView(instance) {\n  var that = this;\n\n  this.eventManager = new EventManager(instance);\n  this.instance = instance;\n  this.settings = instance.getSettings();\n  this.selectionMouseDown = false;\n\n  var originalStyle = instance.rootElement.getAttribute('style');\n\n  if (originalStyle) {\n    instance.rootElement.setAttribute('data-originalstyle', originalStyle); // needed to retrieve original style in jsFiddle link generator in HT examples. may be removed in future versions\n  }\n\n  addClass(instance.rootElement, 'handsontable');\n\n  var table = document.createElement('TABLE');\n  addClass(table, 'htCore');\n\n  if (instance.getSettings().tableClassName) {\n    addClass(table, instance.getSettings().tableClassName);\n  }\n  this.THEAD = document.createElement('THEAD');\n  table.appendChild(this.THEAD);\n  this.TBODY = document.createElement('TBODY');\n  table.appendChild(this.TBODY);\n\n  instance.table = table;\n\n  instance.container.insertBefore(table, instance.container.firstChild);\n\n  this.eventManager.addEventListener(instance.rootElement, 'mousedown', function(event) {\n    this.selectionMouseDown = true;\n\n    if (!that.isTextSelectionAllowed(event.target)) {\n      clearTextSelection();\n      event.preventDefault();\n      window.focus(); // make sure that window that contains HOT is active. Important when HOT is in iframe.\n    }\n  });\n  this.eventManager.addEventListener(instance.rootElement, 'mouseup', function(event) {\n    this.selectionMouseDown = false;\n  });\n  this.eventManager.addEventListener(instance.rootElement, 'mousemove', function(event) {\n    if (this.selectionMouseDown && !that.isTextSelectionAllowed(event.target)) {\n      clearTextSelection();\n      event.preventDefault();\n    }\n  });\n\n  this.eventManager.addEventListener(document.documentElement, 'keyup', function(event) {\n    if (instance.selection.isInProgress() && !event.shiftKey) {\n      instance.selection.finish();\n    }\n  });\n\n  var isMouseDown;\n  this.isMouseDown = function() {\n    return isMouseDown;\n  };\n\n  this.eventManager.addEventListener(document.documentElement, 'mouseup', function(event) {\n    if (instance.selection.isInProgress() && event.which === 1) { // is left mouse button\n      instance.selection.finish();\n    }\n\n    isMouseDown = false;\n\n    if (isOutsideInput(document.activeElement)) {\n      instance.unlisten();\n    }\n  });\n\n  this.eventManager.addEventListener(document.documentElement, 'mousedown', function(event) {\n    var originalTarget = event.target;\n    var next = event.target;\n    var eventX = event.x || event.clientX;\n    var eventY = event.y || event.clientY;\n\n    if (isMouseDown || !instance.rootElement) {\n      return; // it must have been started in a cell\n    }\n\n    // immediate click on \"holder\" means click on the right side of vertical scrollbar\n    if (next === instance.view.wt.wtTable.holder) {\n      var scrollbarWidth = getScrollbarWidth();\n\n      if (document.elementFromPoint(eventX + scrollbarWidth, eventY) !== instance.view.wt.wtTable.holder ||\n        document.elementFromPoint(eventX, eventY + scrollbarWidth) !== instance.view.wt.wtTable.holder) {\n        return;\n      }\n    } else {\n      while (next !== document.documentElement) {\n        if (next === null) {\n          if (event.isTargetWebComponent) {\n            break;\n          }\n          // click on something that was a row but now is detached (possibly because your click triggered a rerender)\n          return;\n        }\n        if (next === instance.rootElement) {\n          // click inside container\n          return;\n        }\n        next = next.parentNode;\n      }\n    }\n\n    // function did not return until here, we have an outside click!\n\n    var outsideClickDeselects = typeof that.settings.outsideClickDeselects === 'function' ?\n      that.settings.outsideClickDeselects(originalTarget) :\n      that.settings.outsideClickDeselects;\n\n    if (outsideClickDeselects) {\n      instance.deselectCell();\n    } else {\n      instance.destroyEditor();\n    }\n  });\n\n  this.eventManager.addEventListener(table, 'selectstart', function(event) {\n    if (that.settings.fragmentSelection || isInput(event.target)) {\n      return;\n    }\n    // https://github.com/handsontable/handsontable/issues/160\n    // Prevent text from being selected when performing drag down.\n    event.preventDefault();\n  });\n\n  var clearTextSelection = function() {\n    // http://stackoverflow.com/questions/3169786/clear-text-selection-with-javascript\n    if (window.getSelection) {\n      if (window.getSelection().empty) { // Chrome\n        window.getSelection().empty();\n      } else if (window.getSelection().removeAllRanges) { // Firefox\n        window.getSelection().removeAllRanges();\n      }\n    } else if (document.selection) { // IE?\n      document.selection.empty();\n    }\n  };\n\n  var selections = [\n    new Selection({\n      className: 'current',\n      border: {\n        width: 2,\n        color: '#5292F7',\n        // style: 'solid', // not used\n        cornerVisible: function() {\n          return that.settings.fillHandle && !that.isCellEdited() && !instance.selection.isMultiple();\n        },\n        multipleSelectionHandlesVisible: function() {\n          return !that.isCellEdited() && !instance.selection.isMultiple();\n        },\n      },\n    }),\n    new Selection({\n      className: 'area',\n      border: {\n        width: 1,\n        color: '#89AFF9',\n        // style: 'solid', // not used\n        cornerVisible: function() {\n          return that.settings.fillHandle && !that.isCellEdited() && instance.selection.isMultiple();\n        },\n        multipleSelectionHandlesVisible: function() {\n          return !that.isCellEdited() && instance.selection.isMultiple();\n        },\n      },\n    }),\n    new Selection({\n      className: 'highlight',\n      highlightHeaderClassName: that.settings.currentHeaderClassName,\n      highlightRowClassName: that.settings.currentRowClassName,\n      highlightColumnClassName: that.settings.currentColClassName,\n    }),\n    new Selection({\n      className: 'fill',\n      border: {\n        width: 1,\n        color: 'red',\n        // style: 'solid' // not used\n      },\n    }),\n  ];\n  selections.current = selections[0];\n  selections.area = selections[1];\n  selections.highlight = selections[2];\n  selections.fill = selections[3];\n\n  var walkontableConfig = {\n    debug: function() {\n      return that.settings.debug;\n    },\n    externalRowCalculator: this.instance.getPlugin('autoRowSize') && this.instance.getPlugin('autoRowSize').isEnabled(),\n    table: table,\n    preventOverflow: () => this.settings.preventOverflow,\n    stretchH: function() {\n      return that.settings.stretchH;\n    },\n    data: instance.getDataAtCell,\n    totalRows: () => instance.countRows(),\n    totalColumns: () => instance.countCols(),\n    fixedColumnsLeft: function() {\n      return that.settings.fixedColumnsLeft;\n    },\n    fixedRowsTop: function() {\n      return that.settings.fixedRowsTop;\n    },\n    fixedRowsBottom: function() {\n      return that.settings.fixedRowsBottom;\n    },\n    minSpareRows: function() {\n      return that.settings.minSpareRows;\n    },\n    renderAllRows: that.settings.renderAllRows,\n    rowHeaders: function() {\n      let headerRenderers = [];\n\n      if (instance.hasRowHeaders()) {\n        headerRenderers.push(function(row, TH) {\n          that.appendRowHeader(row, TH);\n        });\n      }\n      instance.runHooks('afterGetRowHeaderRenderers', headerRenderers);\n\n      return headerRenderers;\n    },\n    columnHeaders: function() {\n      let headerRenderers = [];\n\n      if (instance.hasColHeaders()) {\n        headerRenderers.push(function(column, TH) {\n          that.appendColHeader(column, TH);\n        });\n      }\n      instance.runHooks('afterGetColumnHeaderRenderers', headerRenderers);\n\n      return headerRenderers;\n    },\n    columnWidth: instance.getColWidth,\n    rowHeight: instance.getRowHeight,\n    cellRenderer: function(row, col, TD) {\n      const cellProperties = that.instance.getCellMeta(row, col);\n      const prop = that.instance.colToProp(col);\n      let value = that.instance.getDataAtRowProp(row, prop);\n\n      if (that.instance.hasHook('beforeValueRender')) {\n        value = that.instance.runHooks('beforeValueRender', value);\n      }\n\n      that.instance.runHooks('beforeRenderer', TD, row, col, prop, value, cellProperties);\n      that.instance.getCellRenderer(cellProperties)(that.instance, TD, row, col, prop, value, cellProperties);\n      that.instance.runHooks('afterRenderer', TD, row, col, prop, value, cellProperties);\n\n    },\n    selections: selections,\n    hideBorderOnMouseDownOver: function() {\n      return that.settings.fragmentSelection;\n    },\n    onCellMouseDown: function(event, coords, TD, wt) {\n      let blockCalculations = {\n        row: false,\n        column: false,\n        cells: false\n      };\n\n      instance.listen();\n\n      that.activeWt = wt;\n      isMouseDown = true;\n\n      instance.runHooks('beforeOnCellMouseDown', event, coords, TD, blockCalculations);\n\n      if (isImmediatePropagationStopped(event)) {\n        return;\n      }\n\n      let actualSelection = instance.getSelectedRange();\n      let selection = instance.selection;\n      let selectedHeader = selection.selectedHeader;\n\n      if (event.shiftKey && actualSelection) {\n        if (coords.row >= 0 && coords.col >= 0 && !blockCalculations.cells) {\n          selection.setSelectedHeaders(false, false);\n          selection.setRangeEnd(coords);\n\n        } else if ((selectedHeader.cols || selectedHeader.rows) && coords.row >= 0 && coords.col >= 0 && !blockCalculations.cells) {\n          selection.setSelectedHeaders(false, false);\n          selection.setRangeEnd(new CellCoords(coords.row, coords.col));\n\n        } else if (selectedHeader.cols && coords.row < 0 && !blockCalculations.column) {\n          selection.setRangeEnd(new CellCoords(actualSelection.to.row, coords.col));\n\n        } else if (selectedHeader.rows && coords.col < 0 && !blockCalculations.row) {\n          selection.setRangeEnd(new CellCoords(coords.row, actualSelection.to.col));\n\n        } else if (((!selectedHeader.cols && !selectedHeader.rows && coords.col < 0) ||\n                   (selectedHeader.cols && coords.col < 0)) && !blockCalculations.row) {\n          selection.setSelectedHeaders(true, false);\n          selection.setRangeStartOnly(new CellCoords(actualSelection.from.row, 0));\n          selection.setRangeEnd(new CellCoords(coords.row, instance.countCols() - 1));\n\n        } else if (((!selectedHeader.cols && !selectedHeader.rows && coords.row < 0) ||\n                   (selectedHeader.rows && coords.row < 0)) && !blockCalculations.column) {\n          selection.setSelectedHeaders(false, true);\n          selection.setRangeStartOnly(new CellCoords(0, actualSelection.from.col));\n          selection.setRangeEnd(new CellCoords(instance.countRows() - 1, coords.col));\n        }\n      } else {\n        let doNewSelection = true;\n\n        if (actualSelection) {\n          let {from, to} = actualSelection;\n          let coordsNotInSelection = !selection.inInSelection(coords);\n\n          if (coords.row < 0 && selectedHeader.cols) {\n            let start = Math.min(from.col, to.col);\n            let end = Math.max(from.col, to.col);\n\n            doNewSelection = (coords.col < start || coords.col > end);\n\n          } else if (coords.col < 0 && selectedHeader.rows) {\n            let start = Math.min(from.row, to.row);\n            let end = Math.max(from.row, to.row);\n\n            doNewSelection = (coords.row < start || coords.row > end);\n\n          } else {\n            doNewSelection = coordsNotInSelection;\n          }\n        }\n\n        const rightClick = isRightClick(event);\n        const leftClick = isLeftClick(event) || event.type === 'touchstart';\n\n        // clicked row header and when some column was selected\n        if (coords.row < 0 && coords.col >= 0 && !blockCalculations.column) {\n          selection.setSelectedHeaders(false, true);\n\n          if (leftClick || (rightClick && doNewSelection)) {\n            selection.setRangeStartOnly(new CellCoords(0, coords.col));\n            selection.setRangeEnd(new CellCoords(Math.max(instance.countRows() - 1, 0), coords.col), false);\n          }\n\n        // clicked column header and when some row was selected\n        } else if (coords.col < 0 && coords.row >= 0 && !blockCalculations.row) {\n          selection.setSelectedHeaders(true, false);\n\n          if (leftClick || (rightClick && doNewSelection)) {\n            selection.setRangeStartOnly(new CellCoords(coords.row, 0));\n            selection.setRangeEnd(new CellCoords(coords.row, Math.max(instance.countCols() - 1, 0)), false);\n          }\n\n        } else if (coords.col >= 0 && coords.row >= 0 && !blockCalculations.cells) {\n          if (leftClick || (rightClick && doNewSelection)) {\n            selection.setSelectedHeaders(false, false);\n            selection.setRangeStart(coords);\n          }\n        } else if (coords.col < 0 && coords.row < 0) {\n          coords.row = 0;\n          coords.col = 0;\n\n          selection.setSelectedHeaders(false, false, true);\n          selection.setRangeStart(coords);\n        }\n      }\n\n      instance.runHooks('afterOnCellMouseDown', event, coords, TD);\n      that.activeWt = that.wt;\n    },\n    onCellMouseOut: function(event, coords, TD, wt) {\n      that.activeWt = wt;\n      instance.runHooks('beforeOnCellMouseOut', event, coords, TD);\n\n      if (isImmediatePropagationStopped(event)) {\n        return;\n      }\n\n      instance.runHooks('afterOnCellMouseOut', event, coords, TD);\n      that.activeWt = that.wt;\n    },\n    onCellMouseOver: function(event, coords, TD, wt) {\n      let blockCalculations = {\n        row: false,\n        column: false,\n        cell: false\n      };\n\n      that.activeWt = wt;\n      instance.runHooks('beforeOnCellMouseOver', event, coords, TD, blockCalculations);\n\n      if (isImmediatePropagationStopped(event)) {\n        return;\n      }\n\n      if (event.button === 0 && isMouseDown) {\n        if (coords.row >= 0 && coords.col >= 0) { // is not a header\n          if (instance.selection.selectedHeader.cols && !blockCalculations.column) {\n            instance.selection.setRangeEnd(new CellCoords(instance.countRows() - 1, coords.col), false);\n\n          } else if (instance.selection.selectedHeader.rows && !blockCalculations.row) {\n            instance.selection.setRangeEnd(new CellCoords(coords.row, instance.countCols() - 1), false);\n\n          } else if (!blockCalculations.cell) {\n            instance.selection.setRangeEnd(coords);\n          }\n        } else {\n          /* eslint-disable no-lonely-if */\n          if (instance.selection.selectedHeader.cols && !blockCalculations.column) {\n            instance.selection.setRangeEnd(new CellCoords(instance.countRows() - 1, coords.col), false);\n\n          } else if (instance.selection.selectedHeader.rows && !blockCalculations.row) {\n            instance.selection.setRangeEnd(new CellCoords(coords.row, instance.countCols() - 1), false);\n\n          } else if (!blockCalculations.cell) {\n            instance.selection.setRangeEnd(coords);\n          }\n        }\n      }\n\n      instance.runHooks('afterOnCellMouseOver', event, coords, TD);\n      that.activeWt = that.wt;\n    },\n    onCellMouseUp: function(event, coords, TD, wt) {\n      that.activeWt = wt;\n      instance.runHooks('beforeOnCellMouseUp', event, coords, TD);\n\n      instance.runHooks('afterOnCellMouseUp', event, coords, TD);\n      that.activeWt = that.wt;\n    },\n    onCellCornerMouseDown: function(event) {\n      event.preventDefault();\n      instance.runHooks('afterOnCellCornerMouseDown', event);\n    },\n    onCellCornerDblClick: function(event) {\n      event.preventDefault();\n      instance.runHooks('afterOnCellCornerDblClick', event);\n    },\n    beforeDraw: function(force, skipRender) {\n      that.beforeRender(force, skipRender);\n    },\n    onDraw: function(force) {\n      that.onDraw(force);\n    },\n    onScrollVertically: function() {\n      instance.runHooks('afterScrollVertically');\n    },\n    onScrollHorizontally: function() {\n      instance.runHooks('afterScrollHorizontally');\n    },\n    onBeforeDrawBorders: function(corners, borderClassName) {\n      instance.runHooks('beforeDrawBorders', corners, borderClassName);\n    },\n    onBeforeTouchScroll: function() {\n      instance.runHooks('beforeTouchScroll');\n    },\n    onAfterMomentumScroll: function() {\n      instance.runHooks('afterMomentumScroll');\n    },\n    onBeforeStretchingColumnWidth: function(stretchedWidth, column) {\n      return instance.runHooks('beforeStretchingColumnWidth', stretchedWidth, column);\n    },\n    onModifyRowHeaderWidth: function(rowHeaderWidth) {\n      return instance.runHooks('modifyRowHeaderWidth', rowHeaderWidth);\n    },\n    viewportRowCalculatorOverride: function(calc) {\n      let rows = instance.countRows();\n      let viewportOffset = that.settings.viewportRowRenderingOffset;\n\n      if (viewportOffset === 'auto' && that.settings.fixedRowsTop) {\n        viewportOffset = 10;\n      }\n      if (typeof viewportOffset === 'number') {\n        calc.startRow = Math.max(calc.startRow - viewportOffset, 0);\n        calc.endRow = Math.min(calc.endRow + viewportOffset, rows - 1);\n      }\n      if (viewportOffset === 'auto') {\n        let center = calc.startRow + calc.endRow - calc.startRow;\n        let offset = Math.ceil(center / rows * 12);\n\n        calc.startRow = Math.max(calc.startRow - offset, 0);\n        calc.endRow = Math.min(calc.endRow + offset, rows - 1);\n      }\n      instance.runHooks('afterViewportRowCalculatorOverride', calc);\n    },\n    viewportColumnCalculatorOverride: function(calc) {\n      let cols = instance.countCols();\n      let viewportOffset = that.settings.viewportColumnRenderingOffset;\n\n      if (viewportOffset === 'auto' && that.settings.fixedColumnsLeft) {\n        viewportOffset = 10;\n      }\n      if (typeof viewportOffset === 'number') {\n        calc.startColumn = Math.max(calc.startColumn - viewportOffset, 0);\n        calc.endColumn = Math.min(calc.endColumn + viewportOffset, cols - 1);\n      }\n      if (viewportOffset === 'auto') {\n        let center = calc.startColumn + calc.endColumn - calc.startColumn;\n        let offset = Math.ceil(center / cols * 12);\n\n        calc.startRow = Math.max(calc.startColumn - offset, 0);\n        calc.endColumn = Math.min(calc.endColumn + offset, cols - 1);\n      }\n      instance.runHooks('afterViewportColumnCalculatorOverride', calc);\n    },\n    rowHeaderWidth: function() {\n      return that.settings.rowHeaderWidth;\n    },\n    columnHeaderHeight: function() {\n      const columnHeaderHeight = instance.runHooks('modifyColumnHeaderHeight');\n      return that.settings.columnHeaderHeight || columnHeaderHeight;\n    }\n  };\n\n  instance.runHooks('beforeInitWalkontable', walkontableConfig);\n\n  this.wt = new Walkontable(walkontableConfig);\n  this.activeWt = this.wt;\n\n  if (!isChrome() && !isSafari()) {\n    this.eventManager.addEventListener(instance.rootElement, 'wheel', (event) => {\n      event.preventDefault();\n\n      const lineHeight = parseInt(getComputedStyle(document.body)['font-size'], 10);\n      const holder = that.wt.wtOverlays.scrollableElement;\n\n      let deltaY = event.wheelDeltaY || event.deltaY;\n      let deltaX = event.wheelDeltaX || event.deltaX;\n\n      switch (event.deltaMode) {\n        case 0:\n          holder.scrollLeft += deltaX;\n          holder.scrollTop += deltaY;\n          break;\n\n        case 1:\n          holder.scrollLeft += deltaX * lineHeight;\n          holder.scrollTop += deltaY * lineHeight;\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n\n  this.eventManager.addEventListener(that.wt.wtTable.spreader, 'mousedown', function(event) {\n    // right mouse button exactly on spreader means right click on the right hand side of vertical scrollbar\n    if (event.target === that.wt.wtTable.spreader && event.which === 3) {\n      stopPropagation(event);\n    }\n  });\n\n  this.eventManager.addEventListener(that.wt.wtTable.spreader, 'contextmenu', function(event) {\n    // right mouse button exactly on spreader means right click on the right hand side of vertical scrollbar\n    if (event.target === that.wt.wtTable.spreader && event.which === 3) {\n      stopPropagation(event);\n    }\n  });\n\n  this.eventManager.addEventListener(document.documentElement, 'click', function() {\n    if (that.settings.observeDOMVisibility) {\n      if (that.wt.drawInterrupted) {\n        that.instance.forceFullRender = true;\n        that.render();\n      }\n    }\n  });\n}\n\nTableView.prototype.isTextSelectionAllowed = function(el) {\n  if (isInput(el)) {\n    return true;\n  }\n  let isChildOfTableBody = isChildOf(el, this.instance.view.wt.wtTable.spreader);\n\n  if (this.settings.fragmentSelection === true && isChildOfTableBody) {\n    return true;\n  }\n  if (this.settings.fragmentSelection === 'cell' && this.isSelectedOnlyCell() && isChildOfTableBody) {\n    return true;\n  }\n  if (!this.settings.fragmentSelection && this.isCellEdited() && this.isSelectedOnlyCell()) {\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Check if selected only one cell.\n *\n * @returns {Boolean}\n */\nTableView.prototype.isSelectedOnlyCell = function() {\n  var [row, col, rowEnd, colEnd] = this.instance.getSelected() || [];\n\n  return row !== void 0 && row === rowEnd && col === colEnd;\n};\n\nTableView.prototype.isCellEdited = function() {\n  var activeEditor = this.instance.getActiveEditor();\n\n  return activeEditor && activeEditor.isOpened();\n};\n\nTableView.prototype.beforeRender = function(force, skipRender) {\n  if (force) {\n    // this.instance.forceFullRender = did Handsontable request full render?\n    this.instance.runHooks('beforeRender', this.instance.forceFullRender, skipRender);\n  }\n};\n\nTableView.prototype.onDraw = function(force) {\n  if (force) {\n    // this.instance.forceFullRender = did Handsontable request full render?\n    this.instance.runHooks('afterRender', this.instance.forceFullRender);\n  }\n};\n\nTableView.prototype.render = function() {\n  this.wt.draw(!this.instance.forceFullRender);\n  this.instance.forceFullRender = false;\n  this.instance.renderCall = false;\n};\n\n/**\n * Returns td object given coordinates\n *\n * @param {CellCoords} coords\n * @param {Boolean} topmost\n */\nTableView.prototype.getCellAtCoords = function(coords, topmost) {\n  var td = this.wt.getCell(coords, topmost);\n\n  if (td < 0) { // there was an exit code (cell is out of bounds)\n    return null;\n  }\n\n  return td;\n};\n\n/**\n * Scroll viewport to selection.\n *\n * @param {CellCoords} coords\n */\nTableView.prototype.scrollViewport = function(coords) {\n  this.wt.scrollViewport(coords);\n};\n\n/**\n * Append row header to a TH element\n * @param row\n * @param TH\n */\nTableView.prototype.appendRowHeader = function(row, TH) {\n  if (TH.firstChild) {\n    let container = TH.firstChild;\n\n    if (!hasClass(container, 'relative')) {\n      empty(TH);\n      this.appendRowHeader(row, TH);\n\n      return;\n    }\n    this.updateCellHeader(container.querySelector('.rowHeader'), row, this.instance.getRowHeader);\n\n  } else {\n    let div = document.createElement('div');\n    let span = document.createElement('span');\n\n    div.className = 'relative';\n    span.className = 'rowHeader';\n    this.updateCellHeader(span, row, this.instance.getRowHeader);\n\n    div.appendChild(span);\n    TH.appendChild(div);\n  }\n\n  this.instance.runHooks('afterGetRowHeader', row, TH);\n};\n\n/**\n * Append column header to a TH element\n * @param col\n * @param TH\n */\nTableView.prototype.appendColHeader = function(col, TH) {\n  if (TH.firstChild) {\n    let container = TH.firstChild;\n\n    if (hasClass(container, 'relative')) {\n      this.updateCellHeader(container.querySelector('.colHeader'), col, this.instance.getColHeader);\n    } else {\n      empty(TH);\n      this.appendColHeader(col, TH);\n    }\n\n  } else {\n    var div = document.createElement('div');\n    let span = document.createElement('span');\n\n    div.className = 'relative';\n    span.className = 'colHeader';\n    this.updateCellHeader(span, col, this.instance.getColHeader);\n\n    div.appendChild(span);\n    TH.appendChild(div);\n  }\n\n  this.instance.runHooks('afterGetColHeader', col, TH);\n};\n\n/**\n * Update header cell content\n *\n * @since 0.15.0-beta4\n * @param {HTMLElement} element Element to update\n * @param {Number} index Row index or column index\n * @param {Function} content Function which should be returns content for this cell\n */\nTableView.prototype.updateCellHeader = function(element, index, content) {\n  let renderedIndex = index;\n  let parentOverlay = this.wt.wtOverlays.getParentOverlay(element) || this.wt;\n\n  // prevent wrong calculations from SampleGenerator\n  if (element.parentNode) {\n    if (hasClass(element, 'colHeader')) {\n      renderedIndex = parentOverlay.wtTable.columnFilter.sourceToRendered(index);\n    } else if (hasClass(element, 'rowHeader')) {\n      renderedIndex = parentOverlay.wtTable.rowFilter.sourceToRendered(index);\n    }\n  }\n\n  if (renderedIndex > -1) {\n    fastInnerHTML(element, content(index));\n\n  } else {\n    // workaround for https://github.com/handsontable/handsontable/issues/1946\n    fastInnerText(element, String.fromCharCode(160));\n    addClass(element, 'cornerHeader');\n  }\n};\n\n/**\n * Given a element's left position relative to the viewport, returns maximum element width until the right\n * edge of the viewport (before scrollbar)\n *\n * @param {Number} leftOffset\n * @return {Number}\n */\nTableView.prototype.maximumVisibleElementWidth = function(leftOffset) {\n  var workspaceWidth = this.wt.wtViewport.getWorkspaceWidth();\n  var maxWidth = workspaceWidth - leftOffset;\n  return maxWidth > 0 ? maxWidth : 0;\n};\n\n/**\n * Given a element's top position relative to the viewport, returns maximum element height until the bottom\n * edge of the viewport (before scrollbar)\n *\n * @param {Number} topOffset\n * @return {Number}\n */\nTableView.prototype.maximumVisibleElementHeight = function(topOffset) {\n  var workspaceHeight = this.wt.wtViewport.getWorkspaceHeight();\n  var maxHeight = workspaceHeight - topOffset;\n  return maxHeight > 0 ? maxHeight : 0;\n};\n\nTableView.prototype.mainViewIsActive = function() {\n  return this.wt === this.activeWt;\n};\n\nTableView.prototype.destroy = function() {\n  this.wt.destroy();\n  this.eventManager.destroy();\n};\n\nexport default TableView;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/tableView.js","/**\n * Refactored implementation of LinkedList (part of javascript-algorithms project) by Github users:\n * mgechev, AndriiHeonia, Microfed and Jakeh (part of javascript-algorithms project - all project contributors\n * at repository website)\n *\n * Link to repository: https://github.com/mgechev/javascript-algorithms\n */\n\n/**\n * Linked list node.\n *\n * @class NodeStructure\n * @util\n */\nclass NodeStructure {\n  constructor(data) {\n    /**\n     * Data of the node.\n     * @member {Object}\n     */\n    this.data = data;\n    /**\n     * Next node.\n     * @member {NodeStructure}\n     */\n    this.next = null;\n    /**\n     * Previous node.\n     * @member {NodeStructure}\n     */\n    this.prev = null;\n  }\n}\n\n/**\n * Linked list.\n *\n * @class LinkedList\n * @util\n */\nclass LinkedList {\n  constructor() {\n    this.first = null;\n    this.last = null;\n  }\n\n  /**\n   * Add data to the end of linked list.\n   *\n   * @param {Object} data Data which should be added.\n   */\n  push(data) {\n    const node = new NodeStructure(data);\n\n    if (this.first === null) {\n      this.first = node;\n      this.last = node;\n\n    } else {\n      const temp = this.last;\n\n      this.last = node;\n      node.prev = temp;\n      temp.next = node;\n    }\n  }\n\n  /**\n   * Add data to the beginning of linked list.\n   *\n   * @param {Object} data Data which should be added.\n   */\n  unshift(data) {\n    const node = new NodeStructure(data);\n\n    if (this.first === null) {\n      this.first = node;\n      this.last = node;\n\n    } else {\n      const temp = this.first;\n\n      this.first = node;\n      node.next = temp;\n      temp.prev = node;\n    }\n  }\n\n  /**\n   * In order traversal of the linked list.\n   *\n   * @param {Function} callback Callback which should be executed on each node.\n   */\n  inorder(callback) {\n    let temp = this.first;\n\n    while (temp) {\n      callback(temp);\n      temp = temp.next;\n    }\n  }\n\n  /**\n   * Remove data from the linked list.\n   *\n   * @param {Object} data Data which should be removed.\n   * @returns {Boolean} Returns true if data has been removed.\n   */\n  remove(data) {\n    if (this.first === null) {\n      return false;\n    }\n\n    let temp = this.first;\n    let next;\n    let prev;\n\n    while (temp) {\n      if (temp.data === data) {\n        next = temp.next;\n        prev = temp.prev;\n\n        if (next) {\n          next.prev = prev;\n        }\n\n        if (prev) {\n          prev.next = next;\n        }\n\n        if (temp === this.first) {\n          this.first = next;\n        }\n\n        if (temp === this.last) {\n          this.last = prev;\n        }\n\n        return true;\n      }\n\n      temp = temp.next;\n    }\n\n    return false;\n  }\n\n  /**\n   * Check if linked list contains cycle.\n   *\n   * @returns {Boolean} Returns true if linked list contains cycle.\n   */\n  hasCycle() {\n    let fast = this.first;\n    let slow = this.first;\n\n    while (true) {\n      if (fast === null) {\n        return false;\n      }\n\n      fast = fast.next;\n\n      if (fast === null) {\n        return false;\n      }\n\n      fast = fast.next;\n      slow = slow.next;\n\n      if (fast === slow) {\n        return true;\n      }\n    }\n  };\n\n  /**\n   * Return last node from the linked list.\n   *\n   * @returns {NodeStructure} Last node.\n   */\n  pop() {\n    if (this.last === null) {\n      return null;\n    }\n\n    let temp = this.last;\n    this.last = this.last.prev;\n\n    return temp;\n  };\n\n  /**\n   * Return first node from the linked list.\n   *\n   * @returns {NodeStructure} First node.\n   */\n  shift() {\n    if (this.first === null) {\n      return null;\n    }\n\n    const temp = this.first;\n    this.first = this.first.next;\n\n    return temp;\n  };\n\n  /**\n   * Reverses the linked list recursively\n   */\n  recursiveReverse() {\n    function inverse(current, next) {\n      if (!next) {\n        return;\n      }\n      inverse(next, next.next);\n      next.next = current;\n    }\n\n    if (!this.first) {\n      return;\n    }\n\n    inverse(this.first, this.first.next);\n\n    this.first.next = null;\n    const temp = this.first;\n    this.first = this.last;\n    this.last = temp;\n  };\n\n  /**\n   * Reverses the linked list iteratively\n   */\n  reverse() {\n    if (!this.first || !this.first.next) {\n      return;\n    }\n\n    let current = this.first.next;\n    let prev = this.first;\n    let temp;\n\n    while (current) {\n      temp = current.next;\n      current.next = prev;\n      prev.prev = current;\n      prev = current;\n      current = temp;\n    }\n\n    this.first.next = null;\n    this.last.prev = null;\n    temp = this.first;\n    this.first = prev;\n    this.last = temp;\n  };\n};\n\nexport {NodeStructure};\nexport default LinkedList;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/utils/dataStructures/linkedList.js","/**\n * @class Stack\n * @util\n */\nclass Stack {\n  constructor(initial = []) {\n    /**\n     * Items collection.\n     *\n     * @type {Array}\n     */\n    this.items = initial;\n  }\n\n  /**\n   * Add new item or items at the back of the stack.\n   *\n   * @param {*} items An item to add.\n   */\n  push(...items) {\n    this.items.push(...items);\n  }\n\n  /**\n   * Remove the last element from the stack and returns it.\n   *\n   * @returns {*}\n   */\n  pop() {\n    return this.items.pop();\n  }\n\n  /**\n   * Return the last element from the stack (without modification stack).\n   *\n   * @returns {*}\n   */\n  peek() {\n    return this.isEmpty() ? void 0 : this.items[this.items.length - 1];\n  }\n\n  /**\n   * Check if the stack is empty.\n   *\n   * @returns {Boolean}\n   */\n  isEmpty() {\n    return !this.size();\n  }\n\n  /**\n   * Return number of elements in the stack.\n   *\n   * @returns {Number}\n   */\n  size() {\n    return this.items.length;\n  }\n}\n\nexport default Stack;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/utils/dataStructures/stack.js","import {requestAnimationFrame, cancelAnimationFrame} from './../helpers/feature';\n\n/**\n * @class Interval\n * @util\n */\nclass Interval {\n  static create(func, delay) {\n    return new Interval(func, delay);\n  }\n\n  constructor(func, delay) {\n    /**\n     * Animation frame request id.\n     *\n     * @type {Number}\n     */\n    this.timer = null;\n    /**\n     * Function to invoke repeatedly.\n     *\n     * @type {Function}\n     */\n    this.func = func;\n    /**\n     * Number of milliseconds that function should wait before next call.\n     */\n    this.delay = parseDelay(delay);\n    /**\n     * Flag which indicates if interval object was stopped.\n     *\n     * @type {Boolean}\n     * @default true\n     */\n    this.stopped = true;\n    /**\n     * Interval time (in milliseconds) of the last callback call.\n     *\n     * @private\n     * @type {Number}\n     */\n    this._then = null;\n    /**\n     * Bounded function `func`.\n     *\n     * @private\n     * @type {Function}\n     */\n    this._callback = () => this.__callback();\n  }\n\n  /**\n   * Start loop.\n   *\n   * @returns {Interval}\n   */\n  start() {\n    if (this.stopped) {\n      this._then = Date.now();\n      this.stopped = false;\n      this.timer = requestAnimationFrame(this._callback);\n    }\n\n    return this;\n  }\n\n  /**\n   * Stop looping.\n   *\n   * @returns {Interval}\n   */\n  stop() {\n    if (!this.stopped) {\n      this.stopped = true;\n      cancelAnimationFrame(this.timer);\n      this.timer = null;\n    }\n\n    return this;\n  }\n\n  /**\n   * Loop callback, fired on every animation frame.\n   *\n   * @private\n   */\n  __callback() {\n    this.timer = requestAnimationFrame(this._callback);\n\n    if (this.delay) {\n      const now = Date.now();\n      const elapsed = now - this._then;\n\n      if (elapsed > this.delay) {\n        this._then = now - (elapsed % this.delay);\n        this.func();\n      }\n    } else {\n      this.func();\n    }\n  }\n}\n\nexport default Interval;\n\nexport function parseDelay(delay) {\n  if (typeof delay === 'string' && /fps$/.test(delay)) {\n    delay = 1000 / parseInt(delay.replace('fps', '') || 0, 10);\n  }\n\n  return delay;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/utils/interval.js","import {isObject} from './../helpers/object';\nimport {rangeEach} from './../helpers/number';\nimport {stringify} from './../helpers/mixed';\n\n/**\n * @class SamplesGenerator\n * @util\n */\nclass SamplesGenerator {\n  /**\n   * Number of samples to take of each value length.\n   *\n   * @type {Number}\n   */\n  static get SAMPLE_COUNT() {\n    return 3;\n  }\n\n  constructor(dataFactory) {\n    /**\n     * Samples prepared for calculations.\n     *\n     * @type {Map}\n     * @default {null}\n     */\n    this.samples = null;\n    /**\n     * Function which give the data to collect samples.\n     *\n     * @type {Function}\n     */\n    this.dataFactory = dataFactory;\n    /**\n     * Custom number of samples to take of each value length.\n     *\n     * @type {Number}\n     * @default {null}\n     */\n    this.customSampleCount = null;\n    /**\n     * `true` if duplicate samples collection should be allowed, `false` otherwise.\n     *\n     * @type {Boolean}\n     * @default {false}\n     */\n    this.allowDuplicates = false;\n  }\n\n  /**\n   * Get the sample count for this instance.\n   *\n   * @returns {Number}\n   */\n  getSampleCount() {\n    if (this.customSampleCount) {\n      return this.customSampleCount;\n    }\n    return SamplesGenerator.SAMPLE_COUNT;\n  };\n\n  /**\n   * Set the sample count.\n   *\n   * @param {Number} sampleCount Number of samples to be collected.\n   */\n  setSampleCount(sampleCount) {\n    this.customSampleCount = sampleCount;\n  }\n\n  /**\n   * Set if the generator should accept duplicate values.\n   *\n   * @param {Boolean} allowDuplicates `true` to allow duplicate values.\n   */\n  setAllowDuplicates(allowDuplicates) {\n    this.allowDuplicates = allowDuplicates;\n  }\n\n  /**\n   * Generate samples for row. You can control which area should be sampled by passing `rowRange` object and `colRange` object.\n   *\n   * @param {Object|Number} rowRange\n   * @param {Object} colRange\n   * @returns {Object}\n   */\n  generateRowSamples(rowRange, colRange) {\n    return this.generateSamples('row', colRange, rowRange);\n  }\n\n  /**\n   * Generate samples for column. You can control which area should be sampled by passing `colRange` object and `rowRange` object.\n   *\n   * @param {Object} colRange Column index.\n   * @param {Object} rowRange Column index.\n   * @returns {Object}\n   */\n  generateColumnSamples(colRange, rowRange) {\n    return this.generateSamples('col', rowRange, colRange);\n  }\n\n  /**\n   * Generate collection of samples.\n   *\n   * @param {String} type Type to generate. Can be `col` or `row`.\n   * @param {Object} range\n   * @param {Object|Number} specifierRange\n   * @returns {Map}\n   */\n  generateSamples(type, range, specifierRange) {\n    const samples = new Map();\n\n    if (typeof specifierRange === 'number') {\n      specifierRange = {from: specifierRange, to: specifierRange};\n    }\n    rangeEach(specifierRange.from, specifierRange.to, (index) => {\n      const sample = this.generateSample(type, range, index);\n\n      samples.set(index, sample);\n    });\n\n    return samples;\n  }\n\n  /**\n   * Generate sample for specified type (`row` or `col`).\n   *\n   * @param {String} type Samples type `row` or `col`.\n   * @param {Object} range\n   * @param {Number} specifierValue\n   * @returns {Map}\n   */\n  generateSample(type, range, specifierValue) {\n    const samples = new Map();\n    let sampledValues = [];\n    let length;\n\n    rangeEach(range.from, range.to, (index) => {\n      let value;\n\n      if (type === 'row') {\n        value = this.dataFactory(specifierValue, index);\n\n      } else if (type === 'col') {\n        value = this.dataFactory(index, specifierValue);\n\n      } else {\n        throw new Error('Unsupported sample type');\n      }\n\n      if (isObject(value)) {\n        length = Object.keys(value).length;\n\n      } else if (Array.isArray(value)) {\n        length = value.length;\n\n      } else {\n        length = stringify(value).length;\n      }\n\n      if (!samples.has(length)) {\n        samples.set(length, {\n          needed: this.getSampleCount(),\n          strings: [],\n        });\n      }\n      let sample = samples.get(length);\n\n      if (sample.needed) {\n        let duplicate = sampledValues.indexOf(value) > -1;\n\n        if (!duplicate || this.allowDuplicates) {\n          let computedKey = type === 'row' ? 'col' : 'row';\n\n          sample.strings.push({value, [computedKey]: index});\n          sampledValues.push(value);\n          sample.needed--;\n        }\n      }\n    });\n\n    return samples;\n  }\n}\n\nexport default SamplesGenerator;\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/utils/samplesGenerator.js","/**\n * Autocomplete cell validator.\n *\n * @private\n * @validator AutocompleteValidator\n * @param {*} value - Value of edited cell\n * @param {Function} callback - Callback called with validation result\n */\nexport default function autocompleteValidator(value, callback) {\n  if (value == null) {\n    value = '';\n  }\n\n  if (this.allowEmpty && value === '') {\n    callback(true);\n\n    return;\n  }\n\n  if (this.strict && this.source) {\n    if (typeof this.source === 'function') {\n      this.source(value, process(value, callback));\n    } else {\n      process(value, callback)(this.source);\n    }\n  } else {\n    callback(true);\n  }\n};\n\n/**\n * Function responsible for validation of autocomplete value.\n *\n * @param {*} value - Value of edited cell\n * @param {Function} callback - Callback called with validation result\n */\nfunction process(value, callback) {\n  var originalVal = value;\n\n  return function(source) {\n    var found = false;\n\n    for (var s = 0, slen = source.length; s < slen; s++) {\n      if (originalVal === source[s]) {\n        found = true; // perfect match\n        break;\n      }\n    }\n\n    callback(found);\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/validators/autocompleteValidator.js","import moment from 'moment';\nimport {getNormalizedDate} from '../helpers/date';\nimport {getEditorInstance} from '../editors';\n\n/**\n * Date cell validator\n *\n * @private\n * @validator DateValidator\n * @dependencies moment\n * @param {*} value - Value of edited cell\n * @param {Function} callback - Callback called with validation result\n */\nexport default function dateValidator(value, callback) {\n  let valid = true;\n  const dateEditor = getEditorInstance('date', this.instance);\n\n  if (value == null) {\n    value = '';\n  }\n  let isValidDate = moment(new Date(value)).isValid() || moment(value, dateEditor.defaultDateFormat).isValid();\n  // is it in the specified format\n  let isValidFormat = moment(value, this.dateFormat || dateEditor.defaultDateFormat, true).isValid();\n\n  if (this.allowEmpty && value === '') {\n    isValidDate = true;\n    isValidFormat = true;\n  }\n  if (!isValidDate) {\n    valid = false;\n  }\n  if (!isValidDate && isValidFormat) {\n    valid = true;\n  }\n\n  if (isValidDate && !isValidFormat) {\n    if (this.correctFormat === true) { // if format correction is enabled\n      let correctedValue = correctFormat(value, this.dateFormat);\n      let row = this.instance.runHooks('unmodifyRow', this.row);\n      let column = this.instance.runHooks('unmodifyCol', this.col);\n\n      this.instance.setDataAtCell(row, column, correctedValue, 'dateValidator');\n      valid = true;\n    } else {\n      valid = false;\n    }\n  }\n\n  callback(valid);\n};\n\n/**\n * Format the given string using moment.js' format feature\n *\n * @param {String} value\n * @param {String} dateFormat\n * @returns {String}\n */\nexport function correctFormat(value, dateFormat) {\n  let dateFromDate = moment(getNormalizedDate(value));\n  let dateFromMoment = moment(value, dateFormat);\n  let isAlphanumeric = value.search(/[A-z]/g) > -1;\n  let date;\n\n  if ((dateFromDate.isValid() && dateFromDate.format('x') === dateFromMoment.format('x')) ||\n      !dateFromMoment.isValid() ||\n      isAlphanumeric) {\n    date = dateFromDate;\n\n  } else {\n    date = dateFromMoment;\n  }\n\n  return date.format(dateFormat);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/validators/dateValidator.js","/**\n * Numeric cell validator\n *\n * @private\n * @validator NumericValidator\n * @param {*} value - Value of edited cell\n * @param {*} callback - Callback called with validation result\n */\nexport default function numericValidator(value, callback) {\n  if (value == null) {\n    value = '';\n  }\n  if (this.allowEmpty && value === '') {\n    callback(true);\n\n  } else if (value === '') {\n    callback(false);\n\n  } else {\n    callback(/^-?\\d*(\\.|,)?\\d*$/.test(value));\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/validators/numericValidator.js","import moment from 'moment';\n\n// Formats which are correctly parsed to time (supported by momentjs)\nconst STRICT_FORMATS = [\n  'YYYY-MM-DDTHH:mm:ss.SSSZ',\n  'X', // Unix timestamp\n  'x' // Unix ms timestamp\n];\n\n/**\n * Time cell validator\n *\n * @private\n * @validator TimeValidator\n * @dependencies moment\n * @param {*} value - Value of edited cell\n * @param {Function} callback - Callback called with validation result\n */\nexport default function timeValidator(value, callback) {\n  let valid = true;\n  let timeFormat = this.timeFormat || 'h:mm:ss a';\n\n  if (value === null) {\n    value = '';\n  }\n\n  value = /^\\d{3,}$/.test(value) ? parseInt(value, 10) : value;\n\n  let twoDigitValue = /^\\d{1,2}$/.test(value);\n\n  if (twoDigitValue) {\n    value += ':00';\n  }\n\n  let date = moment(value, STRICT_FORMATS, true).isValid() ? moment(value) : moment(value, timeFormat);\n  let isValidTime = date.isValid();\n\n  // is it in the specified format\n  let isValidFormat = moment(value, timeFormat, true).isValid() && !twoDigitValue;\n\n  if (this.allowEmpty && value === '') {\n    isValidTime = true;\n    isValidFormat = true;\n  }\n  if (!isValidTime) {\n    valid = false;\n  }\n  if (!isValidTime && isValidFormat) {\n    valid = true;\n  }\n  if (isValidTime && !isValidFormat) {\n    if (this.correctFormat === true) { // if format correction is enabled\n      let correctedValue = date.format(timeFormat);\n      let row = this.instance.runHooks('unmodifyRow', this.row);\n      let column = this.instance.runHooks('unmodifyCol', this.col);\n\n      this.instance.setDataAtCell(row, column, correctedValue, 'timeValidator');\n      valid = true;\n    } else {\n      valid = false;\n    }\n  }\n\n  callback(valid);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/handsontable/src/validators/timeValidator.js","import 'babel-polyfill';\nimport Handsontable from 'handsontable';\n\nimport * as plugins from './plugins/index';\n\nimport BottomOverlay from './3rdparty/walkontable/src/overlay/bottom';\nimport BottomLeftCornerOverlay from './3rdparty/walkontable/src/overlay/bottomLeftCorner';\n\nHandsontable.baseVersion = __HOT_BASE_VERSION__;\n\nmodule.exports = Handsontable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import BasePlugin from 'handsontable/plugins/_base';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {registerPlugin} from 'handsontable/plugins';\nimport BindStrategy from './bindStrategy';\n\n/**\n * @plugin BindRowsWithHeaders\n * @pro\n *\n * @description\n * Plugin allowing binding the table rows with their headers.\n * If the plugin is enabled, the table row headers will \"stick\" to the rows, when they are hidden/moved. Basically, if at the initialization\n * row 0 has a header titled \"A\", it will have it no matter what you do with the table.\n *\n * @example\n *\n * ```js\n * ...\n * var hot = new Handsontable(document.getElementById('example'), {\n *   date: getData(),\n *   bindRowsWithHeaders: true\n * });\n * ...\n * ```\n */\nclass BindRowsWithHeaders extends BasePlugin {\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * Strategy object for binding rows with headers.\n     *\n     * @type {BindStrategy}\n     */\n    this.bindStrategy = new BindStrategy();\n    /**\n     * List of last removed row indexes.\n     *\n     * @type {Array}\n     */\n    this.removedRows = [];\n  }\n\n  /**\n   * Check if plugin is enabled.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings().bindRowsWithHeaders;\n  }\n\n  /**\n   * Enable the plugin.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n    let bindStrategy = this.hot.getSettings().bindRowsWithHeaders;\n\n    if (typeof bindStrategy !== 'string') {\n      bindStrategy = BindStrategy.DEFAULT_STRATEGY;\n    }\n    this.bindStrategy.setStrategy(bindStrategy);\n    this.bindStrategy.createMap(this.hot.countSourceRows());\n\n    this.addHook('modifyRowHeader', (row) => this.onModifyRowHeader(row));\n    this.addHook('afterCreateRow', (index, amount) => this.onAfterCreateRow(index, amount));\n    this.addHook('beforeRemoveRow', (index, amount) => this.onBeforeRemoveRow(index, amount));\n    this.addHook('afterRemoveRow', (index, amount) => this.onAfterRemoveRow(index, amount));\n    this.addHook('afterLoadData', (firstRun) => this.onAfterLoadData(firstRun));\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Updates the plugin to use the latest options you have specified.\n   */\n  updatePlugin() {\n    super.updatePlugin();\n  }\n\n  /**\n   * Disable the plugin.\n   */\n  disablePlugin() {\n    this.removedRows.length = 0;\n    this.bindStrategy.clearMap();\n    super.disablePlugin();\n  }\n\n  /**\n   * On modify row header listener.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @returns {Number}\n   */\n  onModifyRowHeader(row) {\n    return this.bindStrategy.translate(this.hot.runHooks('modifyRow', row));\n  }\n\n  /**\n   * On after create row listener.\n   *\n   * @private\n   * @param {Number} index Row index.\n   * @param {Number} amount Defines how many rows removed.\n   */\n  onAfterCreateRow(index, amount) {\n    this.bindStrategy.createRow(index, amount);\n  }\n\n  /**\n   * On before remove row listener.\n   *\n   * @private\n   * @param {Number} index Row index.\n   * @param {Number} amount Defines how many rows removed.\n   */\n  onBeforeRemoveRow(index, amount) {\n    this.removedRows.length = 0;\n\n    if (index !== false) {\n      // Collect physical row index.\n      rangeEach(index, index + amount - 1, (removedIndex) => {\n        this.removedRows.push(this.hot.runHooks('modifyRow', removedIndex));\n      });\n    }\n  }\n\n  /**\n   * On after remove row listener.\n   *\n   * @private\n   * @param {Number} index Row index.\n   * @param {Number} amount Defines how many rows removed.\n   */\n  onAfterRemoveRow(index, amount) {\n    this.bindStrategy.removeRow(this.removedRows);\n  }\n\n  /**\n   * On after load data listener.\n   *\n   * @private\n   * @param {Boolean} firstRun Indicates if hook was fired while Handsontable initialization.\n   */\n  onAfterLoadData(firstRun) {\n    if (!firstRun) {\n      this.bindStrategy.createMap(this.hot.countSourceRows());\n    }\n  }\n\n  /**\n   * Destroy plugin.\n   */\n  destroy() {\n    this.bindStrategy.destroy();\n    super.destroy();\n  }\n}\n\nregisterPlugin('bindRowsWithHeaders', BindRowsWithHeaders);\n\nexport default BindRowsWithHeaders;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/bindRowsWithHeaders/bindRowsWithHeaders.js","import Loose from './loose';\nimport Strict from './strict';\n\nexport {\n  Loose,\n  Strict,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/bindRowsWithHeaders/bindStrategies/index.js","import arrayMapper from 'handsontable/mixins/arrayMapper';\nimport {mixin} from 'handsontable/helpers/object';\n\n/**\n * @private\n * @class LooseBindStrategy\n */\nclass LooseBindStrategy {\n  /**\n   * Loose bind mode.\n   *\n   * @returns {String}\n   */\n  static get STRATEGY_NAME() {\n    return 'loose';\n  }\n\n  /**\n   * Strategy for the create row action.\n   *\n   * @param {Number} index Row index.\n   * @param {Number} amount\n   */\n  createRow(index, amount) {\n    this.shiftItems(index, amount);\n  }\n\n  /**\n   * Strategy for the remove row action.\n   *\n   * @param {Number|Array} index Row index or Array of row indexes.\n   * @param {Number} amount\n   */\n  removeRow(index, amount) {\n    this.unshiftItems(index, amount);\n  }\n\n  /**\n   * Destroy strategy class.\n   */\n  destroy() {\n    this._arrayMap = null;\n  }\n}\n\nmixin(LooseBindStrategy, arrayMapper);\n\nexport default LooseBindStrategy;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/bindRowsWithHeaders/bindStrategies/loose.js","import arrayMapper from 'handsontable/mixins/arrayMapper';\nimport {mixin} from 'handsontable/helpers/object';\n\n/**\n * @private\n * @class StrictBindStrategy\n */\nclass StrictBindStrategy {\n  /**\n   * Loose bind mode.\n   *\n   * @returns {String}\n   */\n  static get STRATEGY_NAME() {\n    return 'strict';\n  }\n\n  /**\n   * Strategy for the create row action.\n   *\n   * @param {Number} index Row index.\n   * @param {Number} amount\n   */\n  createRow(index, amount) {\n    this.insertItems(index, amount);\n  }\n\n  /**\n   * Strategy for the remove row action.\n   *\n   * @param {Number|Array} index Row index or Array of row indexes.\n   * @param {Number} amount\n   */\n  removeRow(index, amount) {\n    this.removeItems(index, amount);\n  }\n\n  /**\n   * Destroy strategy class.\n   */\n  destroy() {\n    this._arrayMap = null;\n  }\n}\n\nmixin(StrictBindStrategy, arrayMapper);\n\nexport default StrictBindStrategy;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/bindRowsWithHeaders/bindStrategies/strict.js","import {arrayMapper} from 'handsontable/mixins/arrayMapper';\nimport {mixin} from 'handsontable/helpers/object';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {toUpperCaseFirst} from 'handsontable/helpers/string';\nimport * as strategies from './bindStrategies';\n\n/**\n * @class BindStrategy\n * @plugin BindRowsWithHeaders\n * @pro\n */\nclass BindStrategy {\n  /**\n   * Loose bind mode.\n   *\n   * @returns {String}\n   */\n  static get DEFAULT_STRATEGY() {\n    return 'loose';\n  }\n\n  constructor() {\n    this.strategy = null;\n  }\n\n  /**\n   * Set strategy behaviors for binding rows with headers.\n   *\n   * @param name\n   */\n  setStrategy(name) {\n    let Strategy = strategies[toUpperCaseFirst(name)];\n\n    if (!Strategy) {\n      throw new Error(`Bind strategy \"${name}\" does not exist.`);\n    }\n    this.strategy = new Strategy();\n  }\n\n  /**\n   * Reset current map array and create a new one.\n   *\n   * @param {Number} [length] Custom generated map length.\n   */\n  createMap(length) {\n    let strategy = this.strategy;\n    let originLength = length === void 0 ? strategy._arrayMap.length : length;\n\n    strategy._arrayMap.length = 0;\n\n    rangeEach(originLength - 1, (itemIndex) => {\n      strategy._arrayMap.push(itemIndex);\n    });\n  }\n\n  /**\n   * Alias for createRow of strategy class.\n   *\n   * @param {*} params\n   */\n  createRow(...params) {\n    this.strategy.createRow.apply(this.strategy, params);\n  }\n\n  /**\n   * Alias for removeRow of strategy class.\n   *\n   * @param {*} params\n   */\n  removeRow(...params) {\n    this.strategy.removeRow.apply(this.strategy, params);\n  }\n\n  /**\n   * Alias for getValueByIndex of strategy class.\n   *\n   * @param {*} params\n   */\n  translate(...params) {\n    return this.strategy.getValueByIndex.apply(this.strategy, params);\n  }\n\n  /**\n   * Clear array map.\n   */\n  clearMap() {\n    this.strategy.clearMap();\n  }\n\n  /**\n   * Destroy class.\n   */\n  destroy() {\n    if (this.strategy) {\n      this.strategy.destroy();\n    }\n    this.strategy = null;\n  }\n}\n\nexport default BindStrategy;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/bindRowsWithHeaders/bindStrategy.js","import BasePlugin from 'handsontable/plugins/_base.js';\nimport {deepClone, objectEach, hasOwnProperty} from 'handsontable/helpers/object';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {registerPlugin, getPlugin} from 'handsontable/plugins.js';\nimport Endpoints from './endpoints';\n\n/**\n * @plugin ColumnSummary\n * @pro\n *\n * @description\n * Allows making pre-defined calculations on the cell values and display the results within Handsontable.\n * See the demo for more information.\n */\nclass ColumnSummary extends BasePlugin {\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * The Endpoints class instance. Used to make all endpoint-related operations.\n     *\n     * @type {null|Endpoints}\n     */\n    this.endpoints = null;\n  }\n\n  /**\n   * Check if plugin is enabled.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings().columnSummary;\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n\n    this.settings = this.hot.getSettings().columnSummary;\n    this.endpoints = new Endpoints(this, this.settings);\n\n    this.addHook('afterInit', (...args) => this.onAfterInit(...args));\n    this.addHook('afterChange', (...args) => this.onAfterChange(...args));\n    this.addHook('afterFilter', (...args) => this.onAfterFilter(...args));\n\n    this.addHook('beforeCreateRow', (index, amount, source) => this.endpoints.resetSetupBeforeStructureAlteration('insert_row', index, amount, null, source));\n    this.addHook('beforeCreateCol', (index, amount, source) => this.endpoints.resetSetupBeforeStructureAlteration('insert_col', index, amount, null, source));\n    this.addHook('beforeRemoveRow', (...args) => this.endpoints.resetSetupBeforeStructureAlteration('remove_row', ...args));\n    this.addHook('beforeRemoveCol', (...args) => this.endpoints.resetSetupBeforeStructureAlteration('remove_col', ...args));\n    this.addHook('beforeRowMove', (...args) => this.onBeforeRowMove(...args));\n\n    this.addHook('afterCreateRow', (index, amount, source) => this.endpoints.resetSetupAfterStructureAlteration('insert_row', index, amount, null, source));\n    this.addHook('afterCreateCol', (index, amount, source) => this.endpoints.resetSetupAfterStructureAlteration('insert_col', index, amount, null, source));\n    this.addHook('afterRemoveRow', (...args) => this.endpoints.resetSetupAfterStructureAlteration('remove_row', ...args));\n    this.addHook('afterRemoveCol', (...args) => this.endpoints.resetSetupAfterStructureAlteration('remove_col', ...args));\n    this.addHook('afterRowMove', (...args) => this.onAfterRowMove(...args));\n\n    this.addHook('afterLoadData', () => this.endpoints.resetSetupAfterStructureAlteration('insert_row', 0));\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Disable the plugin.\n   */\n  disablePlugin() {\n    this.endpoints = null;\n    this.settings = null;\n    this.currentEndpoint = null;\n  }\n\n  /**\n   * Do the math for a single endpoint.\n   *\n   * @param {Object} endpoint Contains information about the endpoint.\n   */\n  calculate(endpoint) {\n    switch (endpoint.type.toLowerCase()) {\n      case 'sum':\n        endpoint.result = this.calculateSum(endpoint);\n        break;\n      case 'min':\n        endpoint.result = this.calculateMinMax(endpoint, endpoint.type);\n        break;\n      case 'max':\n        endpoint.result = this.calculateMinMax(endpoint, endpoint.type);\n        break;\n      case 'count':\n        endpoint.result = this.countEntries(endpoint);\n        break;\n      case 'average':\n        endpoint.result = this.calculateAverage(endpoint);\n        break;\n      case 'custom':\n        endpoint.result = endpoint.customFunction.call(this, endpoint);\n        break;\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Calculate sum of the values contained in ranges provided in the plugin config.\n   *\n   * @param {Object} endpoint Contains the endpoint information.\n   * @returns {Number} Sum for the selected range\n   */\n  calculateSum(endpoint) {\n    let sum = 0;\n\n    for (let r in endpoint.ranges) {\n      if (hasOwnProperty(endpoint.ranges, r)) {\n        sum += this.getPartialSum(endpoint.ranges[r], endpoint.sourceColumn);\n      }\n    }\n\n    return sum;\n  }\n\n  /**\n   * Get partial sum of values from a single row range\n   *\n   * @param {Array} rowRange Range for the sum.\n   * @param {Number} col Column index.\n   * @returns {Number} The partial sum.\n   */\n  getPartialSum(rowRange, col) {\n    let sum = 0;\n    let i = rowRange[1] || rowRange[0];\n    let cellValue = null;\n    let biggestDecimalPlacesCount = 0;\n\n    do {\n      let physicalRow = this.hot.toPhysicalRow(i);\n      let partake = this.hot.runHooks(\"partakeSummary\", physicalRow);\n      if(partake !== false){\n        cellValue = this.getCellValue(i, col) || 0;\n        let decimalPlaces = (((cellValue + '').split('.')[1] || []).length) || 1;\n        if (decimalPlaces > biggestDecimalPlacesCount) {\n          biggestDecimalPlacesCount = decimalPlaces;\n        }\n\n        sum += cellValue || 0;\n      }\n      i--;\n    } while (i >= rowRange[0]);\n\n    // Workaround for e.g. 802.2 + 1.1 = 803.3000000000001\n    return Math.round(sum * Math.pow(10, biggestDecimalPlacesCount)) / Math.pow(10, biggestDecimalPlacesCount);\n  }\n\n  /**\n   * Calculate the minimal value for the selected ranges\n   *\n   * @param {Object} endpoint Contains the endpoint information.\n   * @param {String} type `'min'` or `'max'`.\n   * @returns {Number} Min or Max value.\n   */\n  calculateMinMax(endpoint, type) {\n    let result = null;\n\n    for (let r in endpoint.ranges) {\n      if (hasOwnProperty(endpoint.ranges, r)) {\n        let partialResult = this.getPartialMinMax(endpoint.ranges[r], endpoint.sourceColumn, type);\n\n        if (result === null && partialResult !== null) {\n          result = partialResult;\n        }\n\n        if (partialResult !== null) {\n          switch (type) {\n            case 'min':\n              result = Math.min(result, partialResult);\n              break;\n            case 'max':\n              result = Math.max(result, partialResult);\n              break;\n            default:\n              break;\n          }\n\n        }\n      }\n    }\n\n    return result === null ? 'Not enough data' : result;\n  }\n\n  /**\n   * Get a local minimum of the provided sub-range\n   *\n   * @param {Array} rowRange Range for the calculation.\n   * @param {Number} col Column index.\n   * @param {String} type `'min'` or `'max'`\n   * @returns {Number} Min or max value.\n   */\n  getPartialMinMax(rowRange, col, type) {\n    let result = null;\n    let i = rowRange[1] || rowRange[0];\n    let cellValue;\n\n    do {\n      cellValue = this.getCellValue(i, col) || null;\n\n      if (result === null) {\n        result = cellValue;\n      } else if (cellValue !== null) {\n        switch (type) {\n          case 'min':\n            result = Math.min(result, cellValue);\n            break;\n          case 'max':\n            result = Math.max(result, cellValue);\n            break;\n          default:\n            break;\n        }\n\n      }\n\n      i--;\n    } while (i >= rowRange[0]);\n\n    return result;\n  }\n\n  /**\n   * Count empty cells in the provided row range.\n   *\n   * @param {Array} rowRange Row range for the calculation.\n   * @param {Number} col Column index.\n   * @returns {Number} Empty cells count.\n   */\n  countEmpty(rowRange, col) {\n    let cellValue;\n    let counter = 0;\n    let i = rowRange[1] || rowRange[0];\n\n    do {\n      cellValue = this.getCellValue(i, col);\n\n      if (!cellValue) {\n        counter++;\n      }\n\n      i--;\n    } while (i >= rowRange[0]);\n\n    return counter;\n  }\n\n  /**\n   * Count non-empty cells in the provided row range.\n   *\n   * @param {Object} endpoint Contains the endpoint information.\n   * @returns {Number} Entry count.\n   */\n  countEntries(endpoint) {\n    let result = 0;\n    let ranges = endpoint.ranges;\n\n    for (let r in ranges) {\n      if (hasOwnProperty(ranges, r)) {\n        let partial = ranges[r][1] === void 0 ? 1 : ranges[r][1] - ranges[r][0] + 1;\n        let emptyCount = this.countEmpty(ranges[r], endpoint.sourceColumn);\n\n        result += partial;\n        result -= emptyCount;\n      }\n    }\n\n    return result;\n  }\n\n  /**\n   * Calculate the average value from the cells in the range.\n   *\n   * @param {Object} endpoint Contains the endpoint information.\n   * @returns {Number} Avarage value.\n   */\n  calculateAverage(endpoint) {\n    let sum = this.calculateSum(endpoint);\n    let entriesCount = this.countEntries(endpoint);\n\n    return sum / entriesCount;\n  }\n\n  /**\n   * Gets a cell value, taking into consideration a basic validation.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @returns {String} The cell value.\n   */\n  getCellValue(row, col) {\n    let visualRowIndex = this.endpoints.getVisualRowIndex(row);\n    let visualColumnIndex = this.endpoints.getVisualColumnIndex(col);\n\n    let physicalRow = this.hot.toPhysicalRow(row);\n    let cellValue = this.hot.getSourceDataAtCell(physicalRow, col);\n    let cellClassName = this.hot.getCellMeta(visualRowIndex, visualColumnIndex).className || '';\n\n    if (cellClassName.indexOf('columnSummaryResult') > -1) {\n      return null;\n    }\n\n    if (this.endpoints.currentEndpoint.forceNumeric) {\n      if (typeof cellValue === 'string') {\n        cellValue = cellValue.replace(/,/, '.');\n      }\n\n      cellValue = parseFloat(cellValue);\n    }\n\n    if (isNaN(cellValue)) {\n      if (!this.endpoints.currentEndpoint.suppressDataTypeErrors) {\n        throw new Error(`ColumnSummary plugin: cell at (${row}, ${col}) is not in a numeric format. Cannot do the calculation.`);\n      }\n    }\n\n    return cellValue;\n  }\n\n  /**\n   * `afterInit` hook callback.\n   *\n   * @private\n   */\n  onAfterInit() {\n    this.endpoints.endpoints = this.endpoints.parseSettings();\n    this.endpoints.refreshAllEndpoints(true);\n  }\n\n  /**\n   * `afterChange` hook callback.\n   *\n   * @private\n   * @param {Array} changes\n   * @param {String} source\n   */\n  onAfterChange(changes, source) {\n    if (changes && source !== 'ColumnSummary.reset' && source !== 'ColumnSummary.set' && source !== 'loadData') {\n      this.endpoints.refreshChangedEndpoints(changes);\n    }\n  }\n\n  onAfterFilter(){\n    this.endpoints.endpoints = this.endpoints.parseSettings();\n    this.endpoints.refreshAllEndpoints(true);\n  }\n\n  /**\n   * `beforeRowMove` hook callback.\n   *\n   * @param {Array} rows Array of logical rows to be moved.\n   * @param {Number} target Index of the destination row.\n   */\n  onBeforeRowMove(rows, target) {\n    this.endpoints.resetSetupBeforeStructureAlteration('move_row', rows[0], rows.length, rows, this.pluginName);\n  }\n\n  /**\n   * `afterRowMove` hook callback.\n   *\n   * @param {Array} rows Array of logical rows that were moved.\n   * @param {Number} target Index of the destination row.\n   */\n  onAfterRowMove(rows, target) {\n    this.endpoints.resetSetupAfterStructureAlteration('move_row', target, rows.length, rows, this.pluginName);\n  }\n}\n\nregisterPlugin('columnSummary', ColumnSummary);\n\nexport default ColumnSummary;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/columnSummary/columnSummary.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {deepClone} from 'handsontable/helpers/object';\nimport {getTranslator} from 'handsontable/utils/recordTranslator';\n\n/**\n * Class used to make all endpoint-related operations.\n *\n * @class Endpoints\n * @plugin ColumnSummary\n * @pro\n */\nclass Endpoints {\n  constructor(plugin, settings) {\n    /**\n     * The main plugin instance.\n     */\n    this.plugin = plugin;\n    /**\n     * Handsontable instance.\n     *\n     * @type {Object}\n     */\n    this.hot = this.plugin.hot;\n    /**\n     * Array of declared plugin endpoints (calculation destination points).\n     *\n     * @type {Array}\n     * @default {Array} Empty array.\n     */\n    this.endpoints = [];\n    /**\n     * The plugin settings, taken from Handsontable configuration.\n     *\n     * @type {Object|Function}\n     * @default null\n     */\n    this.settings = settings;\n    /**\n     * Settings type. Can be either 'array' or 'function.\n     *\n     * @type {string}\n     * @default {'array'}\n     */\n    this.settingsType = 'array';\n    /**\n     * The current endpoint (calculation destination point) in question.\n     *\n     * @type {Object}\n     * @default null\n     */\n    this.currentEndpoint = null;\n    /**\n     * Array containing a list of changes to be applied.\n     *\n     * @private\n     * @type {Array}\n     * @default {[]}\n     */\n    this.cellsToSetCache = [];\n    /**\n     * A `recordTranslator` instance.\n     * @private\n     * @type {Object}\n     */\n    this.recordTranslator = getTranslator(this.hot);\n  }\n\n  /**\n   * Get a single endpoint object.\n   *\n   * @param {Number} index Index of the endpoint.\n   * @returns {Object}\n   */\n  getEndpoint(index) {\n    if (this.settingsType === 'function') {\n      return this.fillMissingEndpointData(this.settings)[index];\n    }\n\n    return this.endpoints[index];\n  }\n\n  /**\n   * Get an array with all the endpoints.\n   *\n   * @returns {Array}\n   */\n  getAllEndpoints() {\n    if (this.settingsType === 'function') {\n      return this.fillMissingEndpointData(this.settings);\n    }\n\n    return this.endpoints;\n  }\n\n  /**\n   * Used to fill the blanks in the endpoint data provided by a settings function.\n   *\n   * @private\n   * @param {Function} func Function provided in the HOT settings.\n   * @returns {Array} An array of endpoints.\n   */\n  fillMissingEndpointData(func) {\n    return this.parseSettings(func.call(this));\n  }\n\n  /**\n   * Parse plugin's settings.\n   *\n   * @param {Array} settings The settings array.\n   */\n  parseSettings(settings) {\n    let endpointsArray = [];\n\n    if (!settings && typeof this.settings === 'function') {\n      this.settingsType = 'function';\n\n      return;\n    }\n\n    if (!settings) {\n      settings = this.settings;\n    }\n\n    arrayEach(settings, (val) => {\n      let newEndpoint = {};\n\n      this.assignSetting(val, newEndpoint, 'ranges', [[0, this.hot.countRows() - 1]]);\n      this.assignSetting(val, newEndpoint, 'reversedRowCoords', false);\n      this.assignSetting(val, newEndpoint, 'destinationRow', new Error(`\n        You must provide a destination row for the Column Summary plugin in order to work properly!\n      `));\n      this.assignSetting(val, newEndpoint, 'destinationColumn', new Error(`\n        You must provide a destination column for the Column Summary plugin in order to work properly!\n      `));\n      this.assignSetting(val, newEndpoint, 'sourceColumn', val.destinationColumn);\n      this.assignSetting(val, newEndpoint, 'type', 'sum');\n      this.assignSetting(val, newEndpoint, 'forceNumeric', false);\n      this.assignSetting(val, newEndpoint, 'suppressDataTypeErrors', true);\n      this.assignSetting(val, newEndpoint, 'suppressDataTypeErrors', true);\n      this.assignSetting(val, newEndpoint, 'customFunction', null);\n      this.assignSetting(val, newEndpoint, 'readOnly', true);\n      this.assignSetting(val, newEndpoint, 'roundFloat', false);\n\n      endpointsArray.push(newEndpoint);\n    });\n\n    return endpointsArray;\n  }\n\n  /**\n   * Setter for the internal setting objects.\n   *\n   * @param {Object} settings Object with the settings.\n   * @param {Object} endpoint Contains information about the endpoint for the the calculation.\n   * @param {String} name Settings name.\n   * @param defaultValue Default value for the settings.\n   */\n  assignSetting(settings, endpoint, name, defaultValue) {\n    if (name === 'ranges' && settings[name] === void 0) {\n      endpoint[name] = defaultValue;\n      return;\n    } else if (name === 'ranges' && settings[name].length === 0) {\n      return;\n    }\n\n    if (settings[name] === void 0) {\n      if (defaultValue instanceof Error) {\n        throw defaultValue;\n\n      }\n\n      endpoint[name] = defaultValue;\n\n    } else {\n      /* eslint-disable no-lonely-if */\n      if (name === 'destinationRow' && endpoint.reversedRowCoords) {\n        endpoint[name] = this.hot.countRows() - settings[name] - 1;\n\n      } else {\n        endpoint[name] = settings[name];\n      }\n    }\n  }\n\n  /**\n   * Resets the endpoint setup before the structure alteration (like inserting or removing rows/columns). Used for settings provided as a function.\n   *\n   * @private\n   * @param {String} action Type of the action performed.\n   * @param {Number} index Row/column index.\n   * @param {Number} number Number of rows/columns added/removed.\n   * @param {Array} [logicRows] Array of the logical indexes.\n   * @param {String} [source] Source of change.\n   */\n  resetSetupBeforeStructureAlteration(action, index, number, logicRows, source) {\n    if (this.settingsType !== 'function') {\n      return;\n    }\n\n    const type = action.indexOf('row') > -1 ? 'row' : 'col';\n    const endpoints = this.getAllEndpoints();\n\n    arrayEach(endpoints, (val, key, obj) => {\n      if (type === 'row' && val.destinationRow >= index) {\n        if (action === 'insert_row') {\n          val.alterRowOffset = number;\n        } else if (action === 'remove_row') {\n          val.alterRowOffset = (-1) * number;\n        }\n      }\n\n      if (type === 'col' && val.destinationColumn >= index) {\n        if (action === 'insert_col') {\n          val.alterColumnOffset = number;\n        } else if (action === 'remove_col') {\n          val.alterColumnOffset = (-1) * number;\n        }\n      }\n    });\n\n    this.resetAllEndpoints(endpoints, false);\n  }\n\n  /**\n   * afterCreateRow/afterCreateRow/afterRemoveRow/afterRemoveCol hook callback. Reset and reenables the summary functionality\n   * after changing the table structure.\n   *\n   * @private\n   * @param {String} action Type of the action performed.\n   * @param {Number} index Row/column index.\n   * @param {Number} number Number of rows/columns added/removed.\n   * @param {Array} [logicRows] Array of the logical indexes.\n   * @param {String} [source] Source of change.\n   * @param {Boolean} [forceRefresh] `true` of the endpoints should refresh after completing the function.\n   */\n  resetSetupAfterStructureAlteration(action, index, number, logicRows, source, forceRefresh = true) {\n    if (this.settingsType === 'function') {\n\n      // We need to run it on a next avaiable hook, because the TrimRows' `afterCreateRow` hook triggers after this one,\n      // and it needs to be run to properly calculate the endpoint value.\n      const beforeRenderCallback = () => {\n        this.hot.removeHook('beforeRender', beforeRenderCallback);\n        return this.refreshAllEndpoints(true);\n      };\n      this.hot.addHookOnce('beforeRender', beforeRenderCallback);\n      return;\n    }\n\n    let type = action.indexOf('row') > -1 ? 'row' : 'col';\n    let multiplier = action.indexOf('remove') > -1 ? -1 : 1;\n    let endpoints = this.getAllEndpoints();\n    const rowMoving = action.indexOf('move_row') === 0;\n    const placeOfAlteration = index;\n\n    arrayEach(endpoints, (val, key, obj) => {\n      if (type === 'row' && val.destinationRow >= placeOfAlteration) {\n        val.alterRowOffset = multiplier * number;\n      }\n\n      if (type === 'col' && val.destinationColumn >= placeOfAlteration) {\n        val.alterColumnOffset = multiplier * number;\n      }\n    });\n\n    this.resetAllEndpoints(endpoints, !rowMoving);\n\n    if (rowMoving) {\n      arrayEach(endpoints, (endpoint, key, obj) => {\n        this.extendEndpointRanges(endpoint, placeOfAlteration, logicRows[0], logicRows.length);\n        this.recreatePhysicalRanges(endpoint);\n        this.clearOffsetInformation(endpoint);\n      });\n\n    } else {\n      arrayEach(endpoints, (endpoint, key, obj) => {\n        this.shiftEndpointCoordinates(endpoint, placeOfAlteration);\n      });\n    }\n\n    if (forceRefresh) {\n      this.refreshAllEndpoints(true);\n    }\n  }\n\n  /**\n   * Clear the offset information from the endpoint object.\n   *\n   * @private\n   * @param {Object} endpoint And endpoint object.\n   */\n  clearOffsetInformation(endpoint) {\n    endpoint.alterRowOffset = void 0;\n    endpoint.alterColumnOffset = void 0;\n  }\n\n  /**\n   * Extend the row ranges for the provided endpoint.\n   *\n   * @private\n   * @param {Object} endpoint The endpoint object.\n   * @param {Number} placeOfAlteration Index of the row where the alteration takes place.\n   * @param {Number} previousPosition Previous endpoint result position.\n   * @param {Number} offset Offset generated by the alteration.\n   */\n  extendEndpointRanges(endpoint, placeOfAlteration, previousPosition, offset) {\n    arrayEach(endpoint.ranges, (range, i) => {\n      // is a range, not a single row\n      if (range[1]) {\n\n        if (placeOfAlteration >= range[0] && placeOfAlteration <= range[1]) {\n          if (previousPosition > range[1]) {\n            range[1] += offset;\n          } else if (previousPosition < range[0]) {\n            range[0] -= offset;\n          }\n        } else if (previousPosition >= range[0] && previousPosition <= range[1]) {\n          range[1] -= offset;\n\n          if (placeOfAlteration <= range[0]) {\n            range[0]++;\n            range[1]++;\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Recreate the physical ranges for the provided endpoint. Used (for example) when a row gets moved and extends an existing range.\n   *\n   * @private\n   * @param {Object} endpoint An endpoint object.\n   */\n  recreatePhysicalRanges(endpoint) {\n    const ranges = endpoint.ranges;\n    const newRanges = [];\n    let allIndexes = [];\n\n    arrayEach(ranges, (range) => {\n      let newRange = [];\n      if (range[1]) {\n        for (let i = range[0]; i <= range[1]; i++) {\n          newRange.push(this.recordTranslator.toPhysicalRow(i));\n        }\n      } else {\n        newRange.push(this.recordTranslator.toPhysicalRow(range[0]));\n      }\n\n      allIndexes.push(newRange);\n    });\n\n    arrayEach(allIndexes, (range) => {\n      let newRange = [];\n      arrayEach(range, (coord, index) => {\n        if (index === 0) {\n          newRange.push(coord);\n\n        } else if (range[index] !== range[index - 1] + 1) {\n          newRange.push(range[index - 1]);\n          newRanges.push(newRange);\n          newRange = [];\n          newRange.push(coord);\n        }\n\n        if (index === range.length - 1) {\n          newRange.push(coord);\n          newRanges.push(newRange);\n        }\n      });\n    });\n\n    endpoint.ranges = newRanges;\n  }\n\n  /**\n   * Shifts the endpoint coordinates by the defined offset.\n   *\n   * @private\n   * @param {Object} endpoint Endpoint object.\n   * @param {Number} offsetStartIndex Index of the performed change (if the change is located after the endpoint, nothing about the endpoint has to be changed.\n   */\n  shiftEndpointCoordinates(endpoint, offsetStartIndex) {\n    if (endpoint.alterRowOffset && endpoint.alterRowOffset !== 0) {\n      endpoint.destinationRow += endpoint.alterRowOffset || 0;\n\n      arrayEach(endpoint.ranges, (element, i) => {\n        arrayEach(element, (subElement, j) => {\n          if (subElement >= offsetStartIndex) {\n            element[j] += endpoint.alterRowOffset || 0;\n          }\n        });\n      });\n\n    } else if (endpoint.alterColumnOffset && endpoint.alterColumnOffset !== 0) {\n      endpoint.destinationColumn += endpoint.alterColumnOffset || 0;\n      endpoint.sourceColumn += endpoint.alterColumnOffset || 0;\n    }\n  }\n\n  /**\n   * Resets (removes) the endpoints from the table.\n   *\n   * @param {Array} endpoints Array containing the endpoints.\n   * @param {Boolean} [useOffset=true] Use the cell offset value.\n   */\n  resetAllEndpoints(endpoints, useOffset = true) {\n    this.cellsToSetCache = [];\n\n    if (!endpoints) {\n      endpoints = this.getAllEndpoints();\n    }\n\n    arrayEach(endpoints, (value) => {\n      this.resetEndpointValue(value, useOffset);\n    });\n\n    this.hot.setDataAtCell(this.cellsToSetCache, 'ColumnSummary.reset');\n\n    this.cellsToSetCache = [];\n  }\n\n  /**\n   * Calculate and refresh all defined endpoints.\n   *\n   * @param {Boolean} init `true` if it's the initial call.\n   */\n  refreshAllEndpoints(init) {\n    this.cellsToSetCache = [];\n\n    arrayEach(this.getAllEndpoints(), (value) => {\n      this.currentEndpoint = value;\n      this.plugin.calculate(value);\n      this.setEndpointValue(value, 'init');\n    });\n    this.currentEndpoint = null;\n\n    this.hot.setDataAtCell(this.cellsToSetCache, 'ColumnSummary.reset');\n\n    this.cellsToSetCache = [];\n  }\n\n  /**\n   * Calculate and refresh endpoints only in the changed columns.\n   *\n   * @param {Array} changes Array of changes from the `afterChange` hook.\n   */\n  refreshChangedEndpoints(changes) {\n    let needToRefresh = [];\n    this.cellsToSetCache = [];\n\n    arrayEach(changes, (value, key, changes) => {\n      // if nothing changed, dont update anything\n      if ((value[2] || '') + '' === value[3] + '') {\n        return;\n      }\n\n      arrayEach(this.getAllEndpoints(), (value, j) => {\n        if (this.hot.propToCol(changes[key][1]) === value.sourceColumn && needToRefresh.indexOf(j) === -1) {\n          needToRefresh.push(j);\n        }\n      });\n    });\n\n    arrayEach(needToRefresh, (value) => {\n      this.refreshEndpoint(this.getEndpoint(value));\n    });\n\n    this.hot.setDataAtCell(this.cellsToSetCache, 'ColumnSummary.reset');\n    this.cellsToSetCache = [];\n  }\n\n  /**\n   * Calculate and refresh a single endpoint.\n   *\n   * @param {Object} endpoint Contains the endpoint information.\n   */\n  refreshEndpoint(endpoint) {\n    this.currentEndpoint = endpoint;\n    this.plugin.calculate(endpoint);\n    this.setEndpointValue(endpoint);\n    this.currentEndpoint = null;\n  }\n\n  /**\n   * Reset the endpoint value.\n   *\n   * @param {Object} endpoint Contains the endpoint information.\n   * @param {Boolean} [useOffset=true] Use the cell offset value.\n   */\n  resetEndpointValue(endpoint, useOffset = true) {\n    let alterRowOffset = endpoint.alterRowOffset || 0;\n    let alterColOffset = endpoint.alterColumnOffset || 0;\n    let [visualRowIndex, visualColumnIndex] = this.recordTranslator.toVisual(endpoint.destinationRow, endpoint.destinationColumn);\n\n    // Clear the meta on the \"old\" indexes\n    const cellMeta = this.hot.getCellMeta(visualRowIndex, visualColumnIndex);\n    cellMeta.readOnly = false;\n    cellMeta.className = '';\n\n    this.cellsToSetCache.push([\n      this.recordTranslator.toVisualRow(endpoint.destinationRow + (useOffset ? alterRowOffset : 0)),\n      this.recordTranslator.toVisualColumn(endpoint.destinationColumn + (useOffset ? alterColOffset : 0)),\n      ''\n    ]);\n  }\n\n  /**\n   * Set the endpoint value.\n   *\n   * @param {Object} endpoint Contains the endpoint information.\n   * @param {String} [source] Source of the call information.\n   * @param {Boolean} [render=false] `true` if it needs to render the table afterwards.\n   */\n  setEndpointValue(endpoint, source, render = false) {\n    // We'll need the reversed offset values, because cellMeta will be shifted AGAIN afterwards.\n    const reverseRowOffset = (-1) * endpoint.alterRowOffset || 0;\n    const reverseColOffset = (-1) * endpoint.alterColumnOffset || 0;\n    const visualEndpointRowIndex = this.getVisualRowIndex(endpoint.destinationRow);\n\n    const cellMeta = this.hot.getCellMeta(this.getVisualRowIndex(endpoint.destinationRow + reverseRowOffset), endpoint.destinationColumn + reverseColOffset);\n\n    if (visualEndpointRowIndex > this.hot.countRows() ||\n      endpoint.destinationColumn > this.hot.countCols()) {\n      this.throwOutOfBoundsWarning();\n      return;\n    }\n\n    if (source === 'init' || cellMeta.readOnly !== endpoint.readOnly) {\n      cellMeta.readOnly = endpoint.readOnly;\n      cellMeta.className = 'columnSummaryResult';\n    }\n\n    if (endpoint.roundFloat && !isNaN(endpoint.result)) {\n      endpoint.result = endpoint.result.toFixed(endpoint.roundFloat);\n    }\n\n    if (render) {\n      this.hot.setDataAtCell(visualEndpointRowIndex, endpoint.destinationColumn, endpoint.result, 'ColumnSummary.set');\n    } else {\n      this.cellsToSetCache.push([visualEndpointRowIndex, endpoint.destinationColumn, endpoint.result]);\n    }\n\n    endpoint.alterRowOffset = void 0;\n    endpoint.alterColumnOffset = void 0;\n  }\n\n  /**\n   * Get the visual row index for the provided row. Uses the `umodifyRow` hook.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @returns {Number}\n   */\n  getVisualRowIndex(row) {\n    row = this.hot.toPhysicalRow(row);\n    return this.hot.runHooks('unmodifyRow', row, 'columnSummary');\n  }\n\n  /**\n   * Get the visual column index for the provided column. Uses the `umodifyColumn` hook.\n   *\n   * @private\n   * @param {Number} column Column index.\n   * @returns {Number}\n   */\n  getVisualColumnIndex(column) {\n    return this.hot.runHooks('unmodifyCol', column, 'columnSummary');\n  }\n\n  /**\n   * Throw an error for the calculation range being out of boundaries.\n   *\n   * @private\n   */\n  throwOutOfBoundsWarning() {\n    console.warn('One of the  Column Summary plugins\\' destination points you provided is beyond the table boundaries!');\n  }\n}\n\nexport default Endpoints;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/columnSummary/endpoints.js","import BasePlugin from 'handsontable/plugins/_base';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {objectEach} from 'handsontable/helpers/object';\nimport CommandExecutor from 'handsontable/plugins/contextMenu/commandExecutor';\nimport EventManager from 'handsontable/eventManager';\nimport {getWindowScrollTop, getWindowScrollLeft, hasClass, closest} from 'handsontable/helpers/dom/element';\nimport ItemsFactory from 'handsontable/plugins/contextMenu/itemsFactory';\nimport Menu from 'handsontable/plugins/contextMenu/menu';\nimport {registerPlugin} from 'handsontable/plugins';\nimport Hooks from 'handsontable/pluginHooks';\nimport {stopPropagation} from 'handsontable/helpers/dom/event';\nimport {\n  COLUMN_LEFT,\n  COLUMN_RIGHT,\n  REMOVE_COLUMN,\n  CLEAR_COLUMN,\n  READ_ONLY,\n  ALIGNMENT,\n  SEPARATOR\n} from 'handsontable/plugins/contextMenu/predefinedItems';\n\nimport './dropdownMenu.css';\n\nHooks.getSingleton().register('afterDropdownMenuDefaultOptions');\nHooks.getSingleton().register('afterDropdownMenuShow');\nHooks.getSingleton().register('afterDropdownMenuHide');\nHooks.getSingleton().register('afterDropdownMenuExecute');\n\nconst BUTTON_CLASS_NAME = 'changeType';\n\n/**\n * @plugin DropdownMenu\n * @pro\n * @dependencies ContextMenu\n */\nclass DropdownMenu extends BasePlugin {\n  /**\n   * Default menu items order when `dropdownMenu` is enabled by setting the config item to `true`.\n   *\n   * @returns {Array}\n   */\n  static get DEFAULT_ITEMS() {\n    return [\n      COLUMN_LEFT,\n      COLUMN_RIGHT,\n      SEPARATOR,\n      REMOVE_COLUMN,\n      SEPARATOR,\n      CLEAR_COLUMN,\n      SEPARATOR,\n      READ_ONLY,\n      SEPARATOR,\n      ALIGNMENT,\n    ];\n  }\n\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * Instance of {@link EventManager}.\n     *\n     * @type {EventManager}\n     */\n    this.eventManager = new EventManager(this);\n    /**\n     * Instance of {@link CommandExecutor}.\n     *\n     * @type {CommandExecutor}\n     */\n    this.commandExecutor = new CommandExecutor(this.hot);\n    /**\n     * Instance of {@link ItemsFactory}.\n     *\n     * @type {ItemsFactory}\n     */\n    this.itemsFactory = null;\n    /**\n     * Instance of {@link Menu}.\n     *\n     * @type {Menu}\n     */\n    this.menu = null;\n\n    // One listener for enable/disable functionality\n    this.hot.addHook('afterGetColHeader', (col, TH) => this.onAfterGetColHeader(col, TH));\n  }\n\n  /**\n   * Check if the plugin is enabled in the Handsontable settings.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return this.hot.getSettings().dropdownMenu;\n  }\n\n  /**\n   * Enable the plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n    this.itemsFactory = new ItemsFactory(this.hot, DropdownMenu.DEFAULT_ITEMS);\n\n    const settings = this.hot.getSettings().dropdownMenu;\n    let predefinedItems = {\n      items: this.itemsFactory.getItems(settings)\n    };\n    this.registerEvents();\n\n    if (typeof settings.callback === 'function') {\n      this.commandExecutor.setCommonCallback(settings.callback);\n    }\n    super.enablePlugin();\n\n    this.callOnPluginsReady(() => {\n      this.hot.runHooks('afterDropdownMenuDefaultOptions', predefinedItems);\n\n      this.itemsFactory.setPredefinedItems(predefinedItems.items);\n      let menuItems = this.itemsFactory.getItems(settings);\n\n      if (this.menu) {\n        this.menu.destroy();\n      }\n      this.menu = new Menu(this.hot, {\n        className: 'htDropdownMenu',\n        keepInViewport: true\n      });\n      this.hot.runHooks('beforeDropdownMenuSetItems', menuItems);\n\n      this.menu.setMenuItems(menuItems);\n\n      this.menu.addLocalHook('afterOpen', () => this.onMenuAfterOpen());\n      this.menu.addLocalHook('afterClose', () => this.onMenuAfterClose());\n      this.menu.addLocalHook('executeCommand', (...params) => this.executeCommand.apply(this, params));\n\n      // Register all commands. Predefined and added by user or by plugins\n      arrayEach(menuItems, (command) => this.commandExecutor.registerCommand(command.key, command));\n    });\n  }\n\n  /**\n   * Updates the plugin to use the latest options you have specified.\n   */\n  updatePlugin() {\n    this.disablePlugin();\n    this.enablePlugin();\n    super.updatePlugin();\n  }\n\n  /**\n   * Disable the plugin for this Handsontable instance.\n   */\n  disablePlugin() {\n    this.close();\n\n    if (this.menu) {\n      this.menu.destroy();\n    }\n    super.disablePlugin();\n  }\n\n  /**\n   * Register the DOM listeners.\n   *\n   * @private\n   */\n  registerEvents() {\n    this.eventManager.addEventListener(this.hot.rootElement, 'click', (event) => this.onTableClick(event));\n  }\n\n  /**\n   * Open menu and re-position it based on the DOM event object.\n   *\n   * @param {Event|Object} event Event object.\n   */\n  open(event) {\n    if (!this.menu) {\n      return;\n    }\n    this.menu.open();\n\n    if (event.width) {\n      this.menu.setOffset('left', event.width);\n    }\n    this.menu.setPosition(event);\n\n    // ContextMenu is not detected HotTableEnv correctly because is injected outside hot-table\n    this.menu.hotMenu.isHotTableEnv = this.hot.isHotTableEnv;\n    // Handsontable.eventManager.isHotTableEnv = this.hot.isHotTableEnv;\n  }\n\n  /**\n   * Close menu.\n   */\n  close() {\n    if (!this.menu) {\n      return;\n    }\n    this.menu.close();\n  }\n\n  /**\n   * Execute context menu command.\n   *\n   * You can execute all predefined commands:\n   *  * `'row_above'` - Insert row above\n   *  * `'row_below'` - Insert row below\n   *  * `'col_left'` - Insert column on the left\n   *  * `'col_right'` - Insert column on the right\n   *  * `'clear_column'` - Clear selected column\n   *  * `'remove_row'` - Remove row\n   *  * `'remove_col'` - Remove column\n   *  * `'undo'` - Undo last action\n   *  * `'redo'` - Redo last action\n   *  * `'make_read_only'` - Make cell read only\n   *  * `'alignment:left'` - Alignment to the left\n   *  * `'alignment:top'` - Alignment to the top\n   *  * `'alignment:right'` - Alignment to the right\n   *  * `'alignment:bottom'` - Alignment to the bottom\n   *  * `'alignment:middle'` - Alignment to the middle\n   *  * `'alignment:center'` - Alignment to the center (justify)\n   *\n   * Or you can execute command registered in settings where `key` is your command name.\n   *\n   * @param {String} commandName\n   * @param {*} params\n   */\n  executeCommand(...params) {\n    this.commandExecutor.execute.apply(this.commandExecutor, params);\n  }\n\n  /**\n   * Turn on / turn off listening on dropdown menu\n   *\n   * @param {Boolean} listen Turn on listening when value is set to true, otherwise turn it off.\n   */\n  setListening(listen = true) {\n    if (this.menu.isOpened()) {\n      if (listen) {\n        this.menu.hotMenu.listen();\n      } else {\n        this.menu.hotMenu.unlisten();\n      }\n    }\n  }\n\n  /**\n   * Table click listener.\n   *\n   * @private\n   * @param {Event} event\n   */\n  onTableClick(event) {\n    stopPropagation(event);\n\n    if (hasClass(event.target, BUTTON_CLASS_NAME) && !this.menu.isOpened()) {\n      let rect = event.target.getBoundingClientRect();\n\n      this.open({\n        left: rect.left,\n        top: rect.top + event.target.offsetHeight + 3,\n        width: rect.width,\n        height: rect.height,\n      });\n    }\n  }\n\n  /**\n   * On after get column header listener.\n   *\n   * @private\n   * @param {Number} col\n   * @param {HTMLTableCellElement} TH\n   */\n  onAfterGetColHeader(col, TH) {\n    // Corner or a higher-level header\n    let headerRow = TH.parentNode;\n    if (!headerRow) {\n      return;\n    }\n\n    let headerRowList = headerRow.parentNode.childNodes;\n    let level = Array.prototype.indexOf.call(headerRowList, headerRow);\n\n    if (col < 0 || level !== headerRowList.length - 1) {\n      return;\n    }\n\n    const existingButton = TH.querySelector('.' + BUTTON_CLASS_NAME);\n\n    // Plugin enabled and buttons already exists, return.\n    if (this.enabled && existingButton) {\n      return;\n    }\n    // Plugin disabled and buttons still exists, so remove them.\n    if (!this.enabled) {\n      if (existingButton) {\n        existingButton.parentNode.removeChild(existingButton);\n      }\n\n      return;\n    }\n    let button = document.createElement('button');\n\n    button.className = BUTTON_CLASS_NAME;\n\n    // prevent page reload on button click\n    button.onclick = function() {\n      return false;\n    };\n\n    TH.firstChild.insertBefore(button, TH.firstChild.firstChild);\n  }\n\n  /**\n   * On menu after open listener.\n   *\n   * @private\n   */\n  onMenuAfterOpen() {\n    this.hot.runHooks('afterDropdownMenuShow', this);\n  }\n\n  /**\n   * On menu after close listener.\n   *\n   * @private\n   */\n  onMenuAfterClose() {\n    this.hot.listen();\n    this.hot.runHooks('afterDropdownMenuHide', this);\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    this.close();\n\n    if (this.menu) {\n      this.menu.destroy();\n    }\n    super.destroy();\n  }\n}\n\nDropdownMenu.SEPARATOR = {\n  name: SEPARATOR\n};\n\nregisterPlugin('dropdownMenu', DropdownMenu);\n\nexport default DropdownMenu;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/dropdownMenu/dropdownMenu.js","import {addClass} from 'handsontable/helpers/dom/element';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport BaseComponent from './_base';\nimport InputUI from './../ui/input';\n\n/**\n * @class ActionBarComponent\n * @plugin Filters\n */\nclass ActionBarComponent extends BaseComponent {\n  static get BUTTON_OK() {\n    return 'ok';\n  }\n  static get BUTTON_CANCEL() {\n    return 'cancel';\n  }\n\n  constructor(hotInstance) {\n    super(hotInstance);\n\n    this.elements.push(\n      new InputUI(this.hot, {\n        // type: 'button', value: 'OK', className: 'htUIButton htUIButtonOK', identifier: ActionBarComponent.BUTTON_OK\n        type: 'button', value: '', className: 'htUIButton htUIButtonOK', identifier: ActionBarComponent.BUTTON_OK\n      })\n    );\n    this.elements.push(\n      new InputUI(this.hot, {\n        // type: 'button', value: 'Cancel', className: 'htUIButton htUIButtonCancel', identifier: ActionBarComponent.BUTTON_CANCEL\n        type: 'button', value: '', className: 'htUIButton htUIButtonCancel', identifier: ActionBarComponent.BUTTON_CANCEL\n      })\n    );\n    this.registerHooks();\n  }\n\n  /**\n   * Register all necessary hooks.\n   *\n   * @private\n   */\n  registerHooks() {\n    arrayEach(this.elements, (element) => {\n      element.addLocalHook('click', (event, button) => this.onButtonClick(event, button));\n    });\n  }\n\n  /**\n   * Get menu object descriptor.\n   *\n   * @returns {Object}\n   */\n  getMenuItemDescriptor() {\n    return {\n      key: 'filter_action_bar',\n      name: 'Action bar',\n      isCommand: false,\n      disableSelection: true,\n      hidden: () => this.isHidden(),\n      renderer: (hot, wrapper, row, col, prop, value) => {\n        addClass(wrapper.parentNode, 'htFiltersMenuActionBar');\n\n        arrayEach(this.elements, (ui) => wrapper.appendChild(ui.element));\n\n        return wrapper;\n      }\n    };\n  }\n\n  /**\n   * Fire accept event.\n   */\n  accept() {\n    this.runLocalHooks('accept');\n  }\n\n  /**\n   * Fire cancel event.\n   */\n  cancel() {\n    this.runLocalHooks('cancel');\n  }\n\n  /**\n   * On button click listener.\n   *\n   * @private\n   * @param {Event} event DOM event\n   * @param {InputUI} button InputUI object.\n   */\n  onButtonClick(event, button) {\n    if (button.options.identifier === ActionBarComponent.BUTTON_OK) {\n      this.accept();\n    } else {\n      this.cancel();\n    }\n  }\n}\n\nexport default ActionBarComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/component/actionBar.js","import {addClass} from 'handsontable/helpers/dom/element';\nimport {stopImmediatePropagation} from 'handsontable/helpers/dom/event';\nimport {arrayEach, arrayFilter} from 'handsontable/helpers/array';\nimport {extend} from 'handsontable/helpers/object';\nimport {isKey} from 'handsontable/helpers/unicode';\nimport BaseComponent from './_base';\nimport getOptionsList, {FORMULA_NONE, FORMULA_BY_VALUE} from './../constants';\nimport InputUI from './../ui/input';\nimport SelectUI from './../ui/select';\nimport {getFormulaDescriptor} from './../formulaRegisterer';\n\n/**\n * @class ConditionComponent\n * @plugin Filters\n */\nclass ConditionComponent extends BaseComponent {\n  constructor(hotInstance) {\n    super(hotInstance);\n\n    this.elements.push(new SelectUI(this.hot));\n    this.elements.push(new InputUI(this.hot, {placeholder: 'Value'}));\n    this.elements.push(new InputUI(this.hot, {placeholder: 'Second value'}));\n\n    this.registerHooks();\n  }\n\n  /**\n   * Register all necessary hooks.\n   *\n   * @private\n   */\n  registerHooks() {\n    this.getSelectElement().addLocalHook('select', (command) => this.onConditionSelect(command));\n    this.getSelectElement().addLocalHook('afterClose', () => this.onSelectUIClosed());\n\n    arrayEach(this.getInputElements(), (input) => {\n      input.addLocalHook('keydown', (event) => this.onInputKeyDown(event));\n    });\n  }\n\n  /**\n   * Set state of the component.\n   *\n   * @param {Object} value State to restore.\n   */\n  setState(value) {\n    this.reset();\n\n    if (value) {\n      this.getSelectElement().setValue(value.command);\n      arrayEach(value.args, (arg, index) => {\n        let element = this.getInputElement(index);\n\n        element.setValue(arg);\n        element[value.command.inputsCount > index ? 'show' : 'hide']();\n\n        if (!index) {\n          setTimeout(() => element.focus(), 10);\n        }\n      });\n    }\n  }\n\n  /**\n   * Export state of the component (get selected filter and filter arguments).\n   *\n   * @returns {Object} Returns object where `command` key keeps used formula filter and `args` key its arguments.\n   */\n  getState() {\n    const command = this.getSelectElement().getValue() || getFormulaDescriptor(FORMULA_NONE);\n    let args = [];\n\n    arrayEach(this.getInputElements(), (element, index) => {\n      if (command.inputsCount > index) {\n        args.push(element.getValue());\n      }\n    });\n\n    return {\n      command,\n      args,\n    };\n  }\n\n  /**\n   * Update state of component.\n   *\n   * @param {Object} stateInfo Information about state containing stack of edited column,\n   * stack of dependent formulas, data factory and optional formula arguments change. It's described by object containing keys:\n   * `editedFormulaStack`, `dependentFormulaStacks`, `visibleDataFactory` and `formulaArgsChange`.\n   */\n  updateState(stateInfo) {\n    const column = stateInfo.editedFormulaStack.column;\n    const currentFormulas = stateInfo.editedFormulaStack.formulas;\n\n    const [formula] = arrayFilter(currentFormulas, (formula) => formula.name !== FORMULA_BY_VALUE);\n\n    // Ignore formulas by_value\n    if (formula && formula.name === FORMULA_BY_VALUE) {\n      return;\n    }\n\n    this.setCachedState(column, {\n      command: formula ? getFormulaDescriptor(formula.name) : getFormulaDescriptor(FORMULA_NONE),\n      args: formula ? formula.args : [],\n    });\n  }\n\n  /**\n   * Get select element.\n   *\n   * @returns {SelectUI}\n   */\n  getSelectElement() {\n    return this.elements.filter((element) => element instanceof SelectUI)[0];\n  }\n\n  /**\n   * Get input element.\n   *\n   * @param {Number} index Index an array of elements.\n   * @returns {InputUI}\n   */\n  getInputElement(index = 0) {\n    return this.getInputElements()[index];\n  }\n\n  /**\n   * Get input elements.\n   *\n   * @returns {Array}\n   */\n  getInputElements() {\n    return this.elements.filter((element) => element instanceof InputUI);\n  }\n\n  /**\n   * Get menu object descriptor.\n   *\n   * @returns {Object}\n   */\n  getMenuItemDescriptor() {\n    return {\n      key: 'filter_by_condition',\n      name: '',\n      isCommand: false,\n      disableSelection: true,\n      hidden: () => this.isHidden(),\n      renderer: (hot, wrapper, row, col, prop, value) => {\n        addClass(wrapper.parentNode, 'htFiltersMenuCondition');\n\n        let label = document.createElement('div');\n\n        addClass(label, 'htFiltersMenuLabel');\n        label.textContent = 'Filter by condition:';\n\n        wrapper.appendChild(label);\n        arrayEach(this.elements, (ui) => wrapper.appendChild(ui.element));\n\n        return wrapper;\n      }\n    };\n  }\n\n  /**\n   * Reset elements to their initial state.\n   */\n  reset() {\n    const lastSelectedColumn = this.hot.getPlugin('filters').getSelectedColumn();\n    const visualIndex = lastSelectedColumn && lastSelectedColumn.visualIndex;\n    const columnType = this.hot.getDataType.apply(this.hot, this.hot.getSelected() || [0, visualIndex]);\n    const items = getOptionsList(columnType);\n\n    arrayEach(this.getInputElements(), (element) => element.hide());\n    this.getSelectElement().setItems(items);\n    super.reset();\n    // Select element as default 'None'\n    this.getSelectElement().setValue(items[0]);\n  }\n\n  /**\n   * On condition select listener.\n   *\n   * @private\n   * @param {Object} command Menu item object (command).\n   */\n  onConditionSelect(command) {\n    arrayEach(this.getInputElements(), (element, index) => {\n      element[command.inputsCount > index ? 'show' : 'hide']();\n\n      if (!index) {\n        setTimeout(() => element.focus(), 10);\n      }\n    });\n\n    this.runLocalHooks('change', command);\n  }\n\n  /**\n   * On component SelectUI closed listener.\n   *\n   * @private\n   */\n  onSelectUIClosed() {\n    this.runLocalHooks('afterClose');\n  }\n\n  /**\n   * Key down listener.\n   *\n   * @private\n   * @param {Event} event DOM event object.\n   */\n  onInputKeyDown(event) {\n    if (isKey(event.keyCode, 'ENTER')) {\n      this.runLocalHooks('accept');\n      stopImmediatePropagation(event);\n\n    } else if (isKey(event.keyCode, 'ESCAPE')) {\n      this.runLocalHooks('cancel');\n      stopImmediatePropagation(event);\n    }\n  }\n}\n\nexport default ConditionComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/component/condition.js","import {addClass} from 'handsontable/helpers/dom/element';\nimport {stopImmediatePropagation} from 'handsontable/helpers/dom/event';\nimport {arrayEach, arrayUnique, arrayFilter, arrayMap, arrayIncludes} from 'handsontable/helpers/array';\nimport {mergeSort} from 'handsontable/utils/sortingAlgorithms/mergeSort';\nimport {deepClone} from 'handsontable/helpers/object';\nimport {stringify} from 'handsontable/helpers/string';\nimport {isKey} from 'handsontable/helpers/unicode';\nimport {unifyColumnValues, intersectValues, toEmptyString} from './../utils';\nimport BaseComponent from './_base';\nimport MultipleSelectUI from './../ui/multipleSelect';\nimport {FORMULA_BY_VALUE, FORMULA_NONE} from './../constants';\nimport {getFormulaDescriptor} from './../formulaRegisterer';\n\n/**\n * @class ValueComponent\n * @plugin Filters\n */\nclass ValueComponent extends BaseComponent {\n  constructor(hotInstance) {\n    super(hotInstance);\n\n    this.elements.push(new MultipleSelectUI(this.hot));\n\n    this.registerHooks();\n  }\n\n  /**\n   * Register all necessary hooks.\n   *\n   * @private\n   */\n  registerHooks() {\n    this.getMultipleSelectElement().addLocalHook('keydown', (event) => this.onInputKeyDown(event));\n  }\n\n  /**\n   * Set state of the component.\n   *\n   * @param {Object} value\n   */\n  setState(value) {\n    this.reset();\n\n    if (value && value.command.key === FORMULA_BY_VALUE) {\n      const select = this.getMultipleSelectElement();\n\n      select.setItems(value.itemsSnapshot);\n      select.setValue(value.args[0]);\n    }\n  }\n\n  /**\n   * Export state of the component (get selected filter and filter arguments).\n   *\n   * @returns {Object} Returns object where `command` key keeps used formula filter and `args` key its arguments.\n   */\n  getState() {\n    const select = this.getMultipleSelectElement();\n    const availableItems = select.getItems();\n\n    return {\n      command: {key: select.isSelectedAllValues() || !availableItems.length ? FORMULA_NONE : FORMULA_BY_VALUE},\n      args: [select.getValue()],\n      itemsSnapshot: availableItems\n    };\n  }\n\n  /**\n   * Update state of component.\n   *\n   * @param {Object} stateInfo Information about state containing stack of edited column,\n   * stack of dependent formulas, data factory and optional formula arguments change. It's described by object containing keys:\n   * `editedFormulaStack`, `dependentFormulaStacks`, `visibleDataFactory` and `formulaArgsChange`.\n   */\n  updateState(stateInfo) {\n    const updateColumnState = (column, formulas, formulaArgsChange, filteredRowsFactory, formulasStack) => {\n      const [formula] = arrayFilter(formulas, (formula) => formula.name === FORMULA_BY_VALUE);\n      const state = {};\n\n      if (formula) {\n        let rowValues = arrayMap(filteredRowsFactory(column, formulasStack), (row) => row.value);\n        if (this._hasSummaryRow()) {\n          rowValues = rowValues.slice(0, rowValues.length - 1);\n        }\n\n        rowValues = unifyColumnValues(rowValues);\n\n        if (formulaArgsChange) {\n          formula.args[0] = formulaArgsChange;\n        }\n\n        const selectedValues = [];\n        const itemsSnapshot = intersectValues(rowValues, formula.args[0], (item) => {\n          if (item.checked) {\n            selectedValues.push(item.value);\n          }\n        }, this.hot, column);\n\n        state.args = [selectedValues];\n        state.command = getFormulaDescriptor(FORMULA_BY_VALUE);\n        state.itemsSnapshot = itemsSnapshot;\n\n      } else {\n        state.args = [];\n        state.command = getFormulaDescriptor(FORMULA_NONE);\n      }\n\n      this.setCachedState(column, state);\n    };\n\n    updateColumnState(\n      stateInfo.editedFormulaStack.column,\n      stateInfo.editedFormulaStack.formulas,\n      stateInfo.formulaArgsChange,\n      stateInfo.filteredRowsFactory\n    );\n\n    // Shallow deep update of component state\n    if (stateInfo.dependentFormulaStacks.length) {\n      updateColumnState(\n        stateInfo.dependentFormulaStacks[0].column,\n        stateInfo.dependentFormulaStacks[0].formulas,\n        stateInfo.formulaArgsChange,\n        stateInfo.filteredRowsFactory,\n        stateInfo.editedFormulaStack\n      );\n    }\n  }\n\n  /**\n   * Get multiple select element.\n   *\n   * @returns {MultipleSelectUI}\n   */\n  getMultipleSelectElement() {\n    return this.elements.filter((element) => element instanceof MultipleSelectUI)[0];\n  }\n\n  /**\n   * Get object descriptor for menu item entry.\n   *\n   * @returns {Object}\n   */\n  getMenuItemDescriptor() {\n    return {\n      key: 'filter_by_value',\n      name: 'Filter by value',\n      isCommand: false,\n      disableSelection: true,\n      hidden: () => this.isHidden(),\n      renderer: (hot, wrapper, row, col, prop, value) => {\n        addClass(wrapper.parentNode, 'htFiltersMenuValue');\n\n        let label = document.createElement('div');\n\n        addClass(label, 'htFiltersMenuLabel');\n        label.textContent = ':';\n        // label.textContent = 'Filter by value:';\n\n        wrapper.appendChild(label);\n        arrayEach(this.elements, (ui) => wrapper.appendChild(ui.element));\n\n        return wrapper;\n      }\n    };\n  }\n\n  /**\n   * Reset elements to their initial state.\n   */\n  reset() {\n    /*let visibleValues = this._getColumnVisibleValues();\n    let hotInstance = this.hot;\n    let columnValues = [];\n    arrayEach(visibleValues, function (visibleValue, i) {\n      let row = hotInstance.toPhysicalRow(i);\n      let partake = hotInstance.runHooks(\"partakeSummary\", row);\n      if(partake !== false) columnValues.push(visibleValue);\n    });\n    let values = unifyColumnValues(columnValues);*/\n    let visibleValues = this._getColumnVisibleValues();\n    let values = unifyColumnValues(visibleValues);\n    let items = intersectValues(values, values, null, this.hot);\n\n    this.getMultipleSelectElement().setItems(items);\n    super.reset();\n    this.getMultipleSelectElement().setValue(values);\n  }\n\n  /**\n   * Key down listener.\n   *\n   * @private\n   * @param {Event} event DOM event object.\n   */\n  onInputKeyDown(event) {\n    if (isKey(event.keyCode, 'ESCAPE')) {\n      this.runLocalHooks('cancel');\n      stopImmediatePropagation(event);\n    }\n  }\n\n  /**\n   * Get data for currently selected column.\n   *\n   * @returns {Array}\n   * @private\n   */\n  _getColumnVisibleValues() {\n    const lastSelectedColumn = this.hot.getPlugin('filters').getSelectedColumn();\n    const visualIndex = lastSelectedColumn && lastSelectedColumn.visualIndex;\n    const column = this.hot.getSettings().columns[visualIndex];\n\n    /*var data = this.hot.runHooks(\"columnValues\", visualIndex);\n    if(!data || data == visualIndex) {\n      if (this._hasSummaryRow()) {\n        data = this.hot.getSummaryDataAtCol(visualIndex);\n      } else {\n        data = this.hot.getDataAtCol(visualIndex);\n      }\n    }*/\n\n    let data;\n    if (this._hasSummaryRow()) {\n      data = this.hot.getSummaryDataAtCol(visualIndex);\n    } else {\n      data = this.hot.getFilterDataAtCol(visualIndex);\n    }\n    //return arrayMap(data, (v) => toEmptyString(v));\n    return arrayMap(data, (v) => (column.valueParser && toEmptyString(v) !== '') ? column.valueParser(v) : toEmptyString(v));\n  }\n\n  /**\n   * has summary row.\n   */\n  _hasSummaryRow() {\n    let rowCount = this.hot.countSourceRows() - 1;\n    let lastRow = this.hot.getSourceDataAtRow(rowCount);\n    if (lastRow && lastRow.__SUMMARY_ROW) {\n      return true;\n    }\n    return false;\n  }\n\n  uncheckHiddenValues() {\n    const select = this.elements[0];\n    const itembox = select.itemsBox;\n    const items = select.items;\n    const visibleItems = itembox.getSourceData();\n    arrayEach(items, (item) => {\n      if (!arrayContains(visibleItems, item)) {\n        item.checked = false;\n      }\n    });\n\n    function arrayContains(arr, item) {\n      let b = false;\n      arrayEach(arr, (v) => { // eslint-disable-line\n        if (v === item) {\n          b = true;\n          return false;\n        }\n      });\n      return b;\n    }\n  }\n}\n\nexport default ValueComponent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/component/value.js","import BasePlugin from 'handsontable/plugins/_base';\nimport {arrayEach, arrayMap} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport EventManager from 'handsontable/eventManager';\nimport {addClass, removeClass, closest} from 'handsontable/helpers/dom/element';\nimport {registerPlugin} from 'handsontable/plugins';\nimport {SEPARATOR} from 'handsontable/plugins/contextMenu/predefinedItems';\nimport ConditionComponent from './component/condition';\nimport ValueComponent from './component/value';\nimport ActionBarComponent from './component/actionBar';\nimport FormulaCollection from './formulaCollection';\nimport DataFilter from './dataFilter';\nimport FormulaUpdateObserver from './formulaUpdateObserver';\nimport {createArrayAssertion, toEmptyString, unifyColumnValues, toVisualValue} from './utils';\nimport {FORMULA_NONE} from './constants';\n\nimport './filters.css';\n\n/**\n * This plugin allows filtering the table data either by the built-in component or with the API.\n *\n * @plugin Filters\n * @pro\n * @dependencies DropdownMenu TrimRows BindRowsWithHeaders\n */\nclass Filters extends BasePlugin {\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * Instance of {@link EventManager}.\n     *\n     * @type {EventManager}\n     */\n    this.eventManager = new EventManager(this);\n    /**\n     * Instance of {@link TrimRows}.\n     *\n     * @type {TrimRows}\n     */\n    this.trimRowsPlugin = null;\n    /**\n     * Instance of {@link DropdownMenu}.\n     *\n     * @type {DropdownMenu}\n     */\n    this.dropdownMenuPlugin = null;\n    /**\n     * Instance of {@link FormulaCollection}.\n     *\n     * @type {FormulaCollection}\n     */\n    this.formulaCollection = null;\n    /**\n     * Instance of {@link FormulaUpdateObserver}.\n     *\n     * @type {FormulaUpdateObserver}\n     */\n    this.formulaUpdateObserver = null;\n    /**\n     * Instance of {@link ConditionComponent}.\n     *\n     * @type {ConditionComponent}\n     */\n    this.conditionComponent = null;\n    /**\n     * Instance of {@link ValueComponent}.\n     *\n     * @type {ValueComponent}\n     */\n    this.valueComponent = null;\n    /**\n     * Instance of {@link ActionBarComponent}.\n     *\n     * @type {ActionBarComponent}\n     */\n    this.actionBarComponent = null;\n    /**\n     * Last selected column physical index for added filter formulas.\n     *\n     * @type {Number}\n     * @default null\n     */\n    this.lastSelectedColumn = null;\n\n    // One listener for the enable/disable functionality\n    this.hot.addHook('afterGetColHeader', (col, TH) => this.onAfterGetColHeader(col, TH));\n  }\n\n  /**\n   * Check if the plugin is enabled in the Handsontable settings.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    /* eslint-disable no-unneeded-ternary */\n    return this.hot.getSettings().filters ? true : false;\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n    this.trimRowsPlugin = this.hot.getPlugin('trimRows');\n    this.dropdownMenuPlugin = this.hot.getPlugin('dropdownMenu');\n\n    let addConfirmationHooks = (component) => {\n      component.addLocalHook('accept', () => this.onActionBarSubmit('accept'));\n      component.addLocalHook('cancel', () => this.onActionBarSubmit('cancel'));\n      component.addLocalHook('change', (command) => this.onComponentChange(component, command));\n\n      return component;\n    };\n\n    if (!this.conditionComponent) {\n      const conditionComponent = new ConditionComponent(this.hot);\n      conditionComponent.addLocalHook('afterClose', () => this.onSelectUIClosed());\n\n      this.conditionComponent = addConfirmationHooks(conditionComponent);\n    }\n    if (!this.valueComponent) {\n      this.valueComponent = addConfirmationHooks(new ValueComponent(this.hot));\n    }\n    if (!this.actionBarComponent) {\n      this.actionBarComponent = addConfirmationHooks(new ActionBarComponent(this.hot));\n    }\n    if (!this.formulaCollection) {\n      this.formulaCollection = new FormulaCollection();\n    }\n    if (!this.formulaUpdateObserver) {\n      this.formulaUpdateObserver = new FormulaUpdateObserver(this.formulaCollection, (column) => this.getDataMapAtColumn(column), this.hot);\n      this.formulaUpdateObserver.addLocalHook('update', (...params) => this.conditionComponent.updateState(...params));\n      this.formulaUpdateObserver.addLocalHook('update', (...params) => this.valueComponent.updateState(...params));\n    }\n    this.conditionComponent.show();\n    this.valueComponent.show();\n    this.actionBarComponent.show();\n\n    this.registerEvents();\n    this.addHook('beforeDropdownMenuSetItems', (items) => this.onBeforeDropdownMenuSetItems(items));\n    this.addHook('afterDropdownMenuDefaultOptions', (defaultOptions) => this.onAfterDropdownMenuDefaultOptions(defaultOptions));\n    this.addHook('afterDropdownMenuShow', () => this.onAfterDropdownMenuShow());\n    this.addHook('afterDropdownMenuHide', () => this.onAfterDropdownMenuHide());\n    this.addHook('afterChange', (changes, source) => this.onAfterChange(changes));\n    this.addHook('isFilter', (row) => this.isFilter(row));\n\n    // force to enable dependent plugins\n    this.hot.getSettings().trimRows = true;\n    this.trimRowsPlugin.enablePlugin();\n\n    // Temp. solution (extending menu items bug in contextMenu/dropdownMenu)\n    if (this.hot.getSettings().dropdownMenu) {\n      this.dropdownMenuPlugin.disablePlugin();\n      this.dropdownMenuPlugin.enablePlugin();\n    }\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Register the DOM listeners.\n   *\n   * @private\n   */\n  registerEvents() {\n    this.eventManager.addEventListener(this.hot.rootElement, 'click', (event) => this.onTableClick(event));\n  }\n\n  /**\n   * Disable plugin for this Handsontable instance.\n   */\n  disablePlugin() {\n    if (this.enabled) {\n      this.conditionComponent.hide();\n      this.valueComponent.hide();\n      this.actionBarComponent.hide();\n      this.formulaCollection.clean();\n      this.trimRowsPlugin.untrimAll();\n    }\n    super.disablePlugin();\n  }\n\n  /**\n   * @description\n   * Add formula to the formulas collection at specified column index.\n   *\n   * Possible predefined formulas:\n   *  * `begins_with` - Begins with\n   *  * `between` - Between\n   *  * `by_value` - By value\n   *  * `contains` - Contains\n   *  * `empty` - Empty\n   *  * `ends_with` - Ends with\n   *  * `eq` - Equal\n   *  * `gt` - Greater than\n   *  * `gte` - Greater than or equal\n   *  * `lt` - Less than\n   *  * `lte` - Less than or equal\n   *  * `none` - None (no filter)\n   *  * `not_between` - Not between\n   *  * `not_contains` - Not contains\n   *  * `not_empty` - Not empty\n   *  * `neq` - Not equal\n   *\n   * @example\n   * ```js\n   * // Add filter \"Greater than\" 95 to column at index 1\n   * hot.getPlugin('filters').addFormula(1, 'gt', [95]);\n   * hot.getPlugin('filters').filter();\n   *\n   * // Add filter \"Begins with\" with value \"de\" and \"Not contains\" with value \"ing\"\n   * hot.getPlugin('filters').addFormula(1, 'begins_with', ['de']);\n   * hot.getPlugin('filters').addFormula(1, 'not_contains', ['ing']);\n   * hot.getPlugin('filters').filter();\n   *\n   * // If you want to add filter formulas with OR operator you can use formula \"by_value\"\n   * hot.getPlugin('filters').addFormula(1, 'by_value', [['ing', 'ed', 'as', 'on']]);\n   * hot.getPlugin('filters').filter();\n   * // In this case all value's that don't match will be filtered.\n   * ```\n   * @param {Number} column Visual column index.\n   * @param {String} name Formula short name.\n   * @param {Array} args Formula arguments.\n   */\n  addFormula(column, name, args) {\n    const physicalColumn = this.t.toPhysicalColumn(column);\n\n    this.formulaCollection.addFormula(physicalColumn, {command: {key: name}, args});\n  }\n\n  /**\n   * Remove formulas at specified column index.\n   *\n   * @param {Number} column Visual column index.\n   */\n  removeFormulas(column) {\n    const physicalColumn = this.t.toPhysicalColumn(column);\n\n    this.formulaCollection.removeFormulas(physicalColumn);\n  }\n\n  /**\n   * Clear all formulas previously added to the collection for the specified column index or, if the column index\n   * was not passed, clear the formulas for all columns.\n   *\n   * @param {Number} [column] Visual column index.\n   */\n  clearFormulas(column) {\n    const physicalColumn = this.t.toPhysicalColumn(column);\n\n    if (column === void 0) {\n      this.formulaCollection.clean();\n    } else {\n      this.formulaCollection.clearFormulas(physicalColumn);\n    }\n  }\n\n  /**\n   * Filter data based on added filter formulas.\n   */\n  filter() {\n    let dataFilter = this._createDataFilter();\n    let needToFilter = !this.formulaCollection.isEmpty();\n    let visibleVisualRows = [];\n\n    const formulas = this.formulaCollection.exportAllFormulas();\n    const allowFiltering = this.hot.runHooks('beforeFilter', formulas);\n\n    if (allowFiltering !== false) {\n      if (needToFilter) {\n        let trimmedRows = [];\n\n        this.trimRowsPlugin.trimmedRows.length = 0;\n\n        visibleVisualRows = arrayMap(dataFilter.filter(), (rowData) =>\n          rowData.meta.visualRow\n        );\n\n        const visibleVisualRowsAssertion = createArrayAssertion(visibleVisualRows);\n\n        rangeEach(this.hot.countSourceRows() - 1, (row) => {\n          let isFilter = this.hot.runHooks(\"partakeFilter\", row);\n          if(isFilter === false) return;\n\n          if (!visibleVisualRowsAssertion(row)) {\n            trimmedRows.push(row);\n          }\n        });\n\n        this.trimRowsPlugin.trimRows(trimmedRows);\n\n        if (!visibleVisualRows.length) {\n          this.hot.deselectCell();\n        }\n      } else {\n        this.trimRowsPlugin.untrimAll();\n      }\n    }\n\n    this.hot.view.wt.wtOverlays.adjustElementsSize(true);\n    this.hot.render();\n    this.clearColumnSelection();\n\n    this.hot.runHooks('afterFilter', formulas);\n  }\n\n  /**\n   * Get last selected column index.\n   *\n   * @returns {Object|null} Return `null` when column isn't selected otherwise\n   * object containing information about selected column with keys `visualIndex` and `physicalIndex`\n   */\n  getSelectedColumn() {\n    return this.lastSelectedColumn;\n  }\n\n  /**\n   * Clear column selection.\n   */\n  clearColumnSelection() {\n    let [row, col] = this.hot.getSelected() || [];\n\n    if (row !== void 0 && col !== void 0) {\n      this.hot.selectCell(row, col);\n    }\n  }\n\n  /**\n   * Get handsontable source data with cell meta based on current selection.\n   *\n   * @param {Number} [column] Column index. By default column index accept the value of the selected column.\n   * @returns {Array} Returns array of objects where keys as row index.\n   */\n  getDataMapAtColumn(column) {\n    const visualIndex = this.t.toVisualColumn(column);\n    const data = [];\n\n    var columnData = this.hot.runHooks(\"columnValues\", visualIndex);\n    if(!columnData || columnData == visualIndex) columnData = this.hot.getSourceDataAtCol(visualIndex);\n    arrayEach(columnData, (value, rowIndex) => {\n      let {row, col, visualCol, visualRow, type, instance, dateFormat} = this.hot.getCellMeta(rowIndex, visualIndex);\n\n      data.push({\n        meta: {row, col, visualCol, visualRow, type, instance, dateFormat},\n        //value: toEmptyString(value),\n        value: toVisualValue(toEmptyString(value), this.hot, column),\n      });\n    });\n\n    return data;\n  }\n\n  /**\n   * `afterChange` listener.\n   *\n   * @private\n   * @param {Array} changes Array of changes.\n   */\n  onAfterChange(changes) {\n    if (changes) {\n      arrayEach(changes, (change) => {\n        const [, prop] = change;\n        const columnIndex = this.hot.propToCol(prop);\n\n        this.updateValueComponentFormula(columnIndex);\n      });\n    }\n  }\n\n  /**\n   * Update formula of ValueComponent basing on handled changes\n   *\n   * @private\n   * @param {Number} columnIndex Column index of handled ValueComponent formula\n   */\n  updateValueComponentFormula(columnIndex) {\n    const dataAtCol = this.hot.getFilterDataAtCol(columnIndex);\n    const selectedValues = unifyColumnValues(dataAtCol);\n\n    this.formulaUpdateObserver.updateStatesAtColumn(columnIndex, selectedValues);\n  }\n\n  /**\n   * After dropdown menu show listener.\n   *\n   * @private\n   */\n  onAfterDropdownMenuShow() {\n    const selectedColumn = this.getSelectedColumn();\n    const physicalIndex = selectedColumn && selectedColumn.physicalIndex;\n    const conditionComponent = this.conditionComponent;\n    const valueComponent = this.valueComponent;\n\n    if (!conditionComponent.isHidden()) {\n      conditionComponent.restoreState(physicalIndex);\n    }\n    if (!valueComponent.isHidden()) {\n      valueComponent.restoreState(physicalIndex);\n      valueComponent.elements[0].resetSize();\n    }\n  }\n\n  /**\n   * After dropdown menu hide listener.\n   *\n   * @private\n   */\n  onAfterDropdownMenuHide() {\n    this.conditionComponent.getSelectElement().closeOptions();\n  }\n\n  /**\n   * Before dropdown menu set menu items listener.\n   *\n   * @private\n   * @param {Array} items DropdownMenu items created based on predefined items and settings provided by user.\n   */\n  onBeforeDropdownMenuSetItems(items) {\n    const menuKeys = arrayMap(items, (item) => item.key);\n    const conditionComponent = this.conditionComponent;\n    const valueComponent = this.valueComponent;\n\n    conditionComponent[menuKeys.indexOf(conditionComponent.getMenuItemDescriptor().key) === -1 ? 'hide' : 'show']();\n    valueComponent[menuKeys.indexOf(valueComponent.getMenuItemDescriptor().key) === -1 ? 'hide' : 'show']();\n  }\n\n  /**\n   * After dropdown menu default options listener.\n   *\n   * @private\n   * @param {Object} defaultOptions ContextMenu default item options.\n   */\n  onAfterDropdownMenuDefaultOptions(defaultOptions) {\n    defaultOptions.items.push({name: SEPARATOR});\n    defaultOptions.items.push(this.conditionComponent.getMenuItemDescriptor());\n    defaultOptions.items.push(this.valueComponent.getMenuItemDescriptor());\n    defaultOptions.items.push(this.actionBarComponent.getMenuItemDescriptor());\n  }\n\n  /**\n   * On action bar submit listener.\n   *\n   * @private\n   * @param {String} submitType\n   */\n  onActionBarSubmit(submitType) {\n    if (submitType === 'accept') {\n      const selectedColumn = this.getSelectedColumn();\n      const physicalIndex = selectedColumn && selectedColumn.physicalIndex;\n      const byConditionState = this.conditionComponent.getState();\n      this.valueComponent.uncheckHiddenValues();\n      const byValueState = this.valueComponent.getState();\n\n      this.formulaUpdateObserver.groupChanges();\n      this.formulaCollection.clearFormulas(physicalIndex);\n\n      if (byConditionState.command.key === FORMULA_NONE && byValueState.command.key === FORMULA_NONE) {\n        this.formulaCollection.removeFormulas(physicalIndex);\n      }\n      if (byConditionState.command.key !== FORMULA_NONE) {\n        this.formulaCollection.addFormula(physicalIndex, byConditionState);\n      }\n      if (byValueState.command.key !== FORMULA_NONE) {\n        this.formulaCollection.addFormula(physicalIndex, byValueState);\n      }\n      this.formulaUpdateObserver.flush();\n\n      this.conditionComponent.saveState(physicalIndex);\n      this.valueComponent.saveState(physicalIndex);\n\n      this.filter();\n    }\n    this.dropdownMenuPlugin.close();\n  }\n\n  /**\n   * On component change listener.\n   *\n   * @private\n   * @param {BaseComponent} component Component inheriting BaseComponent\n   * @param {Object} command Menu item object (command).\n   */\n  onComponentChange(component, command) {\n    if (component === this.conditionComponent && !command.inputsCount) {\n      this.setListeningDropdownMenu();\n    }\n  }\n\n  /**\n   * On component SelectUI closed listener.\n   *\n   * @private\n   */\n  onSelectUIClosed() {\n    this.setListeningDropdownMenu();\n  }\n\n  /**\n   * Listen to the keyboard input on document body and forward events to instance of Handsontable\n   * created by DropdownMenu plugin\n   *\n   * @private\n   */\n  setListeningDropdownMenu() {\n    this.dropdownMenuPlugin.setListening();\n  }\n\n  /**\n   * On after get column header listener.\n   *\n   * @private\n   * @param {Number} col\n   * @param {HTMLTableCellElement} TH\n   */\n  onAfterGetColHeader(col, TH) {\n    const physicalColumn = this.t.toPhysicalColumn(col);\n\n    if (this.enabled && this.formulaCollection.hasFormulas(physicalColumn)) {\n      addClass(TH, 'htFiltersActive');\n    } else {\n      removeClass(TH, 'htFiltersActive');\n    }\n  }\n\n  /**\n   * On table click listener.\n   *\n   * @private\n   * @param {Event} event DOM Event.\n   */\n  onTableClick(event) {\n    let th = closest(event.target, 'TH');\n\n    if (th) {\n      const visualIndex = this.hot.getCoords(th).col;\n      const physicalIndex = this.t.toPhysicalColumn(visualIndex);\n\n      this.lastSelectedColumn = {\n        visualIndex,\n        physicalIndex\n      };\n    }\n  }\n\n  isFilter(row){\n    let dataFilter = this._createDataFilter();\n    let needToFilter = !this.formulaCollection.isEmpty();\n    let visibleVisualRows = [];\n\n    if (needToFilter) {\n      visibleVisualRows = arrayMap(dataFilter.filter(), (rowData) => rowData.meta.visualRow);\n      const visibleVisualRowsAssertion = createArrayAssertion(visibleVisualRows);\n      return !visibleVisualRowsAssertion(row);\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Destroy plugin.\n   */\n  destroy() {\n    if (this.enabled) {\n      this.actionBarComponent.destroy();\n      this.conditionComponent.destroy();\n      this.valueComponent.destroy();\n\n      this.formulaCollection.destroy();\n      this.formulaUpdateObserver.destroy();\n    }\n    super.destroy();\n  }\n\n  /**\n   * Create DataFilter instance based on formula collection.\n   *\n   * @private\n   * @param {FormulaCollection} formulaCollection Formula collection object.\n   * @returns {DataFilter}\n   */\n  _createDataFilter(formulaCollection = this.formulaCollection) {\n    return new DataFilter(formulaCollection, (column) => this.getDataMapAtColumn(column), this.hot);\n  }\n}\n\nregisterPlugin('filters', Filters);\n\nexport default Filters;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/filters.js","import {arrayEach, arrayMap, arrayFilter} from 'handsontable/helpers/array';\nimport {mixin, objectEach} from 'handsontable/helpers/object';\nimport {curry, debounce} from 'handsontable/helpers/function';\nimport localHooks from 'handsontable/mixins/localHooks';\nimport FormulaCollection from './formulaCollection';\nimport DataFilter from './dataFilter';\nimport {createArrayAssertion} from './utils';\n\n/**\n * Class which is designed for observing changes in formula collection. When formula is changed by user at specified\n * column it's necessary to update all formulas defined after this edited one.\n *\n * Object fires `update` hook for every column formulas change.\n *\n * @class FormulaUpdateObserver\n * @plugin Filters\n * @pro\n */\nclass FormulaUpdateObserver {\n  constructor(formulaCollection, columnDataFactory = (column) => [], hot) {\n    /**\n     * Reference to the instance of {@link FormulaCollection}.\n     *\n     * @type {FormulaCollection}\n     */\n    this.formulaCollection = formulaCollection;\n    /**\n     * Function which provide source data factory for specified column.\n     *\n     * @type {Function}\n     */\n    this.columnDataFactory = columnDataFactory;\n    /**\n     * Collected changes when grouping is enabled.\n     *\n     * @type {Array}\n     * @default []\n     */\n    this.changes = [];\n    /**\n     * Flag which determines if grouping events is enabled.\n     *\n     * @type {Boolean}\n     */\n    this.grouping = false;\n    /**\n     * The latest known position of edited formulas at specified column index.\n     *\n     * @type {Number}\n     * @default -1\n     */\n    this.latestEditedColumnPosition = -1;\n    /**\n     * The latest known order of formulas stack.\n     *\n     * @type {Array}\n     */\n    this.latestOrderStack = [];\n\n    this.hot = hot;\n\n    this.formulaCollection.addLocalHook('beforeRemove', (column) => this._onFormulaBeforeModify(column));\n    this.formulaCollection.addLocalHook('afterAdd', (column) => this.updateStatesAtColumn(column));\n    this.formulaCollection.addLocalHook('afterClear', (column) => this.updateStatesAtColumn(column));\n    this.formulaCollection.addLocalHook('beforeClean', () => this._onFormulaBeforeClean());\n    this.formulaCollection.addLocalHook('afterClean', () => this._onFormulaAfterClean());\n  }\n\n  /**\n   * Enable grouping changes. Grouping is helpful in situations when a lot of formulas is added in one moment. Instead of\n   * trigger `update` hook for every formula by adding/removing you can group this changes and call `flush` method to trigger\n   * it once.\n   */\n  groupChanges() {\n    this.grouping = true;\n  }\n\n  /**\n   * Flush all collected changes. This trigger `update` hook for every previously collected change from formula collection.\n   */\n  flush() {\n    this.grouping = false;\n\n    arrayEach(this.changes, (column) => {\n      this.updateStatesAtColumn(column);\n    });\n    this.changes.length = 0;\n  }\n\n  /**\n   * On before modify formula (add or remove from collection),\n   *\n   * @param {Number} column Column index.\n   * @private\n   */\n  _onFormulaBeforeModify(column) {\n    this.latestEditedColumnPosition = this.formulaCollection.orderStack.indexOf(column);\n  }\n\n  /**\n   * Update all related states which should be changed after invoking changes applied to current column.\n   *\n   * @param column\n   * @param {Object} formulaArgsChange Object describing formula changes which can be handled by filters on `update` hook.\n   * It contains keys `formulaKey` and `formulaValue` which refers to change specified key of formula to specified value\n   * based on referred keys.\n   */\n  updateStatesAtColumn(column, formulaArgsChange) {\n    if (this.grouping) {\n      if (this.changes.indexOf(column) === -1) {\n        this.changes.push(column);\n      }\n\n      return;\n    }\n    let allFormulas = this.formulaCollection.exportAllFormulas();\n    let editedColumnPosition = this.formulaCollection.orderStack.indexOf(column);\n\n    if (editedColumnPosition === -1) {\n      editedColumnPosition = this.latestEditedColumnPosition;\n    }\n\n    // Collection of all formulas defined before currently edited `column` (without edited one)\n    let formulasBefore = allFormulas.slice(0, editedColumnPosition);\n    // Collection of all formulas defined after currently edited `column` (without edited one)\n    let formulasAfter = [];// allFormulas.slice(editedColumnPosition);\n\n    // Make sure that formulaAfter doesn't contain edited column formulas\n    if (formulasAfter.length && formulasAfter[0].column === column) {\n      formulasAfter.shift();\n    }\n\n    let visibleDataFactory = curry((formulasBefore, column, formulasStack = []) => {\n      let splitFormulaCollection = new FormulaCollection();\n\n      formulasBefore = [].concat(formulasBefore, formulasStack);\n\n      // Create new formula collection to determine what rows should be visible in \"filter by value\" box in the next formulas in the chain\n      splitFormulaCollection.importAllFormulas(formulasBefore);\n\n      const allRows = this.columnDataFactory(column);\n      let visibleRows;\n\n      if (splitFormulaCollection.isEmpty()) {\n        visibleRows = allRows;\n      } else {\n        visibleRows = (new DataFilter(splitFormulaCollection, (column) => this.columnDataFactory(column), this.hot)).filter();\n      }\n      visibleRows = arrayMap(visibleRows, (rowData) => rowData.meta.visualRow);\n\n      const visibleRowsAssertion = createArrayAssertion(visibleRows);\n\n      return arrayFilter(allRows, (rowData) => visibleRowsAssertion(rowData.meta.visualRow));\n    })(formulasBefore);\n\n    let editedFormulas = [].concat(this.formulaCollection.getFormulas(column));\n\n    this.runLocalHooks('update', {\n      editedFormulaStack: {column, formulas: editedFormulas},\n      dependentFormulaStacks: formulasAfter,\n      filteredRowsFactory: visibleDataFactory,\n      formulaArgsChange\n    });\n  }\n\n  /**\n   * On before formulas clean listener.\n   *\n   * @private\n   */\n  _onFormulaBeforeClean() {\n    this.latestOrderStack = [].concat(this.formulaCollection.orderStack);\n  }\n\n  /**\n   * On after formulas clean listener.\n   *\n   * @private\n   */\n  _onFormulaAfterClean() {\n    arrayEach(this.latestOrderStack, (column) => {\n      this.updateStatesAtColumn(column);\n    });\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    this.clearLocalHooks();\n\n    objectEach(this, (value, property) => {\n      this[property] = null;\n    });\n  }\n}\n\nmixin(FormulaUpdateObserver, localHooks);\n\nexport default FormulaUpdateObserver;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formulaUpdateObserver.js","import {stringify} from 'handsontable/helpers/mixed';\nimport {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'begins_with';\n\nexport function formula(dataRow, [value] = inputValues) {\n  return stringify(dataRow.value).toLowerCase().startsWith(stringify(value));\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Begins with',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/beginsWith.js","import {registerFormula} from './../formulaRegisterer';\nimport {createArrayAssertion} from './../utils';\n\nexport const FORMULA_NAME = 'by_value';\n\nexport function formula(dataRow, [value] = inputValues) {\n  return value(dataRow.value);\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'By value',\n  inputsCount: 0,\n  inputValuesDecorator: function([data] = inputValues) {\n    return [createArrayAssertion(data)];\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/byValue.js","import moment from 'moment';\nimport {registerFormula} from './../../formulaRegisterer';\n\nexport const FORMULA_NAME = 'date_today';\n\nexport function formula(dataRow) {\n  let date = moment(dataRow.value, dataRow.meta.dateFormat);\n\n  if (!date.isValid()) {\n    return false;\n  }\n\n  return date.isSame(moment().startOf('day'), 'd');\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Today',\n  inputsCount: 0\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/date/today.js","import moment from 'moment';\nimport {registerFormula} from './../../formulaRegisterer';\n\nexport const FORMULA_NAME = 'date_tomorrow';\n\nexport function formula(dataRow) {\n  let date = moment(dataRow.value, dataRow.meta.dateFormat);\n\n  if (!date.isValid()) {\n    return false;\n  }\n\n  return date.isSame(moment().subtract(-1, 'days').startOf('day'), 'd');\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Tomorrow',\n  inputsCount: 0\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/date/tomorrow.js","import moment from 'moment';\nimport {registerFormula} from './../../formulaRegisterer';\n\nexport const FORMULA_NAME = 'date_yesterday';\n\nexport function formula(dataRow) {\n  let date = moment(dataRow.value, dataRow.meta.dateFormat);\n\n  if (!date.isValid()) {\n    return false;\n  }\n\n  return date.isSame(moment().subtract(1, 'days').startOf('day'), 'd');\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Yesterday',\n  inputsCount: 0\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/date/yesterday.js","import {stringify} from 'handsontable/helpers/mixed';\nimport {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'ends_with';\n\nexport function formula(dataRow, [value] = inputValues) {\n  return stringify(dataRow.value).toLowerCase().endsWith(stringify(value));\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Ends with',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/endsWith.js","import {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'gt';\n\nexport function formula(dataRow, [value] = inputValues) {\n  if (dataRow.meta.type === 'numeric') {\n    value = parseFloat(value, 10);\n  }\n\n  return dataRow.value > value;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Greater than',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/greaterThan.js","import {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'gte';\n\nexport function formula(dataRow, [value] = inputValues) {\n  if (dataRow.meta.type === 'numeric') {\n    value = parseFloat(value, 10);\n  }\n\n  return dataRow.value >= value;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Greater than or equal to',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/greaterThanOrEqual.js","import {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'lt';\n\nexport function formula(dataRow, [value] = inputValues) {\n  if (dataRow.meta.type === 'numeric') {\n    value = parseFloat(value, 10);\n  }\n\n  return dataRow.value < value;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Less than',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/lessThan.js","import {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'lte';\n\nexport function formula(dataRow, [value] = inputValues) {\n  if (dataRow.meta.type === 'numeric') {\n    value = parseFloat(value, 10);\n  }\n\n  return dataRow.value <= value;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Less than or equal to',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/lessThanOrEqual.js","import {registerFormula} from './../formulaRegisterer';\n\nexport const FORMULA_NAME = 'none';\n\nexport function formula() {\n  return true;\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'None',\n  inputsCount: 0\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/none.js","import {registerFormula, getFormula} from './../formulaRegisterer';\nimport {FORMULA_NAME as FORMULA_BETWEEN} from './between';\n\nexport const FORMULA_NAME = 'not_between';\n\nexport function formula(dataRow, inputValues) {\n  return !getFormula(FORMULA_BETWEEN, inputValues)(dataRow);\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Is not between',\n  inputsCount: 2\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/notBetween.js","import {registerFormula, getFormula} from './../formulaRegisterer';\nimport {FORMULA_NAME as FORMULA_CONTAINS} from './contains';\n\nexport const FORMULA_NAME = 'not_contains';\n\nexport function formula(dataRow, inputValues) {\n  return !getFormula(FORMULA_CONTAINS, inputValues)(dataRow);\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Does not contain',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/notContains.js","import {registerFormula, getFormula} from './../formulaRegisterer';\nimport {FORMULA_NAME as FORMULA_EMPTY} from './empty';\n\nexport const FORMULA_NAME = 'not_empty';\n\nexport function formula(dataRow, inputValues) {\n  return !getFormula(FORMULA_EMPTY, inputValues)(dataRow);\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Is not empty',\n  inputsCount: 0\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/notEmpty.js","import {registerFormula, getFormula} from './../formulaRegisterer';\nimport {FORMULA_NAME as FORMULA_EQUAL} from './equal';\n\nexport const FORMULA_NAME = 'neq';\n\nexport function formula(dataRow, inputValues) {\n  return !getFormula(FORMULA_EQUAL, inputValues)(dataRow);\n}\n\nregisterFormula(FORMULA_NAME, formula, {\n  name: 'Is not equal to',\n  inputsCount: 1\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/formula/notEqual.js","import {addClass} from 'handsontable/helpers/dom/element';\nimport Menu from 'handsontable/plugins/contextMenu/menu';\nimport {clone, extend} from 'handsontable/helpers/object';\nimport {arrayFilter, arrayMap, arrayEach} from 'handsontable/helpers/array';\nimport {startsWith} from 'handsontable/helpers/string';\nimport {isKey} from 'handsontable/helpers/unicode';\nimport {partial} from 'handsontable/helpers/function';\nimport {stopImmediatePropagation} from 'handsontable/helpers/dom/event';\nimport BaseUI from './_base';\nimport InputUI from './input';\nimport {createArrayAssertion} from './../utils';\n\nconst privatePool = new WeakMap();\nconst MIN_WIDTH = 168;\nconst MIN_HEIGHT = 110;\n\n/**\n * @class MultipleSelectUI\n * @util\n */\nclass MultipleSelectUI extends BaseUI {\n  static get DEFAULTS() {\n    return clone({\n      className: 'htUIMultipleSelect',\n      value: [],\n    });\n  }\n\n  constructor(hotInstance, options) {\n    super(hotInstance, extend(MultipleSelectUI.DEFAULTS, options));\n\n    privatePool.set(this, {});\n    /**\n     * Input element.\n     *\n     * @type {InputUI}\n     */\n    this.searchInput = new InputUI(this.hot, {\n      // placeholder: 'Search...',\n      placeholder: '...',\n      className: 'htUIMultipleSelectSearch'\n    });\n    /**\n     * \"Select all\" UI element.\n     *\n     * @type {BaseUI}\n     */\n    this.selectAllUI = new BaseUI(this.hot, {\n      tagName: 'a',\n      textContent: '',\n      // textContent: 'Select all',\n      href: '#',\n      className: 'htUISelectAll',\n    });\n    /**\n     * \"Clear\" UI element.\n     *\n     * @type {BaseUI}\n     */\n    this.clearAllUI = new BaseUI(this.hot, {\n      tagName: 'a',\n      textContent: '',\n      // textContent: 'Clear',\n      href: '#',\n      className: 'htUIClearAll',\n    });\n    /**\n     * List of available select options.\n     *\n     * @type {Array}\n     */\n    this.items = [];\n    /**\n     * Handsontable instance used as items list element.\n     *\n     * @type {Handsontable}\n     */\n    this.itemsBox = null;\n\n    this.registerHooks();\n  }\n\n  /**\n   * Register all necessary hooks.\n   */\n  registerHooks() {\n    this.searchInput.addLocalHook('keydown', (event) => this.onInputKeyDown(event));\n    this.searchInput.addLocalHook('input', (event) => this.onInput(event));\n    this.selectAllUI.addLocalHook('click', (event) => this.onSelectAllClick(event));\n    this.clearAllUI.addLocalHook('click', (event) => this.onClearAllClick(event));\n  }\n\n  /**\n   * Set available options.\n   *\n   * @param {Array} items Array of objects with `checked` and `label` property.\n   */\n  setItems(items) {\n    this.items = items;\n\n    if (this.itemsBox) {\n      this.itemsBox.loadData(this.items);\n    }\n  }\n\n  /**\n   * Get all available options.\n   *\n   * @returns {Array}\n   */\n  getItems() {\n    return [...this.items];\n  }\n\n  /**\n   * Get element value.\n   *\n   * @returns {Array} Array of selected values.\n   */\n  getValue() {\n    return itemsToValue(this.items);\n  }\n\n  /**\n   * Check if all values listed in element are selected.\n   *\n   * @returns {Boolean}\n   */\n  isSelectedAllValues() {\n    return this.items.length === this.getValue().length;\n  }\n\n  /**\n   * Build DOM structure.\n   */\n  build() {\n    super.build();\n\n    const itemsBoxWrapper = document.createElement('div');\n    const selectionControl = new BaseUI(this.hot, {\n      className: 'htUISelectionControls',\n      children: [this.selectAllUI, this.clearAllUI],\n    });\n\n    this._element.appendChild(this.searchInput.element);\n    this._element.appendChild(selectionControl.element);\n    this._element.appendChild(itemsBoxWrapper);\n\n    let hotInitializer = (wrapper) => {\n      if (!this._element) {\n        return;\n      }\n      if (this.itemsBox) {\n        this.itemsBox.destroy();\n      }\n\n      addClass(wrapper, 'htUIMultipleSelectHot');\n      const hotSettings = this.hot.getSettings();\n      this.itemsBox = new Handsontable(wrapper, {\n        data: this.items,\n        columns: [\n          {data: 'checked', type: 'checkbox', width: 20},\n          {data: 'visualValue', type: 'text'}\n        ],\n        // autoWrapCol: true,\n        // colWidths: this.getColWidths(hotSettings.filtersWidth || MIN_WIDTH),\n        autoColumnSize: true,\n        autoColumnSizeRevise: 5,\n        // stretchH: 'last',\n        height: hotSettings.filtersHeight || MIN_HEIGHT,\n        width: hotSettings.filtersWidth || MIN_WIDTH,\n        copyPaste: false,\n        disableVisualSelection: 'area',\n        fillHandle: false,\n        fragmentSelection: 'cell',\n        tabMoves: {row: 1, col: 0},\n        beforeKeyDown: (event) => this.onItemsBoxBeforeKeyDown(event)\n      });\n    };\n    this.resetSize();\n    hotInitializer(itemsBoxWrapper);\n    setTimeout(() => {\n      hotInitializer(itemsBoxWrapper);\n      this.itemsBox.addHook('beforeOnCellMouseDown', (event, coords) => {\n        let col = coords.col;\n        let row = coords.row;\n        if (col === 1) {\n          event.stopImmediatePropagation();\n          this.itemsBox.setDataAtCell(row, 0, !this.itemsBox.getDataAtCell(row, 0));\n        }\n      });\n    }, 100);\n  }\n\n  resetSize() {\n    const hotSettings = this.hot.getSettings();\n    if (hotSettings.filtersWidth) {\n      let dropdownMenu = this.hot.getPlugin('dropdownMenu');\n      dropdownMenu.menu.hotMenu.updateSettings({width: this.getHotMenuWidth(hotSettings.filtersWidth), colWidths: this.getHotMenuColWidths(hotSettings.filtersWidth)});\n    }\n  }\n  getColWidths(width) {\n    return width - 18;\n  }\n  getHotMenuWidth(width) {\n    return width + 56;\n  }\n  getHotMenuColWidths(width) {\n    return [width + 32];\n  }\n\n  /**\n   * Reset DOM structure.\n   */\n  reset() {\n    this.searchInput.reset();\n  }\n\n  /**\n   * Update DOM structure.\n   */\n  update() {\n    if (!this.isBuilt()) {\n      return;\n    }\n    this.itemsBox.loadData(valueToItems(this.items, this.options.value));\n    super.update();\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    if (this.itemsBox) {\n      this.itemsBox.destroy();\n    }\n    this.searchInput.destroy();\n    this.clearAllUI.destroy();\n    this.selectAllUI.destroy();\n\n    this.searchInput = null;\n    this.clearAllUI = null;\n    this.selectAllUI = null;\n    this.itemsBox = null;\n    this.items = null;\n    super.destroy();\n  }\n\n  /**\n   * 'input' event listener for input element.\n   *\n   * @private\n   * @param {Event} event DOM event.\n   */\n  onInput(event) {\n    let value = event.target.value.toLowerCase();\n    let filteredItems;\n\n    if (value === '') {\n      filteredItems = [...this.items];\n    } else {\n      filteredItems = arrayFilter(this.items, (item) => (item.visualValue + '').toLowerCase().indexOf(value) >= 0);\n    }\n    this.itemsBox.loadData(filteredItems);\n  }\n\n  /**\n   * 'keydown' event listener for input element.\n   *\n   * @private\n   * @param {Event} event DOM event.\n   */\n  onInputKeyDown(event) {\n    this.runLocalHooks('keydown', event, this);\n\n    const isKeyCode = partial(isKey, event.keyCode);\n\n    if (isKeyCode('ARROW_DOWN|TAB') && !this.itemsBox.isListening()) {\n      stopImmediatePropagation(event);\n      this.itemsBox.listen();\n      this.itemsBox.selectCell(0, 0);\n    }\n  }\n\n  /**\n   * On before key down listener (internal Handsontable).\n   *\n   * @private\n   * @param {Event} event DOM event.\n   */\n  onItemsBoxBeforeKeyDown(event) {\n    const isKeyCode = partial(isKey, event.keyCode);\n\n    if (isKeyCode('ESCAPE')) {\n      this.runLocalHooks('keydown', event, this);\n    }\n    // for keys different than below, unfocus Handsontable and focus search input\n    if (!isKeyCode('ARROW_UP|ARROW_DOWN|ARROW_LEFT|ARROW_RIGHT|TAB|SPACE|ENTER')) {\n      stopImmediatePropagation(event);\n      this.itemsBox.unlisten();\n      this.itemsBox.deselectCell();\n      this.searchInput.focus();\n    }\n  }\n\n  /**\n   * On click listener for \"Select all\" link.\n   *\n   * @private\n   * @param {DOMEvent} event\n   */\n  onSelectAllClick(event) {\n    event.preventDefault();\n    arrayEach(this.itemsBox.getSourceData(), (row) => {\n      row.checked = true;\n    });\n    this.itemsBox.render();\n  }\n\n  /**\n   * On click listener for \"Clear\" link.\n   *\n   * @private\n   * @param {DOMEvent} event\n   */\n  onClearAllClick(event) {\n    event.preventDefault();\n    arrayEach(this.itemsBox.getSourceData(), (row) => {\n      row.checked = false;\n    });\n    this.itemsBox.render();\n  }\n}\n\nexport default MultipleSelectUI;\n\n/**\n * Pick up object items based on selected values.\n *\n * @param {Array} availableItems Base collection to compare values.\n * @param selectedValue Flat array with selected values.\n * @returns {Array}\n */\nfunction valueToItems(availableItems, selectedValue) {\n  const arrayAssertion = createArrayAssertion(selectedValue);\n\n  return arrayMap(availableItems, (item) => {\n    item.checked = arrayAssertion(item.value);\n\n    return item;\n  });\n}\n\n/**\n * Convert all checked items into flat array.\n *\n * @param {Array} availableItems Base collection.\n * @returns {Array}\n */\nfunction itemsToValue(availableItems) {\n  let items = [];\n\n  arrayEach(availableItems, (item) => {\n    if (item.checked) {\n      items.push(item.value);\n    }\n  });\n\n  return items;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/ui/multipleSelect.js","import {addClass, getWindowScrollTop, getWindowScrollLeft} from 'handsontable/helpers/dom/element';\nimport Menu from 'handsontable/plugins/contextMenu/menu';\nimport {clone, extend} from 'handsontable/helpers/object';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {SEPARATOR} from 'handsontable/plugins/contextMenu/predefinedItems';\nimport BaseUI from './_base';\n\nconst privatePool = new WeakMap();\n\n/**\n * @class SelectUI\n * @util\n */\nclass SelectUI extends BaseUI {\n  static get DEFAULTS() {\n    return clone({\n      className: 'htUISelect',\n      wrapIt: false,\n    });\n  }\n\n  constructor(hotInstance, options) {\n    super(hotInstance, extend(SelectUI.DEFAULTS, options));\n\n    privatePool.set(this, {});\n    /**\n     * Instance of {@link Menu}.\n     *\n     * @type {Menu}\n     */\n    this.menu = null;\n    /**\n     * List of available select options.\n     *\n     * @type {Array}\n     */\n    this.items = [];\n\n    this.registerHooks();\n  }\n\n  /**\n   * Register all necessary hooks.\n   */\n  registerHooks() {\n    this.addLocalHook('click', (event) => this.onClick(event));\n  }\n\n  /**\n   * Set options which can be selected in the list.\n   *\n   * @param {Array} items Array of objects with required keys `key` and `name`.\n   */\n  setItems(items) {\n    this.items = items;\n\n    if (this.menu) {\n      this.menu.setMenuItems(this.items);\n    }\n  }\n\n  /**\n   * Build DOM structure.\n   */\n  build() {\n    super.build();\n    this.menu = new Menu(this.hot, {\n      className: 'htSelectUI htFiltersConditionsMenu',\n      keepInViewport: false,\n      standalone: true,\n    });\n    this.menu.setMenuItems(this.items);\n\n    const caption = new BaseUI(this.hot, {\n      className: 'htUISelectCaption'\n    });\n    const dropdown = new BaseUI(this.hot, {\n      className: 'htUISelectDropdown'\n    });\n    const priv = privatePool.get(this);\n\n    priv.caption = caption;\n    priv.captionElement = caption.element;\n    priv.dropdown = dropdown;\n\n    arrayEach([caption, dropdown], (element) => this._element.appendChild(element.element));\n\n    this.menu.addLocalHook('select', (command) => this.onMenuSelect(command));\n    this.menu.addLocalHook('afterClose', () => this.onMenuClosed());\n    this.update();\n  }\n\n  /**\n   * Update DOM structure.\n   */\n  update() {\n    if (!this.isBuilt()) {\n      return;\n    }\n    privatePool.get(this).captionElement.textContent = this.options.value ? this.options.value.name : 'None';\n    super.update();\n  }\n\n  /**\n   * Open select dropdown menu with available options.\n   */\n  openOptions() {\n    let rect = this.element.getBoundingClientRect();\n\n    if (this.menu) {\n      this.menu.open();\n      this.menu.setPosition({\n        left: rect.left - 5,\n        top: rect.top,\n        width: rect.width,\n        height: rect.height\n      });\n    }\n  }\n\n  /**\n   * Close select dropdown menu.\n   */\n  closeOptions() {\n    if (this.menu) {\n      this.menu.close();\n    }\n  }\n\n  /**\n   * On menu selected listener.\n   *\n   * @private\n   * @param {Object} command Selected item\n   */\n  onMenuSelect(command) {\n    if (command.name !== SEPARATOR) {\n      this.options.value = command;\n      this.closeOptions();\n      this.update();\n      this.runLocalHooks('select', this.options.value);\n    }\n  }\n\n  /**\n   * On menu closed listener.\n   *\n   * @private\n   */\n  onMenuClosed() {\n    this.runLocalHooks('afterClose');\n  }\n\n  /**\n   * On element click listener.\n   *\n   * @private\n   * @param {Event} event DOM Event\n   */\n  onClick(event) {\n    this.openOptions();\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    if (this.menu) {\n      this.menu.destroy();\n      this.menu = null;\n    }\n    const {caption, dropdown} = privatePool.get(this);\n\n    if (caption) {\n      caption.destroy();\n    }\n    if (dropdown) {\n      dropdown.destroy();\n    }\n\n    super.destroy();\n  }\n}\n\nexport default SelectUI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/filters/ui/select.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {mixin} from 'handsontable/helpers/object';\nimport localHooks from 'handsontable/mixins/localHooks';\n\nimport * as columnSorting from './alterOperation/columnSorting';\nimport * as insertColumn from './alterOperation/insertColumn';\nimport * as insertRow from './alterOperation/insertRow';\nimport * as removeColumn from './alterOperation/removeColumn';\nimport * as removeRow from './alterOperation/removeRow';\n\nconst operations = new Map();\n\nregisterOperation(columnSorting.OPERATION_NAME, columnSorting);\nregisterOperation(insertColumn.OPERATION_NAME, insertColumn);\nregisterOperation(insertRow.OPERATION_NAME, insertRow);\nregisterOperation(removeColumn.OPERATION_NAME, removeColumn);\nregisterOperation(removeRow.OPERATION_NAME, removeRow);\n\n/**\n * @class AlterManager\n * @util\n */\nclass AlterManager {\n  constructor(sheet) {\n    /**\n     * Instance of {@link Sheet}.\n     *\n     * @type {Sheet}\n     */\n    this.sheet = sheet;\n    /**\n     * Handsontable instance.\n     *\n     * @type {Core}\n     */\n    this.hot = sheet.hot;\n    /**\n     * Instance of {@link DataProvider}.\n     *\n     * @type {DataProvider}\n     */\n    this.dataProvider = sheet.dataProvider;\n    /**\n     * Instance of {@link Matrix}.\n     *\n     * @type {Matrix}\n     */\n    this.matrix = sheet.matrix;\n  }\n\n  prepareAlter(action, ...args) {\n    if (!operations.has(action)) {\n      throw Error(`Alter operation \"${action}\" not exist.`);\n    }\n    operations.get(action).prepare.apply(this, args);\n  }\n\n  /**\n   * Trigger alter table action.\n   *\n   * @param {String} action One of action defined in alterOperation.\n   * @param {*} args Arguments pass to alter operation.\n   */\n  triggerAlter(action, ...args) {\n    if (!operations.has(action)) {\n      throw Error(`Alter operation \"${action}\" not exist.`);\n    }\n    operations.get(action).operate.apply(this, args);\n    this.runLocalHooks('afterAlter', ...args);\n  }\n\n  /**\n   * Destroy class.\n   */\n  destroy() {\n    this.sheet = null;\n    this.hot = null;\n    this.dataProvider = null;\n    this.matrix = null;\n  }\n}\n\nmixin(AlterManager, localHooks);\n\nexport default AlterManager;\n\nconst empty = () => {};\n\nexport function registerOperation(name, descriptor) {\n  if (!operations.has(name)) {\n    operations.set(name, {\n      prepare: descriptor.prepare || empty,\n      operate: descriptor.operate || empty,\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/alterManager.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {isFormulaExpression} from './../utils';\nimport CellValue from './../cell/value';\nimport ExpressionModifier from './../expressionModifier';\n\nexport const OPERATION_NAME = 'column_sorting';\n\nlet visualRows;\n\nexport function prepare() {\n  const {matrix, dataProvider} = this;\n\n  visualRows = new WeakMap();\n\n  arrayEach(matrix.data, (cell) => {\n    visualRows.set(cell, dataProvider.t.toVisualRow(cell.row));\n  });\n}\n\nexport function operate() {\n  const {matrix, dataProvider} = this;\n\n  matrix.cellReferences.length = 0;\n\n  arrayEach(matrix.data, (cell) => {\n    cell.setState(CellValue.STATE_OUT_OFF_DATE);\n    cell.clearPrecedents();\n\n    const {row, column} = cell;\n    const value = dataProvider.getSourceDataAtCell(row, column);\n\n    if (isFormulaExpression(value)) {\n      const prevRow = visualRows.get(cell);\n      const expModifier = new ExpressionModifier(value);\n\n      expModifier.translate({row: dataProvider.t.toVisualRow(row) - prevRow});\n\n      dataProvider.updateSourceData(row, column, expModifier.toString());\n    }\n  });\n\n  visualRows = null;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/alterOperation/columnSorting.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {cellCoordFactory, isFormulaExpression} from './../utils';\nimport CellValue from './../cell/value';\nimport ExpressionModifier from './../expressionModifier';\n\nexport const OPERATION_NAME = 'insert_column';\n\nexport function operate(start, amount, modifyFormula = true) {\n  const {matrix, dataProvider} = this;\n  const translate = [0, amount];\n\n  arrayEach(matrix.cellReferences, (cell) => {\n    if (cell.column >= start) {\n      cell.translateTo(...translate);\n    }\n  });\n\n  arrayEach(matrix.data, (cell) => {\n    const {row: origRow, column: origColumn} = cell;\n\n    if (cell.column >= start) {\n      cell.translateTo(...translate);\n      cell.setState(CellValue.STATE_OUT_OFF_DATE);\n    }\n\n    if (modifyFormula) {\n      const {row, column} = cell;\n      const value = dataProvider.getSourceDataAtCell(row, column);\n\n      if (isFormulaExpression(value)) {\n        const startCoord = cellCoordFactory('column', start);\n        const expModifier = new ExpressionModifier(value);\n\n        expModifier.useCustomModifier(customTranslateModifier);\n        expModifier.translate({column: amount}, startCoord({row: origRow, column: origColumn}));\n\n        dataProvider.updateSourceData(row, column, expModifier.toString());\n      }\n    }\n  });\n}\n\nfunction customTranslateModifier(cell, axis, delta, startFromIndex) {\n  const {start, end} = cell;\n  const startIndex = start[axis].index;\n  const endIndex = end[axis].index;\n  let deltaStart = delta;\n  let deltaEnd = delta;\n\n  // Do not translate cells above inserted row or on the left of inserted column\n  if (startFromIndex > startIndex) {\n    deltaStart = 0;\n  }\n  if (startFromIndex > endIndex) {\n    deltaEnd = 0;\n  }\n\n  return [deltaStart, deltaEnd, false];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/alterOperation/insertColumn.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {cellCoordFactory, isFormulaExpression} from './../utils';\nimport CellValue from './../cell/value';\nimport ExpressionModifier from './../expressionModifier';\n\nexport const OPERATION_NAME = 'insert_row';\n\nexport function operate(start, amount, modifyFormula = true) {\n  const {matrix, dataProvider} = this;\n  const translate = [amount, 0];\n\n  arrayEach(matrix.cellReferences, (cell) => {\n    if (cell.row >= start) {\n      cell.translateTo(...translate);\n    }\n  });\n\n  arrayEach(matrix.data, (cell) => {\n    const {row: origRow, column: origColumn} = cell;\n\n    if (cell.row >= start) {\n      cell.translateTo(...translate);\n      cell.setState(CellValue.STATE_OUT_OFF_DATE);\n    }\n\n    if (modifyFormula) {\n      const {row, column} = cell;\n      const value = dataProvider.getSourceDataAtCell(row, column);\n\n      if (isFormulaExpression(value)) {\n        const startCoord = cellCoordFactory('row', start);\n        const expModifier = new ExpressionModifier(value);\n\n        expModifier.useCustomModifier(customTranslateModifier);\n        expModifier.translate({row: amount}, startCoord({row: origRow, column: origColumn}));\n\n        dataProvider.updateSourceData(row, column, expModifier.toString());\n      }\n    }\n  });\n}\n\nfunction customTranslateModifier(cell, axis, delta, startFromIndex) {\n  const {start, end} = cell;\n  const startIndex = start[axis].index;\n  const endIndex = end[axis].index;\n  let deltaStart = delta;\n  let deltaEnd = delta;\n\n  // Do not translate cells above inserted row or on the left of inserted column\n  if (startFromIndex > startIndex) {\n    deltaStart = 0;\n  }\n  if (startFromIndex > endIndex) {\n    deltaEnd = 0;\n  }\n\n  return [deltaStart, deltaEnd, false];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/alterOperation/insertRow.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {cellCoordFactory, isFormulaExpression} from './../utils';\nimport CellValue from './../cell/value';\nimport ExpressionModifier from './../expressionModifier';\n\nexport const OPERATION_NAME = 'remove_column';\n\nexport function operate(start, amount, modifyFormula = true) {\n  amount = -amount;\n\n  const {matrix, dataProvider, sheet} = this;\n  const translate = [0, amount];\n  const indexOffset = Math.abs(amount) - 1;\n\n  let removedCellRef = matrix.removeCellRefsAtRange({column: start}, {column: start + indexOffset});\n  let toRemove = [];\n\n  arrayEach(matrix.data, (cell) => {\n    arrayEach(removedCellRef, (cellRef) => {\n      if (!cell.hasPrecedent(cellRef)) {\n        return;\n      }\n\n      cell.removePrecedent(cellRef);\n      cell.setState(CellValue.STATE_OUT_OFF_DATE);\n\n      arrayEach(sheet.getCellDependencies(cell.row, cell.column), (cellValue) => {\n        cellValue.setState(CellValue.STATE_OUT_OFF_DATE);\n      });\n    });\n\n    if (cell.column >= start && cell.column <= (start + indexOffset)) {\n      toRemove.push(cell);\n    }\n  });\n\n  matrix.remove(toRemove);\n\n  arrayEach(matrix.cellReferences, (cell) => {\n    if (cell.column >= start) {\n      cell.translateTo(...translate);\n    }\n  });\n\n  arrayEach(matrix.data, (cell) => {\n    const {row: origRow, column: origColumn} = cell;\n\n    if (cell.column >= start) {\n      cell.translateTo(...translate);\n      cell.setState(CellValue.STATE_OUT_OFF_DATE);\n    }\n\n    if (modifyFormula) {\n      const {row, column} = cell;\n      const value = dataProvider.getSourceDataAtCell(row, column);\n\n      if (isFormulaExpression(value)) {\n        const startCoord = cellCoordFactory('column', start);\n        const expModifier = new ExpressionModifier(value);\n\n        expModifier.useCustomModifier(customTranslateModifier);\n        expModifier.translate({column: amount}, startCoord({row: origRow, column: origColumn}));\n\n        dataProvider.updateSourceData(row, column, expModifier.toString());\n      }\n    }\n  });\n}\n\nfunction customTranslateModifier(cell, axis, delta, startFromIndex) {\n  const {start, end, type} = cell;\n  const startIndex = start[axis].index;\n  const endIndex = end[axis].index;\n  const indexOffset = Math.abs(delta) - 1;\n  let deltaStart = delta;\n  let deltaEnd = delta;\n  let refError = false;\n\n  // Mark all cells as #REF! which refer to removed cells between startFromIndex and startFromIndex + delta\n  if (startIndex >= startFromIndex && endIndex <= startFromIndex + indexOffset) {\n    refError = true;\n  }\n\n  // Decrement all cells below startFromIndex\n  if (!refError && type === 'cell') {\n    if (startFromIndex >= startIndex) {\n      deltaStart = 0;\n      deltaEnd = 0;\n    }\n  }\n\n  if (!refError && type === 'range') {\n    if (startFromIndex >= startIndex) {\n      deltaStart = 0;\n    }\n    if (startFromIndex > endIndex) {\n      deltaEnd = 0;\n\n    } else if (endIndex <= startFromIndex + indexOffset) {\n      deltaEnd -= Math.min(endIndex - (startFromIndex + indexOffset), 0);\n    }\n  }\n\n  if (startIndex + deltaStart < 0) {\n    deltaStart -= startIndex + deltaStart;\n  }\n\n  return [deltaStart, deltaEnd, refError];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/alterOperation/removeColumn.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {cellCoordFactory, isFormulaExpression} from './../utils';\nimport CellValue from './../cell/value';\nimport ExpressionModifier from './../expressionModifier';\n\nexport const OPERATION_NAME = 'remove_row';\n\nexport function operate(start, amount, modifyFormula = true) {\n  amount = -amount;\n\n  const {matrix, dataProvider, sheet} = this;\n  const translate = [amount, 0];\n  const indexOffset = Math.abs(amount) - 1;\n\n  let removedCellRef = matrix.removeCellRefsAtRange({row: start}, {row: start + indexOffset});\n  let toRemove = [];\n\n  arrayEach(matrix.data, (cell) => {\n    arrayEach(removedCellRef, (cellRef) => {\n      if (!cell.hasPrecedent(cellRef)) {\n        return;\n      }\n\n      cell.removePrecedent(cellRef);\n      cell.setState(CellValue.STATE_OUT_OFF_DATE);\n\n      arrayEach(sheet.getCellDependencies(cell.row, cell.column), (cellValue) => {\n        cellValue.setState(CellValue.STATE_OUT_OFF_DATE);\n      });\n    });\n\n    if (cell.row >= start && cell.row <= (start + indexOffset)) {\n      toRemove.push(cell);\n    }\n  });\n\n  matrix.remove(toRemove);\n\n  arrayEach(matrix.cellReferences, (cell) => {\n    if (cell.row >= start) {\n      cell.translateTo(...translate);\n    }\n  });\n\n  arrayEach(matrix.data, (cell) => {\n    const {row: origRow, column: origColumn} = cell;\n\n    if (cell.row >= start) {\n      cell.translateTo(...translate);\n      cell.setState(CellValue.STATE_OUT_OFF_DATE);\n    }\n\n    if (modifyFormula) {\n      const {row, column} = cell;\n      const value = dataProvider.getSourceDataAtCell(row, column);\n\n      if (isFormulaExpression(value)) {\n        const startCoord = cellCoordFactory('row', start);\n        const expModifier = new ExpressionModifier(value);\n\n        expModifier.useCustomModifier(customTranslateModifier);\n        expModifier.translate({row: amount}, startCoord({row: origRow, column: origColumn}));\n\n        dataProvider.updateSourceData(row, column, expModifier.toString());\n      }\n    }\n  });\n}\n\nfunction customTranslateModifier(cell, axis, delta, startFromIndex) {\n  const {start, end, type} = cell;\n  const startIndex = start[axis].index;\n  const endIndex = end[axis].index;\n  const indexOffset = Math.abs(delta) - 1;\n  let deltaStart = delta;\n  let deltaEnd = delta;\n  let refError = false;\n\n  // Mark all cells as #REF! which refer to removed cells between startFromIndex and startFromIndex + delta\n  if (startIndex >= startFromIndex && endIndex <= startFromIndex + indexOffset) {\n    refError = true;\n  }\n\n  // Decrement all cells below startFromIndex\n  if (!refError && type === 'cell') {\n    if (startFromIndex >= startIndex) {\n      deltaStart = 0;\n      deltaEnd = 0;\n    }\n  }\n\n  if (!refError && type === 'range') {\n    if (startFromIndex >= startIndex) {\n      deltaStart = 0;\n    }\n    if (startFromIndex > endIndex) {\n      deltaEnd = 0;\n\n    } else if (endIndex <= startFromIndex + indexOffset) {\n      deltaEnd -= Math.min(endIndex - (startFromIndex + indexOffset), 0);\n    }\n  }\n\n  if (startIndex + deltaStart < 0) {\n    deltaStart -= startIndex + deltaStart;\n  }\n\n  return [deltaStart, deltaEnd, refError];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/alterOperation/removeRow.js","import {toLabel} from 'hot-formula-parser';\nimport BaseCell from './_base';\n\n/**\n * @class CellReference\n * @util\n */\nclass CellReference extends BaseCell {\n  /**\n   * Stringify object.\n   *\n   * @returns {String}\n   */\n  toString() {\n    return toLabel(\n      {index: this.row, isAbsolute: false},\n      {index: this.column, isAbsolute: false}\n    );\n  }\n}\n\nexport default CellReference;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/cell/reference.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {hasOwnProperty} from 'handsontable/helpers/object';\nimport {getTranslator} from 'handsontable/utils/recordTranslator';\nimport {isFormulaExpression} from './utils';\n\n/**\n * @class DataProvider\n * @util\n */\nclass DataProvider {\n  constructor(hot) {\n    /**\n     * Handsontable instance.\n     *\n     * @type {Core}\n     */\n    this.hot = hot;\n    /**\n     * Collected changes applied into editors or by calling public Handsontable API.\n     *\n     * @type {Object}\n     */\n    this.changes = {};\n    /**\n     * Record translator for translating visual records into psychical and vice versa.\n     *\n     * @type {RecordTranslator}\n     */\n    this.t = getTranslator(this.hot);\n  }\n\n  /**\n   * Collect data changes to the collection.\n   *\n   * @param {Number} row Physical row index.\n   * @param {Number} column Physical column index.\n   * @param {*} value Value to save.\n   */\n  collectChanges(row, column, value) {\n    if (!isFormulaExpression(value)) {\n      this.changes[this._coordId(row, column)] = value;\n    }\n  }\n\n  /**\n   * Clear all collected changes.\n   */\n  clearChanges() {\n    this.changes = {};\n  }\n\n  /**\n   * Check if provided coordinates match to the table range data.\n   *\n   * @param {Number} row Visual row index.\n   * @param {Number} column Visual row index.\n   * @returns {Boolean}\n   */\n  isInDataRange(row, column) {\n    return row >= 0 && row < this.hot.countRows() && column >= 0 && column < this.hot.countCols();\n  }\n\n  /**\n   * Get calculated data at specified cell.\n   *\n   * @param {Number} row Visual row index.\n   * @param {Number} column Visual column index.\n   * @returns {*}\n   */\n  getDataAtCell(row, column) {\n    const id = this._coordId(...this.t.toPhysical(row, column));\n    let result;\n\n    if (hasOwnProperty(this.changes, id)) {\n      result = this.changes[id];\n    } else {\n      result = this.hot.getDataAtCell(row, column);\n    }\n\n    return result;\n  }\n\n  /**\n   * Get calculated data at specified range.\n   *\n   * @param {Number} [row1] Visual row index.\n   * @param {Number} [column1] Visual column index.\n   * @param {Number} [row2] Visual row index.\n   * @param {Number} [column2] Visual column index.\n   * @returns {Array}\n   */\n  getDataByRange(row1, column1, row2, column2) {\n    const result = this.hot.getData(row1, column1, row2, column2);\n\n    arrayEach(result, (rowData, rowIndex) => {\n      arrayEach(rowData, (value, columnIndex) => {\n        const id = this._coordId(...this.t.toPhysical(rowIndex + row1, columnIndex + column1));\n\n        if (hasOwnProperty(this.changes, id)) {\n          result[rowIndex][columnIndex] = this.changes[id];\n        }\n      });\n    });\n\n    return result;\n  }\n\n  /**\n   * Get source data at specified physical cell.\n   *\n   * @param {Number} row Physical row index.\n   * @param {Number} column Physical column index.\n   * @returns {*}\n   */\n  getSourceDataAtCell(row, column) {\n    return this.hot.getSourceDataAtCell(row, column);\n  }\n\n  /**\n   * Get source data at specified visual cell.\n   *\n   * @param {Number} row Visual row index.\n   * @param {Number} column Visual column index.\n   * @returns {*}\n   */\n  getRawDataAtCell(row, column) {\n    return this.getSourceDataAtCell(...this.t.toPhysical(row, column));\n  }\n\n  /**\n   * Get source data at specified physical range.\n   *\n   * @param {Number} [row1] Physical row index.\n   * @param {Number} [column1] Physical column index.\n   * @param {Number} [row2] Physical row index.\n   * @param {Number} [column2] Physical column index.\n   * @returns {Array}\n   */\n  getSourceDataByRange(row1, column1, row2, column2) {\n    return this.hot.getSourceDataArray(row1, column1, row2, column2);\n  }\n\n  /**\n   * Get source data at specified visual range.\n   *\n   * @param {Number} [row1] Visual row index.\n   * @param {Number} [column1] Visual column index.\n   * @param {Number} [row2] Visual row index.\n   * @param {Number} [column2] Visual column index.\n   * @returns {Array}\n   */\n  getRawDataByRange(row1, column1, row2, column2) {\n    const args = [...this.t.toPhysical(row1, column1), ...this.t.toPhysical(row2, column2)];\n\n    return this.getSourceDataByRange(...args);\n  }\n\n  /**\n   * Update source data.\n   *\n   * @param {Number} row Physical row index.\n   * @param {Number} column Physical row index.\n   * @param {*} value Value to update.\n   */\n  updateSourceData(row, column, value) {\n    this.hot.getSourceData()[row][this.hot.colToProp(column)] = value;\n  }\n\n  /**\n   * Get coords id.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @returns {String}\n   * @private\n   */\n  _coordId(row, column) {\n    return `${row}:${column}`;\n  }\n\n  /**\n   * Destroy class.\n   */\n  destroy() {\n    this.hot = null;\n    this.changes = null;\n    this.t = null;\n  }\n}\n\nexport default DataProvider;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/dataProvider.js","import BasePlugin from 'handsontable/plugins/_base';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {isObject, objectEach} from 'handsontable/helpers/object';\nimport EventManager from 'handsontable/eventManager';\nimport {registerPlugin} from 'handsontable/plugins';\nimport {isFormulaExpression, toUpperCaseFormula, isFormulaExpressionEscaped, unescapeFormulaExpression} from './utils';\nimport Sheet from './sheet';\nimport DataProvider from './dataProvider';\nimport UndoRedoSnapshot from './undoRedoSnapshot';\n\n/**\n * The formulas plugin.\n *\n * @plugin Formulas\n * @pro\n */\nclass Formulas extends BasePlugin {\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * Instance of {@link EventManager}.\n     *\n     * @type {EventManager}\n     */\n    this.eventManager = new EventManager(this);\n    /**\n     * Instance of {@link DataProvider}.\n     *\n     * @type {DataProvider}\n     */\n    this.dataProvider = new DataProvider(this.hot);\n    /**\n     * Instance of {@link Sheet}.\n     *\n     * @type {Sheet}\n     */\n    this.sheet = new Sheet(this.hot, this.dataProvider);\n    /**\n     * Instance of {@link UndoRedoSnapshot}.\n     *\n     * @type {UndoRedoSnapshot}\n     */\n    this.undoRedoSnapshot = new UndoRedoSnapshot(this.sheet);\n    /**\n     * Flag which indicates if table should be re-render after sheet recalculations.\n     *\n     * @type {Boolean}\n     * @default false\n     * @private\n     */\n    this._skipRendering = false;\n  }\n\n  /**\n   * Check if the plugin is enabled in the Handsontable settings.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    /* eslint-disable no-unneeded-ternary */\n    return this.hot.getSettings().formulas ? true : false;\n  }\n\n  /**\n   * Enable plugin for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n    const settings = this.hot.getSettings().formulas;\n\n    if (isObject(settings)) {\n      if (isObject(settings.variables)) {\n        objectEach(settings.variables, (value, name) => this.setVariable(name, value));\n      }\n    }\n\n    this.addHook('afterColumnSort', (...args) => this.onAfterColumnSort(...args));\n    this.addHook('afterCreateCol', (...args) => this.onAfterCreateCol(...args));\n    this.addHook('afterCreateRow', (...args) => this.onAfterCreateRow(...args));\n    this.addHook('afterLoadData', () => this.onAfterLoadData());\n    this.addHook('afterRemoveCol', (...args) => this.onAfterRemoveCol(...args));\n    this.addHook('afterRemoveRow', (...args) => this.onAfterRemoveRow(...args));\n    this.addHook('afterSetDataAtCell', (...args) => this.onAfterSetDataAtCell(...args));\n    this.addHook('afterSetDataAtRowProp', (...args) => this.onAfterSetDataAtCell(...args));\n    this.addHook('beforeColumnSort', (...args) => this.onBeforeColumnSort(...args));\n    this.addHook('beforeCreateCol', (...args) => this.onBeforeCreateCol(...args));\n    this.addHook('beforeCreateRow', (...args) => this.onBeforeCreateRow(...args));\n    this.addHook('beforeRemoveCol', (...args) => this.onBeforeRemoveCol(...args));\n    this.addHook('beforeRemoveRow', (...args) => this.onBeforeRemoveRow(...args));\n    this.addHook('beforeValidate', (...args) => this.onBeforeValidate(...args));\n    this.addHook('beforeValueRender', (...args) => this.onBeforeValueRender(...args));\n    this.addHook('modifyData', (...args) => this.onModifyData(...args));\n\n    this.sheet.addLocalHook('afterRecalculate', (...args) => this.onSheetAfterRecalculate(...args));\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Disable plugin for this Handsontable instance.\n   */\n  disablePlugin() {\n    super.disablePlugin();\n  }\n\n  /**\n   * Get cell value (evaluated from formula expression) at specified cell coords.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @returns {*}\n   */\n  getCellValue(row, column) {\n    const cell = this.sheet.getCellAt(row, column);\n\n    return cell ? (cell.getError() || cell.getValue()) : void 0;\n  }\n\n  /**\n   * Check if there are any formula evaluations made under specific cell coords.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @returns {Boolean}\n   */\n  hasComputedCellValue(row, column) {\n    return this.sheet.getCellAt(row, column) !== null;\n  }\n\n  /**\n   * Recalculate all formulas (an algorithm will choose the best method of calculation).\n   */\n  recalculate() {\n    this.sheet.recalculate();\n  }\n\n  /**\n   * Recalculate all formulas (rebuild dependencies from scratch - slow approach).\n   */\n  recalculateFull() {\n    this.sheet.recalculateFull();\n  }\n\n  /**\n   * Recalculate all formulas (recalculate only changed cells - fast approach).\n   */\n  recalculateOptimized() {\n    this.sheet.recalculateOptimized();\n  }\n\n  /**\n   * Set predefined variable name which can be visible while parsing formula expression.\n   *\n   * @param {String} name Variable name.\n   * @param {*} value Variable value.\n   */\n  setVariable(name, value) {\n    this.sheet.setVariable(name, value);\n  }\n\n  /**\n   * Get variable name.\n   *\n   * @param {String} name Variable name.\n   * @returns {*}\n   */\n  getVariable(name) {\n    return this.sheet.getVariable(name);\n  }\n\n  /**\n   * Local hook listener for after sheet recalculation.\n   *\n   * @private\n   * @param {Array} cells An array of recalculated/changed cells.\n   * @param {String} type Recalculation type (`optimized` or `full`).\n   */\n  onSheetAfterRecalculate(cells, type) {\n    if (this._skipRendering) {\n      this._skipRendering = false;\n\n      return;\n    }\n    const hot = this.hot;\n\n    arrayEach(cells, ({row, column}) => {\n      hot.validateCell(hot.getDataAtCell(row, column), hot.getCellMeta(row, column), () => {});\n    });\n    hot.render();\n  }\n\n  /**\n   * On modify row data listener. It overwrites raw values into calculated ones and force upper case all formula expressions.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @param {Object} valueHolder Value holder as an object to change value by reference.\n   * @param {String} ioMode IO operation (`get` or `set`).\n   * @returns {Array|undefined} Returns modified row data.\n   */\n  onModifyData(row, column, valueHolder, ioMode) {\n    if (ioMode === 'get' && this.hasComputedCellValue(row, column)) {\n      valueHolder.value = this.getCellValue(row, column);\n\n    } else if (ioMode === 'set' && isFormulaExpression(valueHolder.value)) {\n      valueHolder.value = toUpperCaseFormula(valueHolder.value);\n    }\n  }\n\n  /**\n   * On before value render listener.\n   *\n   * @private\n   * @param {*} value Value to render.\n   * @returns {*}\n   */\n  onBeforeValueRender(value) {\n    if (isFormulaExpressionEscaped(value)) {\n      value = unescapeFormulaExpression(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * On before validate listener.\n   *\n   * @private\n   * @param {*} value Value to validate.\n   * @param {Number} row Row index.\n   * @param {Number} prop Column property.\n   * @param {String} source Validation source call.\n   */\n  onBeforeValidate(value, row, prop, source) {\n    const column = this.hot.propToCol(prop);\n\n    if (this.hasComputedCellValue(row, column)) {\n      value = this.getCellValue(row, column);\n    }\n\n    return value;\n  }\n\n  /**\n   * `afterSetDataAtCell` listener.\n   *\n   * @private\n   * @param {Array} changes Array of changes.\n   * @param {String} [source] Source of changes.\n   */\n  onAfterSetDataAtCell(changes, source) {\n    if (source === 'loadData') {\n      return;\n    }\n\n    this.dataProvider.clearChanges();\n\n    arrayEach(changes, ([row, column, oldValue, newValue]) => {\n      column = this.hot.propToCol(column);\n      row = this.t.toPhysicalRow(row);\n\n      if (isFormulaExpression(newValue)) {\n        newValue = toUpperCaseFormula(newValue);\n      }\n\n      this.dataProvider.collectChanges(row, column, newValue);\n\n      if (oldValue !== newValue) {\n        this.sheet.applyChanges(row, column, newValue);\n      }\n    });\n    this.recalculate();\n  }\n\n  /**\n   * On before create row listener.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {Number} amount An amount of removed rows.\n   * @param {String} source Source of method call.\n   */\n  onBeforeCreateRow(row, amount, source) {\n    if (source === 'UndoRedo.undo') {\n      this.undoRedoSnapshot.restore();\n    }\n  }\n\n  /**\n   * On after create row listener.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {Number} amount An amount of created rows.\n   * @param {String} source Source of method call.\n   */\n  onAfterCreateRow(row, amount, source) {\n    this.sheet.alterManager.triggerAlter('insert_row', row, amount, source !== 'UndoRedo.undo');\n  }\n\n  /**\n   * On before remove row listener.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {Number} amount An amount of removed rows.\n   */\n  onBeforeRemoveRow(row, amount) {\n    this.undoRedoSnapshot.save('row', row, amount);\n  }\n\n  /**\n   * On after remove row listener.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {Number} amount An amount of removed rows.\n   */\n  onAfterRemoveRow(row, amount) {\n    this.sheet.alterManager.triggerAlter('remove_row', row, amount);\n  }\n\n  /**\n   * On before create column listener.\n   *\n   * @private\n   * @param {Number} column Column index.\n   * @param {Number} amount An amount of removed columns.\n   * @param {String} source Source of method call.\n   */\n  onBeforeCreateCol(column, amount, source) {\n    if (source === 'UndoRedo.undo') {\n      this.undoRedoSnapshot.restore();\n    }\n  }\n\n  /**\n   * On after create column listener.\n   *\n   * @private\n   * @param {Number} column Column index.\n   * @param {Number} amount An amount of created columns.\n   * @param {String} source Source of method call.\n   */\n  onAfterCreateCol(column, amount, source) {\n    this.sheet.alterManager.triggerAlter('insert_column', column, amount, source !== 'UndoRedo.undo');\n  }\n\n  /**\n   * On before remove column listener.\n   *\n   * @private\n   * @param {Number} column Column index.\n   * @param {Number} amount An amount of removed columns.\n   */\n  onBeforeRemoveCol(column, amount) {\n    this.undoRedoSnapshot.save('column', column, amount);\n  }\n\n  /**\n   * On after remove column listener.\n   *\n   * @private\n   * @param {Number} column Column index.\n   * @param {Number} amount An amount of created columns.\n   */\n  onAfterRemoveCol(column, amount) {\n    this.sheet.alterManager.triggerAlter('remove_column', column, amount);\n  }\n\n  /**\n   * On before column sorting listener.\n   *\n   * @private\n   * @param {Number} column Sorted column index.\n   * @param {Boolean} order Order type.\n   */\n  onBeforeColumnSort(column, order) {\n    this.sheet.alterManager.prepareAlter('column_sorting', column, order);\n  }\n\n  /**\n   * On after column sorting listener.\n   *\n   * @private\n   * @param {Number} column Sorted column index.\n   * @param {Boolean} order Order type.\n   */\n  onAfterColumnSort(column, order) {\n    this.sheet.alterManager.triggerAlter('column_sorting', column, order);\n  }\n\n  /**\n   * On after load data listener.\n   *\n   * @private\n   */\n  onAfterLoadData() {\n    this._skipRendering = true;\n    this.recalculateFull();\n  }\n\n  /**\n   * Destroy plugin.\n   */\n  destroy() {\n    this.dataProvider.destroy();\n    this.dataProvider = null;\n    this.sheet.destroy();\n    this.sheet = null;\n\n    super.destroy();\n  }\n}\n\nregisterPlugin('formulas', Formulas);\n\nexport default Formulas;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/formulas.js","import {arrayEach, arrayFilter, arrayReduce} from 'handsontable/helpers/array';\nimport CellValue from './cell/value';\n\n/**\n * @class Matrix\n * @util\n */\nclass Matrix {\n  constructor(recordTranslator) {\n    /**\n     * Record translator for translating visual records into psychical and vice versa.\n     *\n     * @type {RecordTranslator}\n     */\n    this.t = recordTranslator;\n    /**\n     * List of all cell values with theirs precedents.\n     *\n     * @type {Array}\n     */\n    this.data = [];\n    /**\n     * List of all created and registered cell references.\n     *\n     * @type {Array}\n     */\n    this.cellReferences = [];\n  }\n\n  /**\n   * Get cell value at given row and column index.\n   *\n   * @param {Number} row Physical row index.\n   * @param {Number} column Physical column index.\n   * @returns {CellValue|null} Returns CellValue instance or `null` if cell not found.\n   */\n  getCellAt(row, column) {\n    let result = null;\n\n    arrayEach(this.data, (cell) => {\n      if (cell.row === row && cell.column === column) {\n        result = cell;\n\n        return false;\n      }\n    });\n\n    return result;\n  }\n\n  /**\n   * Get all out of date cells.\n   *\n   * @returns {Array}\n   */\n  getOutOfDateCells() {\n    return arrayFilter(this.data, (cell) => cell.isState(CellValue.STATE_OUT_OFF_DATE));\n  }\n\n  /**\n   * Add cell value to the collection.\n   *\n   * @param {CellValue|Object} cellValue Cell value object.\n   */\n  add(cellValue) {\n    if (!arrayFilter(this.data, (cell) => cell.isEqual(cellValue)).length) {\n      this.data.push(cellValue);\n    }\n  }\n\n  /**\n   * Remove cell value from the collection.\n   *\n   * @param {CellValue|Object|Array} cellValue Cell value object.\n   */\n  remove(cellValue) {\n    const isArray = Array.isArray(cellValue);\n    const isEqual = (cell, cellValue) => {\n      let result = false;\n\n      if (isArray) {\n        arrayEach(cellValue, (value) => {\n          if (cell.isEqual(value)) {\n            result = true;\n\n            return false;\n          }\n        });\n      } else {\n        result = cell.isEqual(cellValue);\n      }\n\n      return result;\n    };\n    this.data = arrayFilter(this.data, (cell) => !isEqual(cell, cellValue));\n  }\n\n  /**\n   * Get cell dependencies using visual coordinates.\n   *\n   * @param {Object} cellCoord Visual cell coordinates object.\n   */\n  getDependencies(cellCoord) {\n    /* eslint-disable arrow-body-style */\n    const getDependencies = (cell) => {\n      return arrayReduce(this.data, (acc, cellValue) => {\n        if (cellValue.hasPrecedent(cell) && acc.indexOf(cellValue) === -1) {\n          acc.push(cellValue);\n        }\n\n        return acc;\n      }, []);\n    };\n\n    const getTotalDependencies = (cell) => {\n      let deps = getDependencies(cell);\n\n      if (deps.length) {\n        arrayEach(deps, (cellValue) => {\n          if (cellValue.hasPrecedents()) {\n            deps = deps.concat(getTotalDependencies(this.t.toVisual(cellValue)));\n          }\n        });\n      }\n\n      return deps;\n    };\n\n    return getTotalDependencies(cellCoord);\n  }\n\n  /**\n   * Register cell reference to the collection.\n   *\n   * @param {CellReference|Object} cellReference Cell reference object.\n   */\n  registerCellRef(cellReference) {\n    if (!arrayFilter(this.cellReferences, (cell) => cell.isEqual(cellReference)).length) {\n      this.cellReferences.push(cellReference);\n    }\n  }\n\n  /**\n   * Remove cell references from the collection.\n   *\n   * @param {Object} start Start visual coordinate.\n   * @param {Object} end End visual coordinate.\n   * @returns {Array} Returns removed cell references.\n   */\n  removeCellRefsAtRange({row: startRow, column: startColumn}, {row: endRow, column: endColumn}) {\n    const removed = [];\n\n    const rowMatch = (cell) => (startRow === void 0 ? true : cell.row >= startRow && cell.row <= endRow);\n    const colMatch = (cell) => (startColumn === void 0 ? true : cell.column >= startColumn && cell.column <= endColumn);\n\n    this.cellReferences = arrayFilter(this.cellReferences, (cell) => {\n      if (rowMatch(cell) && colMatch(cell)) {\n        removed.push(cell);\n\n        return false;\n      }\n\n      return true;\n    });\n\n    return removed;\n  }\n\n  /**\n   * Reset matrix data.\n   */\n  reset() {\n    this.data.length = 0;\n    this.cellReferences.length = 0;\n  }\n}\n\nexport default Matrix;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/matrix.js","import {Parser, ERROR_REF} from 'hot-formula-parser';\nimport {arrayEach, arrayMap} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport localHooks from 'handsontable/mixins/localHooks';\nimport {getTranslator} from 'handsontable/utils/recordTranslator';\nimport {objectEach, mixin} from 'handsontable/helpers/object';\nimport CellValue from './cell/value';\nimport CellReference from './cell/reference';\nimport {isFormulaExpression, toUpperCaseFormula} from './utils';\nimport Matrix from './matrix';\nimport AlterManager from './alterManager';\n\nconst STATE_UP_TO_DATE = 1;\nconst STATE_NEED_REBUILD = 2;\nconst STATE_NEED_FULL_REBUILD = 3;\n\n/**\n * @class Sheet\n * @util\n */\nclass Sheet {\n  constructor(hot, dataProvider) {\n    /**\n     * Handsontable instance.\n     *\n     * @type {Core}\n     */\n    this.hot = hot;\n    /**\n     * Record translator for translating visual records into psychical and vice versa.\n     *\n     * @type {RecordTranslator}\n     */\n    this.t = getTranslator(this.hot);\n    /**\n     * Data provider for sheet calculations.\n     *\n     * @type {DataProvider}\n     */\n    this.dataProvider = dataProvider;\n    /**\n     * Instance of {@link https://github.com/handsontable/formula-parser}.\n     *\n     * @type {Parser}\n     */\n    this.parser = new Parser();\n    /**\n     * Instance of {@link Matrix}.\n     *\n     * @type {Matrix}\n     */\n    this.matrix = new Matrix(this.t);\n    /**\n     * Instance of {@link AlterManager}.\n     *\n     * @type {AlterManager}\n     */\n    this.alterManager = new AlterManager(this);\n    /**\n     * Cell object which indicates which cell is currently processing.\n     *\n     * @private\n     * @type {null}\n     */\n    this._processingCell = null;\n    /**\n     * State of the sheet.\n     *\n     * @type {Number}\n     * @private\n     */\n    this._state = STATE_NEED_FULL_REBUILD;\n\n    this.parser.on('callCellValue', (...args) => this._onCallCellValue(...args));\n    this.parser.on('callRangeValue', (...args) => this._onCallRangeValue(...args));\n    this.alterManager.addLocalHook('afterAlter', (...args) => this._onAfterAlter(...args));\n  }\n\n  /**\n   * Recalculate sheet.\n   */\n  recalculate() {\n    switch (this._state) {\n      case STATE_NEED_FULL_REBUILD:\n        this.recalculateFull();\n        break;\n      case STATE_NEED_REBUILD:\n        this.recalculateOptimized();\n        break;\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Recalculate sheet using optimized methods (fast recalculation).\n   */\n  recalculateOptimized() {\n    const cells = this.matrix.getOutOfDateCells();\n\n    arrayEach(cells, (cellValue) => {\n      const value = this.dataProvider.getSourceDataAtCell(cellValue.row, cellValue.column);\n\n      if (isFormulaExpression(value)) {\n        this.parseExpression(cellValue, value.substr(1));\n      }\n    });\n\n    this._state = STATE_UP_TO_DATE;\n    this.runLocalHooks('afterRecalculate', cells, 'optimized');\n  }\n\n  /**\n   * Recalculate whole table by building dependencies from scratch (slow recalculation).\n   */\n  recalculateFull() {\n    const cells = this.dataProvider.getSourceDataByRange();\n\n    this.matrix.reset();\n\n    arrayEach(cells, (rowData, row) => {\n      arrayEach(rowData, (value, column) => {\n        if (isFormulaExpression(value)) {\n          this.parseExpression(new CellValue(row, column), value.substr(1));\n        }\n      });\n    });\n\n    this._state = STATE_UP_TO_DATE;\n    this.runLocalHooks('afterRecalculate', cells, 'full');\n  }\n\n  /**\n   * Set predefined variable name which can be visible while parsing formula expression.\n   *\n   * @param {String} name Variable name.\n   * @param {*} value Variable value.\n   */\n  setVariable(name, value) {\n    this.parser.setVariable(name, value);\n  }\n\n  /**\n   * Get variable name.\n   *\n   * @param {String} name Variable name.\n   * @returns {*}\n   */\n  getVariable(name) {\n    return this.parser.getVariable(name);\n  }\n\n  /**\n   * Apply changes to the sheet.\n   *\n   * @param {Number} row Physical row index.\n   * @param {Number} column Physical column index.\n   * @param {*} newValue Current cell value.\n   */\n  applyChanges(row, column, newValue) {\n    // Remove formula description for old expression\n    // TODO: Move this to recalculate()\n    this.matrix.remove({row, column});\n\n    // TODO: Move this to recalculate()\n    if (isFormulaExpression(newValue)) {\n      // ...and create new for new changed formula expression\n      this.parseExpression(new CellValue(row, column), newValue.substr(1));\n    }\n\n    const deps = this.getCellDependencies(...this.t.toVisual(row, column));\n\n    arrayEach(deps, (cellValue) => {\n      cellValue.setState(CellValue.STATE_OUT_OFF_DATE);\n    });\n\n    this._state = STATE_NEED_REBUILD;\n  }\n\n  /**\n   * Parse and evaluate formula for provided cell.\n   *\n   * @param {CellValue|Object} cellValue Cell value object.\n   * @param {String} formula Value to evaluate.\n   */\n  parseExpression(cellValue, formula) {\n    cellValue.setState(CellValue.STATE_COMPUTING);\n    this._processingCell = cellValue;\n\n    const {error, result} = this.parser.parse(toUpperCaseFormula(formula));\n\n    cellValue.setValue(result);\n    cellValue.setError(error);\n    cellValue.setState(CellValue.STATE_UP_TO_DATE);\n\n    this.matrix.add(cellValue);\n    this._processingCell = null;\n  }\n\n  /**\n   * Get cell value object at specified physical coordinates.\n   *\n   * @param {Number} row Physical row index.\n   * @param {Number} column Physical column index.\n   * @returns {CellValue|undefined}\n   */\n  getCellAt(row, column) {\n    return this.matrix.getCellAt(row, column);\n  }\n\n  /**\n   * Get cell dependencies at specified physical coordinates.\n   *\n   * @param {Number} row Physical row index.\n   * @param {Number} column Physical column index.\n   * @returns {Array}\n   */\n  getCellDependencies(row, column) {\n    return this.matrix.getDependencies({row, column});\n  }\n\n  /**\n   * Listener for parser cell value.\n   *\n   * @private\n   * @param {Object} cellCoords Cell coordinates.\n   * @param {Function} done Function to call with valid cell value.\n   */\n  _onCallCellValue({row, column}, done) {\n    const cell = new CellReference(row, column);\n\n    if (!this.dataProvider.isInDataRange(cell.row, cell.column)) {\n      throw Error(ERROR_REF);\n    }\n\n    this.matrix.registerCellRef(cell);\n    this._processingCell.addPrecedent(cell);\n\n    done(this.dataProvider.getDataAtCell(row.index, column.index));\n  }\n\n  /**\n   * Listener for parser cells (range) value.\n   *\n   * @private\n   * @param {Object} startCell Cell coordinates (top-left corner coordinate).\n   * @param {Object} endCell Cell coordinates (bottom-right corner coordinate).\n   * @param {Function} done Function to call with valid cells values.\n   */\n  _onCallRangeValue({row: startRow, column: startColumn}, {row: endRow, column: endColumn}, done) {\n    rangeEach(startRow.index, endRow.index, (row) => {\n      rangeEach(startColumn.index, endColumn.index, (column) => {\n        let cell = new CellReference(row, column);\n\n        this.matrix.registerCellRef(cell);\n        this._processingCell.addPrecedent(cell);\n      });\n    });\n\n    done(this.dataProvider.getDataByRange(startRow.index, startColumn.index, endRow.index, endColumn.index));\n  }\n\n  /**\n   * On after alter sheet listener.\n   *\n   * @private\n   */\n  _onAfterAlter() {\n    this.recalculateOptimized();\n  }\n\n  /**\n   * Destroy class.\n   */\n  destroy() {\n    this.hot = null;\n    this.t = null;\n    this.dataProvider.destroy();\n    this.dataProvider = null;\n    this.alterManager.destroy();\n    this.alterManager = null;\n    this.parser = null;\n    this.matrix.reset();\n    this.matrix = null;\n  }\n}\n\nmixin(Sheet, localHooks);\n\nexport default Sheet;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/sheet.js","import {arrayEach} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport Stack from 'handsontable/utils/dataStructures/stack';\nimport CellValue from './cell/value';\n\n/**\n * @class UndoRedoSnapshot\n * @util\n */\nclass UndoRedoSnapshot {\n  constructor(sheet) {\n    /**\n     * Instance of {@link Sheet}.\n     *\n     * @type {Sheet}\n     */\n    this.sheet = sheet;\n    /**\n     * Stack instance for collecting undo/redo changes.\n     *\n     * @type {Stack}\n     */\n    this.stack = new Stack();\n  }\n\n  /**\n   * Save snapshot for specified action.\n   *\n   * @param {String} axis Alter action which triggers snapshot.\n   * @param {Number} index Alter operation stared at.\n   * @param {Number} amount Amount of items to operate.\n   */\n  save(axis, index, amount) {\n    const {matrix, dataProvider} = this.sheet;\n    const changes = [];\n\n    arrayEach(matrix.data, (cellValue) => {\n      const {row, column} = cellValue;\n\n      if (cellValue[axis] < index || cellValue[axis] > index + (amount - 1)) {\n        const value = dataProvider.getSourceDataAtCell(row, column);\n\n        changes.push({row, column, value});\n      }\n    });\n\n    this.stack.push({axis, index, amount, changes});\n  }\n\n  /**\n   * Restore state to the previous one.\n   */\n  restore() {\n    const {matrix, dataProvider} = this.sheet;\n    const {axis, index, amount, changes} = this.stack.pop();\n\n    if (changes) {\n      arrayEach(changes, (change) => {\n        if (change[axis] > index + (amount - 1)) {\n          change[axis] -= amount;\n        }\n        const {row, column, value} = change;\n        const rawValue = dataProvider.getSourceDataAtCell(row, column);\n\n        if (rawValue !== value) {\n          dataProvider.updateSourceData(row, column, value);\n          matrix.getCellAt(row, column).setState(CellValue.STATE_OUT_OFF_DATE);\n        }\n      });\n    }\n  }\n\n  /**\n   * Destroy class.\n   */\n  destroy() {\n    this.sheet = null;\n    this.stack = null;\n  }\n}\n\nexport default UndoRedoSnapshot;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/formulas/undoRedoSnapshot.js","import {addClass, removeClass} from 'handsontable/helpers/dom/element';\nimport {objectEach, deepClone, extend} from 'handsontable/helpers/object';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {createEmptySpreadsheetData} from 'handsontable/helpers/data';\nimport {registerPlugin} from 'handsontable/plugins.js';\nimport BasePlugin from 'handsontable/plugins/_base.js';\nimport DateCalculator from './dateCalculator';\nimport GanttChartDataFeed from './ganttChartDataFeed';\n\nimport './ganttChart.css';\n\n/**\n * @plugin GanttChart\n * @pro\n * @dependencies CollapsibleColumns\n *\n * @description\n * GanttChart plugin enables a possibility to create a Gantt chart using a Handsontable instance.\n * In this case, the whole table becomes read-only.\n *\n * @example\n * ```js\n * ganttChart: {\n *     dataSource: data,\n *     firstWeekDay: 'monday', // sets the first day of the week to either 'monday' or 'sunday'\n *     startYear: 2015 // sets the displayed year to the provided value\n *   }\n *\n * // Where data can be either an data object or an object containing information about another Handsontable instance, which\n * // would feed the chart-enabled instance with data.\n * // For example:\n *\n * // Handsontable-binding information\n * var data = {\n *   instance: source, // reference to another Handsontable instance\n *   startDateColumn: 4, // index of a column, which contains information about start dates of data ranges\n *   endDateColumn: 5, // index of a column, which contains information about end dates of data ranges\n *   additionalData: { // information about additional data passed to the chart, in this example example:\n *     label: 0, // labels are stored in the first column\n *     quantity: 1 // quantity information is stored in the second column\n *   },\n *   asyncUpdates: true // if set to true, the updates from the source instance with be asynchronous. Defaults to false.\n * }\n *\n * // Data object\n * var data = [\n *   {\n *     additionalData: {label: 'Example label.', quantity: 'Four packs.'},\n *     startDate: '1/5/2015',\n *     endDate: '1/20/2015'\n *   },\n *   {\n *     additionalData: {label: 'Another label.', quantity: 'One pack.'},\n *     startDate: '1/11/2015',\n *     endDate: '1/29/2015'\n *   }\n * ];\n * ```\n */\nclass GanttChart extends BasePlugin {\n\n  constructor(hotInstance) {\n    super(hotInstance);\n\n    /**\n     * Cached plugin settings.\n     *\n     * @type {Object}\n     */\n    this.settings = {};\n    /**\n     * Date Calculator object.\n     *\n     * @type {Object}\n     */\n    this.dateCalculator = null;\n    /**\n     * Currently loaded year.\n     *\n     * @type {Number}\n     */\n    this.currentYear = null;\n    /**\n     * List of months and their corresponding day counts.\n     *\n     * @type {Array}\n     */\n    this.monthList = [];\n    /**\n     * Array of data for the month headers.\n     *\n     * @type {Array}\n     */\n    this.monthHeadersArray = [];\n    /**\n     * Array of data for the week headers.\n     *\n     * @type {Array}\n     */\n    this.weekHeadersArray = [];\n    /**\n     * Object containing the currently created range bars, along with their corresponding parameters.\n     *\n     * @type {Object}\n     */\n    this.rangeBars = {};\n    /**\n     * Object containing the currently created ranges with coordinates to their range bars.\n     *\n     * @type {Object}\n     */\n    this.rangeList = {};\n    /**\n     * Reference to the Nested Headers plugin.\n     *\n     * @type {Object}\n     */\n    this.nestedHeadersPlugin = null;\n\n    /**\n     * Object containing properties of the source Handsontable instance (the data source).\n     *\n     * @type {Object}\n     */\n    this.hotSource = null;\n    /**\n     * Number of week 'blocks' in the nested headers.\n     *\n     * @type {Number}\n     */\n    this.overallWeekSectionCount = null;\n    /**\n     * Initial instance settings - used to rollback the gantt-specific settings during the disabling of the plugin.\n     *\n     * @type {Object}\n     */\n    this.initialSettings = null;\n    /**\n     * Data feed controller for this plugin.\n     *\n     * @type {Object}\n     */\n    this.dataFeed = null;\n    /**\n     * Color information set after applying colors to the chart.\n     *\n     * @type {Object}\n     */\n    this.colorData = {};\n    /**\n     * Metadata of the range bars, used to re-apply meta after updating HOT settings.\n     *\n     * @type {Object}\n     */\n    this.rangeBarMeta = Object.create(null);\n  }\n\n  /**\n   * Checks if the dependencies are met, if not, throws a warning.\n   */\n  checkDependencies() {\n    if (!this.hot.getSettings().colHeaders) {\n      console.warn('You need to enable the colHeaders property in your Gantt Chart Handsontable in order for it to work properly.');\n    }\n  }\n\n  /**\n   * Check if plugin is enabled\n   */\n  isEnabled() {\n    return !!this.hot.getSettings().ganttChart;\n  }\n\n  /**\n   * Enable the plugin\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n\n    this.checkDependencies();\n\n    this.parseSettings();\n\n    this.currentYear = this.settings.startYear || new Date().getFullYear();\n\n    this.dateCalculator = new DateCalculator(this.currentYear);\n    this.dateCalculator.setFirstWeekDay(this.settings.firstWeekDay);\n\n    this.monthList = this.dateCalculator.getMonthList();\n    this.monthHeadersArray = this.generateMonthHeaders();\n    this.weekHeadersArray = this.generateWeekHeaders();\n\n    this.overallWeekSectionCount = this.dateCalculator.countWeekSections();\n\n    this.assignGanttSettings();\n\n    if (this.nestedHeadersPlugin) {\n      this.applyDataSource();\n\n      if (this.colorData) {\n        this.setRangeBarColors(this.colorData);\n      }\n    }\n\n    this.addHook('afterInit', () => this.onAfterInit());\n\n    addClass(this.hot.rootElement, 'ganttChart');\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Disable the plugin.\n   */\n  disablePlugin() {\n    if (this.internalUpdateSettings) {\n      return;\n    }\n\n    if (this.dataFeed && this.dataFeed.hotSource) {\n      this.dataFeed.removeSourceHotHooks(this.dataFeed.hotSource);\n    }\n\n    this.settings = {};\n    this.dataFeed = {};\n    this.currentYear = null;\n    this.monthList = [];\n    this.rangeBars = {};\n    this.rangeList = {};\n    this.rangeBarMeta = {};\n    this.hotSource = null;\n\n    this.deassignGanttSettings();\n\n    this.hot.getPlugin('collapsibleColumns').disablePlugin();\n    this.hot.getPlugin('nestedHeaders').disablePlugin();\n\n    removeClass(this.hot.rootElement, 'ganttChart');\n\n    super.disablePlugin();\n  }\n\n  /**\n   * Updates the plugin to use the latest options you have specified.\n   */\n  updatePlugin() {\n    this.disablePlugin();\n    this.enablePlugin();\n\n    super.updatePlugin();\n  }\n\n  /**\n   * Parse the plugin settings.\n   */\n  parseSettings() {\n    this.settings = this.hot.getSettings().ganttChart;\n\n    if (typeof this.settings === 'boolean') {\n      this.settings = {};\n    }\n\n    if (!this.settings.firstWeekDay) {\n      this.settings.firstWeekDay = 'monday';\n    }\n  }\n\n  /**\n   * Apply the data source provided in the plugin settings.\n   *\n   * @private\n   */\n  applyDataSource() {\n    if (this.settings.dataSource) {\n      let source = this.settings.dataSource;\n\n      if (source.instance) {\n        this.loadData(source.instance, source.startDateColumn, source.endDateColumn, source.additionalData, source.asyncUpdates);\n      } else {\n        this.loadData(source);\n      }\n    }\n  }\n\n  /**\n   * Load chart data to the Handsontable instance.\n   *\n   * @private\n   * @param {Array|Object} data Array of objects containing the range data OR another Handsontable instance, to be used as the data feed\n   * @param {Number} [startDateColumn] Index of the start date column (Needed only if the data argument is a HOT instance).\n   * @param {Number} [endDateColumn] Index of the end date column (Needed only if the data argument is a HOT instance).\n   * @param {Object} [additionalData] Object containing additional data labels and their corresponding column indexes (Needed only if the data argument is a HOT instance).\n   *\n   */\n  loadData(data, startDateColumn, endDateColumn, additionalData, asyncUpdates) {\n    if (data.length > 1) {\n      this.hot.alter('insert_row', 0, data.length - 1, `${this.pluginName}.loadData`);\n    }\n\n    this.dataFeed = new GanttChartDataFeed(this.hot, data, startDateColumn, endDateColumn, additionalData, asyncUpdates);\n\n    this.hot.render();\n  }\n\n  /**\n   * Clear the range bars list.\n   *\n   * @private\n   */\n  clearRangeBars() {\n    this.rangeBars = {};\n  }\n\n  /**\n   * Clear the range list.\n   *\n   * @private\n   */\n  clearRangeList() {\n    this.rangeList = {};\n  }\n\n  /**\n   * Get a range bar coordinates by the provided row.\n   *\n   * @param {Number} row Range bar's row.\n   * @returns {Object}\n   */\n  getRangeBarCoordinates(row) {\n    return this.rangeList[row];\n  }\n\n  /**\n   * Generate headers for the year structure.\n   *\n   * @private\n   * @param {String} type Granulation type ('months'/'weeks'/'days')\n   */\n  generateHeaderSet(type) {\n    let headers = [];\n\n    objectEach(this.monthList, (month, index) => {\n      let areDaysBeforeFullWeeks = month.daysBeforeFullWeeks > 0 ? 1 : 0;\n      let areDaysAfterFullWeeks = month.daysAfterFullWeeks > 0 ? 1 : 0;\n      let headerCount = month.fullWeeks + areDaysBeforeFullWeeks + areDaysAfterFullWeeks;\n      let monthNumber = parseInt(index, 10);\n\n      if (type === 'months') {\n        headers.push({\n          label: month.name,\n          colspan: headerCount\n        });\n\n      } else if (type === 'weeks') {\n\n        for (let i = 0; i < headerCount; i++) {\n          if (areDaysBeforeFullWeeks && i === 0) {\n            let start = i + 1;\n            let end = month.daysBeforeFullWeeks;\n\n            if (start === end) {\n              headers.push(start);\n            } else {\n              headers.push(start + ' - ' + end);\n            }\n\n            this.dateCalculator.addDaysToCache(monthNumber, headers.length - 1, start, end);\n\n          } else if (areDaysAfterFullWeeks && i === headerCount - 1) {\n            let start = month.days - month.daysAfterFullWeeks + 1;\n            let end = month.days;\n\n            if (start === end) {\n              headers.push(start);\n            } else {\n              headers.push(start + ' - ' + end);\n            }\n\n            this.dateCalculator.addDaysToCache(monthNumber, headers.length - 1, start, end);\n\n          } else {\n            let start = month.daysBeforeFullWeeks + ((i - areDaysBeforeFullWeeks) * 7) + 1;\n            let end = start + 6;\n\n            headers.push(start + ' - ' + end);\n            this.dateCalculator.addDaysToCache(monthNumber, headers.length - 1, start, end);\n          }\n        }\n\n      } else if (type === 'days') {\n        for (let i = 0; i < month.days; i++) {\n          headers.push(i + 1);\n        }\n      }\n    });\n\n    return headers;\n  }\n\n  /**\n   * Generate the month header structure.\n   *\n   * @private\n   */\n  generateMonthHeaders() {\n    return this.generateHeaderSet('months');\n  }\n\n  /**\n   * Generate the week header structure.\n   *\n   * @private\n   */\n  generateWeekHeaders() {\n    return this.generateHeaderSet('weeks');\n  }\n\n  /**\n   * Generate the day header structure.\n   *\n   * @private\n   */\n  generateDayHeaders() {\n    return this.generateHeaderSet('days');\n  }\n\n  /**\n   * Assign the settings needed for the Gantt Chart plugin into the Handsontable instance.\n   *\n   * @private\n   */\n  assignGanttSettings() {\n    this.initialSettings = deepClone(this.hot.getSettings());\n\n    let additionalSettings = {\n      data: createEmptySpreadsheetData(1, this.overallWeekSectionCount),\n      readOnly: true,\n      renderer: (instance, TD, row, col, prop, value, cellProperties) =>\n        this.uniformBackgroundRenderer(instance, TD, row, col, prop, value, cellProperties),\n      colWidths: 60,\n      hiddenColumns: true,\n      nestedHeaders: [\n        this.monthHeadersArray.slice(),\n        this.weekHeadersArray.slice()\n      ],\n      collapsibleColumns: true,\n      columnSorting: false\n    };\n\n    this.internalUpdateSettings = true;\n    this.hot.updateSettings(additionalSettings);\n    this.internalUpdateSettings = void 0;\n  }\n\n  /**\n   * Deassing the Gantt Chart plugin settings (revert to initial settings).\n   *\n   * @private\n   */\n  deassignGanttSettings() {\n    this.internalUpdateSettings = true;\n\n    if (this.initialSettings) {\n      this.hot.updateSettings(this.initialSettings);\n    }\n\n    this.internalUpdateSettings = void 0;\n  }\n\n  /**\n   * Add rangebar meta data to the cache.\n   *\n   * @param {Number} row\n   * @param {Number} col\n   * @param {String} key\n   * @param {String|Number|Object|Array} value\n   */\n  cacheRangeBarMeta(row, col, key, value) {\n    if (!this.rangeBarMeta[row]) {\n      this.rangeBarMeta[row] = {};\n    }\n\n    if (!this.rangeBarMeta[row][col]) {\n      this.rangeBarMeta[row][col] = {};\n    }\n\n    this.rangeBarMeta[row][col][key] = value;\n  }\n\n  /**\n   * Apply the cached cell meta.\n   */\n  applyRangeBarMetaCache() {\n    objectEach(this.rangeBarMeta, (rowArr, row) => {\n      objectEach(rowArr, (cell, col) => {\n        objectEach(cell, (value, key) => {\n          this.hot.setCellMeta(row, col, key, value);\n        });\n      });\n    });\n  }\n\n  /**\n   * Create a new range bar.\n   *\n   * @param {Number} row Row index.\n   * @param {Date|String} startDate Start date object/string.\n   * @param {Date|String} endDate End date object/string.\n   * @param {Object} additionalData Additional range data.\n   * @returns {Array|Boolean} Array of the bar's row and column.\n   */\n  addRangeBar(row, startDate, endDate, additionalData) {\n    let startDateColumn = this.dateCalculator.dateToColumn(startDate);\n    let endDateColumn = this.dateCalculator.dateToColumn(endDate);\n\n    if (!this.dateCalculator.isValidRangeBarData(startDate, endDate) || startDateColumn == null || endDateColumn == null) {\n      return false;\n    }\n\n    if (!this.rangeBars[row]) {\n      this.rangeBars[row] = {};\n    }\n\n    this.rangeBars[row][startDateColumn] = {\n      barLength: endDateColumn - startDateColumn + 1,\n      partialStart: !this.dateCalculator.isOnTheEdgeOfWeek(startDate)[0],\n      partialEnd: !this.dateCalculator.isOnTheEdgeOfWeek(endDate)[1],\n      additionalData: {}\n    };\n\n    objectEach(additionalData, (prop, i) => {\n      this.rangeBars[row][startDateColumn].additionalData[i] = prop;\n    });\n\n    if (this.colorData[row]) {\n      this.rangeBars[row][startDateColumn].colors = this.colorData[row];\n    }\n\n    this.rangeList[row] = [row, startDateColumn];\n\n    this.renderRangeBar(row, startDateColumn, endDateColumn, additionalData);\n\n    return [row, startDateColumn];\n  }\n\n  /**\n   * Get the range bar data of the provided row and column.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @returns {Object|Boolean} Returns false if no bar is found.\n   */\n  getRangeBarData(row, column) {\n    let rangeBarCoords = this.getRangeBarCoordinates(row);\n\n    if (!rangeBarCoords) {\n      return false;\n    }\n\n    let rangeBarData = this.rangeBars[rangeBarCoords[0]][rangeBarCoords[1]];\n\n    if (rangeBarData && row === rangeBarCoords[0] &&\n       (column === rangeBarCoords[1] || column > rangeBarCoords[1] && column < rangeBarCoords[1] + rangeBarData.barLength)) {\n      return rangeBarData;\n    }\n\n    return false;\n  }\n\n  /**\n   * Update the range bar data by the provided object.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} column Column index.\n   * @param {Object} data Object with the updated data.\n   */\n  updateRangeBarData(row, column, data) {\n    var rangeBar = this.getRangeBarData(row, column);\n\n    objectEach(data, (val, prop) => {\n      if (rangeBar[prop] !== val) {\n        rangeBar[prop] = val;\n      }\n    });\n  }\n\n  /**\n   * Add a range bar to the table.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} startDateColumn Start column index.\n   * @param {Number} endDateColumn End column index.\n   * @param {Object} additionalData Additional range data.\n   */\n  renderRangeBar(row, startDateColumn, endDateColumn, additionalData) {\n    let currentBar = this.rangeBars[row][startDateColumn];\n\n    for (let i = startDateColumn; i <= endDateColumn; i++) {\n      let cellMeta = this.hot.getCellMeta(row, i);\n      let newClassName = (cellMeta.className || '') + ' rangeBar';\n\n      if ((i === startDateColumn && currentBar.partialStart) || (i === endDateColumn && currentBar.partialEnd)) {\n        newClassName += ' partial';\n      }\n\n      if (i === endDateColumn) {\n        newClassName += ' last';\n      }\n\n      this.hot.setCellMeta(row, i, 'originalClassName', cellMeta.className);\n      this.hot.setCellMeta(row, i, 'className', newClassName);\n      this.hot.setCellMeta(row, i, 'additionalData', currentBar.additionalData);\n\n      // cache cell meta, used for updateSettings, related with a cell meta bug\n      this.cacheRangeBarMeta(row, i, 'originalClassName', cellMeta.className);\n      this.cacheRangeBarMeta(row, i, 'className', newClassName);\n      this.cacheRangeBarMeta(row, i, 'additionalData', currentBar.additionalData);\n    }\n  }\n\n  /**\n   * Remove a range bar of the provided start date and row.\n   *\n   * @param {Number} row Row index.\n   * @param {Date|String} startDate Start date.\n   */\n  removeRangeBarByDate(row, startDate) {\n    let startDateColumn = this.dateCalculator.dateToColumn(startDate);\n\n    this.removeRangeBarByColumn(row, startDateColumn);\n  }\n\n  /**\n   * Remove a range bar of the provided row and start column.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} startDateColumn Column index.\n   */\n  removeRangeBarByColumn(row, startDateColumn) {\n    let rangeBar = this.rangeBars[row][startDateColumn];\n\n    if (!rangeBar) {\n      return;\n    }\n\n    this.unrenderRangeBar(row, startDateColumn, startDateColumn + rangeBar.barLength - 1);\n    this.rangeBars[row][startDateColumn] = null;\n\n    objectEach(this.rangeList, (prop, i) => {\n      i = parseInt(i, 10);\n\n      if (JSON.stringify(prop) === JSON.stringify([row, startDateColumn])) {\n        this.rangeList[i] = null;\n      }\n    });\n  }\n\n  /**\n   * Remove all range bars from the chart-enabled Handsontable instance.\n   */\n  removeAllRangeBars() {\n    objectEach(this.rangeBars, (row, i) => {\n      objectEach(row, (bar, j) => {\n        this.removeRangeBarByColumn(i, j);\n      });\n    });\n  }\n\n  /**\n   * Remove a range bar from the table.\n   *\n   * @param {Number} row Row index.\n   * @param {Number} startDateColumn Start column index.\n   * @param {Number} endDateColumn End column index.\n   */\n  unrenderRangeBar(row, startDateColumn, endDateColumn) {\n    for (let i = startDateColumn; i <= endDateColumn; i++) {\n      let cellMeta = this.hot.getCellMeta(row, i);\n\n      this.hot.setCellMeta(row, i, 'className', cellMeta.originalClassName);\n      this.hot.setCellMeta(row, i, 'originalClassName', void 0);\n\n      this.cacheRangeBarMeta(row, i, 'className', cellMeta.originalClassName);\n      this.cacheRangeBarMeta(row, i, 'originalClassName', void 0);\n    }\n\n    this.hot.render();\n  }\n\n  /**\n   * A default renderer of the range bars.\n   *\n   * @param {Object} instance HOT instance.\n   * @param {HTMLElement} TD TD element.\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {String|Number} prop Object data property.\n   * @param {String|Number} value Value to pass to the cell.\n   * @param {Object} cellProperties Current cell properties.\n   */\n  uniformBackgroundRenderer(instance, TD, row, col, prop, value, cellProperties) {\n    let rangeBarInfo = this.getRangeBarData(row, col);\n    let rangeBarCoords = this.getRangeBarCoordinates(row);\n\n    if (cellProperties.className) {\n      TD.className = cellProperties.className;\n    }\n\n    let titleValue = '';\n\n    objectEach(cellProperties.additionalData, (prop, i) => {\n      titleValue += i + ': ' + prop + '\\n';\n    });\n\n    titleValue = titleValue.replace(/\\n$/, '');\n\n    TD.title = titleValue;\n\n    if (rangeBarInfo && rangeBarInfo.colors) {\n      if (col === rangeBarCoords[1] && rangeBarInfo.partialStart ||\n        col === (rangeBarCoords[1] + rangeBarInfo.barLength - 1) && rangeBarInfo.partialEnd) {\n        TD.style.background = rangeBarInfo.colors[1];\n      } else {\n        TD.style.background = rangeBarInfo.colors[0];\n      }\n    } else {\n      TD.style.background = '';\n    }\n  }\n\n  /**\n   * Set range bar colors.\n   *\n   * @param {Object} rows Object containing row color data, see example.\n   * @example\n   * ```js\n   *  hot.getPlugin('ganttChart').setRangeBarColors({\n   *    0: ['blue', 'lightblue'] // paints the bar in the first row blue, with partial sections colored light blue\n    *   2: ['#2A74D0', '#588DD0'] // paints the bar in the thrid row with #2A74D0, with partial sections colored with #588DD0\n   *  });\n   * ```\n   */\n  setRangeBarColors(rows) {\n    this.colorData = rows;\n\n    objectEach(rows, (colors, i) => {\n      let barCoords = this.getRangeBarCoordinates(i);\n\n      if (barCoords) {\n        this.updateRangeBarData(barCoords[0], barCoords[1], {\n          colors: colors\n        });\n      }\n    });\n\n    this.hot.render();\n  }\n\n  /**\n   * Update the chart with a new year.\n   *\n   * @param {Number} year New chart year.\n   */\n  setYear(year) {\n    let newSettings = extend(this.hot.getSettings().ganttChart, {\n      startYear: year\n    });\n\n    this.hot.updateSettings({\n      ganttChart: newSettings\n    });\n  }\n\n  /**\n   * AfterInit hook callback.\n   *\n   * @private\n   */\n  onAfterInit() {\n    this.nestedHeadersPlugin = this.hot.getPlugin('nestedHeaders');\n\n    this.applyDataSource();\n  }\n\n  /**\n   * Prevent update settings loop when assigning the additional internal settings.\n   *\n   * @private\n   */\n  onUpdateSettings() {\n    if (this.internalUpdateSettings) {\n      this.applyRangeBarMetaCache();\n\n      return;\n    }\n\n    super.onUpdateSettings();\n  }\n\n  /**\n   * Destroy the plugin\n   *\n   * @private\n   */\n  destroy() {\n    if (this.hotSource) {\n      this.dataFeed.removeSourceHotHooks(this.hotSource);\n    }\n\n    super.destroy();\n  }\n}\n\nregisterPlugin('ganttChart', GanttChart);\n\nexport default GanttChart;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/ganttChart/ganttChart.js","import {objectEach, deepClone} from 'handsontable/helpers/object';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport DateCalculator from './dateCalculator';\n\n/**\n * This class handles the data-related calculations for the GanttChart plugin.\n *\n * @plugin GanttChart\n */\nclass GanttChartDataFeed {\n  constructor(chartInstance, data, startDateColumn, endDateColumn, additionalData, asyncUpdates) {\n    this.data = data;\n    this.chartInstance = chartInstance;\n    this.chartPlugin = this.chartInstance.getPlugin('ganttChart');\n    this.hotSource = null;\n    this.sourceHooks = {};\n    this.ongoingAsync = false;\n\n    this.applyData(data, startDateColumn, endDateColumn, additionalData, asyncUpdates || false);\n  }\n\n  /**\n   * Parse data accordingly to it's type (HOT instance / data object).\n   *\n   * @param {Object} data The source Handsontable instance or a data object.\n   * @param {Number} startDateColumn Index of the column containing the start dates.\n   * @param {Number} endDateColumn Index of the column containing the end dates.\n   * @param {Object} additionalData Object containing column and label information about additional data passed to the Gantt Plugin.\n   * @param {Boolean} asyncUpdates If set to true, the source instance updates will be applied asynchronously.\n   */\n  applyData(data, startDateColumn, endDateColumn, additionalData, asyncUpdates) {\n    if (Object.prototype.toString.call(data) === '[object Array]') {\n      this.loadData(data);\n\n      // if data is a Handsontable instance (probably not the best way to recognize it)\n    } else if (data.guid) {\n      this.bindWithHotInstance(data, startDateColumn, endDateColumn, additionalData, asyncUpdates);\n    }\n  }\n\n  /**\n   * Make another Handsontable instance be a live feed for the gantt chart.\n   *\n   * @param {Object} instance The source Handsontable instance.\n   * @param {Number} startDateColumn Index of the column containing the start dates.\n   * @param {Number} endDateColumn Index of the column containing the end dates.\n   * @param {Object} additionalData Object containing column and label information about additional data passed to the\n   * Gantt Plugin. See the example for more details.\n   * @param {Boolean} asyncUpdates If set to true, the source instance updates will be applied asynchronously.\n   *\n   * @example\n   * ```js\n   * hot.getPlugin('ganttChart').bindWithHotInstance(sourceInstance, 4, 5, {\n   *  vendor: 0, // data labeled 'vendor' is stored in the first sourceInstance column.\n   *  format: 1, // data labeled 'format' is stored in the second sourceInstance column.\n   *  market: 2 // data labeled 'market' is stored in the third sourceInstance column.\n   * });\n   * ```\n   */\n  bindWithHotInstance(instance, startDateColumn, endDateColumn, additionalData, asyncUpdates) {\n    this.hotSource = {\n      instance: instance,\n      startColumn: startDateColumn,\n      endColumn: endDateColumn,\n      additionalData: additionalData,\n      asyncUpdates: asyncUpdates\n    };\n\n    this.addSourceHotHooks();\n\n    this.asyncCall(this.updateFromSource);\n  }\n\n  /**\n   * Run the provided function asynchronously.\n   *\n   * @param {Function} func\n   */\n  asyncCall(func) {\n\n    if (!this.hotSource.asyncUpdates) {\n      func.call(this);\n\n      return;\n    }\n\n    this.asyncStart();\n\n    setTimeout(() => {\n      func.call(this);\n\n      this.asyncEnd();\n    }, 0);\n  }\n\n  asyncStart() {\n    this.ongoingAsync = true;\n  }\n\n  asyncEnd() {\n    this.ongoingAsync = false;\n  }\n\n  /**\n   * Add hooks to the source Handsontable instance.\n   *\n   * @private\n   */\n  addSourceHotHooks() {\n    this.sourceHooks = {\n      afterLoadData: (firstRun) => this.onAfterSourceLoadData(firstRun),\n      afterChange: (changes, source) => this.onAfterSourceChange(changes, source),\n      afterColumnSort: (column, order) => this.onAfterColumnSort(column, order)\n    };\n\n    this.hotSource.instance.addHook('afterLoadData', this.sourceHooks.afterLoadData);\n    this.hotSource.instance.addHook('afterChange', this.sourceHooks.afterChange);\n    this.hotSource.instance.addHook('afterColumnSort', this.sourceHooks.afterColumnSort);\n  }\n\n  /**\n   * Remove hooks from the source Handsontable instance.\n   *\n   * @private\n   * @param {Object} hotSource The source Handsontable instance object.\n   */\n  removeSourceHotHooks(hotSource) {\n    if (this.sourceHooks.afterLoadData) {\n      hotSource.instance.removeHook('afterLoadData', this.sourceHooks.afterLoadData);\n    }\n\n    if (this.sourceHooks.afterChange) {\n      hotSource.instance.removeHook('afterChange', this.sourceHooks.afterChange);\n    }\n\n    if (this.sourceHooks.afterColumnSort) {\n      hotSource.instance.removeHook('afterColumnSort', this.sourceHooks.afterColumnSort);\n    }\n  }\n\n  /**\n   * Get data from the source Handsontable instance.\n   *\n   * @param {Number} [row] Source Handsontable instance row.\n   * @returns {Array}\n   */\n  getDataFromSource(row) {\n    let additionalObjectData = {};\n    let hotSource = this.hotSource;\n    let sourceHotRows;\n    let rangeBarData = [];\n\n    if (row === void 0) {\n      sourceHotRows = hotSource.instance.getData(0, 0, hotSource.instance.countRows() - 1, hotSource.instance.countCols() - 1);\n\n    } else {\n      sourceHotRows = [];\n      sourceHotRows[row] = hotSource.instance.getDataAtRow(row);\n    }\n\n    for (let i = row || 0, dataLength = sourceHotRows.length; i < (row ? row + 1 : dataLength); i++) {\n      additionalObjectData = {};\n      let currentRow = sourceHotRows[i];\n\n      if (currentRow[hotSource.startColumn] === null || currentRow[hotSource.startColumn] === '') {\n        /* eslint-disable no-continue */\n        continue;\n      }\n\n      /* eslint-disable no-loop-func */\n      objectEach(hotSource.additionalData, (prop, j) => {\n        additionalObjectData[j] = currentRow[prop];\n      });\n\n      rangeBarData.push([\n        i, currentRow[hotSource.startColumn],\n        currentRow[hotSource.endColumn], additionalObjectData, i]);\n    }\n\n    return rangeBarData;\n  }\n\n  /**\n   * Update the Gantt Chart-enabled Handsontable instance with the data from the source Handsontable instance.\n   *\n   * @param {Number} [row] Index of the row which needs updating.\n   */\n  updateFromSource(row) {\n    let dataFromSource = this.getDataFromSource(row);\n\n    if (!row && isNaN(row)) {\n      this.chartPlugin.clearRangeBars();\n      this.chartPlugin.clearRangeList();\n    }\n\n    arrayEach(dataFromSource, (bar) => {\n      bar = this.trimRangeIfNeeded(bar);\n      this.chartPlugin.addRangeBar.apply(this.chartPlugin, bar);\n    });\n  }\n\n  /**\n   * Load chart data to the Handsontable instance.\n   *\n   * @param {Array} data Array of objects containing the range data.\n   *\n   * @example\n   * ```js\n   * [\n   *  {\n   *    additionalData: {vendor: 'Vendor One', format: 'Posters', market: 'New York, NY'},\n   *    startDate: '1/5/2015',\n   *    endDate: '1/20/2015'\n   *  },\n   *  {\n   *    additionalData: {vendor: 'Vendor Two', format: 'Malls', market: 'Los Angeles, CA'},\n   *    startDate: '1/11/2015',\n   *    endDate: '1/29/2015'\n   *  }\n   * ]\n   * ```\n   */\n  loadData(data) {\n    arrayEach(data, (bar, i) => {\n      bar = this.trimRangeIfNeeded(bar);\n      this.chartPlugin.addRangeBar(i, bar.startDate, bar.endDate, bar.additionalData);\n    });\n  }\n\n  /**\n   * Trim the dates in the provided range bar, if they exceed the currently processed year.\n   *\n   * @param {Array|Object} bar Range bar data.\n   * @returns {Array}\n   */\n  trimRangeIfNeeded(bar) {\n    let dateProps = null;\n    if (bar[1]) {\n      dateProps = {\n        startDate: 1,\n        endDate: 2\n      };\n\n    } else {\n      dateProps = {\n        startDate: 'startDate',\n        endDate: 'endDate'\n      };\n    }\n\n    let startDate = new Date(bar[dateProps.startDate]);\n    let endDate = new Date(bar[dateProps.endDate]);\n\n    if (typeof startDate === 'string' || typeof endDate === 'string') {\n      return false;\n    }\n\n    let startYear = startDate.getFullYear();\n    let endYear = endDate.getFullYear();\n\n    if (startYear < this.chartPlugin.currentYear && endYear >= this.chartPlugin.currentYear) {\n      bar[dateProps.startDate] = '01/01/' + this.chartPlugin.currentYear;\n    }\n\n    if (endYear > this.chartPlugin.currentYear && startYear <= this.chartPlugin.currentYear) {\n      bar[dateProps.endDate] = '12/31/' + this.chartPlugin.currentYear;\n    }\n\n    return bar;\n  }\n\n  /**\n   * afterChange hook callback for the source Handsontable instance.\n   *\n   * @private\n   * @param {Array} changes List of changes.\n   * @param {String} source Change source.\n   */\n  onAfterSourceChange(changes, source) {\n    this.asyncCall(() => {\n      if (!changes) {\n        return;\n      }\n\n      let changesByRows = {};\n\n      for (let i = 0, changesLength = changes.length; i < changesLength; i++) {\n        let currentChange = changes[i];\n        let row = parseInt(currentChange[0], 10);\n        let col = parseInt(currentChange[1], 10);\n\n        if (!changesByRows[row]) {\n          changesByRows[row] = {};\n        }\n\n        changesByRows[row][col] = [currentChange[2], currentChange[3]];\n      }\n\n      objectEach(changesByRows, (prop, i) => {\n        i = parseInt(i, 10);\n\n        if (this.chartPlugin.getRangeBarCoordinates(i)) {\n          this.chartPlugin.removeRangeBarByColumn(i, this.chartPlugin.rangeList[i][1]);\n        }\n\n        this.updateFromSource(i);\n      });\n    });\n  }\n\n  /**\n   * afterLoadData hook callback for the source Handsontable instance.\n   *\n   * @private\n   * @param firstRun\n   */\n  onAfterSourceLoadData(firstRun) {\n    this.asyncCall((firstRun) => {\n      this.chartPlugin.removeAllRangeBars();\n      this.updateFromSource();\n    });\n  }\n\n  /**\n   * afterColumnSort hook callback for the source Handsontable instance.\n   *\n   * @private\n   * @param {Number} column Sorted column.\n   * @param order\n   */\n  onAfterColumnSort(column, order) {\n    this.asyncCall(() => {\n      this.chartPlugin.removeAllRangeBars();\n      this.updateFromSource();\n    });\n  }\n}\n\nexport default GanttChartDataFeed;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/ganttChart/ganttChartDataFeed.js","import {rangeEach} from 'handsontable/helpers/number';\n\nexport default function hideColumnItem(hiddenColumnsPlugin) {\n  return {\n    key: 'hidden_columns_hide',\n    name: 'Hide column',\n    callback: function() {\n      let {from, to} = this.getSelectedRange();\n      let start = Math.min(from.col, to.col);\n      let end = Math.max(from.col, to.col);\n\n      rangeEach(start, end, (column) => hiddenColumnsPlugin.hideColumn(column));\n\n      this.render();\n      this.view.wt.wtOverlays.adjustElementsSize(true);\n\n    },\n    disabled: false,\n    hidden: function() {\n      return !this.selection.selectedHeader.cols;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/hiddenColumns/contextMenuItem/hideColumn.js","import {rangeEach} from 'handsontable/helpers/number';\n\nexport default function showColumnItem(hiddenColumnsPlugin) {\n  const beforeHiddenColumns = [];\n  const afterHiddenColumns = [];\n\n  return {\n    key: 'hidden_columns_show',\n    name: 'Show column',\n    callback: function() {\n      let {from, to} = this.getSelectedRange();\n      let start = Math.min(from.col, to.col);\n      let end = Math.max(from.col, to.col);\n\n      if (start === end) {\n        if (beforeHiddenColumns.length === start) {\n          hiddenColumnsPlugin.showColumns(beforeHiddenColumns);\n          beforeHiddenColumns.length = 0;\n        }\n        if (afterHiddenColumns.length === this.countSourceCols() - (start + 1)) {\n          hiddenColumnsPlugin.showColumns(afterHiddenColumns);\n          afterHiddenColumns.length = 0;\n        }\n\n      } else {\n        rangeEach(start, end, (column) => hiddenColumnsPlugin.showColumn(column));\n      }\n\n      this.render();\n      this.view.wt.wtOverlays.adjustElementsSize(true);\n    },\n    disabled: false,\n    hidden: function() {\n      if (!hiddenColumnsPlugin.hiddenColumns.length || !this.selection.selectedHeader.cols) {\n        return true;\n      }\n\n      beforeHiddenColumns.length = 0;\n      afterHiddenColumns.length = 0;\n\n      let {from, to} = this.getSelectedRange();\n      let start = Math.min(from.col, to.col);\n      let end = Math.max(from.col, to.col);\n      let hiddenInSelection = false;\n\n      if (start === end) {\n        let totalColumnLength = this.countSourceCols();\n\n        rangeEach(0, totalColumnLength, (column) => {\n          let partedHiddenLength = beforeHiddenColumns.length + afterHiddenColumns.length;\n\n          if (partedHiddenLength === hiddenColumnsPlugin.hiddenColumns.length) {\n            return false;\n          }\n\n          if (column < start && hiddenColumnsPlugin.isHidden(column)) {\n            beforeHiddenColumns.push(column);\n\n          } else if (hiddenColumnsPlugin.isHidden(column)) {\n            afterHiddenColumns.push(column);\n          }\n        });\n\n        totalColumnLength -= 1;\n\n        if ((beforeHiddenColumns.length === start && start > 0) ||\n          (afterHiddenColumns.length === totalColumnLength - start && start < totalColumnLength)) {\n          hiddenInSelection = true;\n        }\n\n      } else {\n        rangeEach(start, end, (column) => {\n          if (hiddenColumnsPlugin.isHidden(column)) {\n            hiddenInSelection = true;\n\n            return false;\n          }\n        });\n      }\n\n      return !hiddenInSelection;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/hiddenColumns/contextMenuItem/showColumn.js","import BasePlugin from 'handsontable/plugins/_base';\nimport {addClass, removeClass} from 'handsontable/helpers/dom/element';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {registerPlugin, getPlugin} from 'handsontable/plugins';\nimport {SEPARATOR} from 'handsontable/plugins/contextMenu/predefinedItems';\nimport hideColumnItem from './contextMenuItem/hideColumn';\nimport showColumnItem from './contextMenuItem/showColumn';\n\nimport './hiddenColumns.css';\n\n/**\n * Plugin allowing to hide certain columns.\n *\n * @plugin HiddenColumns\n * @pro\n */\nclass HiddenColumns extends BasePlugin {\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * Cached plugin settings.\n     *\n     * @type {null|Object}\n     */\n    this.settings = {};\n    /**\n     * List of currently hidden columns\n     *\n     * @type {Boolean|Object}\n     */\n    this.hiddenColumns = [];\n    /**\n     * Last selected column index.\n     *\n     * @type {Number}\n     * @default -1\n     */\n    this.lastSelectedColumn = -1;\n  }\n\n  /**\n   * Check if plugin is enabled.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings().hiddenColumns;\n  }\n\n  /**\n   * Enable the plugin.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n\n    if (this.hot.hasColHeaders()) {\n      this.addHook('afterGetColHeader', (col, TH) => this.onAfterGetColHeader(col, TH));\n    } else {\n      this.addHook('afterRenderer', (TD, row, col) => this.onAfterGetColHeader(col, TD));\n    }\n\n    this.addHook('afterContextMenuDefaultOptions', (options) => this.onAfterContextMenuDefaultOptions(options));\n    this.addHook('afterGetCellMeta', (row, col, cellProperties) => this.onAfterGetCellMeta(row, col, cellProperties));\n    this.addHook('modifyColWidth', (width, col) => this.onModifyColWidth(width, col));\n    this.addHook('beforeSetRangeStartOnly', (coords) => this.onBeforeSetRangeStart(coords));\n    this.addHook('beforeSetRangeEnd', (coords) => this.onBeforeSetRangeEnd(coords));\n    this.addHook('hiddenColumn', (column) => this.isHidden(column));\n    this.addHook('beforeStretchingColumnWidth', (width, column) => this.onBeforeStretchingColumnWidth(width, column));\n    this.addHook('afterCreateCol', (index, amount) => this.onAfterCreateCol(index, amount));\n    this.addHook('afterRemoveCol', (index, amount) => this.onAfterRemoveCol(index, amount));\n\n    // Dirty workaround - the section below runs only if the HOT instance is already prepared.\n    if (this.hot.view) {\n      this.onAfterPluginsInitialized();\n    }\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Updates the plugin to use the latest options you have specified.\n   */\n  updatePlugin() {\n    this.disablePlugin();\n    this.enablePlugin();\n\n    super.updatePlugin();\n  }\n\n  /**\n   * Disable the plugin.\n   */\n  disablePlugin() {\n    this.settings = {};\n    this.hiddenColumns = [];\n    this.lastSelectedColumn = -1;\n\n    this.hot.render();\n    super.disablePlugin();\n    this.resetCellsMeta();\n  }\n\n  /**\n   * Show the provided columns.\n   *\n   * @param {Array} columns Array of column indexes.\n   */\n  showColumns(columns) {\n    arrayEach(columns, (column) => {\n      column = parseInt(column, 10);\n      column = this.getLogicalColumnIndex(column);\n\n      if (this.isHidden(column, true)) {\n        this.hiddenColumns.splice(this.hiddenColumns.indexOf(column), 1);\n      }\n    });\n  }\n\n  /**\n   * Show a single column.\n   *\n   * @param {Number} column Column index.\n   */\n  showColumn(...column) {\n    this.showColumns(column);\n  }\n\n  /**\n   * Hide the columns provided in the array.\n   *\n   * @param {Array} columns Array of column indexes.\n   */\n  hideColumns(columns) {\n    arrayEach(columns, (column) => {\n      column = parseInt(column, 10);\n      column = this.getLogicalColumnIndex(column);\n\n      if (!this.isHidden(column, true)) {\n        this.hiddenColumns.push(column);\n      }\n    });\n  }\n\n  /**\n   * Hide a single column.\n   *\n   * @param {Number} column Column index.\n   */\n  hideColumn(...column) {\n    this.hideColumns(column);\n  }\n\n  /**\n   * Check if the provided column is hidden.\n   *\n   * @param {Number} column Column index.\n   * @param {Boolean} isLogicIndex flag which determines type of index.\n   * @returns {Boolean}\n   */\n  isHidden(column, isLogicIndex = false) {\n    if (!isLogicIndex) {\n      column = this.getLogicalColumnIndex(column);\n    }\n\n    return this.hiddenColumns.indexOf(column) > -1;\n  }\n\n  /**\n   * Reset all rendered cells meta.\n   *\n   * @private\n   */\n  resetCellsMeta() {\n    arrayEach(this.hot.getCellsMeta(), (meta) => {\n      if (meta) {\n        meta.skipColumnOnPaste = false;\n\n        if (meta.baseRenderer !== null) {\n          meta.renderer = meta.baseRenderer;\n          meta.baseRenderer = null;\n        }\n      }\n    });\n  }\n\n  /**\n   * Get the logical index of the provided column.\n   *\n   * @param {Number} column\n   * @returns {Number}\n   */\n  getLogicalColumnIndex(column) {\n    return this.hot.runHooks('modifyCol', column);\n  }\n\n  /**\n   * Set width hidden columns on 0\n   *\n   * @param {Number} width Column width.\n   * @param {Number} column Column index.\n   * @returns {Number}\n   */\n  onBeforeStretchingColumnWidth(width, column) {\n    if (this.isHidden(column)) {\n      width = 0;\n    }\n\n    return width;\n  }\n\n  /**\n   * Add the additional column width for the hidden column indicators.\n   *\n   * @private\n   * @param {Number} width\n   * @param {Number} col\n   * @returns {Number}\n   */\n  onModifyColWidth(width, col) {\n    if (this.isHidden(col)) {\n      return 0.1;\n\n    } else if (this.settings.indicators && (this.isHidden(col + 1) ||\n               this.isHidden(col - 1))) {\n\n      // add additional space for hidden column indicator\n      return width + (this.hot.hasColHeaders() ? 15 : 0);\n    }\n  }\n\n  /**\n   * Set the copy-related cell meta.\n   *\n   * @private\n   * @param {Number} row\n   * @param {Number} col\n   * @param {Object} cellProperties\n   */\n  onAfterGetCellMeta(row, col, cellProperties) {\n    col = this.hot.runHooks('unmodifyCol', col);\n\n    if (this.settings.copyPasteEnabled === false && this.isHidden(col)) {\n      cellProperties.skipColumnOnPaste = true;\n    }\n\n    if (this.isHidden(col)) {\n      if (cellProperties.renderer !== hiddenRenderer) {\n        cellProperties.baseRenderer = cellProperties.renderer;\n      }\n      cellProperties.renderer = hiddenRenderer;\n\n    } else if (cellProperties.baseRenderer !== null) { // We must pass undefined value too (for the purposes of inheritance cell/column settings).\n      cellProperties.renderer = cellProperties.baseRenderer;\n      cellProperties.baseRenderer = null;\n    }\n\n    if (this.isHidden(cellProperties.visualCol - 1)) {\n      let firstSectionHidden = true;\n      let i = cellProperties.visualCol - 1;\n\n      cellProperties.className = cellProperties.className || '';\n\n      if (cellProperties.className.indexOf('afterHiddenColumn') === -1) {\n        cellProperties.className += ' afterHiddenColumn';\n      }\n\n      do {\n        if (!this.isHidden(i)) {\n          firstSectionHidden = false;\n          break;\n        }\n\n        i--;\n      } while (i >= 0);\n\n      if (firstSectionHidden && cellProperties.className.indexOf('firstVisibleColumn') === -1) {\n        cellProperties.className += ' firstVisibleColumn';\n      }\n    } else if (cellProperties.className) {\n      let classArr = cellProperties.className.split(' ');\n\n      if (classArr.length) {\n        let containAfterHiddenColumn = classArr.indexOf('afterHiddenColumn');\n        let containFirstVisible = classArr.indexOf('firstVisibleColumn');\n\n        if (containAfterHiddenColumn > -1) {\n          classArr.splice(containAfterHiddenColumn, 1);\n        }\n        if (containFirstVisible > -1) {\n          classArr.splice(containFirstVisible, 1);\n        }\n\n        cellProperties.className = classArr.join(' ');\n      }\n    }\n  }\n\n  /**\n   * Modify the copyable range, accordingly to the provided config.\n   *\n   * @private\n   * @param {Array} ranges\n   * @returns {Array}\n   */\n  onModifyCopyableRange(ranges) {\n    let newRanges = [];\n\n    let pushRange = (startRow, endRow, startCol, endCol) => {\n      newRanges.push({startRow, endRow, startCol, endCol});\n    };\n\n    arrayEach(ranges, (range) => {\n      let isHidden = true;\n      let rangeStart = 0;\n\n      rangeEach(range.startCol, range.endCol, (col) => {\n        if (this.isHidden(col)) {\n          if (!isHidden) {\n            pushRange(range.startRow, range.endRow, rangeStart, col - 1);\n          }\n\n          isHidden = true;\n\n        } else {\n          if (isHidden) {\n            rangeStart = col;\n          }\n\n          if (col === range.endCol) {\n            pushRange(range.startRow, range.endRow, rangeStart, col);\n          }\n\n          isHidden = false;\n        }\n      });\n    });\n\n    return newRanges;\n  }\n\n  /**\n   * Add the needed classes to the headers.\n   *\n   * @private\n   * @param {Number} col\n   * @param {HTMLElement} TH\n   */\n  onAfterGetColHeader(col, TH) {\n    if (this.isHidden(col)) {\n      return;\n    }\n\n    let firstSectionHidden = true;\n    let i = col - 1;\n\n    do {\n      if (!this.isHidden(i)) {\n        firstSectionHidden = false;\n        break;\n      }\n      i--;\n    } while (i >= 0);\n\n    if (firstSectionHidden) {\n      addClass(TH, 'firstVisibleColumn');\n    }\n\n    if (!this.settings.indicators) {\n      return;\n    }\n\n    if (this.isHidden(col - 1)) {\n      addClass(TH, 'afterHiddenColumn');\n    }\n\n    if (this.isHidden(col + 1) && col > -1) {\n      addClass(TH, 'beforeHiddenColumn');\n    }\n  }\n\n  /**\n   * On before set range start listener.\n   *\n   * @private\n   * @param {Object} coords Object with `row` and `col` properties.\n   */\n  onBeforeSetRangeStart(coords) {\n    if (coords.col > 0) {\n      return;\n    }\n\n    coords.col = 0;\n\n    let getNextColumn = (col) => {\n      let logicalCol = this.getLogicalColumnIndex(col);\n\n      if (this.isHidden(logicalCol, true)) {\n        col = getNextColumn(++col);\n      }\n\n      return col;\n    };\n\n    coords.col = getNextColumn(coords.col);\n  }\n\n  /**\n   * On before set range end listener.\n   *\n   * @private\n   * @param {Object} coords Object with `row` and `col` properties.\n   */\n  onBeforeSetRangeEnd(coords) {\n    let columnCount = this.hot.countCols();\n\n    let getNextColumn = (col) => {\n      let logicalCol = this.getLogicalColumnIndex(col);\n\n      if (this.isHidden(logicalCol, true)) {\n        if (this.lastSelectedColumn > col || coords.col === columnCount - 1) {\n          if (col > 0) {\n            col = getNextColumn(--col);\n\n          } else {\n            rangeEach(0, this.lastSelectedColumn, (i) => {\n              if (!this.isHidden(i)) {\n                col = i;\n\n                return false;\n              }\n            });\n          }\n        } else {\n          col = getNextColumn(++col);\n        }\n      }\n\n      return col;\n    };\n\n    coords.col = getNextColumn(coords.col);\n    this.lastSelectedColumn = coords.col;\n  }\n\n  /**\n   * Add Show-hide columns to context menu.\n   *\n   * @private\n   * @param {Object} options\n   */\n  onAfterContextMenuDefaultOptions(options) {\n    options.items.push(\n      {\n        name: SEPARATOR\n      },\n      hideColumnItem(this),\n      showColumnItem(this)\n    );\n  }\n\n  onAfterCreateCol(index, amount) {\n    let tempHidden = [];\n\n    arrayEach(this.hiddenColumns, (col) => {\n      if (col >= index) {\n        col += amount;\n      }\n      tempHidden.push(col);\n    });\n    this.hiddenColumns = tempHidden;\n  }\n\n  onAfterRemoveCol(index, amount) {\n    let tempHidden = [];\n\n    arrayEach(this.hiddenColumns, (col) => {\n      if (col >= index) {\n        col -= amount;\n      }\n      tempHidden.push(col);\n    });\n    this.hiddenColumns = tempHidden;\n  }\n\n  /**\n   * `afterPluginsInitialized` hook callback.\n   *\n   * @private\n   */\n  onAfterPluginsInitialized() {\n    let settings = this.hot.getSettings().hiddenColumns;\n\n    if (typeof settings === 'object') {\n      this.settings = settings;\n\n      if (settings.copyPasteEnabled === void 0) {\n        settings.copyPasteEnabled = true;\n      }\n      if (Array.isArray(settings.columns)) {\n        this.hideColumns(settings.columns);\n      }\n      if (!settings.copyPasteEnabled) {\n        this.addHook('modifyCopyableRange', (ranges) => this.onModifyCopyableRange(ranges));\n      }\n    }\n  }\n\n  /**\n   * Destroy the plugin.\n   */\n  destroy() {\n    super.destroy();\n  }\n\n}\n\nfunction hiddenRenderer(hotInstance, td) {\n  td.textContent = '';\n}\n\nregisterPlugin('hiddenColumns', HiddenColumns);\n\nexport default HiddenColumns;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/hiddenColumns/hiddenColumns.js","import {rangeEach} from 'handsontable/helpers/number';\n\nexport default function hideRowItem(hiddenRowsPlugin) {\n  return {\n    key: 'hidden_rows_hide',\n    name: 'Hide row',\n    callback: function() {\n      let {from, to} = this.getSelectedRange();\n      let start = Math.min(from.row, to.row);\n      let end = Math.max(from.row, to.row);\n\n      rangeEach(start, end, (row) => hiddenRowsPlugin.hideRow(row));\n\n      this.render();\n      this.view.wt.wtOverlays.adjustElementsSize(true);\n\n    },\n    disabled: false,\n    hidden: function() {\n      return !this.selection.selectedHeader.rows;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/hiddenRows/contextMenuItem/hideRow.js","import {rangeEach} from 'handsontable/helpers/number';\n\nexport default function showRowItem(hiddenRowsPlugin) {\n  const beforeHiddenRows = [];\n  const afterHiddenRows = [];\n\n  return {\n    key: 'hidden_rows_show',\n    name: 'Show row',\n    callback: function() {\n      let {from, to} = this.getSelectedRange();\n      let start = Math.min(from.row, to.row);\n      let end = Math.max(from.row, to.row);\n\n      if (start === end) {\n        if (beforeHiddenRows.length === start) {\n          hiddenRowsPlugin.showRows(beforeHiddenRows);\n          beforeHiddenRows.length = 0;\n        }\n        if (afterHiddenRows.length === this.countSourceRows() - (start + 1)) {\n          hiddenRowsPlugin.showRows(afterHiddenRows);\n          afterHiddenRows.length = 0;\n        }\n\n      } else {\n        rangeEach(start, end, (row) => hiddenRowsPlugin.showRow(row));\n      }\n\n      this.render();\n      this.view.wt.wtOverlays.adjustElementsSize(true);\n    },\n    disabled: false,\n    hidden: function() {\n      if (!hiddenRowsPlugin.hiddenRows.length || !this.selection.selectedHeader.rows) {\n        return true;\n      }\n\n      beforeHiddenRows.length = 0;\n      afterHiddenRows.length = 0;\n\n      let {from, to} = this.getSelectedRange();\n      let start = Math.min(from.row, to.row);\n      let end = Math.max(from.row, to.row);\n\n      let hiddenInSelection = false;\n\n      if (start === end) {\n        let totalRowsLength = this.countSourceRows();\n\n        rangeEach(0, totalRowsLength, (i) => {\n          let partedHiddenLength = beforeHiddenRows.length + afterHiddenRows.length;\n\n          if (partedHiddenLength === hiddenRowsPlugin.hiddenRows.length) {\n            return false;\n          }\n\n          if (i < start) {\n            if (hiddenRowsPlugin.isHidden(i)) {\n              beforeHiddenRows.push(i);\n            }\n          } else if (hiddenRowsPlugin.isHidden(i)) {\n            afterHiddenRows.push(i);\n          }\n        });\n\n        totalRowsLength -= 1;\n\n        if ((beforeHiddenRows.length === start && start > 0) ||\n          (afterHiddenRows.length === totalRowsLength - start && start < totalRowsLength)) {\n          hiddenInSelection = true;\n        }\n\n      } else {\n        rangeEach(start, end, (i) => {\n          if (hiddenRowsPlugin.isHidden(i)) {\n            hiddenInSelection = true;\n\n            return false;\n          }\n        });\n      }\n\n      return !hiddenInSelection;\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/hiddenRows/contextMenuItem/showRow.js","import BasePlugin from 'handsontable/plugins/_base';\nimport {addClass, removeClass} from 'handsontable/helpers/dom/element';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {arrayEach, arrayFilter} from 'handsontable/helpers/array';\nimport {registerPlugin, getPlugin} from 'handsontable/plugins';\nimport hideRowItem from './contextMenuItem/hideRow';\nimport showRowItem from './contextMenuItem/showRow';\n\nimport './hiddenRows.css';\n\n/**\n * @plugin HiddenRows\n * @pro\n *\n * @description\n * Plugin allowing to hide certain rows.\n *\n * Possible plugin settings:\n *  * `copyPasteEnabled` as `Boolean` (default `true`)\n *  * `rows` as `Array`\n *  * `indicators` as `Boolean` (default `false`)\n *\n * @example\n *\n * ```js\n * ...\n * var hot = new Handsontable(document.getElementById('example'), {\n *   date: getData(),\n *   hiddenRows: {\n *     copyPasteEnabled: true,\n *     indicators: true,\n *     rows: [1, 2, 5]\n *   }\n * });\n * // Access to hiddenRows plugin instance:\n * var hiddenRowsPlugin = hot.getPlugin('hiddenRows');\n *\n * // Show row programmatically:\n * hiddenRowsPlugin.showRow(1);\n * // Show rows\n * hiddenRowsPlugin.showRow(1, 2, 9);\n * // or\n * hiddenRowsPlugin.showRows([1, 2, 9]);\n * hot.render();\n * ...\n * // Hide row programmatically:\n * hiddenRowsPlugin.hideRow(1);\n * // Hide rows\n * hiddenRowsPlugin.hideRow(1, 2, 9);\n * // or\n * hiddenRowsPlugin.hideRows([1, 2, 9]);\n * hot.render();\n * ...\n * ```\n */\nclass HiddenRows extends BasePlugin {\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * Cached settings from Handsontable settings.\n     *\n     * @type {Object}\n     */\n    this.settings = {};\n    /**\n     * List of hidden rows indexes.\n     *\n     * @type {Array}\n     */\n    this.hiddenRows = [];\n    /**\n     * Last selected row index.\n     *\n     * @type {Number}\n     * @default -1\n     */\n    this.lastSelectedRow = -1;\n  }\n\n  /**\n   * Check if plugin is enabled.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings().hiddenRows;\n  }\n\n  /**\n   * Enable the plugin.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n\n    if (this.hot.hasRowHeaders()) {\n      this.addHook('afterGetRowHeader', (row, TH) => this.onAfterGetRowHeader(row, TH));\n    } else {\n      this.addHook('afterRenderer', (TD, row) => this.onAfterGetRowHeader(row, TD));\n    }\n\n    this.addHook('afterContextMenuDefaultOptions', (options) => this.onAfterContextMenuDefaultOptions(options));\n    this.addHook('afterGetCellMeta', (row, col, cellProperties) => this.onAfterGetCellMeta(row, col, cellProperties));\n    this.addHook('modifyRowHeight', (height, row) => this.onModifyRowHeight(height, row));\n    this.addHook('beforeSetRangeStartOnly', (coords) => this.onBeforeSetRangeStartOnly(coords));\n    this.addHook('beforeSetRangeStart', (coords) => this.onBeforeSetRangeStart(coords));\n    this.addHook('beforeSetRangeEnd', (coords) => this.onBeforeSetRangeEnd(coords));\n    this.addHook('hiddenRow', (row) => this.isHidden(row));\n    this.addHook('afterCreateRow', (index, amount) => this.onAfterCreateRow(index, amount));\n    this.addHook('afterRemoveRow', (index, amount) => this.onAfterRemoveRow(index, amount));\n\n    // Dirty workaround - the section below runs only if the HOT instance is already prepared.\n    if (this.hot.view) {\n      this.onAfterPluginsInitialized();\n    }\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Updates the plugin to use the latest options you have specified.\n   */\n  updatePlugin() {\n    this.disablePlugin();\n    this.enablePlugin();\n\n    this.onAfterPluginsInitialized();\n\n    super.updatePlugin();\n  }\n\n  /**\n   * Disable the plugin.\n   */\n  disablePlugin() {\n    this.settings = {};\n    this.hiddenRows = [];\n    this.lastSelectedRow = -1;\n\n    super.disablePlugin();\n    this.resetCellsMeta();\n  }\n\n  /**\n   * Show the rows provided in the array.\n   *\n   * @param {Array} rows Array of row index.\n   */\n  showRows(rows) {\n    arrayEach(rows, (row) => {\n      row = parseInt(row, 10);\n      row = this.getLogicalRowIndex(row);\n\n      if (this.isHidden(row, true)) {\n        this.hiddenRows.splice(this.hiddenRows.indexOf(row), 1);\n      }\n    });\n  }\n\n  /**\n   * Show the row provided as row index (counting from 0).\n   *\n   * @param {Number} row Row index.\n   */\n  showRow(...row) {\n    this.showRows(row);\n  }\n\n  /**\n   * Hide the rows provided in the array.\n   *\n   * @param {Array} rows Array of row index.\n   */\n  hideRows(rows) {\n    arrayEach(rows, (row) => {\n      row = parseInt(row, 10);\n      row = this.getLogicalRowIndex(row);\n\n      if (!this.isHidden(row, true)) {\n        this.hiddenRows.push(row);\n      }\n    });\n  }\n\n  /**\n   * Hide the row provided as row index (counting from 0).\n   *\n   * @param {Number} row Row index.\n   */\n  hideRow(...row) {\n    this.hideRows(row);\n  }\n\n  /**\n   * Check if given row is hidden.\n   *\n   * @param {Number} row Column index.\n   * @param {Boolean} isLogicIndex flag which determines type of index.\n   * @returns {Boolean}\n   */\n  isHidden(row, isLogicIndex = false) {\n    if (!isLogicIndex) {\n      row = this.getLogicalRowIndex(row);\n    }\n\n    return this.hiddenRows.indexOf(row) > -1;\n  }\n\n  /**\n   * Reset all rendered cells meta.\n   *\n   * @private\n   */\n  resetCellsMeta() {\n    arrayEach(this.hot.getCellsMeta(), (meta) => {\n      if (meta) {\n        meta.skipRowOnPaste = false;\n      }\n    });\n  }\n\n  /**\n   * Get the logical index of the provided row.\n   *\n   * @param {Number} row\n   * @returns {Number}\n   */\n  getLogicalRowIndex(row) {\n    return this.hot.runHooks('modifyRow', row);\n  }\n\n  /**\n   * Set the copy-related cell meta.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {Number} col Column index.\n   * @param {Object} cellProperties Cell meta object properties.\n   */\n  onAfterGetCellMeta(row, col, cellProperties) {\n    row = this.hot.runHooks('unmodifyRow', row);\n\n    if (this.settings.copyPasteEnabled === false && this.isHidden(row)) {\n      cellProperties.skipRowOnPaste = true;\n\n    } else {\n      cellProperties.skipRowOnPaste = false;\n    }\n\n    if (this.isHidden(row - 1)) {\n      let firstSectionHidden = true;\n      let i = row - 1;\n\n      cellProperties.className = cellProperties.className || '';\n\n      if (cellProperties.className.indexOf('afterHiddenRow') === -1) {\n        cellProperties.className += ' afterHiddenRow';\n      }\n\n      do {\n        if (!this.isHidden(i)) {\n          firstSectionHidden = false;\n          break;\n        }\n        i--;\n      } while (i >= 0);\n\n      if (firstSectionHidden && cellProperties.className.indexOf('firstVisibleRow') === -1) {\n        cellProperties.className += ' firstVisibleRow';\n      }\n    } else if (cellProperties.className) {\n      let classArr = cellProperties.className.split(' ');\n\n      if (classArr.length) {\n        let containAfterHiddenColumn = classArr.indexOf('afterHiddenRow');\n        let containFirstVisible = classArr.indexOf('firstVisibleRow');\n\n        if (containAfterHiddenColumn > -1) {\n          classArr.splice(containAfterHiddenColumn, 1);\n        }\n        if (containFirstVisible > -1) {\n          classArr.splice(containFirstVisible, 1);\n        }\n\n        cellProperties.className = classArr.join(' ');\n      }\n    }\n  }\n\n  /**\n   * Add the needed classes to the headers.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {HTMLElement} th Table header element.\n   */\n  onAfterGetRowHeader(row, th) {\n    let tr = th.parentNode;\n\n    if (tr) {\n      if (this.isHidden(row)) {\n        addClass(tr, 'hide');\n      } else {\n        removeClass(tr, 'hide');\n      }\n    }\n\n    let firstSectionHidden = true;\n    let i = row - 1;\n\n    do {\n      if (!this.isHidden(i)) {\n        firstSectionHidden = false;\n        break;\n      }\n      i--;\n    } while (i >= 0);\n\n    if (firstSectionHidden) {\n      addClass(th, 'firstVisibleRow');\n    }\n\n    if (this.settings.indicators && this.hot.hasRowHeaders()) {\n      if (this.isHidden(row - 1)) {\n        addClass(th, 'afterHiddenRow');\n      }\n      if (this.isHidden(row + 1)) {\n        addClass(th, 'beforeHiddenRow');\n      }\n    }\n  }\n\n  /**\n   * Add the additional row height for the hidden row indicators.\n   *\n   * @private\n   * @param {Number} height Row height.\n   * @param {Number} row Row index.\n   * @returns {Number}\n   */\n  onModifyRowHeight(height, row) {\n    if (this.isHidden(row)) {\n      return 0.1;\n    }\n\n    return height;\n  }\n\n  /**\n   * On modify copyable range listener.\n   *\n   * @private\n   * @param {Array} ranges Array of selected copyable text.\n   * @returns {Array} Returns modyfied range.\n   */\n  onModifyCopyableRange(ranges) {\n    let newRanges = [];\n\n    let pushRange = (startRow, endRow, startCol, endCol) => {\n      newRanges.push({startRow, endRow, startCol, endCol});\n    };\n\n    arrayEach(ranges, (range) => {\n      let isHidden = true;\n      let rangeStart = 0;\n\n      rangeEach(range.startRow, range.endRow, (row) => {\n        if (this.isHidden(row)) {\n          if (!isHidden) {\n            pushRange(rangeStart, row - 1, range.startCol, range.endCol);\n          }\n          isHidden = true;\n        } else {\n          if (isHidden) {\n            rangeStart = row;\n          }\n          if (row === range.endRow) {\n            pushRange(rangeStart, row, range.startCol, range.endCol);\n          }\n          isHidden = false;\n        }\n      });\n    });\n\n    return newRanges;\n  }\n\n  /**\n   * On before set range start listener, when selection was triggered by the cell.\n   *\n   * @private\n   * @param {Object} coords Object with `row` and `col` properties.\n   */\n  onBeforeSetRangeStart(coords) {\n    let actualSelection = this.hot.getSelected() || false;\n    let lastPossibleIndex = this.hot.countRows() - 1;\n\n    let getNextRow = (row) => {\n      let direction = 0;\n\n      if (actualSelection) {\n        direction = row > actualSelection[0] ? 1 : -1;\n\n        this.lastSelectedRow = actualSelection[0];\n      }\n\n      if (lastPossibleIndex < row || row < 0) {\n        return this.lastSelectedRow;\n      }\n\n      if (this.isHidden(row)) {\n        row = getNextRow(row + direction);\n      }\n\n      return row;\n    };\n\n    coords.row = getNextRow(coords.row);\n  }\n\n  /**\n   * On before set range start listener, when selection was triggered by the headers.\n   *\n   * @private\n   * @param {Object} coords Object with `row` and `col` properties.\n   */\n  onBeforeSetRangeStartOnly(coords) {\n    if (coords.row > 0) {\n      return;\n    }\n\n    coords.row = 0;\n\n    let getNextRow = (row) => {\n\n      if (this.isHidden(row)) {\n        row = getNextRow(++row);\n      }\n\n      return row;\n    };\n\n    coords.row = getNextRow(coords.row);\n  }\n\n  /**\n   * On before set range end listener.\n   *\n   * @private\n   * @param {Object} coords Object with `row` and `col` properties.\n   */\n  onBeforeSetRangeEnd(coords) {\n    let rowCount = this.hot.countRows();\n\n    let getNextRow = (row) => {\n      if (this.isHidden(row)) {\n        if (this.lastSelectedRow > row || coords.row === rowCount - 1) {\n          if (row > 0) {\n            row = getNextRow(--row);\n\n          } else {\n            rangeEach(0, this.lastSelectedRow, (i) => {\n              if (!this.isHidden(i)) {\n                row = i;\n\n                return false;\n              }\n            });\n          }\n\n        } else {\n          row = getNextRow(++row);\n        }\n      }\n\n      return row;\n    };\n\n    coords.row = getNextRow(coords.row);\n    this.lastSelectedRow = coords.row;\n  }\n\n  /**\n   * Add Show-hide columns to context menu.\n   *\n   * @private\n   * @param {Object} options\n   */\n  onAfterContextMenuDefaultOptions(options) {\n    options.items.push(\n      Handsontable.plugins.ContextMenu.SEPARATOR,\n      hideRowItem(this),\n      showRowItem(this)\n    );\n  }\n\n  /**\n   * Recalculate index of hidden rows after add row action\n   *\n   * @param {Number} index\n   * @param {Number} amount\n   */\n  onAfterCreateRow(index, amount) {\n    let tempHidden = [];\n\n    arrayEach(this.hiddenRows, (col) => {\n      if (col >= index) {\n        col += amount;\n      }\n      tempHidden.push(col);\n    });\n    this.hiddenRows = tempHidden;\n  }\n\n  /**\n   * Recalculate index of hidden rows after remove row action\n   *\n   * @param {Number} index\n   * @param {Number} amount\n   */\n  onAfterRemoveRow(index, amount) {\n    let tempHidden = [];\n\n    arrayEach(this.hiddenRows, (col) => {\n      if (col >= index) {\n        col -= amount;\n      }\n      tempHidden.push(col);\n    });\n    this.hiddenRows = tempHidden;\n  }\n\n  /**\n   * `afterPluginsInitialized` hook callback.\n   *\n   * @private\n   */\n  onAfterPluginsInitialized() {\n    let settings = this.hot.getSettings().hiddenRows;\n\n    if (typeof settings === 'object') {\n      this.settings = settings;\n\n      if (settings.copyPasteEnabled === void 0) {\n        settings.copyPasteEnabled = true;\n      }\n      if (Array.isArray(settings.rows)) {\n        this.hideRows(settings.rows);\n      }\n      if (!settings.copyPasteEnabled) {\n        this.addHook('modifyCopyableRange', (ranges) => this.onModifyCopyableRange(ranges));\n      }\n    }\n  }\n\n  /**\n   * Destroy the plugin.\n   */\n  destroy() {\n    super.destroy();\n  }\n}\n\nregisterPlugin('hiddenRows', HiddenRows);\n\nexport default HiddenRows;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/hiddenRows/hiddenRows.js","import {rangeEach} from 'handsontable/helpers/number';\nimport {objectEach, extend, hasOwnProperty} from 'handsontable/helpers/object';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {getTranslator} from 'handsontable/utils/recordTranslator';\n\n/**\n * Class responsible for making data operations.\n *\n * @class\n * @private\n */\nclass DataManager {\n  constructor(nestedRowsPlugin, hotInstance, sourceData) {\n    /**\n     * Main Handsontable instance reference.\n     *\n     * @type {Object}\n     */\n    this.hot = hotInstance;\n    /**\n     * Reference to the source data object.\n     *\n     * @type {Object}\n     */\n    this.data = sourceData;\n    /**\n     * Reference to the NestedRows plugin.\n     *\n     * @type {Object}\n     */\n    this.plugin = nestedRowsPlugin;\n    /**\n     * Map of row object parents.\n     *\n     * @type {WeakMap}\n     */\n    this.parentReference = new WeakMap();\n    /**\n     * Nested structure cache.\n     *\n     * @type {Object}\n     */\n    this.cache = {\n      levels: [],\n      levelCount: 0,\n      rows: [],\n      nodeInfo: new WeakMap()\n    };\n    /**\n     * A `recordTranslator` instance.\n     *\n     * @private\n     * @type {Object}\n     */\n    this.recordTranslator = getTranslator(this.hot);\n  }\n\n  /**\n   * Rewrite the nested structure cache.\n   *\n   * @private\n   */\n  rewriteCache() {\n    this.cache = {\n      levels: [],\n      levelCount: 0,\n      rows: [],\n      nodeInfo: new WeakMap()\n    };\n\n    rangeEach(0, this.data.length - 1, (i) => {\n      this.cacheNode(this.data[i], 0, null);\n    });\n  }\n\n  /**\n   * Cache a data node.\n   *\n   * @private\n   * @param {Object} node Node to cache.\n   * @param {Number} level Level of the node.\n   * @param {Object} parent Parent of the node.\n   */\n  cacheNode(node, level, parent) {\n    if (!this.cache.levels[level]) {\n      this.cache.levels[level] = [];\n      this.cache.levelCount++;\n    }\n    this.cache.levels[level].push(node);\n    this.cache.rows.push(node);\n    this.cache.nodeInfo.set(node, {\n      parent: parent,\n      row: this.cache.rows.length - 1,\n      level: level\n    });\n\n    if (this.hasChildren(node)) {\n      arrayEach(node.__children, (elem, i) => {\n        this.cacheNode(elem, level + 1, node);\n      });\n    }\n  }\n\n  /**\n   * Get the date for the provided visual row number.\n   *\n   * @param {Number} row Row index.\n   */\n  getDataObject(row) {\n    return row == null ? null : this.cache.rows[row];\n  }\n\n  /**\n   * Read the row tree in search for a specific row index or row object.\n   *\n   * @private\n   * @param {Object} parent The initial parent object.\n   * @param {Number} readCount Number of read nodes.\n   * @param {Number} neededIndex The row index we search for.\n   * @param {Object} neededObject The row object we search for.\n   * @returns {Number|Object}\n   */\n  readTreeNodes(parent, readCount, neededIndex, neededObject) {\n    let rootLevel = false;\n\n    if (isNaN(readCount) && readCount.end) {\n      return readCount;\n    }\n\n    if (!parent) {\n      parent = {\n        __children: this.data\n      };\n      rootLevel = true;\n      readCount--;\n    }\n\n    if (neededIndex != null && readCount === neededIndex) {\n      return {result: parent, end: true};\n    }\n\n    if (neededObject != null && parent === neededObject) {\n      return {result: readCount, end: true};\n    }\n\n    readCount++;\n\n    if (parent.__children) {\n      arrayEach(parent.__children, (val, i) => {\n\n        this.parentReference.set(val, rootLevel ? null : parent);\n\n        readCount = this.readTreeNodes(val, readCount, neededIndex, neededObject);\n\n        if (isNaN(readCount) && readCount.end) {\n          return false;\n        }\n      });\n    }\n\n    return readCount;\n  }\n\n  /**\n   * Update the parent reference map.\n   *\n   * @private\n   */\n  updateParentReference() {\n    this.readTreeNodes({__children: this.data}, 0, this.hot.countRows());\n  }\n\n  /**\n   * Mock a parent node.\n   *\n   * @private\n   * @returns {*}\n   */\n  mockParent() {\n    let fakeParent = this.mockNode();\n\n    fakeParent.__children = this.data;\n\n    return fakeParent;\n  }\n\n  /**\n   * Mock a data node.\n   *\n   * @private\n   * @returns {{}}\n   */\n  mockNode() {\n    let fakeNode = {};\n\n    objectEach(this.data[0], (val, key) => {\n      fakeNode[key] = null;\n    });\n\n    return fakeNode;\n  }\n\n  /**\n   * Get the row index for the provided row object.\n   *\n   * @param {Object} rowObj The row object.\n   * @returns {Number} Row index.\n   */\n  getRowIndex(rowObj) {\n    return rowObj == null ? null : this.cache.nodeInfo.get(rowObj).row;\n  }\n\n  /**\n   * Get the index of the provided row index/row object within its parent.\n   *\n   * @param {Number|Object} row Row index / row object.\n   * @returns {Number}\n   */\n  getRowIndexWithinParent(row) {\n    let rowObj = null;\n\n    if (isNaN(row)) {\n      rowObj = row;\n    } else {\n      rowObj = this.getDataObject(row);\n    }\n\n    let parent = this.getRowParent(row);\n\n    if (parent == null) {\n      return this.data.indexOf(rowObj);\n    }\n\n    return parent.__children.indexOf(rowObj);\n  }\n\n  /**\n   * Count all rows (including all parents and children).\n   */\n  countAllRows() {\n    let rootNodeMock = {\n      __children: this.hot.getSourceData()\n    };\n\n    return this.countChildren(rootNodeMock);\n  }\n\n  /**\n   * Count children of the provided parent.\n   *\n   * @param {Object|Number} parent Parent node.\n   * @returns {Number} Children count.\n   */\n  countChildren(parent) {\n    let rowCount = 0;\n\n    if (!isNaN(parent)) {\n      parent = this.getDataObject(parent);\n    }\n\n    if (!parent || !parent.__children) {\n      return 0;\n    }\n\n    arrayEach(parent.__children, (elem, i) => {\n      rowCount++;\n      if (elem.__children) {\n        rowCount += this.countChildren(elem);\n      }\n    });\n\n    return rowCount;\n  }\n\n  /**\n   * Get the parent of the row at the provided index.\n   *\n   * @param {Number|Object} row Row index.\n   */\n  getRowParent(row) {\n    let rowObject;\n\n    if (isNaN(row)) {\n      rowObject = row;\n    } else {\n      rowObject = this.getDataObject(row);\n    }\n\n    return this.getRowObjectParent(rowObject);\n  }\n\n  /**\n   * Get the parent of the provided row object.\n   *\n   * @private\n   * @param {Object} rowObject The row object (tree node).\n   */\n  getRowObjectParent(rowObject) {\n    if (typeof rowObject !== 'object') {\n      return null;\n    }\n\n    return this.cache.nodeInfo.get(rowObject).parent;\n  }\n\n  /**\n   * Get the nesting level for the row with the provided row index.\n   *\n   * @param {Number} row Row index.\n   * @returns {Number|null} Row level or null, when row doesn't exist.\n   */\n  getRowLevel(row) {\n    let rowObject = null;\n\n    if (isNaN(row)) {\n      rowObject = row;\n    } else {\n      rowObject = this.getDataObject(row);\n    }\n\n    return rowObject ? this.getRowObjectLevel(rowObject) : null;\n  }\n\n  /**\n   * Get the nesting level for the row with the provided row index.\n   *\n   * @private\n   * @param {Object} rowObject Row object.\n   * @returns {Number} Row level.\n   */\n  getRowObjectLevel(rowObject) {\n    return rowObject == null ? null : this.cache.nodeInfo.get(rowObject).level;\n  }\n\n  /**\n   * Check if the provided row/row element has children.\n   *\n   * @param {Number|Object} row Row number or row element.\n   * @returns {Boolean}\n   */\n  hasChildren(row) {\n    if (row === undefined) {\n      return false;\n    }\n    if (!isNaN(row)) {\n      row = this.getDataObject(row);\n    }\n\n    if(row == undefined) return false;\n    return !!(row.__children && row.__children.length);\n  }\n\n  isParent(row) {\n    if (!isNaN(row)) {\n      row = this.getDataObject(row);\n    }\n\n    return !!(hasOwnProperty(row, '__children'));\n  }\n\n  isLast(row){\n    if (isNaN(row)) return false;\n    let data = this.getDataObject(row);\n    let nodeInfo = this.cache.nodeInfo.get(data);\n    if(!nodeInfo) return false;\n    if(nodeInfo.parent) {\n      return nodeInfo.parent.__children[nodeInfo.parent.__children.length - 1] == data;\n    } else {\n      return this.cache.levels[0][this.cache.levels[0].length - 1] == data;\n    }\n\n    return false;\n  }\n\n  /**\n   * Add a child to the provided parent. It's optional to add a row object as the \"element\"\n   *\n   * @param {Object} parent The parent row object.\n   * @param {Object} [element] The element to add as a child.\n   */\n  addChild(parent, element) {\n    this.hot.runHooks('beforeAddChild', parent, element);\n\n    let parentIndex = null;\n    if (parent) {\n      parentIndex = this.getRowIndex(parent);\n    }\n\n    this.hot.runHooks('beforeCreateRow', parentIndex + this.countChildren(parent) + 1, 1);\n    let functionalParent = parent;\n\n    if (!parent) {\n      functionalParent = this.mockParent();\n    }\n    if (!functionalParent.__children) {\n      functionalParent.__children = [];\n    }\n\n    if (!element) {\n      element = this.mockNode();\n    }\n\n    functionalParent.__children.push(element);\n\n    this.rewriteCache();\n\n    const newRowIndex = this.getRowIndex(element);\n\n    this.hot.runHooks('afterCreateRow', newRowIndex, 1);\n    this.hot.runHooks('afterAddChild', parent, element);\n  }\n\n  /**\n   * Add a child node to the provided parent at a specified index.\n   *\n   * @param {Object} parent Parent node.\n   * @param {Number} index Index to insert the child element at.\n   * @param {Object} [element] Element (node) to insert.\n   * @param {Number} [globalIndex] Global index of the inserted row.\n   */\n  addChildAtIndex(parent, index, element, globalIndex) {\n    this.hot.runHooks('beforeAddChild', parent, element, index);\n    this.hot.runHooks('beforeCreateRow', globalIndex + 1, 1);\n    let functionalParent = parent;\n\n    if (!parent) {\n      functionalParent = this.mockParent();\n    }\n\n    if (!functionalParent.__children) {\n      functionalParent.__children = [];\n    }\n\n    if (!element) {\n      element = this.mockNode();\n    }\n\n    functionalParent.__children.splice(index, null, element);\n\n    this.rewriteCache();\n\n    this.hot.runHooks('afterCreateRow', globalIndex + 1, 1);\n    this.hot.runHooks('afterAddChild', parent, element, index);\n  }\n\n  /**\n   * Add a sibling element at the specified index.\n   *\n   * @param {Number} index New element sibling's index.\n   * @param {('above'|'below')} where Direction in which the sibling is to be created.\n   */\n  addSibling(index, where = 'below') {\n    const translatedIndex = this.translateTrimmedRow(index);\n    const parent = this.getRowParent(translatedIndex);\n    const indexWithinParent = this.getRowIndexWithinParent(translatedIndex);\n\n    switch (where) {\n      case 'below':\n        this.addChildAtIndex(parent, indexWithinParent + 1, null, index);\n        break;\n      case 'above':\n        this.addChildAtIndex(parent, indexWithinParent, null, index);\n        break;\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Detach the provided element from its parent and add it right after it.\n   *\n   * @param {Object|Array} elements Row object or an array of selected coordinates.\n   * @param {Boolean} [forceRender=true] If true (default), it triggers render after finished.\n   */\n  detachFromParent(elements, forceRender = true) {\n    let element = null;\n    let rowObjects = [];\n\n    if (Array.isArray(elements)) {\n      rangeEach(elements[0], elements[2], (i) => {\n        let translatedIndex = this.translateTrimmedRow(i);\n        rowObjects.push(this.getDataObject(translatedIndex));\n      });\n\n      rangeEach(0, rowObjects.length - 2, (i) => {\n        this.detachFromParent(rowObjects[i], false);\n      });\n\n      element = rowObjects[rowObjects.length - 1];\n    } else {\n      element = elements;\n    }\n\n    const childRowIndex = this.getRowIndex(element);\n    const indexWithinParent = this.getRowIndexWithinParent(element);\n    const parent = this.getRowParent(element);\n    const grandparent = this.getRowParent(parent);\n    const grandparentRowIndex = this.getRowIndex(grandparent);\n    let movedElementRowIndex = null;\n\n    this.hot.runHooks('beforeDetachChild', parent, element);\n\n    if (indexWithinParent != null) {\n      this.hot.runHooks('beforeRemoveRow', childRowIndex, 1, [childRowIndex], this.plugin.pluginName);\n\n      parent.__children.splice(indexWithinParent, 1);\n\n      this.rewriteCache();\n\n      this.hot.runHooks('afterRemoveRow', childRowIndex, 1, [childRowIndex], this.plugin.pluginName);\n\n      if (grandparent) {\n        movedElementRowIndex = grandparentRowIndex + this.countChildren(grandparent);\n        this.hot.runHooks('beforeCreateRow', movedElementRowIndex, 1, this.plugin.pluginName);\n\n        grandparent.__children.push(element);\n      } else {\n        movedElementRowIndex = this.hot.countRows() + 1;\n        this.hot.runHooks('beforeCreateRow', movedElementRowIndex, 1, this.plugin.pluginName);\n\n        this.data.push(element);\n      }\n    }\n\n    this.rewriteCache();\n\n    this.hot.runHooks('afterCreateRow', movedElementRowIndex, 1, this.plugin.pluginName);\n\n    if (forceRender) {\n      this.hot.render();\n    }\n\n    this.hot.runHooks('afterDetachChild', parent, element);\n  }\n\n  /**\n   * Filter the data by the `logicRows` array.\n   *\n   * @private\n   * @param {Number} index Index of the first row to remove.\n   * @param {Number} amount Number of elements to remove.\n   * @param {Array} logicRows Array of indexes to remove.\n   */\n  filterData(index, amount, logicRows) {\n    const elementsToRemove = [];\n\n    arrayEach(logicRows, (elem, ind) => {\n      elementsToRemove.push(this.getDataObject(elem));\n    });\n\n    arrayEach(elementsToRemove, (elem, ind) => {\n      const indexWithinParent = this.getRowIndexWithinParent(elem);\n      const tempParent = this.getRowParent(elem);\n\n      if (tempParent === null) {\n        this.data.splice(indexWithinParent, 1);\n      } else {\n        tempParent.__children.splice(indexWithinParent, 1);\n      }\n    });\n\n    this.rewriteCache();\n  }\n\n  /**\n   * Used to splice the source data. Needed to properly modify the nested structure, which wouldn't work with the default script.\n   *\n   * @private\n   * @param {Number} index Index of the element at the splice beginning.\n   * @param {Number} amount Number of elements to be removed.\n   * @param {Object} element Row to add.\n   */\n  spliceData(index, amount, element) {\n    index = this.translateTrimmedRow(index);\n\n    if (index == null) {\n      return;\n    }\n\n    let previousElement = this.getDataObject(index - 1);\n    let newRowParent = null;\n    let indexWithinParent = null;\n\n    if (previousElement && previousElement.__children && previousElement.__children.length === 0) {\n      newRowParent = previousElement;\n      indexWithinParent = 0;\n\n    } else {\n      newRowParent = this.getRowParent(index);\n      indexWithinParent = this.getRowIndexWithinParent(index);\n    }\n\n    if (newRowParent) {\n      if (element) {\n        newRowParent.__children.splice(indexWithinParent, amount, element);\n      } else {\n        newRowParent.__children.splice(indexWithinParent, amount);\n      }\n\n    } else if (element) {\n      this.data.splice(indexWithinParent, amount, element);\n\n    } else {\n      this.data.splice(indexWithinParent, amount);\n    }\n\n    this.rewriteCache();\n  }\n\n  /**\n   * Move a single row.\n   *\n   * @param {Number} fromIndex Index of the row to be moved.\n   * @param {Number} toIndex Index of the destination.\n   */\n  moveRow(fromIndex, toIndex) {\n    let targetIsParent = this.isParent(toIndex);\n\n    let fromParent = this.getRowParent(fromIndex);\n    let indexInFromParent = this.getRowIndexWithinParent(fromIndex);\n\n    let toParent = this.getRowParent(toIndex);\n\n    if (toParent == null) {\n      toParent = this.getRowParent(toIndex - 1);\n    }\n\n    if (toParent == null) {\n      toParent = this.getDataObject(toIndex - 1);\n    }\n\n    if (!toParent) {\n      toParent = this.getDataObject(toIndex);\n      toParent.__children = [];\n\n    } else if (!toParent.__children) {\n      toParent.__children = [];\n    }\n\n    let previousToTargetParent = this.getRowParent(toIndex - 1);\n    let indexInToParent = targetIsParent ? this.countChildren(previousToTargetParent) : this.getRowIndexWithinParent(toIndex);\n\n    let elemToMove = fromParent.__children.slice(indexInFromParent, indexInFromParent + 1);\n\n    fromParent.__children.splice(indexInFromParent, 1);\n    toParent.__children.splice(indexInToParent, 0, elemToMove[0]);\n  }\n\n  /**\n   * Move the cell meta\n   *\n   * @private\n   * @param {Number} fromIndex Index of the starting row.\n   * @param {Number} toIndex Index of the ending row.\n   */\n  moveCellMeta(fromIndex, toIndex) {\n    const rowOfMeta = this.hot.getCellMetaAtRow(fromIndex);\n\n    this.hot.spliceCellsMeta(toIndex, 0, rowOfMeta);\n    this.hot.spliceCellsMeta(fromIndex + (fromIndex < toIndex ? 0 : 1), 1);\n  }\n\n  /**\n   * Translate the row index according to the `TrimRows` plugin.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @returns {Number}\n   */\n  translateTrimmedRow(row) {\n    if (this.plugin.collapsingUI) {\n      return this.plugin.collapsingUI.translateTrimmedRow(row);\n    }\n\n    return row;\n  }\n}\n\nexport default DataManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/nestedRows/data/dataManager.js","import BasePlugin from 'handsontable/plugins/_base';\nimport {registerPlugin} from 'handsontable/plugins';\nimport {rangeEach, rangeEachReverse} from 'handsontable/helpers/number';\nimport {arrayEach, arrayCopy} from 'handsontable/helpers/array';\nimport {CellCoords} from 'handsontable/3rdparty/walkontable/src';\nimport DataManager from './data/dataManager';\nimport CollapsingUI from './ui/collapsing';\nimport HeadersUI from './ui/headers';\nimport ContextMenuUI from './ui/contextMenu';\nimport CheckboxColumnRenderer from './renderers/checkboxColumnRenderer';\nimport Handsontable from 'handsontable';\n\nimport './nestedRows.css';\n\nconst privatePool = new WeakMap();\n\n/**\n * @plugin NestedRows\n * @pro\n *\n * @description\n * Plugin responsible for displaying and operating on data sources with nested structures.\n *\n * @dependencies TrimRows BindRowsWithHeaders\n */\nclass NestedRows extends BasePlugin {\n\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * Source data object.\n     *\n     * @type {Object}\n     */\n    this.sourceData = null;\n    /**\n     * Reference to the Trim Rows plugin.\n     *\n     * @type {Object}\n     */\n    this.trimRowsPlugin = null;\n    /**\n     * Reference to the BindRowsWithHeaders plugin.\n     *\n     * @type {Object}\n     */\n    this.bindRowsWithHeadersPlugin = null;\n\n    /**\n     * Reference to the DataManager instance.\n     *\n     * @type {Object}\n     */\n    this.dataManager = null;\n\n    /**\n     * Reference to the HeadersUI instance.\n     *\n     * @type {Object}\n     */\n    this.headersUI = null;\n\n    Handsontable.renderers.registerRenderer(\"checkboxColumn\", CheckboxColumnRenderer);\n\n    privatePool.set(this, {\n      changeSelection: false,\n      movedToFirstChild: false,\n      movedToCollapsed: false,\n      skipRender: null,\n    });\n  }\n\n  /**\n   * Checks if the plugin is enabled in the settings.\n   */\n  isEnabled() {\n    return !!this.hot.getSettings().nestedRows;\n  }\n\n  /**\n   * Enable the plugin.\n   */\n  enablePlugin() {\n    this.sourceData = this.hot.getSourceData();\n    this.trimRowsPlugin = this.hot.getPlugin('trimRows');\n    this.manualRowMovePlugin = this.hot.getPlugin('manualRowMove');\n    this.bindRowsWithHeadersPlugin = this.hot.getPlugin('bindRowsWithHeaders');\n\n    this.dataManager = new DataManager(this, this.hot, this.sourceData);\n    this.collapsingUI = new CollapsingUI(this, this.hot, this.trimRowsPlugin);\n    this.headersUI = new HeadersUI(this, this.hot);\n    this.contextMenuUI = new ContextMenuUI(this, this.hot);\n\n    this.dataManager.rewriteCache();\n\n    this.addHook('afterInit', (...args) => this.onAfterInit(...args));\n    this.addHook('beforeRender', (...args) => this.onBeforeRender(...args));\n    this.addHook('modifyRowData', (...args) => this.onModifyRowData(...args));\n    this.addHook('modifySourceData', (...args) => this.onModifySourceData(...args));\n    this.addHook('modifySourceLength', (...args) => this.onModifySourceLength(...args));\n    this.addHook('beforeDataSplice', (...args) => this.onBeforeDataSplice(...args));\n    this.addHook('beforeDataFilter', (...args) => this.onBeforeDataFilter(...args));\n    this.addHook('afterContextMenuDefaultOptions', (...args) => this.onAfterContextMenuDefaultOptions(...args));\n    this.addHook('afterGetRowHeader', (...args) => this.onAfterGetRowHeader(...args));\n    this.addHook('beforeOnCellMouseDown', (...args) => this.onBeforeOnCellMouseDown(...args));\n    this.addHook('afterRemoveRow', (...args) => this.onAfterRemoveRow(...args));\n    this.addHook('modifyRemovedAmount', (...args) => this.onModifyRemovedAmount(...args));\n    this.addHook('beforeAddChild', (...args) => this.onBeforeAddChild(...args));\n    this.addHook('afterAddChild', (...args) => this.onAfterAddChild(...args));\n    this.addHook('beforeDetachChild', (...args) => this.onBeforeDetachChild(...args));\n    this.addHook('afterDetachChild', (...args) => this.onAfterDetachChild(...args));\n    this.addHook('modifyRowHeaderWidth', (...args) => this.onModifyRowHeaderWidth(...args));\n    this.addHook('afterCreateRow', (...args) => this.onAfterCreateRow(...args));\n    this.addHook('beforeRowMove', (...args) => this.onBeforeRowMove(...args));\n    this.addHook('afterRowMove', (...args) => this.onAfterRowMove(...args));\n    this.addHook('columnValues', (...args) => this.columnValues(...args));\n\n    if (!this.trimRowsPlugin.isEnabled()) {\n      // Workaround to prevent calling updateSetttings in the enablePlugin method, which causes many problems.\n      this.trimRowsPlugin.enablePlugin();\n      this.hot.getSettings().trimRows = true;\n    }\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Disable the plugin.\n   */\n  disablePlugin() {\n    super.disablePlugin();\n  }\n\n  /**\n   * Update the plugin.\n   */\n  updatePlugin() {\n    this.disablePlugin();\n    this.enablePlugin();\n\n    super.updatePlugin();\n  }\n\n  /**\n   * `beforeRowMove` hook callback.\n   *\n   * @private\n   * @param {Array} rows Array of row indexes to be moved.\n   * @param {Number} target Index of the target row.\n   */\n  onBeforeRowMove(rows, target) {\n    const priv = privatePool.get(this);\n    const rowsLen = rows.length;\n    const translatedStartIndexes = [];\n\n    let translatedTargetIndex = this.dataManager.translateTrimmedRow(target);\n    let allowMove = true;\n    let i;\n    let fromParent = null;\n    let toParent = null;\n    let sameParent = null;\n\n    for (i = 0; i < rowsLen; i++) {\n      translatedStartIndexes.push(this.dataManager.translateTrimmedRow(rows[i]));\n\n      if (this.dataManager.isParent(translatedStartIndexes[i])) {\n        allowMove = false;\n      }\n    }\n\n    if (translatedStartIndexes.indexOf(translatedTargetIndex) > -1 || !allowMove) {\n      return false;\n    }\n\n    fromParent = this.dataManager.getRowParent(translatedStartIndexes[0]);\n    toParent = this.dataManager.getRowParent(translatedTargetIndex);\n\n    if (toParent == null) {\n      toParent = this.dataManager.getRowParent(translatedTargetIndex - 1);\n    }\n\n    if (toParent == null) {\n      toParent = this.dataManager.getDataObject(translatedTargetIndex - 1);\n      priv.movedToFirstChild = true;\n    }\n\n    if (!toParent) {\n      return false;\n    }\n\n    sameParent = fromParent === toParent;\n    priv.movedToCollapsed = this.collapsingUI.areChildrenCollapsed(toParent);\n    this.collapsingUI.collapsedRowsStash.stash();\n\n    if (!sameParent) {\n      if (Math.max(...translatedStartIndexes) <= translatedTargetIndex) {\n        this.collapsingUI.collapsedRowsStash.shiftStash(translatedStartIndexes[0], (-1) * rows.length);\n\n      } else {\n        this.collapsingUI.collapsedRowsStash.shiftStash(translatedTargetIndex, rows.length);\n      }\n    }\n\n    priv.changeSelection = true;\n\n    if (translatedStartIndexes[rowsLen - 1] <= translatedTargetIndex && sameParent || priv.movedToFirstChild === true) {\n      rows.reverse();\n      translatedStartIndexes.reverse();\n\n      if (priv.movedToFirstChild !== true) {\n        translatedTargetIndex--;\n      }\n    }\n\n    for (i = 0; i < rowsLen; i++) {\n      this.dataManager.moveRow(translatedStartIndexes[i], translatedTargetIndex);\n    }\n\n    const movingDown = translatedStartIndexes[translatedStartIndexes.length - 1] < translatedTargetIndex;\n\n    if (movingDown) {\n      for (i = rowsLen - 1; i >= 0; i--) {\n        this.dataManager.moveCellMeta(translatedStartIndexes[i], translatedTargetIndex);\n      }\n    } else {\n      for (i = 0; i < rowsLen; i++) {\n        this.dataManager.moveCellMeta(translatedStartIndexes[i], translatedTargetIndex);\n      }\n    }\n\n    if ((translatedStartIndexes[rowsLen - 1] <= translatedTargetIndex && sameParent) || this.dataManager.isParent(translatedTargetIndex)) {\n      rows.reverse();\n    }\n\n    this.dataManager.rewriteCache();\n\n    return false;\n  }\n\n  /**\n   * `afterRowMove` hook callback.\n   *\n   * @private\n   * @param {Array} rows Array of row indexes to be moved.\n   * @param {Number} target Index of the target row.\n   */\n  onAfterRowMove(rows, target) {\n    const priv = privatePool.get(this);\n\n    if (!priv.changeSelection) {\n      return;\n    }\n\n    const rowsLen = rows.length;\n    let startRow = 0;\n    let endRow = 0;\n    let translatedTargetIndex = null;\n    let selection = null;\n    let lastColIndex = null;\n\n    this.collapsingUI.collapsedRowsStash.applyStash();\n\n    translatedTargetIndex = this.dataManager.translateTrimmedRow(target);\n\n    if (priv.movedToFirstChild) {\n      priv.movedToFirstChild = false;\n\n      startRow = target;\n      endRow = target + rowsLen - 1;\n\n      if (target >= Math.max(...rows)) {\n        startRow -= rowsLen;\n        endRow -= rowsLen;\n      }\n\n    } else if (priv.movedToCollapsed) {\n      let parentObject = this.dataManager.getRowParent(translatedTargetIndex - 1);\n      if (parentObject == null) {\n        parentObject = this.dataManager.getDataObject(translatedTargetIndex - 1);\n      }\n      let parentIndex = this.dataManager.getRowIndex(parentObject);\n\n      startRow = parentIndex;\n      endRow = startRow;\n\n    } else if (rows[rowsLen - 1] < target) {\n      endRow = target - 1;\n      startRow = endRow - rowsLen + 1;\n\n    } else {\n      startRow = target;\n      endRow = startRow + rowsLen - 1;\n    }\n\n    selection = this.hot.selection;\n    lastColIndex = this.hot.countCols() - 1;\n\n    selection.setRangeStart(new CellCoords(startRow, 0));\n    selection.setRangeEnd(new CellCoords(endRow, lastColIndex), true);\n\n    priv.changeSelection = false;\n  }\n\n  /**\n   * `beforeOnCellMousedown` hook callback.\n   *\n   * @private\n   * @param {MouseEvent} event Mousedown event.\n   * @param {Object} coords Cell coords.\n   * @param {HTMLElement} TD clicked cell.\n   */\n  onBeforeOnCellMouseDown(event, coords, TD) {\n    this.collapsingUI.toggleState(event, coords, TD);\n  }\n\n  /**\n   * The modifyRowData hook callback.\n   *\n   * @private\n   * @param {Number} row Visual row index.\n   */\n  onModifyRowData(row) {\n    return this.dataManager.getDataObject(row);\n  }\n\n  /**\n   * The modifySourceData hook callback\n   * @returns {*}\n   */\n  onModifySourceData() {\n    return this.dataManager.cache.rows || [];\n  }\n\n  /**\n   * Modify the source data length to match the length of the nested structure.\n   *\n   * @private\n   * @returns {Number}\n   */\n  onModifySourceLength() {\n    return this.dataManager.countAllRows();\n  }\n\n  /**\n   * @private\n   * @param {Number} index\n   * @param {Number} amount\n   * @param {Object} element\n   * @returns {Boolean}\n   */\n  onBeforeDataSplice(index, amount, element) {\n    this.dataManager.spliceData(index, amount, element);\n\n    return false;\n  }\n\n  /**\n   * Called before the source data filtering. Returning `false` stops the native filtering.\n   *\n   * @private\n   * @param {Number} index\n   * @param {Number} amount\n   * @param {Array} logicRows\n   * @returns {Boolean}\n   */\n  onBeforeDataFilter(index, amount, logicRows) {\n    const realLogicRows = [];\n    const startIndex = this.dataManager.translateTrimmedRow(index);\n    const priv = privatePool.get(this);\n\n    rangeEach(startIndex, startIndex + amount - 1, (i) => {\n      realLogicRows.push(i);\n    });\n\n    this.collapsingUI.collapsedRowsStash.stash();\n    this.collapsingUI.collapsedRowsStash.trimStash(startIndex, amount);\n    this.collapsingUI.collapsedRowsStash.shiftStash(startIndex, (-1) * amount);\n    this.dataManager.filterData(index, amount, realLogicRows);\n\n    priv.skipRender = true;\n\n    return false;\n  }\n\n  /**\n   * `afterContextMenuDefaultOptions` hook callback.\n   *\n   * @private\n   * @param {Object} defaultOptions\n   */\n  onAfterContextMenuDefaultOptions(defaultOptions) {\n    return this.contextMenuUI.appendOptions(defaultOptions);\n  }\n\n  /**\n   * `afterGetRowHeader` hook callback.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {HTMLElement} TH row header element.\n   */\n  onAfterGetRowHeader(row, TH) {\n    //this.headersUI.appendLevelIndicators(row, TH);\n  }\n\n  /**\n   * `modifyRowHeaderWidth` hook callback.\n   *\n   * @private\n   * @param {Number} rowHeaderWidth The initial row header width(s).\n   * @returns {Number}\n   */\n  onModifyRowHeaderWidth(rowHeaderWidth) {\n    return this.headersUI.rowHeaderWidthCache || rowHeaderWidth;\n  }\n\n  /**\n   * `onAfterRemoveRow` hook callback.\n   *\n   * @param {Number} index Removed row.\n   * @param {Number} amount Amount of removed rows.\n   * @param {Array} logicRows\n   * @param {String} source Source of action.\n   * @private\n   */\n  onAfterRemoveRow(index, amount, logicRows, source) {\n    if (source === this.pluginName) {\n      return;\n    }\n\n    const priv = privatePool.get(this);\n\n    setTimeout(() => {\n      priv.skipRender = null;\n      this.headersUI.updateRowHeaderWidth();\n      this.collapsingUI.collapsedRowsStash.applyStash();\n    }, 0);\n  }\n\n  /**\n   * `modifyRemovedAmount` hook callback.\n   *\n   * @private\n   * @param {Number} amount Initial amount.\n   * @param {Number} index Index of the starting row.\n   * @returns {Number} Modified amount.\n   */\n  onModifyRemovedAmount(amount, index) {\n    const lastParents = [];\n    let childrenCount = 0;\n\n    rangeEach(index, index + amount - 1, (i) => {\n      let isChild = false;\n      let translated = this.collapsingUI.translateTrimmedRow(i);\n      let currentDataObj = this.dataManager.getDataObject(translated);\n\n      if (this.dataManager.hasChildren(currentDataObj)) {\n        lastParents.push(currentDataObj);\n\n        arrayEach(lastParents, (elem) => {\n          if (elem.__children.indexOf(currentDataObj) > -1) {\n            isChild = true;\n            return false;\n          }\n        });\n\n        if (!isChild) {\n          childrenCount += this.dataManager.countChildren(currentDataObj);\n        }\n      }\n\n      isChild = false;\n      arrayEach(lastParents, (elem) => {\n        if (elem.__children.indexOf(currentDataObj) > -1) {\n          isChild = true;\n          return false;\n        }\n      });\n\n      if (isChild) {\n        childrenCount--;\n      }\n    });\n\n    return amount + childrenCount;\n  }\n\n  /**\n   * `beforeAddChild` hook callback.\n   *\n   * @private\n   * @param {Object} parent Parent element.\n   * @param {Object} element New child element.\n   */\n  onBeforeAddChild(parent, element) {\n    this.collapsingUI.collapsedRowsStash.stash();\n  }\n\n  /**\n   * `afterAddChild` hook callback.\n   *\n   * @private\n   * @param {Object} parent Parent element.\n   * @param {Object} element New child element.\n   */\n  onAfterAddChild(parent, element) {\n    this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(element));\n    this.collapsingUI.collapsedRowsStash.applyStash();\n\n    this.headersUI.updateRowHeaderWidth();\n  }\n\n  /**\n   * `beforeDetachChild` hook callback.\n   *\n   * @private\n   * @param {Object} parent Parent element.\n   * @param {Object} element New child element.\n   */\n  onBeforeDetachChild(parent, element) {\n    this.collapsingUI.collapsedRowsStash.stash();\n  }\n\n  /**\n   * `afterDetachChild` hook callback.\n   *\n   * @private\n   * @param {Object} parent Parent element.\n   * @param {Object} element New child element.\n   */\n  onAfterDetachChild(parent, element) {\n    this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(element));\n    this.collapsingUI.collapsedRowsStash.applyStash();\n\n    this.headersUI.updateRowHeaderWidth();\n  }\n\n  /**\n   * `afterCreateRow` hook callback.\n   *\n   * @param {Number} index\n   * @param {Number} amount\n   * @param {String} source\n   * @private\n   */\n  onAfterCreateRow(index, amount, source) {\n    if (source === this.pluginName) {\n      return;\n    }\n    this.dataManager.rewriteCache();\n  }\n\n  /**\n   * `afterInit` hook callback.\n   *\n   * @private\n   */\n  onAfterInit() {\n    // Workaround to fix an issue caused by the 'bindRowsWithHeaders' plugin loading before this one.\n    if (this.bindRowsWithHeadersPlugin.bindStrategy.strategy) {\n      this.bindRowsWithHeadersPlugin.bindStrategy.createMap(this.hot.countSourceRows());\n    }\n\n    let deepestLevel = Math.max(...this.dataManager.cache.levels);\n\n    if (deepestLevel > 0) {\n      this.headersUI.updateRowHeaderWidth(deepestLevel);\n    }\n  }\n\n  /**\n   * `beforeRender` hook callback.\n   *\n   * @param {Boolean} force\n   * @param {Object} skipRender\n   * @private\n   */\n  onBeforeRender(force, skipRender) {\n    const priv = privatePool.get(this);\n\n    if (priv.skipRender) {\n      skipRender.skipRender = true;\n    }\n  }\n\n  columnValues(visualIndex){\n    var prop = this.hot.colToProp(visualIndex);\n    var result;\n    if(this.dataManager.cache && this.dataManager.cache.rows){\n      result = [];\n      arrayEach(this.dataManager.cache.rows, function (row) {\n        result.push(row[prop]);\n      })\n    }\n    return result;\n  }\n}\n\nregisterPlugin('nestedRows', NestedRows);\n\nexport default NestedRows;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/nestedRows/nestedRows.js","import {empty, addClass, hasClass} from 'handsontable/helpers/dom/element';\nimport {equalsIgnoreCase} from 'handsontable/helpers/string';\nimport EventManager from 'handsontable/eventManager';\nimport {isKey} from 'handsontable/helpers/unicode';\nimport {partial} from 'handsontable/helpers/function';\nimport {stopImmediatePropagation, isImmediatePropagationStopped} from 'handsontable/helpers/dom/event';\nimport {getRenderer} from 'handsontable/renderers/index';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {arrayEach} from 'handsontable/helpers/array';\n\nconst isListeningKeyDownEvent = new WeakMap();\nconst isCheckboxListenerAdded = new WeakMap();\nconst BAD_VALUE_CLASS = 'htBadValue';\n\n/**\n * Checkbox renderer\n *\n * @private\n * @param {Object} instance Handsontable instance\n * @param {Element} TD Table cell where to render\n * @param {Number} row\n * @param {Number} col\n * @param {String|Number} prop Row object property name\n * @param value Value to render (remember to escape unsafe HTML before inserting to DOM!)\n * @param {Object} cellProperties Cell properties (shared by cell renderer and editor)\n */\nfunction checkboxColumnRenderer(instance, TD, row, col, prop, value, cellProperties) {\n  getRenderer('base').apply(this, arguments);\n\n  let nestedRowsPlugin = instance.getPlugin(\"nestedRows\");\n  let trimRowsPlugin = nestedRowsPlugin.trimRowsPlugin;\n  let dataManager = nestedRowsPlugin.dataManager;\n  let physicalRow = instance.toPhysicalRow(row);\n  const rowLevel = dataManager.getRowLevel(physicalRow);\n  const rowObject = dataManager.getDataObject(physicalRow);\n  const nodeInfo = dataManager.cache.nodeInfo.get(rowObject);\n  if(nodeInfo == undefined) return;\n\n  const eventManager = registerEvents(instance);\n\n  empty(TD); // TODO identify under what circumstances this line can be removed\n\n  let parentIndex = null;\n  if(nodeInfo.parent){\n    parentIndex = dataManager.getRowIndex(nodeInfo.parent);\n    if(!trimRowsPlugin.isTrimmed(parentIndex)){\n      rangeEach(0, rowLevel - 1, (i) => {\n        var middleSep = createIconWrapper(true);\n        TD.appendChild(middleSep);\n      });\n    }\n  }\n\n  var iconWrapper = createIconWrapper();\n  if (dataManager.hasChildren(rowObject)) {\n    let children = rowObject.__children;\n    let flag = false;\n    if(instance.hasHook(\"isFilter\")){\n      arrayEach(children, function (childrenRow) {\n        let childrenIndex = dataManager.getRowIndex(childrenRow);\n        let filterFlag = instance.runHooks(\"isFilter\", childrenIndex);\n        if(!filterFlag) flag = true;\n      });\n    } else if(children){\n      flag = true;\n    }\n\n    if(flag){\n      var icon = createIcon();\n\n      if (!nestedRowsPlugin.collapsingUI.areChildrenCollapsed(physicalRow)) {\n        addClass(icon, \"expanded\");\n      }\n\n      iconWrapper.appendChild(icon);\n    }\n  }\n  let isLast = dataManager.isLast(physicalRow);\n  if(isLast){\n    let flag = false;\n    if(parentIndex == null)\n      flag = true;\n    else if(parentIndex != null && (!trimRowsPlugin.isTrimmed(parentIndex) || dataManager.isLast(parentIndex)))\n      flag = true;\n\n    if(flag) addClass(iconWrapper, \"is-last\");\n  }\n\n  TD.appendChild(iconWrapper);\n\n  let input = createInput();\n  const labelOptions = cellProperties.label;\n  let badValue = false;\n\n  if (typeof cellProperties.checkedTemplate === 'undefined') {\n    cellProperties.checkedTemplate = true;\n  }\n  if (typeof cellProperties.uncheckedTemplate === 'undefined') {\n    cellProperties.uncheckedTemplate = false;\n  }\n\n  if (value === cellProperties.checkedTemplate || equalsIgnoreCase(value, cellProperties.checkedTemplate)) {\n    input.checked = true;\n\n  } else if (value === cellProperties.uncheckedTemplate || equalsIgnoreCase(value, cellProperties.uncheckedTemplate)) {\n    input.checked = false;\n\n  } else if (value === null) { // default value\n    addClass(input, 'noValue');\n\n  } else {\n    input.style.display = 'none';\n    addClass(input, BAD_VALUE_CLASS);\n    badValue = true;\n  }\n\n  input.setAttribute('data-row', row);\n  input.setAttribute('data-col', col);\n\n  if (!badValue && labelOptions) {\n    let labelText = '';\n\n    if (labelOptions.value) {\n      labelText = typeof labelOptions.value === 'function' ? labelOptions.value.call(this, row, col, prop, value) : labelOptions.value;\n\n    } else if (labelOptions.property) {\n      labelText = instance.getDataAtRowProp(row, labelOptions.property);\n    }\n    const label = createLabel(labelText);\n\n    if (labelOptions.position === 'before') {\n      label.appendChild(input);\n    } else {\n      label.insertBefore(input, label.firstChild);\n    }\n    input = label;\n  }\n\n  TD.appendChild(input);\n\n  if (badValue) {\n    TD.appendChild(document.createTextNode('#bad-value#'));\n  }\n\n  if (!isListeningKeyDownEvent.has(instance)) {\n    isListeningKeyDownEvent.set(instance, true);\n    instance.addHook('beforeKeyDown', onBeforeKeyDown);\n  }\n\n  instance.runHooks('afterCheckboxColumnRender', TD, row, col, prop, value, cellProperties);\n\n  /**\n   * On before key down DOM listener.\n   *\n   * @private\n   * @param {Event} event\n   */\n  function onBeforeKeyDown(event) {\n    const toggleKeys = 'SPACE|ENTER';\n    const switchOffKeys = 'DELETE|BACKSPACE';\n    const isKeyCode = partial(isKey, event.keyCode);\n\n    if (isKeyCode(`${toggleKeys}|${switchOffKeys}`) && !isImmediatePropagationStopped(event)) {\n      eachSelectedCheckboxCell(() => {\n        stopImmediatePropagation(event);\n      event.preventDefault();\n    });\n    }\n    if (isKeyCode(toggleKeys)) {\n      changeSelectedCheckboxesState();\n    }\n    if (isKeyCode(switchOffKeys)) {\n      changeSelectedCheckboxesState(true);\n    }\n  }\n\n  /**\n   * Change checkbox checked property\n   *\n   * @private\n   * @param {Boolean} [uncheckCheckbox=false]\n   */\n  function changeSelectedCheckboxesState(uncheckCheckbox = false) {\n    const selRange = instance.getSelectedRange();\n\n    if (!selRange) {\n      return;\n    }\n\n    const topLeft = selRange.getTopLeftCorner();\n    const bottomRight = selRange.getBottomRightCorner();\n    const changes = [];\n\n    for (let row = topLeft.row; row <= bottomRight.row; row += 1) {\n      for (let col = topLeft.col; col <= bottomRight.col; col += 1) {\n        const cellProperties = instance.getCellMeta(row, col);\n\n        if (cellProperties.type !== 'checkbox') {\n          return;\n        }\n\n        /* eslint-disable no-continue */\n        if (cellProperties.readOnly === true) {\n          continue;\n        }\n\n        if (typeof cellProperties.checkedTemplate === 'undefined') {\n          cellProperties.checkedTemplate = true;\n        }\n        if (typeof cellProperties.uncheckedTemplate === 'undefined') {\n          cellProperties.uncheckedTemplate = false;\n        }\n\n        const dataAtCell = instance.getDataAtCell(row, col);\n\n        if (uncheckCheckbox === false) {\n          if (dataAtCell === cellProperties.checkedTemplate) {\n            changes.push([row, col, cellProperties.uncheckedTemplate]);\n\n          } else if ([cellProperties.uncheckedTemplate, null, void 0].indexOf(dataAtCell) !== -1) {\n            changes.push([row, col, cellProperties.checkedTemplate]);\n          }\n\n        } else {\n          changes.push([row, col, cellProperties.uncheckedTemplate]);\n        }\n      }\n    }\n\n    if (changes.length > 0) {\n      instance.setDataAtCell(changes);\n    }\n  }\n\n  /**\n   * Call callback for each found selected cell with checkbox type.\n   *\n   * @private\n   * @param {Function} callback\n   */\n  function eachSelectedCheckboxCell(callback) {\n    const selRange = instance.getSelectedRange();\n\n    if (!selRange) {\n      return;\n    }\n    const topLeft = selRange.getTopLeftCorner();\n    const bottomRight = selRange.getBottomRightCorner();\n\n    for (let row = topLeft.row; row <= bottomRight.row; row++) {\n      for (let col = topLeft.col; col <= bottomRight.col; col++) {\n        let cellProperties = instance.getCellMeta(row, col);\n\n        if (cellProperties.type !== 'checkbox') {\n          return;\n        }\n\n        let cell = instance.getCell(row, col);\n\n        if (cell == null) {\n\n          callback(row, col, cellProperties);\n\n        } else {\n          let checkboxes = cell.querySelectorAll('input[type=checkbox]');\n\n          if (checkboxes.length > 0 && !cellProperties.readOnly) {\n            callback(checkboxes);\n          }\n        }\n      }\n    }\n  }\n}\n\n/**\n * Register checkbox listeners.\n *\n * @param {Handsontable} instance Handsontable instance.\n * @returns {EventManager}\n */\nfunction registerEvents(instance) {\n  let eventManager = isCheckboxListenerAdded.get(instance);\n\n  if (!eventManager) {\n    eventManager = new EventManager(instance);\n    eventManager.addEventListener(instance.rootElement, 'click', (event) => onClick(event, instance));\n    eventManager.addEventListener(instance.rootElement, 'mouseup', (event) => onMouseUp(event, instance));\n    eventManager.addEventListener(instance.rootElement, 'change', (event) => onChange(event, instance));\n\n    isCheckboxListenerAdded.set(instance, eventManager);\n  }\n\n  return eventManager;\n}\n\nfunction createIconWrapper(isMiddle) {\n  let iconWrapper = document.createElement(\"div\");\n  var className = \"table-tree\";\n  if(isMiddle) className += \" is-middle\";\n  iconWrapper.className = className;\n  return iconWrapper;\n}\n\nfunction createIcon() {\n  let icon = document.createElement(\"div\");\n  icon.className = \"expand-toggle\";\n  return icon;\n}\n\n/**\n * Create input element.\n *\n * @returns {Node}\n */\nfunction createInput() {\n  let input = document.createElement('input');\n\n  input.className = 'htCheckboxRendererInput';\n  input.type = 'checkbox';\n  input.setAttribute('autocomplete', 'off');\n  input.setAttribute('tabindex', '-1');\n\n  return input.cloneNode(false);\n}\n\n/**\n * Create label element.\n *\n * @returns {Node}\n */\nfunction createLabel(text) {\n  let label = document.createElement('label');\n\n  label.className = 'htCheckboxRendererLabel';\n  label.appendChild(document.createTextNode(text));\n\n  return label.cloneNode(true);\n}\n\n/**\n * `mouseup` callback.\n *\n * @private\n * @param {Event} event `mouseup` event.\n * @param {Object} instance Handsontable instance.\n */\nfunction onMouseUp(event, instance) {\n  if (!isCheckboxInput(event.target)) {\n    return;\n  }\n  setTimeout(instance.listen, 10);\n}\n\n/**\n * `click` callback.\n *\n * @private\n * @param {Event} event `click` event.\n * @param {Object} instance Handsontable instance.\n */\nfunction onClick(event, instance) {\n  if (!isCheckboxInput(event.target)) {\n    return false;\n  }\n\n  const row = parseInt(event.target.getAttribute('data-row'), 10);\n  const col = parseInt(event.target.getAttribute('data-col'), 10);\n  const cellProperties = instance.getCellMeta(row, col);\n\n  if (cellProperties.readOnly) {\n    event.preventDefault();\n  }\n}\n\n/**\n * `change` callback.\n *\n * @param {Event} event `change` event.\n * @param {Object} instance Handsontable instance.\n * @param {Object} cellProperties Reference to cell properties.\n * @returns {Boolean}\n */\nfunction onChange(event, instance) {\n  if (!isCheckboxInput(event.target)) {\n    return false;\n  }\n\n  const row = parseInt(event.target.getAttribute('data-row'), 10);\n  const col = parseInt(event.target.getAttribute('data-col'), 10);\n  const cellProperties = instance.getCellMeta(row, col);\n\n  if (!cellProperties.readOnly) {\n    let newCheckboxValue = null;\n\n    if (event.target.checked) {\n      newCheckboxValue = cellProperties.uncheckedTemplate === void 0 ? true : cellProperties.checkedTemplate;\n\n    } else {\n      newCheckboxValue = cellProperties.uncheckedTemplate === void 0 ? false : cellProperties.uncheckedTemplate;\n    }\n\n    instance.setDataAtCell(row, col, newCheckboxValue);\n  }\n}\n\n/**\n * Check if the provided element is the checkbox input.\n *\n * @private\n * @param {HTMLElement} element The element in question.\n * @returns {Boolean}\n */\nfunction isCheckboxInput(element) {\n  return element.tagName === 'INPUT' && element.getAttribute('type') === 'checkbox';\n}\n\nexport default checkboxColumnRenderer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/nestedRows/renderers/checkboxColumnRenderer.js","import {stopImmediatePropagation} from 'handsontable/helpers/dom/event';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {hasClass} from 'handsontable/helpers/dom/element';\nimport BaseUI from './_base';\nimport HeadersUI from './headers';\n\n/**\n * Class responsible for the UI for collapsing and expanding groups.\n *\n * @class\n * @util\n * @extends BaseUI\n */\nclass CollapsingUI extends BaseUI {\n  constructor(nestedRowsPlugin, hotInstance) {\n    super(nestedRowsPlugin, hotInstance);\n\n    /**\n     * Reference to the Trim Rows plugin.\n     */\n    this.trimRowsPlugin = nestedRowsPlugin.trimRowsPlugin;\n    this.dataManager = this.plugin.dataManager;\n    this.collapsedRows = [];\n    this.collapsedRowsStash = {\n      stash: () => {\n        this.lastCollapsedRows = this.collapsedRows.slice(0);\n\n        // Workaround for wrong indexes being set in the trimRows plugin\n        this.expandMultipleChildren(this.lastCollapsedRows, false);\n      },\n      shiftStash: (elementIndex, delta = 1) => {\n        elementIndex = this.translateTrimmedRow(elementIndex);\n        arrayEach(this.lastCollapsedRows, (elem, i) => {\n          if (elem > elementIndex - 1) {\n            this.lastCollapsedRows[i] = elem + delta;\n          }\n        });\n      },\n      applyStash: () => {\n        // Workaround for wrong indexes being set in the trimRows plugin\n        this.hot.runHooks('skipLengthCache', 100);\n        this.collapseMultipleChildren(this.lastCollapsedRows, true);\n        this.lastCollapsedRows = void 0;\n      },\n      trimStash: (realElementIndex, amount) => {\n        rangeEach(realElementIndex, realElementIndex + amount - 1, (i) => {\n          const indexOfElement = this.lastCollapsedRows.indexOf(i);\n          if (indexOfElement > -1) {\n            this.lastCollapsedRows.splice(indexOfElement, 1);\n          }\n        });\n      }\n    };\n  }\n\n  /**\n   * Collapse the children of the row passed as an argument.\n   *\n   * @param {Number|Object} row The parent row.\n   * @param {Boolean} [forceRender=true] Whether to render the table after the function ends.\n   */\n  collapseChildren(row, forceRender = true, doTrimming = true) {\n    const rowsToCollapse = [];\n    let rowObject = null;\n    let rowIndex = null;\n    let rowsToTrim = null;\n\n    if (isNaN(row)) {\n      rowObject = row;\n      rowIndex = this.dataManager.getRowIndex(rowObject);\n    } else {\n      rowObject = this.dataManager.getDataObject(row);\n      rowIndex = row;\n    }\n\n    if (this.dataManager.hasChildren(rowObject)) {\n      arrayEach(rowObject.__children, (elem, i) => {\n        rowsToCollapse.push(this.dataManager.getRowIndex(elem));\n      });\n    }\n\n    rowsToTrim = this.collapseRows(rowsToCollapse, true, false);\n\n    if (doTrimming) {\n      this.trimRowsPlugin.trimRows(rowsToTrim);\n    }\n\n    if (forceRender) {\n      this.renderAndAdjust();\n    }\n\n    if (this.collapsedRows.indexOf(rowIndex) === -1) {\n      this.collapsedRows.push(rowIndex);\n    }\n\n    return rowsToTrim;\n  }\n\n  /**\n   * Collapse multiple children.\n   *\n   * @param {Array} rows Rows to collapse (including their children)\n   * @param {Boolean} [forceRender = true] `true` if the table should be rendered after finishing the function.\n   * @param {Boolean} [doTrimming = true] `true` if the table should trim the provided rows.\n   */\n  collapseMultipleChildren(rows, forceRender = true, doTrimming = true) {\n    let rowsToTrim = [];\n\n    arrayEach(rows, (elem, i) => {\n      rowsToTrim = rowsToTrim.concat(this.collapseChildren(elem, false, false));\n    });\n\n    if (doTrimming) {\n      this.trimRowsPlugin.trimRows(rowsToTrim);\n    }\n\n    if (forceRender) {\n      this.renderAndAdjust();\n    }\n  }\n\n  /**\n   * Collapse a single row.\n   *\n   * @param {Number} rowIndex Index of the row to collapse.\n   * @param {Boolean} [recursive = true] `true` if it should collapse the row's children.\n   */\n  collapseRow(rowIndex, recursive = true) {\n    this.collapseRows([rowIndex], recursive);\n  }\n\n  /**\n   * Collapse multiple rows.\n   *\n   * @param {Array} rowIndexes Array of row indexes to collapse.\n   * @param {Boolean} [recursive = true] `true` if it should collapse the rows' children.\n   * @param {Boolean} [doTrimming = false] `true` if the provided rows should be collapsed.\n   * @returns {Array} Rows prepared for trimming (or trimmed, if doTrimming == true)\n   */\n  collapseRows(rowIndexes, recursive = true, doTrimming = false) {\n    const rowsToTrim = [];\n\n    arrayEach(rowIndexes, (elem, i) => {\n      rowsToTrim.push(elem);\n      if (recursive) {\n        this.collapseChildRows(elem, rowsToTrim);\n      }\n    });\n\n    if (doTrimming) {\n      this.trimRowsPlugin.trimRows(rowsToTrim);\n    }\n\n    return rowsToTrim;\n  }\n\n  /**\n   * Collapse child rows of the row at the provided index.\n   *\n   * @param {Number} parentIndex Index of the parent node.\n   * @param {Array} [rowsToTrim = []] Array of rows to trim. Defaults to an empty array.\n   * @param {Boolean} [recursive = true] `true` if the collapsing process should be recursive.\n   * @param {Boolean} [doTrimming = false] `true` if rows should be trimmed.\n   */\n  collapseChildRows(parentIndex, rowsToTrim = [], recursive = true, doTrimming = false) {\n    if (this.dataManager.hasChildren(parentIndex)) {\n      const parentObject = this.dataManager.getDataObject(parentIndex);\n\n      arrayEach(parentObject.__children, (elem, i) => {\n        const elemIndex = this.dataManager.getRowIndex(elem);\n        rowsToTrim.push(elemIndex);\n        this.collapseChildRows(elemIndex, rowsToTrim);\n      });\n    }\n\n    if (doTrimming) {\n      this.trimRowsPlugin.trimRows(rowsToTrim);\n    }\n  }\n\n  /**\n   * Expand a single row.\n   *\n   * @param {Number} rowIndex Index of the row to expand.\n   * @param {Boolean} [recursive = true] `true` if it should expand the row's children recursively.\n   */\n  expandRow(rowIndex, recursive = true) {\n    this.expandRows([rowIndex], recursive);\n  }\n\n  /**\n   * Expand multiple rows.\n   *\n   * @param {Array} rowIndexes Array of indexes of the rows to expand.\n   * @param {Boolean} [recursive = true] `true` if it should expand the rows' children recursively.\n   * @param {Boolean} [doTrimming = false] `true` if rows should be untrimmed.\n   * @returns {Array} Array of row indexes to be untrimmed.\n   */\n  expandRows(rowIndexes, recursive = true, doTrimming = false) {\n    const rowsToUntrim = [];\n\n    arrayEach(rowIndexes, (elem, i) => {\n      rowsToUntrim.push(elem);\n      if (recursive) {\n        this.expandChildRows(elem, rowsToUntrim);\n      }\n    });\n\n    if (doTrimming) {\n      this.trimRowsPlugin.untrimRows(rowsToUntrim);\n    }\n\n    return rowsToUntrim;\n  }\n\n  /**\n   * Expand child rows of the provided index.\n   *\n   * @param {Number} parentIndex Index of the parent row.\n   * @param {Array} [rowsToUntrim = []] Array of the rows to be untrimmed.\n   * @param {Boolean} [recursive = true] `true` if it should expand the rows' children recursively.\n   * @param {Boolean} [doTrimming = false] `true` if rows should be untrimmed.\n   */\n  expandChildRows(parentIndex, rowsToUntrim = [], recursive = true, doTrimming = false) {\n    if (this.dataManager.hasChildren(parentIndex)) {\n      const parentObject = this.dataManager.getDataObject(parentIndex);\n\n      arrayEach(parentObject.__children, (elem, i) => {\n        if (!this.isAnyParentCollapsed(elem)) {\n          const elemIndex = this.dataManager.getRowIndex(elem);\n          rowsToUntrim.push(elemIndex);\n          this.expandChildRows(elemIndex, rowsToUntrim);\n        }\n      });\n    }\n\n    if (doTrimming) {\n      this.trimRowsPlugin.untrimRows(rowsToUntrim);\n    }\n  }\n\n  /**\n   * Expand the children of the row passed as an argument.\n   *\n   * @param {Number|Object} row Parent row.\n   * @param {Boolean} [forceRender=true] Whether to render the table after the function ends.\n   * @param {Boolean} [doTrimming=true] If set to `true`, the trimming will be applied when the function finishes.\n   */\n  expandChildren(row, forceRender = true, doTrimming = true) {\n    const rowsToExpand = [];\n    let _this = this;\n    let rowObject = null;\n    let rowIndex = null;\n    let rowsToUntrim = null;\n\n    if (isNaN(row)) {\n      rowObject = row;\n      rowIndex = this.dataManager.getRowIndex(row);\n    } else {\n      rowObject = this.dataManager.getDataObject(row);\n      rowIndex = row;\n    }\n\n    this.collapsedRows.splice(this.collapsedRows.indexOf(rowIndex), 1);\n\n    if (this.dataManager.hasChildren(rowObject)) {\n      arrayEach(rowObject.__children, (elem, i) => {\n        const childIndex = this.dataManager.getRowIndex(elem);\n\n        rowsToExpand.push(childIndex);\n      });\n    }\n\n    rowsToUntrim = this.expandRows(rowsToExpand, true, false);\n\n    if (doTrimming) {\n      arrayEach(rowsToUntrim, function (row) {\n        let isFilter = false;\n        if(_this.hot.hasHook(\"isFilter\")) isFilter = _this.hot.runHooks(\"isFilter\", row);\n        if(!isFilter) _this.trimRowsPlugin.untrimRow(row);\n      });\n      //this.trimRowsPlugin.untrimRows(rowsToUntrim);\n    }\n\n    if (forceRender) {\n      this.renderAndAdjust();\n    }\n\n    return rowsToUntrim;\n  }\n\n  /**\n   * Expand multiple rows' children.\n   *\n   * @param {Array} rows Array of rows which children are about to be expanded.\n   * @param {Boolean} [forceRender = true] `true` if the table should render after finishing the function.\n   * @param {Boolean} [doTrimming = true] `true` if the rows should be untrimmed after finishing the function.\n   */\n  expandMultipleChildren(rows, forceRender = true, doTrimming = true) {\n    let rowsToUntrim = [];\n\n    arrayEach(rows, (elem, i) => {\n      rowsToUntrim = rowsToUntrim.concat(this.expandChildren(elem, false, false));\n    });\n\n    if (doTrimming) {\n      this.trimRowsPlugin.untrimRows(rowsToUntrim);\n    }\n\n    if (forceRender) {\n      this.renderAndAdjust();\n    }\n  }\n\n  /**\n   * Collapse all collapsable rows.\n   */\n  collapseAll() {\n    const sourceData = this.hot.getSourceData();\n    const parentsToCollapse = [];\n    let currentLevelParents = sourceData;\n    let nextLevelParents;\n\n    while (currentLevelParents.length) {\n      nextLevelParents = [];\n      arrayEach(currentLevelParents, (elem, i) => {\n        if (this.dataManager.hasChildren(elem)) {\n          parentsToCollapse.push(elem);\n          nextLevelParents.push(...elem.__children);\n        }\n      });\n      currentLevelParents = nextLevelParents;\n    }\n\n    this.collapseMultipleChildren(parentsToCollapse);\n\n    this.renderAndAdjust();\n  }\n\n  /**\n   * Expand all collapsable rows.\n   */\n  expandAll() {\n    const sourceData = this.hot.getSourceData();\n    const parentsToExpand = [];\n    let currentLevelParents = sourceData;\n    let nextLevelParents;\n\n    while (currentLevelParents.length) {\n      nextLevelParents = [];\n      arrayEach(currentLevelParents, (elem, i) => {\n        if (this.dataManager.hasChildren(elem)) {\n          parentsToExpand.push(elem);\n        }\n      });\n      currentLevelParents = nextLevelParents;\n    }\n\n    this.expandMultipleChildren(parentsToExpand);\n\n    this.renderAndAdjust();\n  }\n\n  /**\n   * Check if all child rows are collapsed.\n   *\n   * @param {Number|Object} row The parent row.\n   * @private\n   */\n  areChildrenCollapsed(row) {\n    let rowObj = null;\n    let allCollapsed = true;\n\n    if (isNaN(row)) {\n      rowObj = row;\n    } else {\n      rowObj = this.dataManager.getDataObject(row);\n    }\n\n    if (this.dataManager.hasChildren(rowObj)) {\n      arrayEach(rowObj.__children, (elem, i) => {\n        let rowIndex = this.dataManager.getRowIndex(elem);\n\n        if (!this.trimRowsPlugin.isTrimmed(rowIndex)) {\n          allCollapsed = false;\n          return false;\n        }\n      });\n    }\n\n    return allCollapsed;\n  }\n\n  /**\n   * Check if any of the row object parents are collapsed.\n   *\n   * @private\n   * @param {Object} rowObj Row object.\n   * @returns {Boolean}\n   */\n  isAnyParentCollapsed(rowObj) {\n    let parent = rowObj;\n\n    while (parent !== null) {\n      parent = this.dataManager.getRowParent(parent);\n      let parentIndex = this.dataManager.getRowIndex(parent);\n\n      if (this.collapsedRows.indexOf(parentIndex) > -1) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  /**\n   * Toggle collapsed state. Callback for the `beforeOnCellMousedown` hook.\n   *\n   * @private\n   * @param {MouseEvent} event `mousedown` event\n   * @param {Object} coords Coordinates of the clicked cell/header.\n   * @param {HTMLElement} TD Clicked cell/header.\n   */\n  toggleState(event, coords, TD) {\n    if (coords.col != 0) {\n      return;\n    }\n\n    const row = this.translateTrimmedRow(coords.row);\n\n    if (hasClass(event.target, HeadersUI.CSS_CLASSES.button)) {\n      if (this.areChildrenCollapsed(row)) {\n        this.expandChildren(row);\n      } else {\n        this.collapseChildren(row);\n      }\n\n      stopImmediatePropagation(event);\n    }\n  }\n\n  /**\n   * Translate physical row after trimming to physical base row index.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @returns {Number} Base row index.\n   */\n  translateTrimmedRow(row) {\n    return this.trimRowsPlugin.rowsMapper.getValueByIndex(row);\n  }\n\n  /**\n   * Helper function to render the table and call the `adjustElementsSize` method.\n   *\n   * @private\n   */\n  renderAndAdjust() {\n    this.hot.render();\n\n    // Dirty workaround to prevent scroll height not adjusting to the table height. Needs refactoring in the future.\n    this.hot.view.wt.wtOverlays.adjustElementsSize();\n  }\n}\n\nexport default CollapsingUI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/nestedRows/ui/collapsing.js","import {rangeEach} from 'handsontable/helpers/number';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport BaseUI from './_base';\n\nconst privatePool = new WeakMap();\n\n/**\n * Class responsible for the Context Menu entries for the Nested Rows plugin.\n *\n * @class ContextMenuUI\n * @util\n * @extends BaseUI\n */\nclass ContextMenuUI extends BaseUI {\n  constructor(nestedRowsPlugin, hotInstance) {\n    super(nestedRowsPlugin, hotInstance);\n\n    privatePool.set(this, {\n      row_above: (key, selection) => {\n        this.dataManager.addSibling(selection.start.row, 'above');\n      },\n      row_below: (key, selection) => {\n        this.dataManager.addSibling(selection.start.row, 'below');\n      }\n    });\n    /**\n     * Reference to the DataManager instance connected with the Nested Rows plugin.\n     *\n     * @type {DataManager}\n     */\n    this.dataManager = this.plugin.dataManager;\n  }\n\n  /**\n   * Append options to the context menu. (Propagated from the `afterContextMenuDefaultOptions` hook callback)\n   * f\n   * @private\n   * @param {Object} defaultOptions Default context menu options.\n   * @returns {*}\n   */\n  appendOptions(defaultOptions) {\n    const newEntries = [\n      {\n        key: 'add_child',\n        name: () => 'Insert child row',\n        callback: () => {\n          const translatedRowIndex = this.dataManager.translateTrimmedRow(this.hot.getSelected()[0]);\n          const parent = this.dataManager.getDataObject(translatedRowIndex);\n          this.dataManager.addChild(parent);\n        },\n        disabled: () => {\n          const selected = this.hot.getSelected();\n\n          return !selected || selected[0] < 0 || this.hot.selection.selectedHeader.cols || this.hot.countRows() >= this.hot.getSettings().maxRows;\n        }\n      },\n      {\n        key: 'detach_from_parent',\n        name: () => 'Detach from parent',\n        callback: () => {\n          const translatedRowIndex = this.dataManager.translateTrimmedRow(this.hot.getSelected()[0]);\n          const element = this.dataManager.getDataObject(translatedRowIndex);\n\n          this.dataManager.detachFromParent(this.hot.getSelected());\n        },\n        disabled: () => {\n          const selected = this.hot.getSelected();\n          const translatedRowIndex = this.dataManager.translateTrimmedRow(selected[0]);\n          let parent = this.dataManager.getRowParent(translatedRowIndex);\n\n          return !parent || !selected || selected[0] < 0 || this.hot.selection.selectedHeader.cols || this.hot.countRows() >= this.hot.getSettings().maxRows;\n        }\n      },\n      Handsontable.plugins.ContextMenu.SEPARATOR\n    ];\n\n    rangeEach(0, defaultOptions.items.length - 1, (i) => {\n      if (i === 0) {\n        arrayEach(newEntries, (val, j) => {\n          defaultOptions.items.splice(i + j, 0, val);\n        });\n\n        return false;\n      }\n    });\n\n    defaultOptions = this.modifyRowInsertingOptions(defaultOptions);\n\n    return defaultOptions;\n  }\n\n  /**\n   * Modify how the row inserting options work.\n   *\n   * @private\n   * @param {Object} defaultOptions Default context menu items.\n   * @returns {*}\n   */\n  modifyRowInsertingOptions(defaultOptions) {\n    let priv = privatePool.get(this);\n\n    rangeEach(0, defaultOptions.items.length - 1, (i) => {\n\n      if (priv[defaultOptions.items[i].key] != null) {\n        defaultOptions.items[i].callback = priv[defaultOptions.items[i].key];\n      }\n    });\n\n    return defaultOptions;\n  }\n}\n\nexport default ContextMenuUI;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/nestedRows/ui/contextMenu.js","import arrayMapper from 'handsontable/mixins/arrayMapper';\nimport {mixin} from 'handsontable/helpers/object';\nimport {rangeEach} from 'handsontable/helpers/number';\n\n/**\n * @class RowsMapper\n * @plugin TrimRows\n * @pro\n */\nclass RowsMapper {\n  constructor(trimRows) {\n    /**\n     * Instance of TrimRows plugin.\n     *\n     * @type {TrimRows}\n     */\n    this.trimRows = trimRows;\n  }\n\n  /**\n   * Reset current map array and create new one.\n   *\n   * @param {Number} [length] Custom generated map length.\n   */\n  createMap(length) {\n    let rowOffset = 0;\n    let originLength = length === void 0 ? this._arrayMap.length : length;\n\n    this._arrayMap.length = 0;\n\n    rangeEach(originLength - 1, (itemIndex) => {\n      if (this.trimRows.isTrimmed(itemIndex)) {\n        rowOffset++;\n      } else {\n        this._arrayMap[itemIndex - rowOffset] = itemIndex;\n      }\n    });\n  }\n\n  /**\n   * Destroy class.\n   */\n  destroy() {\n    this._arrayMap = null;\n  }\n}\n\nmixin(RowsMapper, arrayMapper);\n\nexport default RowsMapper;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/trimRows/rowsMapper.js","import BasePlugin from 'handsontable/plugins/_base';\nimport {arrayEach} from 'handsontable/helpers/array';\nimport {rangeEach} from 'handsontable/helpers/number';\nimport {registerPlugin} from 'handsontable/plugins';\nimport RowsMapper from './rowsMapper';\n\n/**\n * @plugin TrimRows\n * @pro\n *\n * @description\n * Plugin allowing hiding of certain rows.\n *\n * @example\n *\n * ```js\n * ...\n * var hot = new Handsontable(document.getElementById('example'), {\n *   date: getData(),\n *   trimRows: [1, 2, 5]\n * });\n * // Access to trimRows plugin instance:\n * var trimRowsPlugin = hot.getPlugin('trimRows');\n *\n * // Hide row programmatically:\n * trimRowsPlugin.trimRow(1);\n * // Show rows\n * trimRowsPlugin.trimRow(1, 2, 9);\n * // or\n * trimRowsPlugin.trimRows([1, 2, 9]);\n * hot.render();\n * ...\n * // Show row programmatically:\n * trimRowsPlugin.untrimRow(1);\n * // Hide rows\n * trimRowsPlugin.untrimRow(1, 2, 9);\n * // or\n * trimRowsPlugin.untrimRows([1, 2, 9]);\n * hot.render();\n * ...\n * ```\n */\nclass TrimRows extends BasePlugin {\n  constructor(hotInstance) {\n    super(hotInstance);\n    /**\n     * List of trimmed row indexes.\n     *\n     * @type {Array}\n     */\n    this.trimmedRows = [];\n    /**\n     * List of last removed row indexes.\n     *\n     * @type {Array}\n     */\n    this.removedRows = [];\n    /**\n     * Object containing visual row indexes mapped to data source indexes.\n     *\n     * @type {RowsMapper}\n     */\n    this.rowsMapper = new RowsMapper(this);\n  }\n\n  /**\n   * Check if plugin is enabled.\n   *\n   * @returns {Boolean}\n   */\n  isEnabled() {\n    return !!this.hot.getSettings().trimRows;\n  }\n\n  /**\n   * Enable the plugin.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n    let settings = this.hot.getSettings().trimRows;\n\n    if (Array.isArray(settings)) {\n      this.trimmedRows = settings;\n    }\n    this.rowsMapper.createMap(this.hot.countSourceRows());\n\n    this.addHook('modifyRow', (row, source) => this.onModifyRow(row, source));\n    this.addHook('unmodifyRow', (row, source) => this.onUnmodifyRow(row, source));\n    this.addHook('afterCreateRow', (index, amount) => this.onAfterCreateRow(index, amount));\n    this.addHook('beforeRemoveRow', (index, amount) => this.onBeforeRemoveRow(index, amount));\n    this.addHook('afterRemoveRow', (index, amount) => this.onAfterRemoveRow(index, amount));\n    this.addHook('afterLoadData', (firstRun) => this.onAfterLoadData(firstRun));\n\n    super.enablePlugin();\n  }\n\n  /**\n   * Updates the plugin to use the latest options you have specified.\n   */\n  updatePlugin() {\n    const settings = this.hot.getSettings().trimRows;\n\n    if (Array.isArray(settings)) {\n      this.disablePlugin();\n      this.enablePlugin();\n    }\n\n    super.updatePlugin();\n  }\n\n  /**\n   * Disable the plugin.\n   */\n  disablePlugin() {\n    this.trimmedRows = [];\n    this.removedRows.length = 0;\n    this.rowsMapper.clearMap();\n    super.disablePlugin();\n  }\n\n  /**\n   * Trim the rows provided in the array.\n   *\n   * @param {Array} rows Array of row index.\n   */\n  trimRows(rows) {\n    arrayEach(rows, (row) => {\n      row = parseInt(row, 10);\n\n      if (!this.isTrimmed(row)) {\n        this.trimmedRows.push(row);\n      }\n    });\n\n    this.rowsMapper.createMap(this.hot.countSourceRows());\n    this.hot.runHooks('afterTrimRow', rows);\n  }\n\n  /**\n   * Trim the row provided as row index (counting from 0).\n   *\n   * @param {Number} row Row index.\n   */\n  trimRow(...row) {\n    this.trimRows(row);\n  }\n\n  /**\n   * Untrim the rows provided in the array.\n   *\n   * @param {Array} rows Array of row index.\n   */\n  untrimRows(rows) {\n    arrayEach(rows, (row) => {\n      row = parseInt(row, 10);\n\n      if (this.isTrimmed(row)) {\n        this.trimmedRows.splice(this.trimmedRows.indexOf(row), 1);\n      }\n    });\n\n    this.rowsMapper.createMap(this.hot.countSourceRows());\n    this.hot.runHooks('afterUntrimRow', rows);\n  }\n\n  /**\n   * Untrim the row provided as row index (counting from 0).\n   *\n   * @param {Number} row Row index.\n   */\n  untrimRow(...row) {\n    this.untrimRows(row);\n  }\n\n  /**\n   * Check if given row is hidden.\n   *\n   * @returns {Boolean}\n   */\n  isTrimmed(row) {\n    return this.trimmedRows.indexOf(row) > -1;\n  }\n\n  /**\n   * Untrim all trimmed rows.\n   */\n  untrimAll() {\n    this.untrimRows([].concat(this.trimmedRows));\n  }\n\n  /**\n   * On modify row listener.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {String} source Source name.\n   * @returns {Number|null}\n   */\n  onModifyRow(row, source) {\n    if (source !== this.pluginName) {\n      row = this.rowsMapper.getValueByIndex(row);\n    }\n\n    return row;\n  }\n\n  /**\n   * On unmodifyRow listener.\n   *\n   * @private\n   * @param {Number} row Row index.\n   * @param {String} source Source name.\n   * @returns {Number|null}\n   */\n  onUnmodifyRow(row, source) {\n    if (source !== this.pluginName) {\n      row = this.rowsMapper.getIndexByValue(row);\n    }\n\n    return row;\n  }\n\n  /**\n   * On after create row listener.\n   *\n   * @private\n   * @param {Number} index Row index.\n   * @param {Number} amount Defines how many rows removed.\n   */\n  onAfterCreateRow(index, amount) {\n    this.rowsMapper.shiftItems(index, amount);\n  }\n\n  /**\n   * On before remove row listener.\n   *\n   * @private\n   * @param {Number} index Row index.\n   * @param {Number} amount Defines how many rows removed.\n   */\n  onBeforeRemoveRow(index, amount) {\n    this.removedRows.length = 0;\n\n    if (index !== false) {\n      // Collect physical row index.\n      rangeEach(index, index + amount - 1, (removedIndex) => {\n        this.removedRows.push(this.hot.runHooks('modifyRow', removedIndex, this.pluginName));\n      });\n    }\n  }\n\n  /**\n   * On after remove row listener.\n   *\n   * @private\n   * @param {Number} index Row index.\n   * @param {Number} amount Defines how many rows removed.\n   */\n  onAfterRemoveRow(index, amount) {\n    this.rowsMapper.unshiftItems(this.removedRows);\n  }\n\n  /**\n   * On after load data listener.\n   *\n   * @private\n   * @param {Boolean} firstRun Indicates if hook was fired while Handsontable initialization.\n   */\n  onAfterLoadData(firstRun) {\n    if (!firstRun) {\n      this.rowsMapper.createMap(this.hot.countSourceRows());\n    }\n  }\n\n  /**\n   * Destroy plugin.\n   */\n  destroy() {\n    this.rowsMapper.destroy();\n    super.destroy();\n  }\n}\n\nregisterPlugin('trimRows', TrimRows);\n\nexport default TrimRows;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/trimRows/trimRows.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/handsontable/src/css/bootstrap.css\n// module id = 346\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/handsontable/src/css/handsontable.css\n// module id = 347\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/handsontable/src/css/mobile.handsontable.css\n// module id = 348\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/handsontable/src/plugins/comments/comments.css\n// module id = 349\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/pikaday/css/pikaday.css\n// module id = 350\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/dropdownMenu/dropdownMenu.css\n// module id = 351\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/filters/filters.css\n// module id = 352\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/ganttChart/ganttChart.css\n// module id = 353\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/hiddenColumns/hiddenColumns.css\n// module id = 354\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/hiddenRows/hiddenRows.css\n// module id = 355\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/plugins/nestedRows/nestedRows.css\n// module id = 356\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_357__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"Pikaday\",\"commonjs2\":\"pikaday\",\"commonjs\":\"pikaday\",\"amd\":\"pikaday\"}\n// module id = 357\n// module chunks = 0"],"sourceRoot":""}