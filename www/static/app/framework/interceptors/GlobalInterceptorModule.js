// Generated by CoffeeScript 1.9.3
(function() {
  define(["angular",
    "framework/interceptors/GillionHttpInterceptor",
    "framework/interceptors/GillionHttpErrorInterceptor",
    "framework/interceptors/GillionDateTransactInterceptor",
    "framework/interceptors/RepeatRequestInterceptorConstructor",
    "framework/msg/GillionMsgModule"
  ], function(angular, GillionHttpInterceptor, GillionHttpErrorInterceptor,GillionDateTransactInterceptor, RepeatRequestInterceptorConstructor) {
    var GlobalInterceptorModule;
    GlobalInterceptorModule = angular.module("GlobalInterceptorModule", ['GillionMsgModule']);
    GlobalInterceptorModule.config(function($httpProvider) {

      /*注册拦截器 */
      $httpProvider.interceptors.push(GillionHttpErrorInterceptor);
      $httpProvider.interceptors.push(GillionDateTransactInterceptor);
      //拦截失败, 还是会调用success方法, 所以注释了
      //$httpProvider.interceptors.push(RepeatRequestInterceptorConstructor);
      $httpProvider.interceptors.push(GillionHttpInterceptor);
      //针对get请求ie下会从缓存取的处理
      if (!$httpProvider.defaults.headers.get) $httpProvider.defaults.headers.get = {};
      $httpProvider.defaults.headers.get['If-Modified-Since'] = 'Mon, 26 Jul 1997 05:00:00 GMT';
      $httpProvider.defaults.headers.get['Cache-Control'] = 'no-cache';
      $httpProvider.defaults.headers.get['Pragma'] = 'no-cache';
    });
  });

}).call(this);
